Reusing configuration cache.
> Task :backend:processResources UP-TO-DATE
> Task :backend:processTestResources UP-TO-DATE
> Task :backend:compileJava UP-TO-DATE
> Task :backend:classes UP-TO-DATE
> Task :backend:compileTestJava UP-TO-DATE
> Task :backend:testClasses UP-TO-DATE

> Task :backend:test

SubprocessoMapaControllerTest STANDARD_OUT
    2026-01-27 19:58:24,357 INFO  s.s.SubprocessoMapaControllerTest - Starting SubprocessoMapaControllerTest using Java 25.0.1 with PID 91259 (started by leonardo in /Users/leonardo/sgc/backend)
    2026-01-27 19:58:24,365 INFO  s.s.SubprocessoMapaControllerTest - The following 1 profile is active: "test"
    2026-01-27 19:58:26,163 INFO  s.s.SubprocessoMapaControllerTest - Started SubprocessoMapaControllerTest in 2.067 seconds (process running for 3.306)

SubprocessoMapaControllerTest > salvarAjustesMapa STANDARD_OUT
    2026-01-27 19:58:26,407 INFO  s.comum.erros.RestExceptionHandler - Erro de validação de argumento

    MockHttpServletRequest:
          HTTP Method = POST
          Request URI = /api/subprocessos/1/mapa-ajuste/atualizar
           Parameters = {_csrf=[Pw1r6f92iPOsjqg7vu6xxUUiFNOaiGrwfwAIp48zZX8ZIyImDGlTisdDsMCBu80JhsOF8XATObGosFzdRjU5l-pQVk96ERJD]}
              Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"19"]
                 Body = {"competencias":[]}
        Session Attrs = {}

    Handler:
                 Type = sgc.subprocesso.SubprocessoMapaController
               Method = sgc.subprocesso.SubprocessoMapaController#salvarAjustesMapa(Long, SalvarAjustesRequest, Object)

    Async:
        Async started = false
         Async result = null

    Resolved Exception:
                 Type = org.springframework.web.bind.MethodArgumentNotValidException

    ModelAndView:
            View name = null
                 View = null
                Model = null

    FlashMap:
           Attributes = null

    MockHttpServletResponse:
               Status = 400
        Error message = null
              Headers = [Content-Type:"application/json"]
         Content type = application/json
                 Body = {"message":"A requisição contém dados de entrada inválidos.","status":400,"subErrors":[{"object":"salvarAjustesRequest","field":"competencias","message":"A lista de competências não pode ser vazia"}],"timestamp":"27-01-2026 19:58:26"}
        Forwarded URL = null
       Redirected URL = null
              Cookies = []

SubprocessoMapaControllerTest > salvarAjustesMapa FAILED
    java.lang.AssertionError: Status expected:<200> but was:<400>
        at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:62)
        at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:129)
        at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$0(StatusResultMatchers.java:600)
        at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:212)
        at sgc.subprocesso.SubprocessoMapaControllerTest.salvarAjustesMapa(SubprocessoMapaControllerTest.java:136)

SubprocessoMapaControllerTest > obterMapa PASSED

SubprocessoMapaControllerTest > adicionarCompetencia - deve retornar 400 quando lista de atividades é null STANDARD_OUT
    2026-01-27 19:58:26,540 INFO  s.comum.erros.RestExceptionHandler - Erro de validação de argumento

SubprocessoMapaControllerTest > adicionarCompetencia - deve retornar 400 quando lista de atividades é null PASSED

SubprocessoMapaControllerTest > salvarMapa PASSED

SubprocessoMapaControllerTest > salvarMapaCompleto PASSED

SubprocessoMapaControllerTest > atualizarCompetencia PASSED

SubprocessoMapaControllerTest > obterMapaCompleto PASSED

SubprocessoMapaControllerTest > verificarImpactos PASSED

SubprocessoMapaControllerTest > removerCompetencia PASSED

SubprocessoMapaControllerTest > adicionarCompetencia - deve retornar 400 quando lista de atividades está vazia STANDARD_OUT
    2026-01-27 19:58:26,647 INFO  s.comum.erros.RestExceptionHandler - Erro de validação de argumento

SubprocessoMapaControllerTest > adicionarCompetencia - deve retornar 400 quando lista de atividades está vazia PASSED

SubprocessoMapaControllerTest > obterMapaParaAjuste PASSED

SubprocessoMapaControllerTest > adicionarCompetencia PASSED

SubprocessoMapaControllerTest > adicionarCompetencia - deve retornar 400 quando descrição está vazia STANDARD_OUT
    2026-01-27 19:58:26,670 INFO  s.comum.erros.RestExceptionHandler - Erro de validação de argumento

SubprocessoMapaControllerTest > adicionarCompetencia - deve retornar 400 quando descrição está vazia PASSED

SubprocessoMapaControllerTest > obterMapaVisualizacao PASSED
  Results: FAILURE
  Total:     14 tests run
  ✓ Passed:  13
  ✗ Failed:  1
  ○ Ignored: 0
  Time:     3.942s

14 tests completed, 1 failed
There were failing tests. See the report at: file:///Users/leonardo/sgc/backend/build/reports/tests/test/index.html

BUILD SUCCESSFUL in 4s
5 actionable tasks: 1 executed, 4 up-to-date
Configuration cache entry reused.
