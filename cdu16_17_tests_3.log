Reusing configuration cache.
> Task :backend:processTestResources UP-TO-DATE
> Task :backend:processResources UP-TO-DATE
> Task :backend:compileJava UP-TO-DATE
> Task :backend:classes UP-TO-DATE
> Task :backend:compileTestJava
> Task :backend:testClasses

> Task :backend:test

CDU-17: Disponibilizar Mapa de Competências > Testes de Sucesso > Deve disponibilizar mapa quando todos os dados estão corretos FAILED
    org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:1 */ CAST(1 AS BIGINT), 'Tribunal Regional Eleitoral', 'TRE', NULL, NULL, NULL, 'INTEROPERACIONAL', 'ATIVA', NULL)"; SQL statement:
    insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; constraint [SGC.CONSTRAINT_1A2 PRIMARY KEY]
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:169)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105)
        at app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199)
        at app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:556)
        at app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
        at app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:346)
        at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:157)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
        at app/jdk.proxy3/jdk.proxy3.$Proxy219.save(Unknown Source)
        at app//sgc.integracao.CDU17IntegrationTest.setUp(CDU17IntegrationTest.java:105)

        Caused by:
        org.hibernate.exception.ConstraintViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:1 */ CAST(1 AS BIGINT), 'Tribunal Regional Eleitoral', 'TRE', NULL, NULL, NULL, 'INTEROPERACIONAL', 'ATIVA', NULL)"; SQL statement:
        insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]
            at app//org.hibernate.dialect.H2Dialect.lambda$buildSQLExceptionConversionDelegate$0(H2Dialect.java:832)
            at app//org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:34)
            at app//org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:115)
            at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:184)
            at app//org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:103)
            at app//org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:45)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:66)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:180)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:120)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:84)
            at app//org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
            at app//org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
            at app//org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
            at app//org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:270)
            at app//org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:371)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:285)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:215)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:133)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:145)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:89)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:73)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:49)
            at app//org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
            at app//org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:689)
            at app//org.hibernate.internal.SessionImpl.persist(SessionImpl.java:672)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:317)
            at app/jdk.proxy3/jdk.proxy3.$Proxy212.persist(Unknown Source)
            at app//org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:663)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:278)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
            at app//org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:545)
            at app//org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:290)
            at app//org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:690)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:171)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
            at app//org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
            ... 6 more

            Caused by:
            org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:1 */ CAST(1 AS BIGINT), 'Tribunal Regional Eleitoral', 'TRE', NULL, NULL, NULL, 'INTEROPERACIONAL', 'ATIVA', NULL)"; SQL statement:
            insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
                at app//org.h2.message.DbException.get(DbException.java:223)
                at app//org.h2.message.DbException.get(DbException.java:199)
                at app//org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:121)
                at app//org.h2.mvstore.db.MVTable.addRow(MVTable.java:520)
                at app//org.h2.command.dml.Insert.insertRows(Insert.java:174)
                at app//org.h2.command.dml.Insert.update(Insert.java:135)
                at app//org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:212)
                at app//org.h2.command.CommandContainer.update(CommandContainer.java:133)
                at app//org.h2.command.Command.executeUpdate(Command.java:306)
                at app//org.h2.command.Command.executeUpdate(Command.java:250)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:213)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:172)
                at app//com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
                at app//com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
                at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:181)
                ... 53 more

CDU-17: Disponibilizar Mapa de Competências > Testes de Falha > Não deve disponibilizar mapa com usuário sem permissão (não ADMIN) FAILED
    org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:2 */ CAST(2 AS BIGINT), U&'Secretaria de Inform\\00e1tica e Comunica\\00e7\\00f5es', 'STIC', NULL, '6', NULL, 'INTEROPERACIONAL', 'ATIVA', NULL)"; SQL statement:
    insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; constraint [SGC.CONSTRAINT_1A2 PRIMARY KEY]
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:169)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105)
        at app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199)
        at app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:556)
        at app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
        at app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:346)
        at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:157)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
        at app/jdk.proxy3/jdk.proxy3.$Proxy219.save(Unknown Source)
        at app//sgc.integracao.CDU17IntegrationTest.setUp(CDU17IntegrationTest.java:105)

        Caused by:
        org.hibernate.exception.ConstraintViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:2 */ CAST(2 AS BIGINT), U&'Secretaria de Inform\\00e1tica e Comunica\\00e7\\00f5es', 'STIC', NULL, '6', NULL, 'INTEROPERACIONAL', 'ATIVA', NULL)"; SQL statement:
        insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]
            at app//org.hibernate.dialect.H2Dialect.lambda$buildSQLExceptionConversionDelegate$0(H2Dialect.java:832)
            at app//org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:34)
            at app//org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:115)
            at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:184)
            at app//org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:103)
            at app//org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:45)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:66)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:180)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:120)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:84)
            at app//org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
            at app//org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
            at app//org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
            at app//org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:270)
            at app//org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:371)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:285)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:215)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:133)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:145)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:89)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:73)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:49)
            at app//org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
            at app//org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:689)
            at app//org.hibernate.internal.SessionImpl.persist(SessionImpl.java:672)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:317)
            at app/jdk.proxy3/jdk.proxy3.$Proxy212.persist(Unknown Source)
            at app//org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:663)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:278)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
            at app//org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:545)
            at app//org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:290)
            at app//org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:690)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:171)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
            at app//org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
            ... 6 more

            Caused by:
            org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:2 */ CAST(2 AS BIGINT), U&'Secretaria de Inform\\00e1tica e Comunica\\00e7\\00f5es', 'STIC', NULL, '6', NULL, 'INTEROPERACIONAL', 'ATIVA', NULL)"; SQL statement:
            insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
                at app//org.h2.message.DbException.get(DbException.java:223)
                at app//org.h2.message.DbException.get(DbException.java:199)
                at app//org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:121)
                at app//org.h2.mvstore.db.MVTable.addRow(MVTable.java:520)
                at app//org.h2.command.dml.Insert.insertRows(Insert.java:174)
                at app//org.h2.command.dml.Insert.update(Insert.java:135)
                at app//org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:212)
                at app//org.h2.command.CommandContainer.update(CommandContainer.java:133)
                at app//org.h2.command.Command.executeUpdate(Command.java:306)
                at app//org.h2.command.Command.executeUpdate(Command.java:250)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:213)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:172)
                at app//com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
                at app//com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
                at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:181)
                ... 53 more

CDU-17: Disponibilizar Mapa de Competências > Testes de Falha > Não deve disponibilizar mapa se houver atividade sem competência associada FAILED
    org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:3 */ CAST(3 AS BIGINT), 'Coordenadoria de Administracao', 'COAD', NULL, NULL, NULL, 'INTERMEDIARIA', 'ATIVA', CAST(2 AS BIGINT))"; SQL statement:
    insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; constraint [SGC.CONSTRAINT_1A2 PRIMARY KEY]
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:169)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105)
        at app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199)
        at app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:556)
        at app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
        at app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:346)
        at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:157)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
        at app/jdk.proxy3/jdk.proxy3.$Proxy219.save(Unknown Source)
        at app//sgc.integracao.CDU17IntegrationTest.setUp(CDU17IntegrationTest.java:105)

        Caused by:
        org.hibernate.exception.ConstraintViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:3 */ CAST(3 AS BIGINT), 'Coordenadoria de Administracao', 'COAD', NULL, NULL, NULL, 'INTERMEDIARIA', 'ATIVA', CAST(2 AS BIGINT))"; SQL statement:
        insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]
            at app//org.hibernate.dialect.H2Dialect.lambda$buildSQLExceptionConversionDelegate$0(H2Dialect.java:832)
            at app//org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:34)
            at app//org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:115)
            at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:184)
            at app//org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:103)
            at app//org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:45)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:66)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:180)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:120)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:84)
            at app//org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
            at app//org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
            at app//org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
            at app//org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:270)
            at app//org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:371)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:285)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:215)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:133)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:145)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:89)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:73)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:49)
            at app//org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
            at app//org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:689)
            at app//org.hibernate.internal.SessionImpl.persist(SessionImpl.java:672)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:317)
            at app/jdk.proxy3/jdk.proxy3.$Proxy212.persist(Unknown Source)
            at app//org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:663)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:278)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
            at app//org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:545)
            at app//org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:290)
            at app//org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:690)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:171)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
            at app//org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
            ... 6 more

            Caused by:
            org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:3 */ CAST(3 AS BIGINT), 'Coordenadoria de Administracao', 'COAD', NULL, NULL, NULL, 'INTERMEDIARIA', 'ATIVA', CAST(2 AS BIGINT))"; SQL statement:
            insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
                at app//org.h2.message.DbException.get(DbException.java:223)
                at app//org.h2.message.DbException.get(DbException.java:199)
                at app//org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:121)
                at app//org.h2.mvstore.db.MVTable.addRow(MVTable.java:520)
                at app//org.h2.command.dml.Insert.insertRows(Insert.java:174)
                at app//org.h2.command.dml.Insert.update(Insert.java:135)
                at app//org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:212)
                at app//org.h2.command.CommandContainer.update(CommandContainer.java:133)
                at app//org.h2.command.Command.executeUpdate(Command.java:306)
                at app//org.h2.command.Command.executeUpdate(Command.java:250)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:213)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:172)
                at app//com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
                at app//com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
                at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:181)
                ... 53 more

CDU-17: Disponibilizar Mapa de Competências > Testes de Falha > Não deve disponibilizar mapa se houver competência sem atividade associada FAILED
    org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:4 */ CAST(4 AS BIGINT), U&'Coordenadoria de Educa\\00e7\\00e3o Especial', 'COEDE', NULL, NULL, NULL, 'INTERMEDIARIA', 'ATIVA', CAST(3 AS BIGINT))"; SQL statement:
    insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; constraint [SGC.CONSTRAINT_1A2 PRIMARY KEY]
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:169)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105)
        at app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199)
        at app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:556)
        at app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
        at app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:346)
        at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:157)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
        at app/jdk.proxy3/jdk.proxy3.$Proxy219.save(Unknown Source)
        at app//sgc.integracao.CDU17IntegrationTest.setUp(CDU17IntegrationTest.java:105)

        Caused by:
        org.hibernate.exception.ConstraintViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:4 */ CAST(4 AS BIGINT), U&'Coordenadoria de Educa\\00e7\\00e3o Especial', 'COEDE', NULL, NULL, NULL, 'INTERMEDIARIA', 'ATIVA', CAST(3 AS BIGINT))"; SQL statement:
        insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]
            at app//org.hibernate.dialect.H2Dialect.lambda$buildSQLExceptionConversionDelegate$0(H2Dialect.java:832)
            at app//org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:34)
            at app//org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:115)
            at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:184)
            at app//org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:103)
            at app//org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:45)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:66)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:180)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:120)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:84)
            at app//org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
            at app//org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
            at app//org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
            at app//org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:270)
            at app//org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:371)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:285)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:215)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:133)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:145)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:89)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:73)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:49)
            at app//org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
            at app//org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:689)
            at app//org.hibernate.internal.SessionImpl.persist(SessionImpl.java:672)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:317)
            at app/jdk.proxy3/jdk.proxy3.$Proxy212.persist(Unknown Source)
            at app//org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:663)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:278)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
            at app//org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:545)
            at app//org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:290)
            at app//org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:690)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:171)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
            at app//org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
            ... 6 more

            Caused by:
            org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:4 */ CAST(4 AS BIGINT), U&'Coordenadoria de Educa\\00e7\\00e3o Especial', 'COEDE', NULL, NULL, NULL, 'INTERMEDIARIA', 'ATIVA', CAST(3 AS BIGINT))"; SQL statement:
            insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
                at app//org.h2.message.DbException.get(DbException.java:223)
                at app//org.h2.message.DbException.get(DbException.java:199)
                at app//org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:121)
                at app//org.h2.mvstore.db.MVTable.addRow(MVTable.java:520)
                at app//org.h2.command.dml.Insert.insertRows(Insert.java:174)
                at app//org.h2.command.dml.Insert.update(Insert.java:135)
                at app//org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:212)
                at app//org.h2.command.CommandContainer.update(CommandContainer.java:133)
                at app//org.h2.command.Command.executeUpdate(Command.java:306)
                at app//org.h2.command.Command.executeUpdate(Command.java:250)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:213)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:172)
                at app//com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
                at app//com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
                at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:181)
                ... 53 more

CDU-17: Disponibilizar Mapa de Competências > Testes de Falha > Não deve disponibilizar mapa se subprocesso não está no estado correto FAILED
    org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:5 */ CAST(5 AS BIGINT), U&'Se\\00e7\\00e3o Magistrados e Requisitados', 'SEMARE', NULL, '5', NULL, 'OPERACIONAL', 'ATIVA', CAST(4 AS BIGINT))"; SQL statement:
    insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]; constraint [SGC.CONSTRAINT_1A2 PRIMARY KEY]
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:169)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131)
        at app//org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105)
        at app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199)
        at app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:556)
        at app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
        at app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:346)
        at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:157)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166)
        at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222)
        at app/jdk.proxy3/jdk.proxy3.$Proxy219.save(Unknown Source)
        at app//sgc.integracao.CDU17IntegrationTest.setUp(CDU17IntegrationTest.java:105)

        Caused by:
        org.hibernate.exception.ConstraintViolationException: could not execute statement [Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:5 */ CAST(5 AS BIGINT), U&'Se\\00e7\\00e3o Magistrados e Requisitados', 'SEMARE', NULL, '5', NULL, 'OPERACIONAL', 'ATIVA', CAST(4 AS BIGINT))"; SQL statement:
        insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]] [insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default)]
            at app//org.hibernate.dialect.H2Dialect.lambda$buildSQLExceptionConversionDelegate$0(H2Dialect.java:832)
            at app//org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:34)
            at app//org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:115)
            at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:184)
            at app//org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:103)
            at app//org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:45)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:66)
            at app//org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:180)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:120)
            at app//org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:84)
            at app//org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
            at app//org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
            at app//org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
            at app//org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:270)
            at app//org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:371)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:285)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:215)
            at app//org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:133)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:145)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:89)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:73)
            at app//org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:49)
            at app//org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)
            at app//org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:689)
            at app//org.hibernate.internal.SessionImpl.persist(SessionImpl.java:672)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:317)
            at app/jdk.proxy3/jdk.proxy3.$Proxy212.persist(Unknown Source)
            at app//org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:663)
            at java.base@21.0.8/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
            at java.base@21.0.8/java.lang.reflect.Method.invoke(Method.java:580)
            at app//org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:278)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169)
            at app//org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
            at app//org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:545)
            at app//org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:290)
            at app//org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:690)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:171)
            at app//org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
            at app//org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
            at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
            at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135)
            ... 6 more

            Caused by:
            org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "SGC.CONSTRAINT_1A2 PRIMARY KEY ON SGC.VW_UNIDADE(CODIGO) ( /* key:5 */ CAST(5 AS BIGINT), U&'Se\\00e7\\00e3o Magistrados e Requisitados', 'SEMARE', NULL, '5', NULL, 'OPERACIONAL', 'ATIVA', CAST(4 AS BIGINT))"; SQL statement:
            insert into sgc.vw_unidade (data_inicio_titularidade,matricula_titular,nome,sigla,situacao,tipo,titulo_titular,unidade_superior_codigo,codigo) values (?,?,?,?,?,?,?,?,default) [23505-240]
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
                at app//org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
                at app//org.h2.message.DbException.get(DbException.java:223)
                at app//org.h2.message.DbException.get(DbException.java:199)
                at app//org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:121)
                at app//org.h2.mvstore.db.MVTable.addRow(MVTable.java:520)
                at app//org.h2.command.dml.Insert.insertRows(Insert.java:174)
                at app//org.h2.command.dml.Insert.update(Insert.java:135)
                at app//org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:212)
                at app//org.h2.command.CommandContainer.update(CommandContainer.java:133)
                at app//org.h2.command.Command.executeUpdate(Command.java:306)
                at app//org.h2.command.Command.executeUpdate(Command.java:250)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:213)
                at app//org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:172)
                at app//com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
                at app//com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
                at app//org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:181)
                ... 53 more

8 tests completed, 5 failed

> Task :backend:test FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':backend:test'.
> There were failing tests. See the report at: file:///app/backend/build/reports/tests/test/index.html

* Try:
> Run with --scan to generate a Build Scan (powered by Develocity).

BUILD FAILED in 25s
5 actionable tasks: 2 executed, 3 up-to-date
Configuration cache entry reused.
