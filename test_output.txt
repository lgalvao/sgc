Calculating task graph as configuration cache cannot be reused because file 'backend/build.gradle.kts' has changed.
> Task :backend:processResources UP-TO-DATE
> Task :backend:processTestResources UP-TO-DATE
> Task :backend:compileJava UP-TO-DATE
> Task :backend:classes UP-TO-DATE
> Task :backend:compileTestJava UP-TO-DATE
> Task :backend:testClasses UP-TO-DATE

> Task :backend:test

Testes de Sanitização em Mapas STANDARD_OUT
    2026-01-27 19:52:30,685 INFO  sgc.seguranca.SanitizacaoMapaTest - Starting SanitizacaoMapaTest using Java 25.0.1 with PID 90460 (started by leonardo in /Users/leonardo/sgc/backend)
    2026-01-27 19:52:30,689 INFO  sgc.seguranca.SanitizacaoMapaTest - The following 1 profile is active: "test"
    2026-01-27 19:52:32,734 INFO  sgc.seguranca.SanitizacaoMapaTest - Started SanitizacaoMapaTest in 2.293 seconds (process running for 3.413)

Testes de Sanitização em Mapas > Deve sanitizar descrição da competência no SalvarMapaRequest PASSED

Testes de Sanitização em Mapas > Deve sanitizar observações no SalvarMapaRequest STANDARD_OUT
    Valor sanitizado recebido: <script>alert('xss')</script>Observação válida

    MockHttpServletRequest:
          HTTP Method = POST
          Request URI = /api/subprocessos/1/mapa-completo/atualizar
           Parameters = {_csrf=[gIiBPQYXTYGW4PTYUnPBKUhePGvanMArhOyMX-nXCEH25QXqtb_jWzAldeO7hcXvZF71G3g4EVLs_vgGvI-1O9jlPiWT1DDe]}
              Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"157"]
                 Body = {"observacoes":"<script>alert('xss')</script>Observação válida","competencias":[{"codigo":null,"descricao":"Competência teste","atividadesCodigos":[1]}]}
        Session Attrs = {}

    Handler:
                 Type = sgc.subprocesso.SubprocessoMapaController
               Method = sgc.subprocesso.SubprocessoMapaController#salvarMapaCompleto(Long, SalvarMapaRequest, Object)

    Async:
        Async started = false
         Async result = null

    Resolved Exception:
                 Type = null

    ModelAndView:
            View name = null
                 View = null
                Model = null

    FlashMap:
           Attributes = null

    MockHttpServletResponse:
               Status = 200
        Error message = null
              Headers = [Content-Type:"application/json"]
         Content type = application/json
                 Body = {"codigo":1,"subprocessoCodigo":1,"observacoes":"Obs","competencias":[]}
        Forwarded URL = null
       Redirected URL = null
              Cookies = []

Testes de Sanitização em Mapas > Deve sanitizar observações no SalvarMapaRequest FAILED
    java.lang.AssertionError: 
    Expecting actual:
      "<script>alert('xss')</script>Observação válida"
    not to contain:
      "<script>"
        at sgc.seguranca.SanitizacaoMapaTest.deveSanitizarObservacoes(SanitizacaoMapaTest.java:83)
  Results: FAILURE
  Total:     2 tests run
  ✓ Passed:  1
  ✗ Failed:  1
  ○ Ignored: 0
  Time:     3.967s

2 tests completed, 1 failed
There were failing tests. See the report at: file:///Users/leonardo/sgc/backend/build/reports/tests/test/index.html

BUILD SUCCESSFUL in 5s
5 actionable tasks: 1 executed, 4 up-to-date
Configuration cache entry stored.
