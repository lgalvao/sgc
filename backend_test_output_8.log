Reusing configuration cache.
> Task :backend:processTestResources UP-TO-DATE
> Task :backend:processResources UP-TO-DATE
> Task :backend:compileJava
> Task :backend:classes
> Task :backend:compileTestJava
> Task :backend:testClasses

> Task :backend:test

ArchConsistencyTest > services_should_not_access_other_modules_repositories FAILED
    java.lang.AssertionError: Architecture Violation [Priority: MEDIUM] - Rule 'classes that have simple name ending with 'Service' should only access repositories of their own module' was violated (7 times):
    Service sgc.analise.AnaliseService (module analise) accesses Repository sgc.subprocesso.model.SubprocessoRepo (module subprocesso)
    Service sgc.analise.AnaliseService (module analise) accesses Repository sgc.subprocesso.model.SubprocessoRepo (module subprocesso)
    Service sgc.analise.AnaliseService (module analise) accesses Repository sgc.subprocesso.model.SubprocessoRepo (module subprocesso)
    Service sgc.analise.AnaliseService (module analise) accesses Repository sgc.subprocesso.model.SubprocessoRepo (module subprocesso)
    Service sgc.mapa.service.AtividadeService (module mapa) accesses Repository sgc.subprocesso.model.SubprocessoRepo (module subprocesso)
    Service sgc.mapa.service.AtividadeService (module mapa) accesses Repository sgc.subprocesso.model.SubprocessoRepo (module subprocesso)
    Service sgc.mapa.service.AtividadeService (module mapa) accesses Repository sgc.subprocesso.model.SubprocessoRepo (module subprocesso)
        at com.tngtech.archunit.lang.ArchRule$Assertions.assertNoViolation(ArchRule.java:94)
        at com.tngtech.archunit.lang.ArchRule$Assertions.check(ArchRule.java:86)
        at com.tngtech.archunit.lang.ArchRule$Factory$SimpleArchRule.check(ArchRule.java:165)
        at com.tngtech.archunit.lang.syntax.ObjectsShouldInternal.check(ObjectsShouldInternal.java:81)
        at com.tngtech.archunit.junit.internal.ArchUnitTestDescriptor$ArchUnitRuleDescriptor.execute(ArchUnitTestDescriptor.java:168)
        at com.tngtech.archunit.junit.internal.ArchUnitTestDescriptor$ArchUnitRuleDescriptor.execute(ArchUnitTestDescriptor.java:151)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

CDU-16: Ajustar mapa de competências > Testes de ajuste do mapa > Deve salvar ajustes no mapa e alterar a situação do subprocesso FAILED
    java.lang.AssertionError: Status expected:<200> but was:<404>
        at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:62)
        at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:129)
        at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$0(StatusResultMatchers.java:600)
        at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:212)
        at sgc.integracao.CDU16IntegrationTest$AjusteDoMapa.deveSalvarAjustesComSucesso(CDU16IntegrationTest.java:175)

SubprocessoMapaWorkflowServiceTest > homologarValidacao sucesso FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.unidade.service.UnidadeService.buscarPorSigla(String)" because "this.unidadeService" is null
        at sgc.subprocesso.service.SubprocessoMapaWorkflowService.homologarValidacao(SubprocessoMapaWorkflowService.java:357)
        at sgc.subprocesso.service.SubprocessoMapaWorkflowServiceTest.homologarValidacao(SubprocessoMapaWorkflowServiceTest.java:299)

SubprocessoMapaWorkflowServiceTest > disponibilizarMapa sucesso FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.mapa.service.AtividadeService.buscarPorMapaCodigo(java.lang.Long)" because "this.atividadeService" is null
        at sgc.subprocesso.service.SubprocessoMapaWorkflowService.validarMapaParaDisponibilizacao(SubprocessoMapaWorkflowService.java:194)
        at sgc.subprocesso.service.SubprocessoMapaWorkflowService.disponibilizarMapa(SubprocessoMapaWorkflowService.java:145)
        at sgc.subprocesso.service.SubprocessoMapaWorkflowServiceTest.disponibilizarMapa(SubprocessoMapaWorkflowServiceTest.java:89)

SubprocessoPermissoesServiceTest > Deve validar ajuste de mapa com sucesso FAILED
    org.opentest4j.AssertionFailedError: Unexpected exception thrown: java.lang.NullPointerException: Cannot invoke "sgc.mapa.service.AtividadeService.buscarPorMapaCodigo(java.lang.Long)" because "this.atividadeService" is null
        at app//org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:159)
        at app//org.junit.jupiter.api.AssertDoesNotThrow.createAssertionFailedError(AssertDoesNotThrow.java:90)
        at app//org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:56)
        at app//org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:39)
        at app//org.junit.jupiter.api.Assertions.assertDoesNotThrow(Assertions.java:3295)
        at app//sgc.subprocesso.service.SubprocessoPermissoesServiceTest.deveValidarAjusteMapaComSucesso(SubprocessoPermissoesServiceTest.java:124)

        Caused by:
        java.lang.NullPointerException: Cannot invoke "sgc.mapa.service.AtividadeService.buscarPorMapaCodigo(java.lang.Long)" because "this.atividadeService" is null
            at sgc.subprocesso.service.SubprocessoPermissoesService.validar(SubprocessoPermissoesService.java:59)
            at sgc.subprocesso.service.SubprocessoPermissoesServiceTest.lambda$deveValidarAjusteMapaComSucesso$4(SubprocessoPermissoesServiceTest.java:124)
            at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:52)
            ... 3 more

SubprocessoPermissoesServiceTest > Deve lançar erro quando mapa vazio ao ajustar mapa em situação revisão mapa ajustado FAILED
    java.lang.AssertionError:
    Expecting actual throwable to be an instance of:
      sgc.comum.erros.ErroAccessoNegado
    but was:
      java.lang.NullPointerException: Cannot invoke "sgc.mapa.service.AtividadeService.buscarPorMapaCodigo(java.lang.Long)" because "this.atividadeService" is null
	at sgc.subprocesso.service.SubprocessoPermissoesService.validar(SubprocessoPermissoesService.java:59)
	at sgc.subprocesso.service.SubprocessoPermissoesServiceTest.lambda$deveLancarErroQuandoMapaVazioAoAjustarMapaEmSituacaoRevisaoMapaAjustado$3(SubprocessoPermissoesServiceTest.java:103)
	at org.assertj.core.api.ThrowableAssert.catchThrowable(ThrowableAssert.java:63)
	...(95 remaining lines not displayed - this can be changed with Assertions.setMaxStackTraceElementsDisplayed)
        at sgc.subprocesso.service.SubprocessoPermissoesServiceTest.deveLancarErroQuandoMapaVazioAoAjustarMapaEmSituacaoRevisaoMapaAjustado(SubprocessoPermissoesServiceTest.java:104)

Testes Unitários: AlertaService > Método: criarAlertasProcessoIniciado > Deve criar alerta operacional com texto fixo FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.unidade.service.UnidadeService.buscarEntidadesPorIds(java.util.List)" because "<local5>.unidadeService" is null
        at sgc.alerta.AlertaService.criarAlertasProcessoIniciado(AlertaService.java:121)
        at sgc.alerta.AlertaServiceTest$CriarAlertasProcessoIniciado.deveCriarAlertaOperacional(AlertaServiceTest.java:107)

Testes Unitários: AlertaService > Método: criarAlertasProcessoIniciado > Deve criar 2 alertas para interoperacional participante FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.unidade.service.UnidadeService.buscarEntidadesPorIds(java.util.List)" because "<local5>.unidadeService" is null
        at sgc.alerta.AlertaService.criarAlertasProcessoIniciado(AlertaService.java:121)
        at sgc.alerta.AlertaServiceTest$CriarAlertasProcessoIniciado.deveCriarDoisAlertasInteroperacional(AlertaServiceTest.java:159)

Testes Unitários: AlertaService > Método: criarAlertasProcessoIniciado > Deve criar alerta para unidade participante e seus ancestrais FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.unidade.service.UnidadeService.buscarEntidadesPorIds(java.util.List)" because "<local5>.unidadeService" is null
        at sgc.alerta.AlertaService.criarAlertasProcessoIniciado(AlertaService.java:121)
        at sgc.alerta.AlertaServiceTest$CriarAlertasProcessoIniciado.deveCriarAlertaParaAncestrais(AlertaServiceTest.java:133)

Testes Unitários: AlertaService > Métodos: criação de alertas específicos > Deve criar alerta de cadastro devolvido com sucesso FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.unidade.service.UnidadeService.buscarEntidadePorId(java.lang.Long)" because "<local6>.unidadeService" is null
        at sgc.alerta.AlertaService.criarAlerta(AlertaService.java:56)
        at sgc.alerta.AlertaService.criarAlertaCadastroDevolvido(AlertaService.java:181)
        at sgc.alerta.AlertaServiceTest$AlertasEspecificos.deveCriarAlertaCadastroDevolvido(AlertaServiceTest.java:204)

Testes Unitários: AlertaService > Métodos: criação de alertas específicos > Deve criar alerta de cadastro disponibilizado com sucesso FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.unidade.service.UnidadeService.buscarEntidadePorId(java.lang.Long)" because "<local5>.unidadeService" is null
        at sgc.alerta.AlertaService.criarAlertaCadastroDisponibilizado(AlertaService.java:164)
        at sgc.alerta.AlertaServiceTest$AlertasEspecificos.deveCriarAlertaCadastroDisponibilizado(AlertaServiceTest.java:186)

Testes Unitários: AlertaService > Método: criarAlerta > Deve lançar erro se unidade não existe FAILED
    java.lang.AssertionError:
    Expecting actual throwable to be an instance of:
      sgc.comum.erros.ErroEntidadeNaoEncontrada
    but was:
      java.lang.NullPointerException: Cannot invoke "sgc.unidade.service.UnidadeService.buscarEntidadePorId(java.lang.Long)" because "<local6>.unidadeService" is null
	at sgc.alerta.AlertaService.criarAlerta(AlertaService.java:56)
	at sgc.alerta.AlertaServiceTest$CriarAlerta.lambda$deveLancarErroSeUnidadeNaoExiste$0(AlertaServiceTest.java:82)
	at org.assertj.core.api.ThrowableAssert.catchThrowable(ThrowableAssert.java:63)
	...(105 remaining lines not displayed - this can be changed with Assertions.setMaxStackTraceElementsDisplayed)
        at sgc.alerta.AlertaServiceTest$CriarAlerta.deveLancarErroSeUnidadeNaoExiste(AlertaServiceTest.java:83)

Testes Unitários: AlertaService > Método: criarAlerta > Deve criar alerta com sucesso FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.unidade.service.UnidadeService.buscarEntidadePorId(java.lang.Long)" because "<local6>.unidadeService" is null
        at sgc.alerta.AlertaService.criarAlerta(AlertaService.java:56)
        at sgc.alerta.AlertaServiceTest$CriarAlerta.deveCriarAlertaComSucesso(AlertaServiceTest.java:63)

Testes Unitários: AlertaService > Método: listarAlertasPorUsuario > Deve listar e criar AlertaUsuario (lazy creation) FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.usuario.UsuarioService.buscarEntidadePorId(String)" because "<local3>.usuarioService" is null
        at sgc.alerta.AlertaService.listarAlertasPorUsuario(AlertaService.java:208)
        at sgc.alerta.AlertaServiceTest$ListarAlertasPorUsuario.deveListarECriarAlertaUsuario(AlertaServiceTest.java:265)

Testes Unitários: AlertaService > Método: listarAlertasPorUsuario > Deve listar sem criar novo se já existente FAILED
    java.lang.NullPointerException: Cannot invoke "sgc.usuario.UsuarioService.buscarEntidadePorId(String)" because "<local3>.usuarioService" is null
        at sgc.alerta.AlertaService.listarAlertasPorUsuario(AlertaService.java:208)
        at sgc.alerta.AlertaServiceTest$ListarAlertasPorUsuario.deveListarSemCriarNovo(AlertaServiceTest.java:299)

Testes para AnaliseService > Testes para listarPorSubprocesso > Deve retornar lista de análises de cadastro FAILED
    sgc.comum.erros.ErroEntidadeNaoEncontrada: 'Subprocesso não encontrado' com codigo '1' não encontrado(a).
        at app//sgc.analise.AnaliseService.listarPorSubprocesso(AnaliseService.java:43)
        at app//sgc.analise.AnaliseServiceTest$ListarPorSubprocesso.deveRetornarListaDeAnalisesCadastro(AnaliseServiceTest.java:61)

Testes para AnaliseService > Testes para listarPorSubprocesso > Deve lançar exceção se o subprocesso não for encontrado FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException:
    Unnecessary stubbings detected.
    Clean & maintainable test code requires zero unnecessary code.
    Following stubbings are unnecessary (click to navigate to relevant line of code):
      1. -> at sgc.analise.AnaliseServiceTest$ListarPorSubprocesso.deveLancarExcecaoSeSubprocessoNaoEncontrado(AnaliseServiceTest.java:95)
    Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at app//org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base@21.0.8/java.util.Optional.ifPresent(Optional.java:178)
        at app//org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)

Testes para AnaliseService > Testes para listarPorSubprocesso > Deve retornar lista de análises de validação FAILED
    sgc.comum.erros.ErroEntidadeNaoEncontrada: 'Subprocesso não encontrado' com codigo '1' não encontrado(a).
        at app//sgc.analise.AnaliseService.listarPorSubprocesso(AnaliseService.java:43)
        at app//sgc.analise.AnaliseServiceTest$ListarPorSubprocesso.deveRetornarListaDeAnalisesValidacao(AnaliseServiceTest.java:81)

CDU-17: Disponibilizar Mapa de Competências > Testes de Falha > Não deve disponibilizar mapa se houver atividade sem competência associada FAILED
    java.lang.AssertionError: JSON path "$.message"
    Expected: a string containing "Existem atividades que não foram associadas a nenhuma competência."
         but: was "Todas as atividades devem estar associadas a pelo menos uma competência.
    Atividades pendentes: Atividade Solta"
        at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
        at org.springframework.test.util.JsonPathExpectationsHelper.assertValue(JsonPathExpectationsHelper.java:107)
        at org.springframework.test.web.servlet.result.JsonPathResultMatchers.lambda$value$0(JsonPathResultMatchers.java:87)
        at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:212)
        at sgc.integracao.CDU17IntegrationTest$Falha.disponibilizarMapa_comAtividadeNaoAssociada_retornaBadRequest(CDU17IntegrationTest.java:263)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Deve processar evento completo para unidade operacional FAILED
    Wanted but not invoked:
    alertaService.criarAlertasProcessoIniciado(
        {"dataCriacao":null,"dataFinalizacao":null,"dataLimite":null,"descricao":"Teste de Processo","participantes":[],"situacao":null,"tipo":"REVISAO","codigo":1},
        [100],
        [{"dataFimEtapa1":null,"dataFimEtapa2":null,"dataLimiteEtapa1":"2026-01-07T12:28:31.878115980","dataLimiteEtapa2":null,"mapa":null,"processo":{"dataCriacao":null,"dataFinalizacao":null,"dataLimite":null,"descricao":"Teste de Processo","participantes":[],"situacao":null,"tipo":"REVISAO","codigo":1},"situacao":null,"unidade":{"dataInicioTitularidade":null,"matriculaTitular":null,"nome":null,"processos":[],"sigla":"UNID-OP","situacao":null,"tipo":null,"tituloTitular":null,"unidadeSuperior":null,"codigo":100},"codigo":10}]
    );
    -> at sgc.alerta.AlertaService.criarAlertasProcessoIniciado(AlertaService.java:113)
    Actually, there were zero interactions with this mock.
        at app//sgc.alerta.AlertaService.criarAlertasProcessoIniciado(AlertaService.java:113)
        at app//sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.deveProcessarCompletoQuandoUnidadeOperacional(EventoProcessoListenerTest.java:146)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Não deve enviar e-mail quando tipo de unidade desconhecido FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException:
    Unnecessary stubbings detected.
    Clean & maintainable test code requires zero unnecessary code.
    Following stubbings are unnecessary (click to navigate to relevant line of code):
      1. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoTipoUnidadeDesconhecido(EventoProcessoListenerTest.java:292)
      2. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoTipoUnidadeDesconhecido(EventoProcessoListenerTest.java:293)
      3. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoTipoUnidadeDesconhecido(EventoProcessoListenerTest.java:295)
    Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at app//org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base@21.0.8/java.util.Optional.ifPresent(Optional.java:178)
        at app//org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Não deve enviar e-mails quando não houver subprocessos FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException:
    Unnecessary stubbings detected.
    Clean & maintainable test code requires zero unnecessary code.
    Following stubbings are unnecessary (click to navigate to relevant line of code):
      1. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailsQuandoNaoHouverSubprocessos(EventoProcessoListenerTest.java:175)
      2. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailsQuandoNaoHouverSubprocessos(EventoProcessoListenerTest.java:176)
    Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at app//org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base@21.0.8/java.util.Optional.ifPresent(Optional.java:178)
        at app//org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Deve capturar exception geral sem interromper execução FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException:
    Unnecessary stubbings detected.
    Clean & maintainable test code requires zero unnecessary code.
    Following stubbings are unnecessary (click to navigate to relevant line of code):
      1. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.deveCapturarExceptionGeral(EventoProcessoListenerTest.java:388)
    Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at app//org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base@21.0.8/java.util.Optional.ifPresent(Optional.java:178)
        at app//org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Não deve enviar e-mail quando subprocesso sem unidade FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException:
    Unnecessary stubbings detected.
    Clean & maintainable test code requires zero unnecessary code.
    Following stubbings are unnecessary (click to navigate to relevant line of code):
      1. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoSubprocessoSemUnidade(EventoProcessoListenerTest.java:309)
      2. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoSubprocessoSemUnidade(EventoProcessoListenerTest.java:310)
    Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at app//org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base@21.0.8/java.util.Optional.ifPresent(Optional.java:178)
        at app//org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Deve enviar e-mail correto para unidade INTERMEDIARIA FAILED
    Wanted but not invoked:
    alertaService.criarAlertasProcessoIniciado(
        <any>,
        <any List>,
        <any List>
    );
    -> at sgc.alerta.AlertaService.criarAlertasProcessoIniciado(AlertaService.java:113)
    Actually, there were zero interactions with this mock.
        at app//sgc.alerta.AlertaService.criarAlertasProcessoIniciado(AlertaService.java:113)
        at app//sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.deveEnviarEmailCorretoQuandoUnidadeIntermediaria(EventoProcessoListenerTest.java:224)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Deve enviar e-mail correto para unidade INTEROPERACIONAL FAILED
    Wanted but not invoked:
    notificacaoEmailService.enviarEmailHtml(
        "titular@test.com",
        <Capturing argument: String>,
        <any string>
    );
    -> at sgc.notificacao.NotificacaoEmailService.enviarEmailHtml(NotificacaoEmailService.java:69)
    Actually, there were zero interactions with this mock.
        at app//sgc.notificacao.NotificacaoEmailService.enviarEmailHtml(NotificacaoEmailService.java:69)
        at app//sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.deveEnviarEmailCorretoQuandoUnidadeInteroperacional(EventoProcessoListenerTest.java:275)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Não deve enviar e-mail quando titular sem e-mail FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException:
    Unnecessary stubbings detected.
    Clean & maintainable test code requires zero unnecessary code.
    Following stubbings are unnecessary (click to navigate to relevant line of code):
      1. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoTitularSemEmail(EventoProcessoListenerTest.java:369)
      2. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoTitularSemEmail(EventoProcessoListenerTest.java:370)
      3. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoTitularSemEmail(EventoProcessoListenerTest.java:372)
      4. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoTitularSemEmail(EventoProcessoListenerTest.java:373)
      5. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoTitularSemEmail(EventoProcessoListenerTest.java:374)
    Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at app//org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base@21.0.8/java.util.Optional.ifPresent(Optional.java:178)
        at app//org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Deve prosseguir envio para titular mesmo com erro no envio para substituto FAILED
    Wanted but not invoked:
    notificacaoEmailService.enviarEmailHtml(
        "titular@test.com",
        <any>,
        <any>
    );
    -> at sgc.notificacao.NotificacaoEmailService.enviarEmailHtml(NotificacaoEmailService.java:69)
    Actually, there were zero interactions with this mock.
        at app//sgc.notificacao.NotificacaoEmailService.enviarEmailHtml(NotificacaoEmailService.java:69)
        at app//sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.deveProsseguirMesmoComErroEmailSubstituto(EventoProcessoListenerTest.java:439)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Não deve enviar e-mail quando responsável não encontrado FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException:
    Unnecessary stubbings detected.
    Clean & maintainable test code requires zero unnecessary code.
    Following stubbings are unnecessary (click to navigate to relevant line of code):
      1. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoResponsavelNaoEncontrado(EventoProcessoListenerTest.java:334)
      2. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoResponsavelNaoEncontrado(EventoProcessoListenerTest.java:335)
      3. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoResponsavelNaoEncontrado(EventoProcessoListenerTest.java:337)
      4. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveEnviarEmailQuandoResponsavelNaoEncontrado(EventoProcessoListenerTest.java:338)
    Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at app//org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base@21.0.8/java.util.Optional.ifPresent(Optional.java:178)
        at app//org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)

Testes Unitários: EventoProcessoListener > Evento: Processo Iniciado > Não deve fazer nada quando processo não encontrado FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException:
    Unnecessary stubbings detected.
    Clean & maintainable test code requires zero unnecessary code.
    Following stubbings are unnecessary (click to navigate to relevant line of code):
      1. -> at sgc.notificacao.EventoProcessoListenerTest$ProcessoIniciado.naoDeveFazerNadaQuandoProcessoNaoEncontrado(EventoProcessoListenerTest.java:161)
    Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at app//org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base@21.0.8/java.util.Optional.ifPresent(Optional.java:178)
        at app//org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)
        at java.base@21.0.8/java.util.ArrayList.forEach(ArrayList.java:1596)

Testes Unitários: EventoProcessoListener > Evento: Processo Finalizado > Deve processar finalização e enviar e-mail para unidade operacional FAILED
    Wanted but not invoked:
    notificacaoEmailService.enviarEmailHtml(
        "titular@test.com",
        <any string>,
        "html-finalizacao"
    );
    -> at sgc.notificacao.NotificacaoEmailService.enviarEmailHtml(NotificacaoEmailService.java:69)
    Actually, there were zero interactions with this mock.
        at app//sgc.notificacao.NotificacaoEmailService.enviarEmailHtml(NotificacaoEmailService.java:69)
        at app//sgc.notificacao.EventoProcessoListenerTest$ProcessoFinalizado.deveEnviarEmailQuandoUnidadeOperacional(EventoProcessoListenerTest.java:479)

Testes do Serviço UsuarioService > Consultas de Unidade > Deve buscar unidades ativas FAILED
    org.opentest4j.AssertionFailedError: expected: <true> but was: <false>
        at app//org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:158)
        at app//org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:139)
        at app//org.junit.jupiter.api.AssertTrue.failNotTrue(AssertTrue.java:69)
        at app//org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:41)
        at app//org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:35)
        at app//org.junit.jupiter.api.Assertions.assertTrue(Assertions.java:195)
        at app//sgc.usuario.UsuarioServiceTest$ConsultasUnidade.deveBuscarUnidadesAtivas(UsuarioServiceTest.java:124)

534 tests completed, 32 failed

> Task :backend:test FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':backend:test'.
> There were failing tests. See the report at: file:///app/backend/build/reports/tests/test/index.html

* Try:
> Run with --scan to generate a Build Scan (powered by Develocity).

BUILD FAILED in 1m 46s
5 actionable tasks: 3 executed, 2 up-to-date
Configuration cache entry reused.
