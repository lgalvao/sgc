[
  {
    "file": "backend/build.gradle.kts",
    "type": "block",
    "line": 232,
    "length": 14,
    "text": "/*.exec\"))\n\n    reports {\n        xml.required.set(true)\n        csv.required.set(true)\n        html.required.set(false)\n    }\n\n    classDirectories.setFrom(\n        files(classDirectories.files.map {\n            fileTree(it) {\n                exclude(\n                    \"sgc/Sgc.class\",\n                    \"sgc/**/",
    "context": "\ntasks.jacocoTestReport {\n    dependsOn(tasks.named(\"test\"))\n    executionData.setFrom(fileTree(layout.buildDirectory).include(\"jacoco/*.exec\"))\n\n    reports {\n        xml.required.set(true)\n        csv.required.set(true)\n        html.required.set(false)\n    }\n\n    classDirectories.setFrom(\n        files(classDirectories.files.map {\n            fileTree(it) {\n                exclude(\n                    \"sgc/Sgc.class\",\n                    \"sgc/**/*Config.class\",\n                    \"sgc/**/*Properties.class\",\n\n                    \"sgc/**/Erro*.class\","
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "block",
    "line": 246,
    "length": 3,
    "text": "/*Properties.class\",\n\n                    \"sgc/**/",
    "context": "                exclude(\n                    \"sgc/Sgc.class\",\n                    \"sgc/**/*Config.class\",\n                    \"sgc/**/*Properties.class\",\n\n                    \"sgc/**/Erro*.class\",\n\n                    \"sgc/notificacao/NotificacaoModelosServiceMock.class\",\n"
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 73,
    "length": 1,
    "text": "// Depend√™ncias b√°sicas com vers√µes mais recentes que as definidas pelo Spring (reduz CVEs)",
    "context": "    implementation(\"org.mozilla:rhino:1.9.0\")\n    testImplementation(\"com.atlassian.oai:swagger-request-validator-mockmvc:2.46.0\")\n\n    // Depend√™ncias b√°sicas com vers√µes mais recentes que as definidas pelo Spring (reduz CVEs)\n    implementation(\"org.apache.commons:commons-lang3:3.20.0\")\n    testImplementation(\"org.assertj:assertj-core:3.27.7\")\n"
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 90,
    "length": 3,
    "text": "// Carregar vari√°veis do arquivo .env apropriado baseado na vari√°vel ENV\n// Uso: ./gradlew bootRun -PENV=hom (ou test, e2e)\n// Tamb√©m aceita -Dspring.profiles.active=hom",
    "context": "tasks.named<org.springframework.boot.gradle.tasks.run.BootRun>(\"bootRun\") {\n    mainClass.set(\"sgc.Sgc\")\n\n    // Carregar vari√°veis do arquivo .env apropriado baseado na vari√°vel ENV\n    // Uso: ./gradlew bootRun -PENV=hom (ou test, e2e)\n    // Tamb√©m aceita -Dspring.profiles.active=hom\n    val env = (project.findProperty(\"ENV\") ?: System.getProperty(\"spring.profiles.active\"))?.toString() ?: \"test\"\n    val envFile = rootProject.file(\".env.$env\")\n"
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 96,
    "length": 1,
    "text": "// Define o perfil Spring automaticamente baseado no ENV",
    "context": "    val env = (project.findProperty(\"ENV\") ?: System.getProperty(\"spring.profiles.active\"))?.toString() ?: \"test\"\n    val envFile = rootProject.file(\".env.$env\")\n\n    // Define o perfil Spring automaticamente baseado no ENV\n    systemProperty(\"spring.profiles.active\", env)\n    println(\"Perfil Spring ativado: $env\")\n"
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 133,
    "length": 1,
    "text": "// Exibir resumo apenas para a suite raiz (n√≠vel do projeto)",
    "context": "    addTestListener(object : TestListener {\n        override fun beforeSuite(suite: TestDescriptor) {}\n        override fun afterSuite(suite: TestDescriptor, result: TestResult) {\n            // Exibir resumo apenas para a suite raiz (n√≠vel do projeto)\n            if (suite.parent == null) {\n                val output = \"\"\"\n                    |  Resultado: ${result.resultType}"
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 329,
    "length": 1,
    "text": "// M√©todos ignorados (getters/setters j√° s√£o exclu√≠dos por padr√£o)",
    "context": "        )\n    )\n\n    // M√©todos ignorados (getters/setters j√° s√£o exclu√≠dos por padr√£o)\n    excludedMethods.set(\n        listOf(\n            \"hashCode\","
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 379,
    "length": 1,
    "text": "// Tarefa customizada para mutation testing completo",
    "context": "    return hasNonStableKeyword || (!stableKeyword && !regex.matches(version))\n}\n\n// Tarefa customizada para mutation testing completo\ntasks.register(\"mutationTest\") {\n    group = \"quality\"\n    description = \"Executa mutation testing completo com PIT (gera relat√≥rio em build/reports/pitest)\""
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 394,
    "length": 1,
    "text": "// Tarefa para mutation testing incremental (apenas mudan√ßas recentes)",
    "context": "    }\n}\n\n// Tarefa para mutation testing incremental (apenas mudan√ßas recentes)\ntasks.register(\"mutationTestIncremental\") {\n    group = \"quality\"\n    description = \"Mutation testing incremental (apenas classes modificadas recentemente)\""
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 400,
    "length": 1,
    "text": "// Detectar classes modificadas via git",
    "context": "    description = \"Mutation testing incremental (apenas classes modificadas recentemente)\"\n\n    doFirst {\n        // Detectar classes modificadas via git\n        val gitDiff = providers.exec {\n            commandLine(\"git\", \"diff\", \"--name-only\", \"HEAD~1\", \"HEAD\")\n        }.standardOutput.asText.get()"
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 419,
    "length": 1,
    "text": "// Configurar PIT para analisar apenas classes modificadas",
    "context": "            println(\"üéØ Analisando ${modifiedClasses.size} classe(s) modificada(s):\")\n            modifiedClasses.forEach { println(\"   - $it\") }\n\n            // Configurar PIT para analisar apenas classes modificadas\n            tasks.named<PitestTask>(\"pitest\") {\n                targetClasses.set(modifiedClasses)\n            }"
  },
  {
    "file": "backend/build.gradle.kts",
    "type": "line",
    "line": 429,
    "length": 1,
    "text": "// Tarefa para an√°lise de mutantes por m√≥dulo",
    "context": "    finalizedBy(\"pitest\")\n}\n\n// Tarefa para an√°lise de mutantes por m√≥dulo\ntasks.register(\"mutationTestModulo\") {\n    group = \"quality\"\n    description = \"Mutation testing de um m√≥dulo espec√≠fico (use -PtargetModule=processo)\""
  },
  {
    "file": "backend/src/main/java/sgc/e2e/E2eController.java",
    "type": "line",
    "line": 127,
    "length": 1,
    "text": "// 1. Limpar Alertas",
    "context": "            String subquerySubprocessos = \"(SELECT codigo FROM sgc.subprocesso WHERE processo_codigo = \" + codigo + \")\";\n            String subqueryMapas = \"(SELECT codigo FROM sgc.mapa WHERE subprocesso_codigo IN \" + subquerySubprocessos + \")\";\n\n            // 1. Limpar Alertas\n            jdbcTemplate.update(\"DELETE FROM sgc.alerta_usuario WHERE alerta_codigo IN (SELECT codigo FROM sgc.alerta WHERE processo_codigo = ?)\", codigo);\n            jdbcTemplate.update(\"DELETE FROM sgc.alerta WHERE processo_codigo = ?\", codigo);\n"
  },
  {
    "file": "backend/src/main/java/sgc/e2e/E2eController.java",
    "type": "line",
    "line": 131,
    "length": 1,
    "text": "// 2. Limpar dependentes de Mapa",
    "context": "            jdbcTemplate.update(\"DELETE FROM sgc.alerta_usuario WHERE alerta_codigo IN (SELECT codigo FROM sgc.alerta WHERE processo_codigo = ?)\", codigo);\n            jdbcTemplate.update(\"DELETE FROM sgc.alerta WHERE processo_codigo = ?\", codigo);\n\n            // 2. Limpar dependentes de Mapa\n            jdbcTemplate.update(\"DELETE FROM sgc.conhecimento WHERE atividade_codigo IN (SELECT codigo FROM sgc.atividade WHERE mapa_codigo IN \" + subqueryMapas + \")\");\n            jdbcTemplate.update(\"DELETE FROM sgc.competencia_atividade WHERE atividade_codigo IN (SELECT codigo FROM sgc.atividade WHERE mapa_codigo IN \" + subqueryMapas + \")\");\n            jdbcTemplate.update(\"DELETE FROM sgc.competencia_atividade WHERE competencia_codigo IN (SELECT codigo FROM sgc.competencia WHERE mapa_codigo IN \" + subqueryMapas + \")\");"
  },
  {
    "file": "backend/src/main/java/sgc/e2e/E2eController.java",
    "type": "line",
    "line": 138,
    "length": 1,
    "text": "// Limpar refer√™ncias de Mapa Vigente antes de excluir o Mapa",
    "context": "            jdbcTemplate.update(\"DELETE FROM sgc.atividade WHERE mapa_codigo IN \" + subqueryMapas);\n            jdbcTemplate.update(\"DELETE FROM sgc.competencia WHERE mapa_codigo IN \" + subqueryMapas);\n\n            // Limpar refer√™ncias de Mapa Vigente antes de excluir o Mapa\n            jdbcTemplate.update(\"DELETE FROM sgc.unidade_mapa WHERE mapa_vigente_codigo IN \" + subqueryMapas);\n            jdbcTemplate.update(\"DELETE FROM sgc.mapa WHERE subprocesso_codigo IN \" + subquerySubprocessos);\n"
  },
  {
    "file": "backend/src/main/java/sgc/e2e/E2eController.java",
    "type": "line",
    "line": 142,
    "length": 1,
    "text": "// 3. Limpar dependentes de Subprocesso",
    "context": "            jdbcTemplate.update(\"DELETE FROM sgc.unidade_mapa WHERE mapa_vigente_codigo IN \" + subqueryMapas);\n            jdbcTemplate.update(\"DELETE FROM sgc.mapa WHERE subprocesso_codigo IN \" + subquerySubprocessos);\n\n            // 3. Limpar dependentes de Subprocesso\n            jdbcTemplate.update(\"DELETE FROM sgc.analise WHERE subprocesso_codigo IN \" + subquerySubprocessos);\n            jdbcTemplate.update(\"DELETE FROM sgc.notificacao WHERE subprocesso_codigo IN \" + subquerySubprocessos);\n            jdbcTemplate.update(\"DELETE FROM sgc.movimentacao WHERE subprocesso_codigo IN \" + subquerySubprocessos);"
  },
  {
    "file": "backend/src/main/java/sgc/e2e/E2eController.java",
    "type": "line",
    "line": 148,
    "length": 1,
    "text": "// 4. Limpar UnidadeProcesso e Processo",
    "context": "            jdbcTemplate.update(\"DELETE FROM sgc.movimentacao WHERE subprocesso_codigo IN \" + subquerySubprocessos);\n            jdbcTemplate.update(\"DELETE FROM sgc.subprocesso WHERE processo_codigo = ?\", codigo);\n\n            // 4. Limpar UnidadeProcesso e Processo\n            jdbcTemplate.update(\"DELETE FROM sgc.unidade_processo WHERE processo_codigo = ?\", codigo);\n            jdbcTemplate.update(\"DELETE FROM sgc.processo WHERE codigo = ?\", codigo);\n"
  },
  {
    "file": "backend/src/main/java/sgc/e2e/E2eController.java",
    "type": "line",
    "line": 292,
    "length": 1,
    "text": "// Recarregar processo ap√≥s iniciar",
    "context": "                throw new ErroValidacao(\"Falha ao iniciar processo fixture: \" + String.join(\"; \", erros));\n            }\n\n            // Recarregar processo ap√≥s iniciar\n            processo = processoFacade.obterEntidadePorId(processoCodigo);\n        }\n"
  },
  {
    "file": "backend/src/main/java/sgc/mapa/service/MapaManutencaoService.java",
    "type": "line",
    "line": 186,
    "length": 1,
    "text": "// Remove conhecimentos associados",
    "context": "        var mapa = atividade.getMapa();\n        notificarAlteracaoMapa(mapa.getCodigo());\n\n        // Remove conhecimentos associados\n        List<Conhecimento> conhecimentos = conhecimentoRepo.findByAtividade_Codigo(atividade.getCodigo());\n        conhecimentoRepo.deleteAll(conhecimentos);\n"
  },
  {
    "file": "backend/src/main/java/sgc/organizacao/service/ResponsavelUnidadeService.java",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Coletar todos os t√≠tulos (respons√°veis atuais e titulares oficiais) para busca em lote",
    "context": "        List<Responsabilidade> responsabilidades = responsabilidadeRepo.findByUnidadeCodigoIn(unidadesCodigos);\n        if (responsabilidades.isEmpty()) return Collections.emptyMap();\n\n        // Coletar todos os t√≠tulos (respons√°veis atuais e titulares oficiais) para busca em lote\n        Set<String> todosTitulos = new HashSet<>();\n        responsabilidades.forEach(r -> {\n            todosTitulos.add(r.getUsuarioTitulo());"
  },
  {
    "file": "backend/src/main/java/sgc/organizacao/service/ResponsavelUnidadeService.java",
    "type": "line",
    "line": 147,
    "length": 1,
    "text": "// Se o respons√°vel √© o pr√≥prio titular",
    "context": "    }\n\n    private UnidadeResponsavelDto montarResponsavelDto(Long unidadeCodigo, Usuario responsavel, Usuario titularOficial) {\n        // Se o respons√°vel √© o pr√≥prio titular\n        if (responsavel.getTituloEleitoral().equals(titularOficial.getTituloEleitoral())) {\n            return UnidadeResponsavelDto.builder()\n                    .unidadeCodigo(unidadeCodigo)"
  },
  {
    "file": "backend/src/main/java/sgc/organizacao/service/ResponsavelUnidadeService.java",
    "type": "line",
    "line": 158,
    "length": 1,
    "text": "// Caso o respons√°vel seja um substituto ou atribui√ß√£o tempor√°ria",
    "context": "                    .build();\n        }\n\n        // Caso o respons√°vel seja um substituto ou atribui√ß√£o tempor√°ria\n        return UnidadeResponsavelDto.builder()\n                .unidadeCodigo(unidadeCodigo)\n                .titularTitulo(titularOficial.getTituloEleitoral())"
  },
  {
    "file": "backend/src/main/java/sgc/organizacao/service/ValidadorDadosOrgService.java",
    "type": "line",
    "line": 111,
    "length": 1,
    "text": "// Particionar para evitar limite de 1000 do Oracle no IN",
    "context": "            return Map.of();\n        }\n\n        // Particionar para evitar limite de 1000 do Oracle no IN\n        List<Usuario> usuarios = new ArrayList<>();\n        for (int i = 0; i < titulos.size(); i += 999) {\n            List<String> subList = titulos.subList(i, Math.min(i + 999, titulos.size()));"
  },
  {
    "file": "backend/src/main/java/sgc/parametros/ConfiguracaoController.java",
    "type": "line",
    "line": 36,
    "length": 1,
    "text": "// Buscar par√¢metros existentes e atualizar com dados das requests",
    "context": "    @PreAuthorize(\"hasRole('ADMIN')\")\n    @Operation(summary = \"Atualizar configura√ß√µes em bloco\")\n    public List<Parametro> atualizar(@RequestBody @Valid List<ParametroRequest> parametros) {\n        // Buscar par√¢metros existentes e atualizar com dados das requests\n        List<Parametro> parametrosAtualizados = parametros.stream()\n                .map(request -> {\n                    Parametro parametro = configuracaoService.buscarPorId(request.codigo());"
  },
  {
    "file": "backend/src/main/java/sgc/processo/ProcessoFacade.java",
    "type": "line",
    "line": 148,
    "length": 1,
    "text": "// Verifica se unidade participa do processo",
    "context": "        Processo processo = buscarEntidadePorId(codProcesso);\n        Unidade unidade = organizacaoFacade.unidadePorCodigo(unidadeCodigo);\n\n        // Verifica se unidade participa do processo\n        if (processo.getParticipantes().stream().noneMatch(u -> u.getUnidadeCodigo().equals(unidadeCodigo))) {\n            throw new ErroProcesso(\"Unidade n√£o participa deste processo.\");\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/processo/ProcessoFacade.java",
    "type": "line",
    "line": 167,
    "length": 1,
    "text": "// Enviar para o titular da unidade",
    "context": "        Subprocesso subprocesso = subprocessoService.obterEntidadePorProcessoEUnidade(codProcesso, unidadeCodigo);\n        subprocessoService.registrarMovimentacaoLembrete(subprocesso.getCodigo());\n\n        // Enviar para o titular da unidade\n        Usuario titular = usuarioService.buscarPorLogin(unidade.getTituloTitular());\n        emailService.enviarEmailHtml(titular.getEmail(), assunto, corpoHtml);\n"
  },
  {
    "file": "backend/src/main/java/sgc/processo/model/Processo.java",
    "type": "line",
    "line": 80,
    "length": 1,
    "text": "// 1. Remover quem n√£o est√° mais na nova lista",
    "context": "     * e adicionando novos apenas para unidades que ainda n√£o participam.\n     */\n    public void sincronizarParticipantes(Set<Unidade> novasUnidades) {\n        // 1. Remover quem n√£o est√° mais na nova lista\n        Set<Long> novosCodigos = novasUnidades.stream()\n                .map(Unidade::getCodigo)\n                .collect(Collectors.toSet());"
  },
  {
    "file": "backend/src/main/java/sgc/processo/model/Processo.java",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// 2. Adicionar apenas quem √© novo",
    "context": "\n        participantes.removeIf(up -> !novosCodigos.contains(up.getUnidadeCodigo()));\n\n        // 2. Adicionar apenas quem √© novo\n        adicionarParticipantes(novasUnidades);\n    }\n"
  },
  {
    "file": "backend/src/main/java/sgc/processo/painel/PainelFacade.java",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// Alertas s√£o filtrados pela unidade do usu√°rio (sem subordinadas)",
    "context": "                    Sort.by(Sort.Direction.DESC, \"dataHora\"));\n        }\n\n        // Alertas s√£o filtrados pela unidade do usu√°rio (sem subordinadas)\n        Page<Alerta> alertasPage = alertaService.listarPorUnidade(codigoUnidade, sortedPageable);\n        List<Long> alertasNaoLidosVisualizados = new ArrayList<>();\n        alertasPage.forEach(alerta -> {"
  },
  {
    "file": "backend/src/main/java/sgc/processo/painel/PainelFacade.java",
    "type": "line",
    "line": 150,
    "length": 2,
    "text": "// Agrupa no pai se ele estiver totalmente coberto pelas unidades participantes.\n// Interrompe o agrupamento no n√≠vel imediatamente abaixo da unidade raiz.",
    "context": "            Long parent = mapaFilhoPai.get(candidate);\n\n            while (parent != null && mapaFilhoPai.get(parent) != null) {\n                // Agrupa no pai se ele estiver totalmente coberto pelas unidades participantes.\n                // Interrompe o agrupamento no n√≠vel imediatamente abaixo da unidade raiz.\n                if (isCovered(parent, participantesIds, mapaPaiFilhos, coveredCache)) {\n                    candidate = parent;\n                    parent = mapaFilhoPai.get(candidate);"
  },
  {
    "file": "backend/src/main/java/sgc/processo/service/ProcessoInicializador.java",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Validar mapa vigente para revis√£o e diagn√≥stico",
    "context": "    private List<String> validarUnidades(TipoProcesso tipo, List<Long> codigosUnidades) {\n        List<String> erros = new ArrayList<>();\n\n        // Validar mapa vigente para revis√£o e diagn√≥stico\n        if (tipo == TipoProcesso.REVISAO || tipo == TipoProcesso.DIAGNOSTICO) {\n            processoValidador.getMensagemErroUnidadesSemMapa(codigosUnidades).ifPresent(erros::add);\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/processo/service/ProcessoInicializador.java",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// Validar se unidades j√° est√£o em uso",
    "context": "            processoValidador.getMensagemErroUnidadesSemMapa(codigosUnidades).ifPresent(erros::add);\n        }\n\n        // Validar se unidades j√° est√£o em uso\n        getMensagemErroUnidadesEmProcessosAtivos(codigosUnidades).ifPresent(erros::add);\n\n        return erros;"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 31,
    "length": 1,
    "text": "// A√ß√µes de Escrita que exigem Localiza√ß√£o",
    "context": "@Slf4j\npublic class SgcPermissionEvaluator implements PermissionEvaluator {\n\n    // A√ß√µes de Escrita que exigem Localiza√ß√£o\n    private static final Set<String> ACOES_ESCRITA = Set.of(\n            \"EDITAR_CADASTRO\", \"DISPONIBILIZAR_CADASTRO\", \"DEVOLVER_CADASTRO\", \"ACEITAR_CADASTRO\", \"HOMOLOGAR_CADASTRO\",\n            \"EDITAR_REVISAO_CADASTRO\", \"DISPONIBILIZAR_REVISAO_CADASTRO\", \"DEVOLVER_REVISAO_CADASTRO\", \"ACEITAR_REVISAO_CADASTRO\", \"HOMOLOGAR_REVISAO_CADASTRO\","
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 111,
    "length": 1,
    "text": "// Visualiza√ß√£o (Leitura) - Baseada na Hierarquia",
    "context": "        boolean isAdmin = perfil == ADMIN;\n        boolean isEscrita = isAcaoEscrita(acao);\n\n        // Visualiza√ß√£o (Leitura) - Baseada na Hierarquia\n        if (!isEscrita) {\n            if (isAdmin) return true; // Admin v√™ tudo\n"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 115,
    "length": 1,
    "text": "// Exce√ß√£o: Importa√ß√£o permite ler de outras unidades para obter atividades/conhecimentos",
    "context": "        if (!isEscrita) {\n            if (isAdmin) return true; // Admin v√™ tudo\n\n            // Exce√ß√£o: Importa√ß√£o permite ler de outras unidades para obter atividades/conhecimentos\n            if (\"CONSULTAR_PARA_IMPORTACAO\".equals(acao) && (usuario.getPerfilAtivo() == CHEFE || usuario.getPerfilAtivo() == GESTOR)) {\n                return true;\n            }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 120,
    "length": 1,
    "text": "// CDU-12: Exce√ß√£o √† regra de visualiza√ß√£o baseada apenas em hierarquia",
    "context": "                return true;\n            }\n\n            // CDU-12: Exce√ß√£o √† regra de visualiza√ß√£o baseada apenas em hierarquia\n            if (\"VERIFICAR_IMPACTOS\".equals(acao)) {\n                return true; // Permitir visualiza√ß√£o se for verifica√ß√£o de impactos (controle de estado feito no servi√ßo)\n            }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 128,
    "length": 1,
    "text": "// 2. Valida√ß√£o de Perfil (RBAC) para a√ß√µes de escrita",
    "context": "            return checkHierarquia(usuario, sp.getUnidade());\n        }\n\n        // 2. Valida√ß√£o de Perfil (RBAC) para a√ß√µes de escrita\n        if (!checkPerfil(usuario, acao)) {\n            return false;\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 133,
    "length": 2,
    "text": "// 3. Execu√ß√£o (Escrita) - Baseada na Localiza√ß√£o Atual (Regra de Ouro)\n// O usu√°rio s√≥ pode executar se o subprocesso estiver na sua unidade",
    "context": "            return false;\n        }\n\n        // 3. Execu√ß√£o (Escrita) - Baseada na Localiza√ß√£o Atual (Regra de Ouro)\n        // O usu√°rio s√≥ pode executar se o subprocesso estiver na sua unidade\n        Unidade localizacao = obterUnidadeLocalizacao(sp);\n        boolean permitido = Objects.equals(usuario.getUnidadeAtivaCodigo(), localizacao.getCodigo());\n        if (!permitido) {"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 157,
    "length": 1,
    "text": "// A√ß√µes de Mapa exclusivas de ADMIN",
    "context": "            return perfil == ADMIN || perfil == GESTOR;\n        }\n\n        // A√ß√µes de Mapa exclusivas de ADMIN\n        if (Set.of(\"EDITAR_MAPA\", \"DISPONIBILIZAR_MAPA\", \"AJUSTAR_MAPA\").contains(acao)) {\n            return perfil == ADMIN;\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 162,
    "length": 1,
    "text": "// A√ß√µes de valida√ß√£o de mapa (Chefe)",
    "context": "            return perfil == ADMIN;\n        }\n\n        // A√ß√µes de valida√ß√£o de mapa (Chefe)\n        if (Set.of(\"APRESENTAR_SUGESTOES\", \"VALIDAR_MAPA\").contains(acao)) {\n            return perfil == CHEFE;\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 167,
    "length": 1,
    "text": "// A√ß√µes de Cadastro (Chefe)",
    "context": "            return perfil == CHEFE;\n        }\n\n        // A√ß√µes de Cadastro (Chefe)\n        if (Set.of(\"EDITAR_CADASTRO\", \"DISPONIBILIZAR_CADASTRO\", \"EDITAR_REVISAO_CADASTRO\", \"DISPONIBILIZAR_REVISAO_CADASTRO\", \"IMPORTAR_ATIVIDADES\").contains(acao)) {\n            return perfil == CHEFE;\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 172,
    "length": 1,
    "text": "// Verificar impactos (Todos, mas depende da localiza√ß√£o)",
    "context": "            return perfil == CHEFE;\n        }\n\n        // Verificar impactos (Todos, mas depende da localiza√ß√£o)\n        if (\"VERIFICAR_IMPACTOS\".equals(acao)) {\n            return perfil == CHEFE || perfil == GESTOR || perfil == ADMIN;\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 186,
    "length": 1,
    "text": "// Regras para Processo (baseadas em Perfil)",
    "context": "        }\n\n        Perfil perfil = usuario.getPerfilAtivo();\n        // Regras para Processo (baseadas em Perfil)\n        boolean isAdmin = perfil == ADMIN;\n        if (isAdmin) return true; // Admin faz tudo no Processo\n"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 190,
    "length": 1,
    "text": "// Gestor e Chefe podem ver e realizar a√ß√µes em bloco",
    "context": "        boolean isAdmin = perfil == ADMIN;\n        if (isAdmin) return true; // Admin faz tudo no Processo\n\n        // Gestor e Chefe podem ver e realizar a√ß√µes em bloco\n        if (perfil == GESTOR || perfil == CHEFE) {\n            return Set.of(\n                    \"VISUALIZAR_PROCESSO\","
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 209,
    "length": 1,
    "text": "// Chefe e Servidor veem apenas sua unidade",
    "context": "    }\n\n    private boolean checkHierarquia(Usuario usuario, Unidade unidadeAlvo) {\n        // Chefe e Servidor veem apenas sua unidade\n        if (usuario.getPerfilAtivo() == CHEFE || usuario.getPerfilAtivo() == SERVIDOR) {\n            return Objects.equals(usuario.getUnidadeAtivaCodigo(), unidadeAlvo.getCodigo());\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 214,
    "length": 1,
    "text": "// Gestor v√™ sua unidade e subordinadas",
    "context": "            return Objects.equals(usuario.getUnidadeAtivaCodigo(), unidadeAlvo.getCodigo());\n        }\n\n        // Gestor v√™ sua unidade e subordinadas\n        if (usuario.getPerfilAtivo() == GESTOR) {\n            // Assume-se que o usu√°rio logado tem sua unidade ativa carregada ou acess√≠vel via c√≥digo\n            Unidade unidadeUsuario = Unidade.builder().codigo(usuario.getUnidadeAtivaCodigo()).build();"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/SgcPermissionEvaluator.java",
    "type": "line",
    "line": 216,
    "length": 1,
    "text": "// Assume-se que o usu√°rio logado tem sua unidade ativa carregada ou acess√≠vel via c√≥digo",
    "context": "\n        // Gestor v√™ sua unidade e subordinadas\n        if (usuario.getPerfilAtivo() == GESTOR) {\n            // Assume-se que o usu√°rio logado tem sua unidade ativa carregada ou acess√≠vel via c√≥digo\n            Unidade unidadeUsuario = Unidade.builder().codigo(usuario.getUnidadeAtivaCodigo()).build();\n            return hierarquiaService.isMesmaOuSubordinada(unidadeAlvo, unidadeUsuario);\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/config/ConfigSeguranca.java",
    "type": "line",
    "line": 73,
    "length": 2,
    "text": "// Habilita CSRF usando cookies (padr√£o para SPAs como Vue/React)\n// O cliente deve ler o cookie XSRF-TOKEN e enviar no header X-XSRF-TOKEN",
    "context": "                        .permitAll())\n                .exceptionHandling(e -> e.authenticationEntryPoint(\n                        new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED)))\n                // Habilita CSRF usando cookies (padr√£o para SPAs como Vue/React)\n                // O cliente deve ler o cookie XSRF-TOKEN e enviar no header X-XSRF-TOKEN\n                .csrf(csrf -> csrf\n                        .ignoringRequestMatchers(\"/api/usuarios/autenticar\", \"/api/usuarios/autorizar\", \"/api/usuarios/entrar\")\n                        .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/login/FiltroJwt.java",
    "type": "line",
    "line": 45,
    "length": 2,
    "text": "// Carrega apenas o perfil selecionado no momento do login (par √∫nico perfil-unidade).\n// Isso impede que permiss√µes de outros perfis/unidades do usu√°rio no banco interfiram na sess√£o atual.",
    "context": "                    usuario.setPerfilAtivo(claims.perfil());\n                    usuario.setUnidadeAtivaCodigo(claims.unidadeCodigo());\n\n                    // Carrega apenas o perfil selecionado no momento do login (par √∫nico perfil-unidade).\n                    // Isso impede que permiss√µes de outros perfis/unidades do usu√°rio no banco interfiram na sess√£o atual.\n                    var authorities = Set.of(claims.perfil().toGrantedAuthority());\n                    usuario.setAuthorities(authorities);\n"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/login/GerenciadorJwt.java",
    "type": "line",
    "line": 34,
    "length": 1,
    "text": "// Permite uso da chave padr√£o em ambientes de desenvolvimento/teste",
    "context": "    @PostConstruct\n    public void verificarSegurancaChave() {\n        if (DEFAULT_SECRET.equals(jwtProperties.secret())) {\n            // Permite uso da chave padr√£o em ambientes de desenvolvimento/teste\n            if (environment.acceptsProfiles(Profiles.of(\"test\", \"e2e\", \"local\", \"hom\", \"default\"))) {\n                log.debug(\"ALERTA: Aplica√ß√£o est√° usando o segredo JWT padr√£o.\");\n            } else {"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/login/LoginController.java",
    "type": "line",
    "line": 136,
    "length": 1,
    "text": "// Sanitiza√ß√£o contra Log Injection (CWE-117)",
    "context": "            ip = ip.split(\",\")[0].trim();\n        }\n\n        // Sanitiza√ß√£o contra Log Injection (CWE-117)\n        if (ip != null) {\n            return ip.replaceAll(\"[\\\\n\\\\r]\", \"_\");\n        }"
  },
  {
    "file": "backend/src/main/java/sgc/seguranca/sanitizacao/UtilSanitizacao.java",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// Construtor privado para impedir instancia√ß√£o",
    "context": "    private static final PolicyFactory POLITICA_PADRAO = new HtmlPolicyBuilder().toFactory();\n\n    private UtilSanitizacao() {\n        // Construtor privado para impedir instancia√ß√£o\n    }\n\n    /**"
  },
  {
    "file": "backend/src/main/java/sgc/subprocesso/model/SituacaoSubprocesso.java",
    "type": "line",
    "line": 11,
    "length": 1,
    "text": "// Mapeamento",
    "context": "public enum SituacaoSubprocesso {\n    NAO_INICIADO(\"N√£o iniciado\"),\n\n    // Mapeamento\n    MAPEAMENTO_CADASTRO_EM_ANDAMENTO(\"Cadastro em andamento\"),\n    MAPEAMENTO_CADASTRO_DISPONIBILIZADO(\"Cadastro disponibilizado\"),\n    MAPEAMENTO_CADASTRO_HOMOLOGADO(\"Cadastro homologado\"),"
  },
  {
    "file": "backend/src/main/java/sgc/subprocesso/model/SituacaoSubprocesso.java",
    "type": "line",
    "line": 21,
    "length": 1,
    "text": "// Revis√£o",
    "context": "    MAPEAMENTO_MAPA_VALIDADO(\"Mapa validado\"),\n    MAPEAMENTO_MAPA_HOMOLOGADO(\"Mapa homologado\"),\n\n    // Revis√£o\n    REVISAO_CADASTRO_EM_ANDAMENTO(\"Revis√£o de cadastro em andamento\"),\n    REVISAO_CADASTRO_DISPONIBILIZADA(\"Revis√£o de cadastro disponibilizada\"),\n    REVISAO_CADASTRO_HOMOLOGADA(\"Revis√£o de cadastro homologada\"),"
  },
  {
    "file": "backend/src/main/java/sgc/subprocesso/model/SituacaoSubprocesso.java",
    "type": "line",
    "line": 31,
    "length": 1,
    "text": "// Diagn√≥stico",
    "context": "    REVISAO_MAPA_VALIDADO(\"Mapa validado\"),\n    REVISAO_MAPA_HOMOLOGADO(\"Mapa homologado\"),\n\n    // Diagn√≥stico\n    DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO(\"Autoavalia√ß√£o em andamento\"),\n    DIAGNOSTICO_MONITORAMENTO(\"Monitoramento\"),\n    DIAGNOSTICO_CONCLUIDO(\"Conclu√≠do\");"
  },
  {
    "file": "backend/src/test/java/sgc/alerta/AlertaControllerTest.java",
    "type": "line",
    "line": 107,
    "length": 1,
    "text": "// que passa uma String como principal",
    "context": "        @Test\n        @DisplayName(\"Deve extrair titulo quando principal √© String\")\n        void deveExtrairTituloQuandoPrincipalString() throws Exception {\n            // que passa uma String como principal\n\n            when(alertaFacade.alertasPorUsuario(TITULO_TESTE))\n                    .thenReturn(List.of());"
  },
  {
    "file": "backend/src/test/java/sgc/alerta/AlertaFacadeTest.java",
    "type": "line",
    "line": 232,
    "length": 1,
    "text": "// N√£o deve salvar pois listar agora √© somente leitura",
    "context": "\n            assertThat(resultado).hasSize(1);\n            assertThat(resultado.getFirst().getCodigo()).isEqualTo(100L);\n            // N√£o deve salvar pois listar agora √© somente leitura\n            verify(alertaService, never()).salvarAlertaUsuario(any());\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/alerta/AlertaFacadeTest.java",
    "type": "line",
    "line": 416,
    "length": 1,
    "text": "// a1 lido, a2 nao lido",
    "context": "            when(usuarioService.buscarPorTitulo(titulo)).thenReturn(usuario);\n            when(alertaService.porUnidadeDestino(1L)).thenReturn(List.of(a1, a2));\n\n            // a1 lido, a2 nao lido\n            AlertaUsuario au1 = new AlertaUsuario();\n            au1.setId(AlertaUsuario.Chave.builder().alertaCodigo(1L).usuarioTitulo(titulo).build());\n            au1.setDataHoraLeitura(LocalDateTime.now());"
  },
  {
    "file": "backend/src/test/java/sgc/alerta/AlertaFacadeTest.java",
    "type": "line",
    "line": 442,
    "length": 1,
    "text": "// Primeira chamada: deve buscar unidadeRaiz",
    "context": "            when(unidadeService.unidadePorCodigo(1L)).thenReturn(unidadeRaizMock);\n            when(alertaService.salvar(any())).thenAnswer(i -> i.getArgument(0));\n\n            // Primeira chamada: deve buscar unidadeRaiz\n            service.criarAlertaAdmin(new Processo(), new Unidade(), \"Teste\");\n            verify(unidadeService).unidadePorCodigo(1L);\n"
  },
  {
    "file": "backend/src/test/java/sgc/alerta/AlertaFacadeTest.java",
    "type": "line",
    "line": 446,
    "length": 1,
    "text": "// Segunda chamada: busca novamente (sem cache lazy - simplifica√ß√£o para sistema pequeno)",
    "context": "            service.criarAlertaAdmin(new Processo(), new Unidade(), \"Teste\");\n            verify(unidadeService).unidadePorCodigo(1L);\n\n            // Segunda chamada: busca novamente (sem cache lazy - simplifica√ß√£o para sistema pequeno)\n            service.criarAlertaAdmin(new Processo(), new Unidade(), \"Teste 2\");\n            // No mockito, verify acumula as chamadas, mas como √© lazy, a segunda chamada n√£o deve invocar o metodo no service.\n            // Ent√£o verify(times(1)) deve ser correto para o total."
  },
  {
    "file": "backend/src/test/java/sgc/alerta/AlertaFacadeTest.java",
    "type": "line",
    "line": 448,
    "length": 2,
    "text": "// No mockito, verify acumula as chamadas, mas como √© lazy, a segunda chamada n√£o deve invocar o metodo no service.\n// Ent√£o verify(times(1)) deve ser correto para o total.",
    "context": "\n            // Segunda chamada: busca novamente (sem cache lazy - simplifica√ß√£o para sistema pequeno)\n            service.criarAlertaAdmin(new Processo(), new Unidade(), \"Teste 2\");\n            // No mockito, verify acumula as chamadas, mas como √© lazy, a segunda chamada n√£o deve invocar o metodo no service.\n            // Ent√£o verify(times(1)) deve ser correto para o total.\n            verify(unidadeService, times(2)).unidadePorCodigo(1L);\n        }\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/comum/erros/TestSecurityController.java",
    "type": "line",
    "line": 13,
    "length": 1,
    "text": "// Implementa√ß√£o vazia pois a valida√ß√£o ocorre antes da execu√ß√£o do m√©todo",
    "context": "    @SuppressWarnings(\"EmptyMethod\")\n    @PostMapping(\"/test/validacao\")\n    void teste(@Valid @RequestBody TestDto dto) {\n        // Implementa√ß√£o vazia pois a valida√ß√£o ocorre antes da execu√ß√£o do m√©todo\n    }\n\n    static class TestDto {"
  },
  {
    "file": "backend/src/test/java/sgc/comum/json/DeserializadorHtmlSanitizadoTest.java",
    "type": "line",
    "line": 96,
    "length": 1,
    "text": "// O sanitizador HTML remove tags, mas texto plano permanece",
    "context": "        String resultado = deserializador.deserialize(parser, context);\n\n\n        // O sanitizador HTML remove tags, mas texto plano permanece\n        assertThat(resultado).isNotNull();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eControllerCoverageTest.java",
    "type": "line",
    "line": 31,
    "length": 1,
    "text": "// Assert - N√£o deve lan√ßar exce√ß√£o nem fazer nada (cobertura da linha 62)",
    "context": "\n        controller.resetDatabase();\n\n        // Assert - N√£o deve lan√ßar exce√ß√£o nem fazer nada (cobertura da linha 62)\n        verify(jdbcTemplate).getDataSource();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eControllerCoverageTest.java",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Act & Assert (cobertura das linhas 206 e 207)",
    "context": "        E2eController.ProcessoFixtureRequest request = new E2eController.ProcessoFixtureRequest(\n                \"desc\", \"\", false, 30);\n\n        // Act & Assert (cobertura das linhas 206 e 207)\n        assertThatThrownBy(() -> controller.criarProcessoMapeamento(request))\n                .isInstanceOf(ErroValidacao.class)\n                .hasMessage(\"Unidade √© obrigat√≥ria\");"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eControllerTest.java",
    "type": "line",
    "line": 178,
    "length": 1,
    "text": "// Na implementa√ß√£o real do resetDatabase, ele desativa constraints.",
    "context": "        try {\n            controller.resetDatabase();\n        } catch (RuntimeException e) {\n            // Na implementa√ß√£o real do resetDatabase, ele desativa constraints.\n        }\n\n"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eControllerTest.java",
    "type": "line",
    "line": 206,
    "length": 1,
    "text": "// Verifica se tentou carregar ambos os caminhos",
    "context": "        Assertions.assertNotNull(exception);\n        Assertions.assertTrue(exception.getMessage().contains(\"Arquivo seed.sql n√£o encontrado\"));\n\n        // Verifica se tentou carregar ambos os caminhos\n        verify(resourceLoader).getResource(\"file:../e2e/setup/seed.sql\");\n        verify(resourceLoader).getResource(\"file:e2e/setup/seed.sql\");\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eControllerTest.java",
    "type": "line",
    "line": 314,
    "length": 1,
    "text": "// Create only process, no subprocess/mapa",
    "context": "    @Test\n    @DisplayName(\"Deve limpar processo sem dependentes\")\n    void deveLimparProcessoSemDependentes() {\n        // Create only process, no subprocess/mapa\n        jdbcTemplate.execute(\"INSERT INTO sgc.processo (codigo, descricao, situacao, tipo) VALUES (101, 'Proc Empty', 'CRIADO', 'MAPEAMENTO')\");\n\n        controller.limparProcessoComDependentes(101L);"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eControllerTest.java",
    "type": "line",
    "line": 338,
    "length": 1,
    "text": "// Use reflection to call private method",
    "context": "        when(processoFacade.criar(any())).thenReturn(proc);\n        when(processoFacade.obterEntidadePorId(100L)).thenReturn(proc);\n\n        // Use reflection to call private method\n        var method = E2eController.class.getDeclaredMethod(\"criarProcessoFixture\",\n                E2eController.ProcessoFixtureRequest.class, TipoProcesso.class);\n        method.setAccessible(true);"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eControllerTest.java",
    "type": "line",
    "line": 367,
    "length": 1,
    "text": "// Simular retorno de erros vazio (sucesso)",
    "context": "        when(processoFacade.criar(any())).thenReturn(proc);\n        when(processoFacade.obterEntidadePorId(100L)).thenReturn(proc);\n\n        // Simular retorno de erros vazio (sucesso)\n        when(processoFacade.iniciarProcessoMapeamento(anyLong(), anyList())).thenReturn(List.of());\n\n        var method = E2eController.class.getDeclaredMethod(\"criarProcessoFixture\","
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eFixtureEndpointTest.java",
    "type": "line",
    "line": 37,
    "length": 1,
    "text": "// Resetar banco para garantir massa de dados (seed.sql)",
    "context": "    @BeforeEach\n    void setup() throws Exception {\n        mockMvc = MockMvcBuilders.webAppContextSetup(context).apply(springSecurity()).build();\n        // Resetar banco para garantir massa de dados (seed.sql)\n        mockMvc.perform(post(\"/e2e/reset-database\")).andExpect(status().isOk());\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eFixtureEndpointTest.java",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Preparar requisi√ß√£o",
    "context": "    @Test\n    @DisplayName(\"Deve permitir criar processo de mapeamento via fixture\")\n    void devePermitirCriarProcessoMapeamentoViaFixture() throws Exception {\n        // Preparar requisi√ß√£o\n        E2eController.ProcessoFixtureRequest request =\n                new E2eController.ProcessoFixtureRequest(\n                        \"Processo Fixture Teste Mapeamento\", \"ASSESSORIA_11\", false, 30);"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eFixtureEndpointTest.java",
    "type": "line",
    "line": 49,
    "length": 1,
    "text": "// Executar e Validar",
    "context": "                new E2eController.ProcessoFixtureRequest(\n                        \"Processo Fixture Teste Mapeamento\", \"ASSESSORIA_11\", false, 30);\n\n        // Executar e Validar\n        mockMvc.perform(\n                        post(\"/e2e/fixtures/processo-mapeamento\")\n                                .contentType(MediaType.APPLICATION_JSON)"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eFixtureEndpointTest.java",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Preparar requisi√ß√£o",
    "context": "    @Test\n    @DisplayName(\"Deve permitir criar e iniciar processo de mapeamento via fixture\")\n    void devePermitirCriarEIniciarProcessoMapeamentoViaFixture() throws Exception {\n        // Preparar requisi√ß√£o\n        E2eController.ProcessoFixtureRequest request =\n                new E2eController.ProcessoFixtureRequest(\n                        \"Processo Fixture Teste Mapeamento Iniciado\","
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eFixtureEndpointTest.java",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Executar e Validar",
    "context": "                        true, // iniciar = true\n                        30);\n\n        // Executar e Validar\n        mockMvc.perform(post(\"/e2e/fixtures/processo-mapeamento\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(objectMapper.writeValueAsString(request)))"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eFixtureEndpointTest.java",
    "type": "line",
    "line": 85,
    "length": 1,
    "text": "// Preparar requisi√ß√£o com unidade inexistente",
    "context": "    @Test\n    @DisplayName(\"Deve retornar erro quando unidade n√£o existe\")\n    void deveRetornarErroQuandoUnidadeNaoExiste() throws Exception {\n        // Preparar requisi√ß√£o com unidade inexistente\n        E2eController.ProcessoFixtureRequest request =\n                new E2eController.ProcessoFixtureRequest(\n                        \"Processo Fixture Teste\", \"UNIDADE_INEXISTENTE\", false, 30);"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eFixtureEndpointTest.java",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// Executar e Validar",
    "context": "                new E2eController.ProcessoFixtureRequest(\n                        \"Processo Fixture Teste\", \"UNIDADE_INEXISTENTE\", false, 30);\n\n        // Executar e Validar\n        mockMvc.perform(post(\"/e2e/fixtures/processo-mapeamento\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(objectMapper.writeValueAsString(request)))"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eFixtureEndpointTest.java",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Preparar requisi√ß√£o sem descri√ß√£o",
    "context": "    @Test\n    @DisplayName(\"Deve gerar descri√ß√£o autom√°tica quando n√£o fornecida\")\n    void deveGerarDescricaoAutomaticaQuandoNaoFornecida() throws Exception {\n        // Preparar requisi√ß√£o sem descri√ß√£o\n        E2eController.ProcessoFixtureRequest request =\n                new E2eController.ProcessoFixtureRequest(\n                        null, // sem descri√ß√£o"
  },
  {
    "file": "backend/src/test/java/sgc/e2e/E2eFixtureEndpointTest.java",
    "type": "line",
    "line": 108,
    "length": 1,
    "text": "// Executar e Validar",
    "context": "                        false,\n                        30);\n\n        // Executar e Validar\n        mockMvc.perform(post(\"/e2e/fixtures/processo-mapeamento\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(objectMapper.writeValueAsString(request)))"
  },
  {
    "file": "backend/src/test/java/sgc/fixture/SubprocessoFixture.java",
    "type": "line",
    "line": 22,
    "length": 1,
    "text": "// Without ID, for saving",
    "context": "    }\n\n    public static Subprocesso novoSubprocesso(Processo processo, Unidade unidade) {\n        // Without ID, for saving\n        Subprocesso subprocesso = subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        return subprocesso;"
  },
  {
    "file": "backend/src/test/java/sgc/fixture/UnidadeFixture.java",
    "type": "line",
    "line": 19,
    "length": 1,
    "text": "// Campos obrigat√≥rios para VW_UNIDADE (simula view de sistema externo)",
    "context": "        unidade.setSigla(\"UPD\");\n        unidade.setSituacao(SituacaoUnidade.ATIVA);\n        unidade.setTipo(TipoUnidade.OPERACIONAL);\n        // Campos obrigat√≥rios para VW_UNIDADE (simula view de sistema externo)\n        unidade.setTituloTitular(DEFAULT_TITULO_TITULAR);\n        unidade.setMatriculaTitular(DEFAULT_MATRICULA_TITULAR);\n        unidade.setDataInicioTitularidade(LocalDateTime.now().minusYears(1));"
  },
  {
    "file": "backend/src/test/java/sgc/fixture/UsuarioFixture.java",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// Unidade Lotacao Default",
    "context": "        usuario.setNome(\"Usu√°rio Teste\");\n        usuario.setEmail(\"teste@example.com\");\n        usuario.setRamal(\"1234\");\n        // Unidade Lotacao Default\n        usuario.setUnidadeLotacao(UnidadeFixture.unidadePadrao());\n        return usuario;\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/fixture/UsuarioFixture.java",
    "type": "line",
    "line": 42,
    "length": 3,
    "text": "// Gera matr√≠cula a partir do t√≠tulo de forma segura\n// Se t√≠tulo tem >= 8 caracteres, pega os √∫ltimos 8\n// Sen√£o, preenche com zeros √† esquerda at√© ter 8 caracteres",
    "context": "    public static Usuario usuarioComTitulo(String titulo) {\n        Usuario usuario = usuarioPadrao();\n        usuario.setTituloEleitoral(titulo);\n        // Gera matr√≠cula a partir do t√≠tulo de forma segura\n        // Se t√≠tulo tem >= 8 caracteres, pega os √∫ltimos 8\n        // Sen√£o, preenche com zeros √† esquerda at√© ter 8 caracteres\n        String matricula;\n        if (titulo.length() >= 8) {\n            matricula = titulo.substring(titulo.length() - 8);"
  },
  {
    "file": "backend/src/test/java/sgc/fixture/UsuarioFixture.java",
    "type": "line",
    "line": 49,
    "length": 1,
    "text": "// Preenche com zeros √† esquerda",
    "context": "        if (titulo.length() >= 8) {\n            matricula = titulo.substring(titulo.length() - 8);\n        } else {\n            // Preenche com zeros √† esquerda\n            matricula = String.format(\"%08d\", titulo.chars().sum()); // Hash simples baseado na soma dos caracteres\n        }\n        usuario.setMatricula(matricula);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// Setup Unidade Admin",
    "context": "    @BeforeEach\n    void setUp() {\n\n        // Setup Unidade Admin\n        unidadeAdmin = UnidadeFixture.unidadePadrao();\n        unidadeAdmin.setCodigo(null);\n        unidadeAdmin.setSigla(\"ADM-UNIT-TEST\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Setup Usuario Admin",
    "context": "        unidadeAdmin.setNome(\"Unidade Admin Teste\");\n        unidadeAdmin = unidadeRepo.saveAndFlush(unidadeAdmin);\n\n        // Setup Usuario Admin\n        usuarioAdmin = UsuarioFixture.usuarioComPerfil(unidadeAdmin, Perfil.ADMIN);\n        usuarioAdmin.setTituloEleitoral(\"999999990001\");\n        usuarioAdmin.setNome(\"Admin User Teste\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 59,
    "length": 1,
    "text": "// Persist Perfil via JDBC explicitly",
    "context": "        usuarioAdmin.setNome(\"Admin User Teste\");\n        usuarioAdmin = usuarioRepo.saveAndFlush(usuarioAdmin);\n\n        // Persist Perfil via JDBC explicitly\n        jdbcTemplate.update(\n                \"INSERT INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, perfil, unidade_codigo) VALUES (?, ?, ?)\",\n                usuarioAdmin.getTituloEleitoral(), \"ADMIN\", unidadeAdmin.getCodigo());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 64,
    "length": 1,
    "text": "// Setup Unidade Gestor",
    "context": "                \"INSERT INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, perfil, unidade_codigo) VALUES (?, ?, ?)\",\n                usuarioAdmin.getTituloEleitoral(), \"ADMIN\", unidadeAdmin.getCodigo());\n\n        // Setup Unidade Gestor\n        unidadeGestor = UnidadeFixture.unidadePadrao();\n        unidadeGestor.setCodigo(null);\n        unidadeGestor.setSigla(\"GES-UNIT-TEST\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Setup Usuario Gestor",
    "context": "        unidadeGestor.setNome(\"Unidade Gestor Teste\");\n        unidadeGestor = unidadeRepo.saveAndFlush(unidadeGestor);\n\n        // Setup Usuario Gestor\n        usuarioGestor = UsuarioFixture.usuarioPadrao();\n        usuarioGestor.setTituloEleitoral(\"999999990002\");\n        usuarioGestor.setNome(\"Gestor User Teste\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 77,
    "length": 2,
    "text": "// Persist Perfis via JDBC explicitly (ADMIN na unidadeAdmin, GESTOR na\n// unidadeGestor)",
    "context": "        usuarioGestor.setNome(\"Gestor User Teste\");\n        usuarioGestor = usuarioRepo.saveAndFlush(usuarioGestor);\n\n        // Persist Perfis via JDBC explicitly (ADMIN na unidadeAdmin, GESTOR na\n        // unidadeGestor)\n        jdbcTemplate.update(\n                \"INSERT INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, perfil, unidade_codigo) VALUES (?, ?, ?)\",\n                usuarioGestor.getTituloEleitoral(), \"ADMIN\", unidadeAdmin.getCodigo());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 88,
    "length": 1,
    "text": "// Reload entities to ensure they are managed and up-to-date",
    "context": "\n        entityManager.clear(); // Clear cache to ensure subsequent reads fetch fresh data including profiles\n\n        // Reload entities to ensure they are managed and up-to-date\n        unidadeAdmin = unidadeRepo.findById(unidadeAdmin.getCodigo()).orElseThrow();\n        unidadeGestor = unidadeRepo.findById(unidadeGestor.getCodigo()).orElseThrow();\n        usuarioAdmin = usuarioRepo.findById(usuarioAdmin.getTituloEleitoral()).orElseThrow();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 126,
    "length": 1,
    "text": "// Act & Assert: Etapa 3 - Entrar",
    "context": "                    .andExpect(jsonPath(\"$[0].perfil\").value(\"ADMIN\"))\n                    .andExpect(jsonPath(\"$[0].unidade.sigla\").value(unidadeAdmin.getSigla()));\n\n            // Act & Assert: Etapa 3 - Entrar\n            EntrarRequest entrarReq = EntrarRequest.builder()\n                    .tituloEleitoral(tituloEleitoral)\n                    .perfil(\"ADMIN\")"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 170,
    "length": 1,
    "text": "// Entrar como GESTOR na unidadeGestor",
    "context": "                    .andExpect(jsonPath(\"$[*].perfil\")\n                            .value(containsInAnyOrder(\"ADMIN\", \"GESTOR\")));\n\n            // Entrar como GESTOR na unidadeGestor\n            EntrarRequest entrarReq = EntrarRequest.builder()\n                    .tituloEleitoral(tituloEleitoral)\n                    .perfil(\"GESTOR\")"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 190,
    "length": 1,
    "text": "// N√£o realizamos a autentica√ß√£o pr√©via para simular um usu√°rio n√£o autenticado.",
    "context": "\n            String tituloEleitoral = \"888888888888\"; // Usu√°rio inexistente\n\n            // N√£o realizamos a autentica√ß√£o pr√©via para simular um usu√°rio n√£o autenticado.\n\n            // Act & Assert\n            // Sem autentica√ß√£o pr√©via (sess√£o v√°lida), a tentativa de autorizar deve ser"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 192,
    "length": 3,
    "text": "// Act & Assert\n// Sem autentica√ß√£o pr√©via (sess√£o v√°lida), a tentativa de autorizar deve ser\n// rejeitada com 401 (Unauthorized)",
    "context": "\n            // N√£o realizamos a autentica√ß√£o pr√©via para simular um usu√°rio n√£o autenticado.\n\n            // Act & Assert\n            // Sem autentica√ß√£o pr√©via (sess√£o v√°lida), a tentativa de autorizar deve ser\n            // rejeitada com 401 (Unauthorized)\n            AutorizarRequest autorizarReq = AutorizarRequest.builder().tituloEleitoral(tituloEleitoral)\n                    .build();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 212,
    "length": 1,
    "text": "// Pre-authenticate (Required by security fix)",
    "context": "            String tituloEleitoral = usuarioAdmin.getTituloEleitoral();\n            long codigoUnidadeInexistente = 999999L;\n\n            // Pre-authenticate (Required by security fix)\n            AutenticarRequest authRequest = AutenticarRequest.builder()\n                    .tituloEleitoral(tituloEleitoral)\n                    .senha(\"any\")"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU01IntegrationTest.java",
    "type": "line",
    "line": 229,
    "length": 2,
    "text": "// Act & Assert\n// A unidade inexistente retorna 404 (NOT_FOUND) via ErroEntidadeNaoEncontrada",
    "context": "                    .unidadeCodigo(codigoUnidadeInexistente)\n                    .build();\n\n            // Act & Assert\n            // A unidade inexistente retorna 404 (NOT_FOUND) via ErroEntidadeNaoEncontrada\n            mockMvc.perform(post(BASE_URL + \"/entrar\")\n                            .with(csrf())\n                            .cookie(cookies)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 42,
    "length": 2,
    "text": "// Removido: JdbcTemplate n√£o √© necess√°rio pois @Transactional garante isolamento\n// e os testes usam IDs din√¢micos.",
    "context": "    @Autowired\n    private AlertaRepo alertaRepo;\n\n    // Removido: JdbcTemplate n√£o √© necess√°rio pois @Transactional garante isolamento\n    // e os testes usam IDs din√¢micos.\n\n    private Unidade unidadeRaiz;\n    private Unidade unidadeFilha1;"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Setup Program√°tico - N√£o depende do data.sql",
    "context": "\n    @BeforeEach\n    void setup() {\n        // Setup Program√°tico - N√£o depende do data.sql\n\n\n        // Raiz"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Raiz",
    "context": "        // Setup Program√°tico - N√£o depende do data.sql\n\n\n        // Raiz\n        unidadeRaiz = UnidadeFixture.unidadePadrao();\n        unidadeRaiz.setCodigo(null); // Auto-increment\n        unidadeRaiz.setNome(\"Unidade Raiz Teste\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 62,
    "length": 1,
    "text": "// Filha 1 -> Raiz",
    "context": "        unidadeRaiz.setNome(\"Unidade Raiz Teste\");\n        unidadeRaiz = unidadeRepo.save(unidadeRaiz);\n\n        // Filha 1 -> Raiz\n        unidadeFilha1 = UnidadeFixture.unidadePadrao();\n        unidadeFilha1.setCodigo(null);\n        unidadeFilha1.setNome(\"Unidade Filha 1 Teste\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 69,
    "length": 1,
    "text": "// Filha 2 -> Raiz",
    "context": "        unidadeFilha1.setUnidadeSuperior(unidadeRaiz);\n        unidadeFilha1 = unidadeRepo.save(unidadeFilha1);\n\n        // Filha 2 -> Raiz\n        unidadeFilha2 = UnidadeFixture.unidadePadrao();\n        unidadeFilha2.setCodigo(null);\n        unidadeFilha2.setNome(\"Unidade Filha 2 Teste\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 96,
    "length": 1,
    "text": "// Flush para garantir persist√™ncia antes dos testes",
    "context": "        processoCriado.adicionarParticipantes(Set.of(unidadeRaiz));\n        processoRepo.save(processoCriado);\n\n        // Flush para garantir persist√™ncia antes dos testes\n        unidadeRepo.flush();\n        processoRepo.flush();\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 102,
    "length": 1,
    "text": "// Cria usu√°rio dinamicamente se n√£o existir",
    "context": "    }\n\n    private Usuario setupSecurityContext(String tituloEleitoral, Unidade unidade, String... perfis) {\n        // Cria usu√°rio dinamicamente se n√£o existir\n        Usuario usuario = usuarioRepo.findById(tituloEleitoral).orElseGet(() -> {\n            Usuario newUser = UsuarioFixture.usuarioComTitulo(tituloEleitoral);\n            newUser.setUnidadeLotacao(unidade);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 109,
    "length": 1,
    "text": "// Configura perfil e unidade ativos da sess√£o",
    "context": "            return usuarioRepo.save(newUser);\n        });\n\n        // Configura perfil e unidade ativos da sess√£o\n        if (perfis.length > 0) {\n            Perfil p = Perfil.valueOf(perfis[0]);\n            usuario.setPerfilAtivo(p);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 116,
    "length": 1,
    "text": "// Define authorities como apenas o perfil selecionado para simular o comportamento do FiltroJwt",
    "context": "            usuario.setUnidadeAtivaCodigo(unidade.getCodigo());\n        }\n\n        // Define authorities como apenas o perfil selecionado para simular o comportamento do FiltroJwt\n        Set<GrantedAuthority> authorities = Collections.emptySet();\n        if (perfis.length > 0) {\n            authorities = Set.of(new SimpleGrantedAuthority(\"ROLE_\" + perfis[0]));"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 139,
    "length": 1,
    "text": "// Requisito CDU-02: Processos na situa√ß√£o 'Criado' dever√£o ser listados apenas se o usu√°rio estiver logado com o perfil ADMIN.",
    "context": "        @WithMockAdmin\n        @DisplayName(\"CDU-02: ADMIN deve ver todos os processos, incluindo os com status 'Criado'\")\n        void testListarProcessosAdminVeTodos() throws Exception {\n            // Requisito CDU-02: Processos na situa√ß√£o 'Criado' dever√£o ser listados apenas se o usu√°rio estiver logado com o perfil ADMIN.\n            mockMvc.perform(get(API_PAINEL_PROCESSOS)\n                            .param(PERFIL, \"ADMIN\")\n                            .param(UNIDADE, unidadeRaiz.getCodigo().toString())) // Uso de ID din√¢mico"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 160,
    "length": 1,
    "text": "// Deve ver o da Raiz e o da Filha (CDU-02: Processos ... que incluam entre as unidades participantes a unidade do usu√°rio e/ou suas unidades subordinadas)",
    "context": "                                    .param(PERFIL, GESTOR)\n                                    .param(UNIDADE, unidadeRaiz.getCodigo().toString()))\n                    .andExpect(status().isOk())\n                    // Deve ver o da Raiz e o da Filha (CDU-02: Processos ... que incluam entre as unidades participantes a unidade do usu√°rio e/ou suas unidades subordinadas)\n                    .andExpect(jsonPath(PROCESSO_RAIZ_JSON_PATH).exists())\n                    .andExpect(jsonPath(PROCESSO_FILHA_1_JSON_PATH).exists())\n                    // GESTOR n√£o v√™ processos com status CRIADO (regra confirmada)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 163,
    "length": 1,
    "text": "// GESTOR n√£o v√™ processos com status CRIADO (regra confirmada)",
    "context": "                    // Deve ver o da Raiz e o da Filha (CDU-02: Processos ... que incluam entre as unidades participantes a unidade do usu√°rio e/ou suas unidades subordinadas)\n                    .andExpect(jsonPath(PROCESSO_RAIZ_JSON_PATH).exists())\n                    .andExpect(jsonPath(PROCESSO_FILHA_1_JSON_PATH).exists())\n                    // GESTOR n√£o v√™ processos com status CRIADO (regra confirmada)\n                    .andExpect(jsonPath(\"$.content[?(@.descricao == 'Processo Criado Teste')]\").doesNotExist());\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 173,
    "length": 1,
    "text": "// Unidade Filha 2 n√£o tem processos no setup",
    "context": "        void testListarProcessosChefeUnidadeFilha2NaoVeProcessosDeOutros() throws Exception {\n            setupSecurityContext(\"99002\", unidadeFilha2, CHEFE);\n\n            // Unidade Filha 2 n√£o tem processos no setup\n            mockMvc.perform(\n                            get(API_PAINEL_PROCESSOS)\n                                    .param(PERFIL, CHEFE)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 200,
    "length": 1,
    "text": "// Deve ver Raiz e Filha (Em Andamento)",
    "context": "                                    .param(PERFIL, GESTOR)\n                                    .param(UNIDADE, unidadeRaiz.getCodigo().toString()))\n                    .andExpect(status().isOk())\n                    // Deve ver Raiz e Filha (Em Andamento)\n                    .andExpect(jsonPath(PROCESSO_FILHA_1_JSON_PATH).exists())\n                    // N√ÉO deve ver Criado Filha\n                    .andExpect(jsonPath(\"$.content[?(@.descricao == 'Processo Criado Filha')]\").doesNotExist());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 202,
    "length": 1,
    "text": "// N√ÉO deve ver Criado Filha",
    "context": "                    .andExpect(status().isOk())\n                    // Deve ver Raiz e Filha (Em Andamento)\n                    .andExpect(jsonPath(PROCESSO_FILHA_1_JSON_PATH).exists())\n                    // N√ÉO deve ver Criado Filha\n                    .andExpect(jsonPath(\"$.content[?(@.descricao == 'Processo Criado Filha')]\").doesNotExist());\n        }\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 233,
    "length": 1,
    "text": "// Alerta para Unidade Filha 1 (Subordinada √† Raiz)",
    "context": "        @WithMockUser(username = \"99005\")\n        void testListarAlertasUsuarioVeAlertasDaSuaUnidade() throws Exception {\n            setupSecurityContext(\"99005\", unidadeRaiz, GESTOR);\n            // Alerta para Unidade Filha 1 (Subordinada √† Raiz)\n            Alerta alerta = AlertaFixture.alertaParaUnidade(processoFilha1, unidadeFilha1);\n            alerta.setCodigo(null);\n            alerta.setDescricao(\"Alerta Subordinada Teste\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 242,
    "length": 1,
    "text": "// Painel n√£o mostra alertas de subordinadas (regra atual do c√≥digo)",
    "context": "            mockMvc.perform(get(API_PAINEL_ALERTAS)\n                            .param(UNIDADE, unidadeRaiz.getCodigo().toString()))\n                    .andExpect(status().isOk())\n                    // Painel n√£o mostra alertas de subordinadas (regra atual do c√≥digo)\n                    .andExpect(jsonPath(\"$.content[?(@.descricao == 'Alerta Subordinada Teste')]\").doesNotExist());\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU02IntegrationTest.java",
    "type": "line",
    "line": 252,
    "length": 1,
    "text": "// Alerta para Unidade Filha 1 (Irm√£, n√£o subordinada)",
    "context": "        void testListarAlertasUsuarioNaoVeAlertasDeOutros() throws Exception {\n            Usuario usuario = setupSecurityContext(\"99006\", unidadeFilha2, CHEFE);\n\n            // Alerta para Unidade Filha 1 (Irm√£, n√£o subordinada)\n            Alerta alerta = AlertaFixture.alertaParaUnidade(processoFilha1, unidadeFilha1);\n            alerta.setCodigo(null);\n            alerta.setDescricao(\"Alerta Outra Unidade\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU03IntegrationTest.java",
    "type": "line",
    "line": 37,
    "length": 1,
    "text": "// Create fixtures using saveAndFlush to ensure visibility",
    "context": "    @BeforeEach\n    void setup() {\n\n        // Create fixtures using saveAndFlush to ensure visibility\n        unidade1 = UnidadeFixture.unidadePadrao();\n        unidade1.setCodigo(null);\n        unidade1.setNome(\"Unidade 1\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU03IntegrationTest.java",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// 'Criado'",
    "context": "                .andExpect(\n                        jsonPath(\"$.situacao\")\n                                .value(\"CRIADO\")); // Verifica se a situa√ß√£o inicial √©\n        // 'Criado'\n    }\n\n    @Test"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU03IntegrationTest.java",
    "type": "line",
    "line": 101,
    "length": 1,
    "text": "// valida√ß√£o",
    "context": "                .andExpect(\n                        jsonPath(\"$.subErrors[0].message\")\n                                .value(\"Preencha a descri√ß√£o\")); // Mensagem de\n        // valida√ß√£o\n    }\n\n    @Test"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU03IntegrationTest.java",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Ignore for test purposes",
    "context": "            Files.createDirectories(Paths.get(\"build\"));\n            Files.writeString(Paths.get(\"build/test-output.txt\"), responseBody);\n        } catch (IOException e) {\n            // Ignore for test purposes\n        }\n\n        // Re-add the assertion to keep the test failing, but now we get the output"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU03IntegrationTest.java",
    "type": "line",
    "line": 127,
    "length": 1,
    "text": "// Re-add the assertion to keep the test failing, but now we get the output",
    "context": "            // Ignore for test purposes\n        }\n\n        // Re-add the assertion to keep the test failing, but now we get the output\n        mockMvc.perform(\n                        post(API_PROCESSOS)\n                                .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU03IntegrationTest.java",
    "type": "line",
    "line": 139,
    "length": 1,
    "text": "// Teste para edi√ß√£o de processo (requer um processo existente)",
    "context": "                                .value(\"Pelo menos uma unidade participante deve ser inclu√≠da.\"));\n    }\n\n    // Teste para edi√ß√£o de processo (requer um processo existente)\n    @Test\n    void testEditarProcesso_sucesso() throws Exception {\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU03IntegrationTest.java",
    "type": "line",
    "line": 160,
    "length": 1,
    "text": "// 2. Editar o processo",
    "context": "                .get(\"codigo\")\n                .asLong();\n\n        // 2. Editar o processo\n        List<Long> unidadesEditadas = new ArrayList<>();\n        unidadesEditadas.add(unidade1.getCodigo());\n        unidadesEditadas.add(unidade2.getCodigo()); // Adiciona outra unidade"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU03IntegrationTest.java",
    "type": "line",
    "line": 168,
    "length": 1,
    "text": "// Tipo n√£o pode ser alterado na edi√ß√£o, mas √© enviado no DTO",
    "context": "        AtualizarProcessoRequest editarRequestDTO = criarAtualizarProcessoReq(\n                processoId,\n                \"Processo Editado\",\n                // Tipo n√£o pode ser alterado na edi√ß√£o, mas √© enviado no DTO\n                unidadesEditadas,\n                LocalDateTime.now().plusDays(40) // Nova data limite\n        );"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU03IntegrationTest.java",
    "type": "line",
    "line": 225,
    "length": 1,
    "text": "// 2. Remover o processo",
    "context": "                .get(\"codigo\")\n                .asLong();\n\n        // 2. Remover o processo\n        mockMvc.perform(post(API_PROCESSOS + \"/{codProcesso}/excluir\", processoId).with(csrf()))\n                .andExpect(status().isNoContent()); // 204 No Content para remo√ß√£o bem-sucedida\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU04IntegrationTest.java",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// Cria unidade programaticamente",
    "context": "    @BeforeEach\n    void setup() {\n\n        // Cria unidade programaticamente\n        unidadeLivre = UnidadeFixture.unidadePadrao();\n        unidadeLivre.setCodigo(null);\n        unidadeLivre.setSigla(\"U_LIVRE_MAPP\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU04IntegrationTest.java",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Cria titular para a unidade (para garantir envio de notifica√ß√£o)",
    "context": "        unidadeLivre.setNome(\"Unidade Livre Mapeamento\");\n        unidadeLivre = unidadeRepo.save(unidadeLivre);\n\n        // Cria titular para a unidade (para garantir envio de notifica√ß√£o)\n        Usuario titular = UsuarioFixture.usuarioPadrao();\n        titular.setTituloEleitoral(\"999999999999\");\n        titular.setEmail(\"titular@teste.com\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU04IntegrationTest.java",
    "type": "line",
    "line": 59,
    "length": 1,
    "text": "// Associa titular √† unidade",
    "context": "        titular.setEmail(\"titular@teste.com\");\n        titular = usuarioRepo.save(titular);\n\n        // Associa titular √† unidade\n        unidadeLivre.setTituloTitular(titular.getTituloEleitoral());\n        unidadeLivre.setMatriculaTitular(titular.getMatricula());\n        unidadeRepo.save(unidadeLivre);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU04IntegrationTest.java",
    "type": "line",
    "line": 64,
    "length": 2,
    "text": "// Tamb√©m precisamos associar o perfil CHEFE ao usu√°rio na unidade para que ele\n// seja encontrado pelo UsuarioFacade",
    "context": "        unidadeLivre.setMatriculaTitular(titular.getMatricula());\n        unidadeRepo.save(unidadeLivre);\n\n        // Tamb√©m precisamos associar o perfil CHEFE ao usu√°rio na unidade para que ele\n        // seja encontrado pelo UsuarioFacade\n        UsuarioPerfil perfilChefe = UsuarioPerfil.builder()\n                .usuarioTitulo(titular.getTituloEleitoral())\n                .usuario(titular)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU04IntegrationTest.java",
    "type": "line",
    "line": 113,
    "length": 1,
    "text": "// Verificar subprocesso da unidade livre",
    "context": "        List<Subprocesso> subprocessos = subprocessoRepo.findByProcessoCodigo(processoId);\n        assertThat(subprocessos).hasSize(1);\n\n        // Verificar subprocesso da unidade livre\n        Subprocesso sub = subprocessos.stream()\n                .filter(s -> s.getUnidade().getCodigo().equals(unidadeLivre.getCodigo()))\n                .findFirst()"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU04IntegrationTest.java",
    "type": "line",
    "line": 120,
    "length": 1,
    "text": "// Verificar que o mapa n√£o tem compet√™ncias (Mapeamento inicia vazio)",
    "context": "                .orElseThrow();\n        assertThat(sub.getMapa()).isNotNull();\n\n        // Verificar que o mapa n√£o tem compet√™ncias (Mapeamento inicia vazio)\n        List<Competencia> competencias = competenciaRepo.findByMapa_Codigo(sub.getMapa().getCodigo());\n        assertThat(competencias).isEmpty();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU04IntegrationTest.java",
    "type": "line",
    "line": 129,
    "length": 2,
    "text": "// e n√£o podem ser verificadas diretamente via Mockito\n// O teste de envio de emails est√° em NotificacaoEmailServiceTest",
    "context": "        assertThat(alertasCount).isGreaterThan(0);\n\n\n        // e n√£o podem ser verificadas diretamente via Mockito\n        // O teste de envio de emails est√° em NotificacaoEmailServiceTest\n    }\n}\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU05IntegrationTest.java",
    "type": "line",
    "line": 57,
    "length": 1,
    "text": "// Cria um mapa detalhado para ser copiado",
    "context": "        unidade.setNome(\"Unidade Revis√£o\");\n        unidade = unidadeRepo.save(unidade);\n\n        // Cria um mapa detalhado para ser copiado\n        mapaOriginal = new Mapa();\n        mapaRepo.save(mapaOriginal);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU05IntegrationTest.java",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// Preencher dados originais no mapa para verificar se s√£o limpos",
    "context": "        unidade.setUnidadeSuperior(unidadeSuperior);\n        unidade = unidadeRepo.save(unidade);\n\n        // Preencher dados originais no mapa para verificar se s√£o limpos\n        mapaOriginal.setSugestoes(\"Sugest√µes Legadas\");\n        mapaOriginal.setObservacoesDisponibilizacao(\"Observa√ß√µes Legadas\");\n        mapaRepo.save(mapaOriginal);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU05IntegrationTest.java",
    "type": "line",
    "line": 126,
    "length": 1,
    "text": "// 3. Iniciar o processo de revis√£o",
    "context": "                .asLong();\n        var iniciarReq = new IniciarProcessoRequest(TipoProcesso.REVISAO, unidades);\n\n        // 3. Iniciar o processo de revis√£o\n        mockMvc.perform(post(API_PROCESSOS_ID_INICIAR, processoId)\n                        .with(csrf())\n                        .contentType(MediaType.APPLICATION_JSON)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU05IntegrationTest.java",
    "type": "line",
    "line": 145,
    "length": 1,
    "text": "// 5.1. Verificar se o mapa copiado √© uma nova inst√¢ncia (c√≥digo diferente)",
    "context": "        Subprocesso subprocessoCriado = subprocessos.getFirst();\n        Mapa mapaCopiado = subprocessoCriado.getMapa();\n\n        // 5.1. Verificar se o mapa copiado √© uma nova inst√¢ncia (c√≥digo diferente)\n        assertThat(mapaCopiado.getCodigo()).isNotNull();\n        assertThat(mapaCopiado.getCodigo()).isNotEqualTo(mapaOriginal.getCodigo());\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU05IntegrationTest.java",
    "type": "line",
    "line": 149,
    "length": 1,
    "text": "// 5.2. Verificar se campos foram limpos (Passo 9/10)",
    "context": "        assertThat(mapaCopiado.getCodigo()).isNotNull();\n        assertThat(mapaCopiado.getCodigo()).isNotEqualTo(mapaOriginal.getCodigo());\n\n        // 5.2. Verificar se campos foram limpos (Passo 9/10)\n        assertThat(mapaCopiado.getSugestoes()).isNull();\n        assertThat(mapaCopiado.getObservacoesDisponibilizacao()).isNull();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU05IntegrationTest.java",
    "type": "line",
    "line": 153,
    "length": 1,
    "text": "// 5.3. Verificar se o conte√∫do foi copiado",
    "context": "        assertThat(mapaCopiado.getSugestoes()).isNull();\n        assertThat(mapaCopiado.getObservacoesDisponibilizacao()).isNull();\n\n        // 5.3. Verificar se o conte√∫do foi copiado\n        List<Competencia> competenciasCopiadas = competenciaRepo.findByMapa_Codigo(mapaCopiado.getCodigo());\n        assertThat(competenciasCopiadas).hasSize(1);\n        assertThat(competenciasCopiadas.getFirst().getDescricao())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU05IntegrationTest.java",
    "type": "line",
    "line": 180,
    "length": 1,
    "text": "// A valida√ß√£o agora ocorre na cria√ß√£o do processo",
    "context": "                \"Processo de Revis√£o para Unidade Sem Mapa\", unidades,\n                LocalDateTime.now().plusDays(30));\n\n        // A valida√ß√£o agora ocorre na cria√ß√£o do processo\n        mockMvc.perform(post(\"/api/processos\")\n                        .with(csrf())\n                        .contentType(MediaType.APPLICATION_JSON)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU05IntegrationTest.java",
    "type": "line",
    "line": 218,
    "length": 1,
    "text": "// Inicia o processo a primeira vez",
    "context": "                .asLong();\n        var iniciarReq = new IniciarProcessoRequest(TipoProcesso.REVISAO, unidades);\n\n        // Inicia o processo a primeira vez\n        mockMvc.perform(post(API_PROCESSOS_ID_INICIAR, processoId)\n                        .with(csrf())\n                        .contentType(MediaType.APPLICATION_JSON)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU06IntegrationTest.java",
    "type": "line",
    "line": 47,
    "length": 1,
    "text": "// Cria unidade programaticamente",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Cria unidade programaticamente\n        unidade = UnidadeFixture.unidadePadrao();\n        unidade.setSigla(\"U_TESTE\");\n        unidade.setNome(\"Unidade Teste\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU06IntegrationTest.java",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Cria processo",
    "context": "        unidade.setNome(\"Unidade Teste\");\n        unidade = unidadeRepo.save(unidade);\n\n        // Cria processo\n        processo = new Processo();\n        processo.setDescricao(\"Processo de Teste\");\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU07IntegrationTest.java",
    "type": "line",
    "line": 20,
    "length": 1,
    "text": "// Subprocesso 60000 (Unidade 8 - SEDESENV) do data.sql",
    "context": "    @WithMockAdmin\n    @DisplayName(\"ADMIN pode visualizar qualquer subprocesso\")\n    void adminPodeVisualizar() throws Exception {\n        // Subprocesso 60000 (Unidade 8 - SEDESENV) do data.sql\n        mockMvc.perform(\n                        get(\"/api/subprocessos/{id}\", 60000L)\n                                .param(\"perfil\", \"ADMIN\"))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU07IntegrationTest.java",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// Chefe Teste - Chefe da Unidade 9 no data.sql tentando ver subprocesso da 8",
    "context": "\n    @Test\n    @WithMockCustomUser(tituloEleitoral = \"333333333333\", perfis = {\"CHEFE\"}, unidadeId = 9L)\n    // Chefe Teste - Chefe da Unidade 9 no data.sql tentando ver subprocesso da 8\n    @DisplayName(\"CHEFE N√ÉO pode visualizar o subprocesso de outra unidade\")\n    void chefeNaoPodeVisualizarOutraUnidade() throws Exception {\n        mockMvc.perform("
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU08IntegrationTest.java",
    "type": "line",
    "line": 86,
    "length": 1,
    "text": "// Configura√ß√£o manual de autentica√ß√£o",
    "context": "                .build();\n        usuarioPerfilRepo.save(perfilChefe);\n\n        // Configura√ß√£o manual de autentica√ß√£o\n        chefe.setPerfilAtivo(Perfil.CHEFE);\n        chefe.setUnidadeAtivaCodigo(unidadeDestino.getCodigo());\n        chefe.setAuthorities(Set.of(new SimpleGrantedAuthority(\"ROLE_CHEFE\")));"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU08IntegrationTest.java",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// 3. Processo Origem (FINALIZADO) - Permite importa√ß√£o de qualquer unidade",
    "context": "        Authentication auth = new UsernamePasswordAuthenticationToken(chefe, null, chefe.getAuthorities());\n        SecurityContextHolder.getContext().setAuthentication(auth);\n\n        // 3. Processo Origem (FINALIZADO) - Permite importa√ß√£o de qualquer unidade\n        Processo processoOrigem = Processo.builder()\n                .descricao(\"Processo Origem Finalizado\")\n                .tipo(TipoProcesso.MAPEAMENTO)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU08IntegrationTest.java",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// 4. Processo Destino (EM ANDAMENTO)",
    "context": "        conhecimentoRepo.save(Conhecimento.builder().descricao(\"Conhecimento 2.1\").atividade(atividade2).build());\n        conhecimentoRepo.save(Conhecimento.builder().descricao(\"Conhecimento 2.2\").atividade(atividade2).build());\n\n        // 4. Processo Destino (EM ANDAMENTO)\n        Processo processoDestino = Processo.builder()\n                .descricao(\"Processo Destino Ativo\")\n                .tipo(TipoProcesso.MAPEAMENTO)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU08IntegrationTest.java",
    "type": "line",
    "line": 149,
    "length": 1,
    "text": "// Recarregar objetos",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Recarregar objetos\n        subprocessoOrigem = subprocessoRepo.findById(subprocessoOrigem.getCodigo()).orElseThrow();\n        subprocessoDestino = subprocessoRepo.findById(subprocessoDestino.getCodigo()).orElseThrow();\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// SEDESENV (Unidade 8) no data.sql",
    "context": "    @WithMockChefe(\"3\") // Fernanda Oliveira - Chefe da Unidade 8 no data.sql\n    @DisplayName(\"Fluxo Principal - Visualizar, Preparar e Disponibilizar Cadastro\")\n    void fluxoCompletoDisponibilizacao() throws Exception {\n        // SEDESENV (Unidade 8) no data.sql\n        Long SP_CODIGO = 60000L;\n        Subprocesso sp = subprocessoRepo.findById(SP_CODIGO).orElseThrow();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 49,
    "length": 1,
    "text": "// Simula uma an√°lise anterior (que deve ser exibida no hist√≥rico)",
    "context": "        Subprocesso sp = subprocessoRepo.findById(SP_CODIGO).orElseThrow();\n\n\n        // Simula uma an√°lise anterior (que deve ser exibida no hist√≥rico)\n        analiseRepo.saveAndFlush(Analise.builder()\n                .subprocesso(sp)\n                .unidadeCodigo(6L) // COSIS (Superior da 8)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Limpa mapa para garantir que falhe por falta de atividades",
    "context": "                .andExpect(jsonPath(\"$[0].observacoes\", is(\"Favor ajustar atividades\")));\n\n\n        // Limpa mapa para garantir que falhe por falta de atividades\n        competenciaRepo.deleteByMapa_Codigo(sp.getMapa().getCodigo());\n        entityManager.flush();\n        entityManager.clear();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 95,
    "length": 1,
    "text": "// A√ß√£o de Disponibilizar",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // A√ß√£o de Disponibilizar\n        mockMvc.perform(post(\"/api/subprocessos/{id}/cadastro/disponibilizar\", SP_CODIGO).with(csrf()))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.mensagem\", is(\"Cadastro de atividades disponibilizado\")));"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// 10. Altera√ß√£o de Situa√ß√£o",
    "context": "\n        Subprocesso atualizado = subprocessoRepo.findById(SP_CODIGO).orElseThrow();\n\n        // 10. Altera√ß√£o de Situa√ß√£o\n        assertThat(atualizado.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_DISPONIBILIZADO);\n\n        // 11. Registro de Movimenta√ß√£o"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 106,
    "length": 1,
    "text": "// 11. Registro de Movimenta√ß√£o",
    "context": "        // 10. Altera√ß√£o de Situa√ß√£o\n        assertThat(atualizado.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_DISPONIBILIZADO);\n\n        // 11. Registro de Movimenta√ß√£o\n        List<Movimentacao> movs = movimentacaoRepo.findBySubprocessoCodigoOrderByDataHoraDesc(SP_CODIGO);\n        assertThat(movs).isNotEmpty();\n        assertThat(movs.getFirst().getDescricao()).isEqualTo(\"Disponibiliza√ß√£o do cadastro de atividades\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 113,
    "length": 1,
    "text": "// 12. Notifica√ß√£o por E-mail (Superior da 8 √© COSIS)",
    "context": "        assertThat(movs.getFirst().getUnidadeOrigem().getSigla()).isEqualTo(\"SEDESENV\");\n        assertThat(movs.getFirst().getUnidadeDestino().getSigla()).isEqualTo(\"COSIS\");\n\n        // 12. Notifica√ß√£o por E-mail (Superior da 8 √© COSIS)\n        aguardarEmail(1);\n\n        // 13. Cria√ß√£o de Alerta para Unidade Superior (Async)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 116,
    "length": 1,
    "text": "// 13. Cria√ß√£o de Alerta para Unidade Superior (Async)",
    "context": "        // 12. Notifica√ß√£o por E-mail (Superior da 8 √© COSIS)\n        aguardarEmail(1);\n\n        // 13. Cria√ß√£o de Alerta para Unidade Superior (Async)\n        final Long processoCodigo = spEtapa3.getProcesso().getCodigo();\n        Awaitility.await()\n                .atMost(Duration.ofSeconds(5))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 125,
    "length": 1,
    "text": "// 14. Data de Fim Etapa 1",
    "context": "                    assertThat(alertas.stream().anyMatch(a -> a.getUnidadeDestino() != null && a.getUnidadeDestino().getCodigo() == 6L)).isTrue();\n                });\n\n        // 14. Data de Fim Etapa 1\n        assertThat(atualizado.getDataFimEtapa1()).isNotNull();\n\n        // 15. Exclus√£o do Hist√≥rico de An√°lise"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU09IntegrationTest.java",
    "type": "line",
    "line": 128,
    "length": 1,
    "text": "// 15. Exclus√£o do Hist√≥rico de An√°lise",
    "context": "        // 14. Data de Fim Etapa 1\n        assertThat(atualizado.getDataFimEtapa1()).isNotNull();\n\n        // 15. Exclus√£o do Hist√≥rico de An√°lise\n        assertThat(analiseRepo.findBySubprocessoCodigoOrderByDataHoraDesc(SP_CODIGO)).isEmpty();\n    }\n}"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 75,
    "length": 1,
    "text": "// 3. Configurar Perfil e Titularidade",
    "context": "        usuarioSuperior.setUnidadeLotacao(unidadeSuperior);\n        usuarioSuperior = usuarioRepo.saveAndFlush(usuarioSuperior);\n\n        // 3. Configurar Perfil e Titularidade\n        setupUsuarioPerfil(usuarioChefe, unidadeChefe, Perfil.CHEFE);\n        definirTitular(unidadeChefe, usuarioChefe);\n        definirTitular(unidadeSuperior, usuarioSuperior);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Garante que existe movimenta√ß√£o para a unidade do Chefe",
    "context": "        mapa = mapaRepo.save(mapa);\n        subprocessoRevisao.setMapa(mapa);\n\n        // Garante que existe movimenta√ß√£o para a unidade do Chefe\n        Movimentacao mov = Movimentacao.builder()\n                .subprocesso(subprocessoRevisao)\n                .unidadeOrigem(unidadeChefe)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// 5. Autenticar",
    "context": "                .build();\n        movimentacaoRepo.save(mov);\n\n        // 5. Autenticar\n        autenticarUsuario(usuarioChefe, Perfil.CHEFE);\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 119,
    "length": 1,
    "text": "// Agora o perfil √© configurado na sess√£o ativa via autenticarUsuario",
    "context": "                \"INSERT INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, unidade_codigo, perfil) VALUES (?, ?, ?)\",\n                usuario.getTituloEleitoral(), unidade.getCodigo(), perfil.name());\n\n        // Agora o perfil √© configurado na sess√£o ativa via autenticarUsuario\n    }\n\n    private void definirTitular(Unidade unidade, Usuario usuario) {"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 135,
    "length": 1,
    "text": "// Tenta pegar o c√≥digo da unidade do usu√°rio ou da unidade de lota√ß√£o",
    "context": "\n    private void autenticarUsuario(Usuario usuario, Perfil perfil) {\n        usuario.setPerfilAtivo(perfil);\n        // Tenta pegar o c√≥digo da unidade do usu√°rio ou da unidade de lota√ß√£o\n        Long codUnidade = usuario.getUnidadeLotacao().getCodigo();\n        usuario.setUnidadeAtivaCodigo(codUnidade);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 147,
    "length": 1,
    "text": "// Autenticar com outro usu√°rio",
    "context": "    @Test\n    @DisplayName(\"N√£o deve permitir que um CHEFE de outra unidade disponibilize a revis√£o\")\n    void naoDevePermitirChefeDeOutraUnidadeDisponibilizar() throws Exception {\n        // Autenticar com outro usu√°rio\n        Usuario outroChefe = UsuarioFixture.usuarioComTitulo(\"999999999999\");\n        outroChefe = usuarioRepo.save(outroChefe);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 165,
    "length": 1,
    "text": "// Preparar: criar atividade com conhecimento para permitir disponibiliza√ß√£o",
    "context": "    @Test\n    @DisplayName(\"Deve excluir hist√≥rico de an√°lises anteriores quando disponibilizar revis√£o novamente\")\n    void deveExcluirHistoricoAposNovaDisponibilizacao() throws Exception {\n        // Preparar: criar atividade com conhecimento para permitir disponibiliza√ß√£o\n        var competencia = competenciaRepo.save(CompetenciaFixture.competenciaPadrao(subprocessoRevisao.getMapa()));\n        var atividade = AtividadeFixture.atividadePadrao(subprocessoRevisao.getMapa());\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 182,
    "length": 1,
    "text": "// 1. Primeira disponibiliza√ß√£o",
    "context": "\n        Long subprocessoId = subprocessoRevisao.getCodigo();\n\n        // 1. Primeira disponibiliza√ß√£o\n        mockMvc.perform(post(\"/api/subprocessos/{id}/disponibilizar-revisao\", subprocessoId))\n                .andExpect(status().isOk());\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 215,
    "length": 1,
    "text": "// Usuario Superior",
    "context": "        mov.setUnidadeDestino(sp.getUnidade());\n        mov.setDataHora(LocalDateTime.now().plusSeconds(1)); // Ensure it's later\n        mov.setDescricao(\"Devolu√ß√£o simulada\");\n        // Usuario Superior\n        Usuario usuarioSuperior = usuarioRepo.findById(\"666666666666\").get();\n        mov.setUsuario(usuarioSuperior);\n        movimentacaoRepo.saveAndFlush(mov);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU10IntegrationTest.java",
    "type": "line",
    "line": 223,
    "length": 1,
    "text": "// 5. Nova disponibiliza√ß√£o",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // 5. Nova disponibiliza√ß√£o\n        mockMvc.perform(post(\"/api/subprocessos/{id}/disponibilizar-revisao\", subprocessoId))\n                .andExpect(status().isOk());\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Unidade",
    "context": "    @BeforeEach\n    void setUp() throws Exception {\n\n        // Unidade\n        unidade = UnidadeFixture.unidadeComSigla(\"SENIC\");\n        unidade.setCodigo(null);\n        unidade.setUnidadeSuperior(unidadeRepo.findById(1L).orElseThrow());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 59,
    "length": 1,
    "text": "// Assign users to this new unit so login works",
    "context": "        unidade.setUnidadeSuperior(unidadeRepo.findById(1L).orElseThrow());\n        unidade = unidadeRepo.save(unidade);\n\n        // Assign users to this new unit so login works\n        String sql = \"INSERT INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, unidade_codigo, perfil) VALUES (?, ?, ?)\";\n        // Chefe (User 3)\n        jdbcTemplate.update(sql, \"3\", unidade.getCodigo(), Perfil.CHEFE.name());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 61,
    "length": 1,
    "text": "// Chefe (User 3)",
    "context": "\n        // Assign users to this new unit so login works\n        String sql = \"INSERT INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, unidade_codigo, perfil) VALUES (?, ?, ?)\";\n        // Chefe (User 3)\n        jdbcTemplate.update(sql, \"3\", unidade.getCodigo(), Perfil.CHEFE.name());\n        // Gestor (User 8 - Gestor)\n        jdbcTemplate.update(sql, \"8\", unidade.getCodigo(), Perfil.GESTOR.name());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Gestor (User 8 - Gestor)",
    "context": "        String sql = \"INSERT INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, unidade_codigo, perfil) VALUES (?, ?, ?)\";\n        // Chefe (User 3)\n        jdbcTemplate.update(sql, \"3\", unidade.getCodigo(), Perfil.CHEFE.name());\n        // Gestor (User 8 - Gestor)\n        jdbcTemplate.update(sql, \"8\", unidade.getCodigo(), Perfil.GESTOR.name());\n        // Servidor (User 1)\n        jdbcTemplate.update(sql, \"1\", unidade.getCodigo(), Perfil.SERVIDOR.name());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 65,
    "length": 1,
    "text": "// Servidor (User 1)",
    "context": "        jdbcTemplate.update(sql, \"3\", unidade.getCodigo(), Perfil.CHEFE.name());\n        // Gestor (User 8 - Gestor)\n        jdbcTemplate.update(sql, \"8\", unidade.getCodigo(), Perfil.GESTOR.name());\n        // Servidor (User 1)\n        jdbcTemplate.update(sql, \"1\", unidade.getCodigo(), Perfil.SERVIDOR.name());\n        // Admin (User 6) na unidade 1 (RAIZ)\n        jdbcTemplate.update(sql, \"6\", 1L, Perfil.ADMIN.name());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Admin (User 6) na unidade 1 (RAIZ)",
    "context": "        jdbcTemplate.update(sql, \"8\", unidade.getCodigo(), Perfil.GESTOR.name());\n        // Servidor (User 1)\n        jdbcTemplate.update(sql, \"1\", unidade.getCodigo(), Perfil.SERVIDOR.name());\n        // Admin (User 6) na unidade 1 (RAIZ)\n        jdbcTemplate.update(sql, \"6\", 1L, Perfil.ADMIN.name());\n\n        // Login real obtendo tokens JWT"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 70,
    "length": 1,
    "text": "// Login real obtendo tokens JWT",
    "context": "        // Admin (User 6) na unidade 1 (RAIZ)\n        jdbcTemplate.update(sql, \"6\", 1L, Perfil.ADMIN.name());\n\n        // Login real obtendo tokens JWT\n        tokenChefe = loginHelper.loginChefe(mockMvc, \"3\", unidade.getCodigo());\n        tokenGestor = loginHelper.loginGestor(mockMvc, \"8\", unidade.getCodigo());\n        tokenAdmin = loginHelper.loginAdmin(mockMvc, \"6\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Processo",
    "context": "        tokenAdmin = loginHelper.loginAdmin(mockMvc, \"6\");\n        tokenServidor = loginHelper.loginServidor(mockMvc, \"1\", unidade.getCodigo());\n\n        // Processo\n        processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setDescricao(\"Processo de Mapeamento\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 84,
    "length": 1,
    "text": "// Mapa e Subprocesso",
    "context": "        processo.setSituacao(SituacaoProcesso.EM_ANDAMENTO);\n        processo = processoRepo.save(processo);\n\n        // Mapa e Subprocesso\n        var mapa = mapaRepo.save(new Mapa());\n\n        subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU11IntegrationTest.java",
    "type": "line",
    "line": 97,
    "length": 1,
    "text": "// Atividades e Conhecimentos",
    "context": "        mapa.setSubprocesso(subprocesso);\n        mapaRepo.save(mapa);\n\n        // Atividades e Conhecimentos\n        Atividade atividade1 = AtividadeFixture.atividadePadrao(mapa);\n        atividade1.setDescricao(\"Analisar documenta√ß√£o\");\n        atividade1 = atividadeRepo.save(atividade1);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU12IntegrationTest.java",
    "type": "line",
    "line": 290,
    "length": 1,
    "text": "// Simular envio para unidade superior (onde est√° o gestor)",
    "context": "            sp.setSituacaoForcada(SituacaoSubprocesso.REVISAO_CADASTRO_DISPONIBILIZADA);\n            subprocessoRepo.save(sp);\n\n            // Simular envio para unidade superior (onde est√° o gestor)\n            Movimentacao movimentacao = Movimentacao.builder()\n                    .subprocesso(sp)\n                    .unidadeOrigem(unidade)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 52,
    "length": 1,
    "text": "// Criar Unidades via JDBC para contornar @Immutable",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Criar Unidades via JDBC para contornar @Immutable\n        Long idSuperior = 3000L;\n        Long idUnidade = 3001L;\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 70,
    "length": 1,
    "text": "// Carregar via Repo",
    "context": "                    \"OPERACIONAL\", \"ATIVA\", idSuperior, null);\n        }\n\n        // Carregar via Repo\n        unidadeSuperior = unidadeRepo.findById(idSuperior).orElseThrow();\n        unidade = unidadeRepo.findById(idUnidade).orElseThrow();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 74,
    "length": 1,
    "text": "// Criar Usu√°rios via JDBC (Usuario √© @Immutable, n√£o pode ser salvo via Repo)",
    "context": "        unidadeSuperior = unidadeRepo.findById(idSuperior).orElseThrow();\n        unidade = unidadeRepo.findById(idUnidade).orElseThrow();\n\n        // Criar Usu√°rios via JDBC (Usuario √© @Immutable, n√£o pode ser salvo via Repo)\n        String sqlInsertUsuario = \"INSERT INTO SGC.VW_USUARIO (TITULO, NOME, EMAIL, RAMAL, unidade_lot_codigo, MATRICULA) VALUES (?, ?, ?, ?, ?, ?)\";\n        String sqlInsertPerfil = \"INSERT INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, perfil, unidade_codigo) VALUES (?, ?, ?)\";\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// Carregar usu√°rios do banco",
    "context": "            jdbcTemplate.update(sqlInsertPerfil, tituloGestor, \"GESTOR\", idSuperior);\n        }\n\n        // Carregar usu√°rios do banco\n        Usuario adminUser = usuarioRepo.findById(\"101010101010\").orElseThrow();\n\n        // Criar Processo via Fixture"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// Criar Processo via Fixture",
    "context": "        // Carregar usu√°rios do banco\n        Usuario adminUser = usuarioRepo.findById(\"101010101010\").orElseThrow();\n\n        // Criar Processo via Fixture\n        Processo processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 101,
    "length": 1,
    "text": "// Criar Subprocesso via Fixture",
    "context": "        processo.setDescricao(\"Processo de Teste CDU-13\");\n        processo = processoRepo.save(processo);\n\n        // Criar Subprocesso via Fixture\n        subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        subprocesso.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_DISPONIBILIZADO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 108,
    "length": 1,
    "text": "// Movimenta√ß√£o inicial",
    "context": "        subprocesso.setDataLimiteEtapa1(LocalDateTime.now().plusDays(10));\n        subprocesso = subprocessoRepo.save(subprocesso);\n\n        // Movimenta√ß√£o inicial\n        Movimentacao movimentacaoInicial = Movimentacao.builder()\n                .subprocesso(subprocesso)\n                .unidadeOrigem(unidade)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 122,
    "length": 1,
    "text": "// Reload entities",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Reload entities\n        subprocesso = subprocessoRepo.findById(subprocesso.getCodigo()).orElseThrow();\n        unidade = unidadeRepo.findById(idUnidade).orElseThrow();\n        unidadeSuperior = unidadeRepo.findById(idSuperior).orElseThrow();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 214,
    "length": 1,
    "text": "// O aceite parte da unidade atual (onde o processo est√°), que √© a superior",
    "context": "        assertThat(movimentacoes).hasSize(2);\n        Movimentacao movimentacaoAceite = movimentacoes.getFirst();\n\n        // O aceite parte da unidade atual (onde o processo est√°), que √© a superior\n        assertThat(movimentacaoAceite.getUnidadeOrigem().getSigla())\n                .isEqualTo(unidadeSuperior.getSigla());\n        assertThat(movimentacaoAceite.getUnidadeDestino().getSigla())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 281,
    "length": 1,
    "text": "// Ao redisponibilizar, o subprocesso volta para a unidadeSuperior",
    "context": "        subprocesso.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_DISPONIBILIZADO);\n        subprocessoRepo.saveAndFlush(subprocesso);\n\n        // Ao redisponibilizar, o subprocesso volta para a unidadeSuperior\n        Movimentacao movRedisponibiliza = Movimentacao.builder()\n                .subprocesso(subprocesso)\n                .unidadeOrigem(unidade)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 292,
    "length": 1,
    "text": "// Ensure user is configured correctly like in other passing tests",
    "context": "                .build();\n        movimentacaoRepo.saveAndFlush(movRedisponibiliza);\n\n        // Ensure user is configured correctly like in other passing tests\n        gestor.setPerfilAtivo(Perfil.GESTOR);\n        gestor.setUnidadeAtivaCodigo(unidadeSuperior.getCodigo());\n        gestor.setAuthorities(Set.of(Perfil.GESTOR.toGrantedAuthority()));"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 297,
    "length": 1,
    "text": "// Clear persistence context to ensure controller fetches fresh data (including new movement)",
    "context": "        gestor.setUnidadeAtivaCodigo(unidadeSuperior.getCodigo());\n        gestor.setAuthorities(Set.of(Perfil.GESTOR.toGrantedAuthority()));\n\n        // Clear persistence context to ensure controller fetches fresh data (including new movement)\n        entityManager.flush();\n        entityManager.clear();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU13IntegrationTest.java",
    "type": "line",
    "line": 314,
    "length": 2,
    "text": "// Re-authenticate explicitly to avoid stale security context\n// Using \"132313231323\" ensures the user is found in DB, and authorities ensures role check passes",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Re-authenticate explicitly to avoid stale security context\n        // Using \"132313231323\" ensures the user is found in DB, and authorities ensures role check passes\n        String jsonResponse = mockMvc\n                .perform(MockMvcRequestBuilders.get(\n                                \"/api/subprocessos/{id}/historico-cadastro\","
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU14IntegrationTest.java",
    "type": "line",
    "line": 56,
    "length": 5,
    "text": "// Use existing users and units from data.sql\n// Hierarchy: unit 100 (ADMIN) ‚Üí unit 6 (GESTOR - COSIS) ‚Üí unit 9 (CHEFE -\n// SEDIA)\n// Users: 111111111111 (ADMIN), 666666666666 (GESTOR), 333333333333 (CHEFE on\n// unit 9)",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Use existing users and units from data.sql\n        // Hierarchy: unit 100 (ADMIN) ‚Üí unit 6 (GESTOR - COSIS) ‚Üí unit 9 (CHEFE -\n        // SEDIA)\n        // Users: 111111111111 (ADMIN), 666666666666 (GESTOR), 333333333333 (CHEFE on\n        // unit 9)\n\n        admin = usuarioService.buscarPorLogin(\"111111111111\");\n        admin.setPerfilAtivo(Perfil.ADMIN);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU14IntegrationTest.java",
    "type": "line",
    "line": 79,
    "length": 2,
    "text": "// Unit 9 already has mapa 1002 in data.sql, so use it\n// Add test data to mapa 1002 if needed",
    "context": "\n        unidadeChefe = unidadeRepo.findById(9L).orElseThrow();\n\n        // Unit 9 already has mapa 1002 in data.sql, so use it\n        // Add test data to mapa 1002 if needed\n        Mapa mapaVigente = mapaRepo.findById(1002L).orElseGet(() -> {\n            Mapa novoMapa = MapaFixture.mapaPadrao(null);\n            novoMapa.setCodigo(1002L);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU14IntegrationTest.java",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// Ensure mapa has at least one atividade with conhecimento for validation",
    "context": "            return mapaRepo.save(novoMapa);\n        });\n\n        // Ensure mapa has at least one atividade with conhecimento for validation\n        if (atividadeRepo.findByMapa_Codigo(mapaVigente.getCodigo()).isEmpty()) {\n            Atividade atividade = Atividade.builder().mapa(mapaVigente).descricao(\"Atividade CDU-14 Test\")\n                    .build();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU14IntegrationTest.java",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Add compet√™ncia for impact testing",
    "context": "\n            atividade.getConhecimentos().add(conhecimento);\n\n            // Add compet√™ncia for impact testing\n            Competencia competencia = Competencia.builder().descricao(\"Competencia CDU-14 Test\")\n                    .mapa(mapaVigente).build();\n            competencia = competenciaRepo.save(competencia);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU14IntegrationTest.java",
    "type": "line",
    "line": 222,
    "length": 1,
    "text": "// Esperamos pelo menos 2 e-mails: In√≠cio de Processo e Aceite",
    "context": "            assertThat(movimentacaoRepo.findBySubprocessoCodigo(subprocessoId)).hasSize(3);\n\n\n            // Esperamos pelo menos 2 e-mails: In√≠cio de Processo e Aceite\n            aguardarEmail(2);\n            assertThat(algumEmailContem(\"submetid\")).isTrue();\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU14IntegrationTest.java",
    "type": "line",
    "line": 378,
    "length": 4,
    "text": "// AccessControlService\n// Retorna 403 (Forbidden) em vez de 422 (Unprocessable Entity)\n// Isso √© mais correto do ponto de vista de seguran√ßa: verificar permiss√µes\n// antes de valida√ß√µes de neg√≥cio",
    "context": "        void naoPodeHomologarEmEstadoInvalido() throws Exception {\n            Long subprocessoId = criarEComecarProcessoDeRevisao();\n\n            // AccessControlService\n            // Retorna 403 (Forbidden) em vez de 422 (Unprocessable Entity)\n            // Isso √© mais correto do ponto de vista de seguran√ßa: verificar permiss√µes\n            // antes de valida√ß√µes de neg√≥cio\n            mockMvc.perform(\n                            post(API_SUBPROCESSOS_ID_HOMOLOGAR, subprocessoId)\n                                    .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 41,
    "length": 1,
    "text": "// Criar Unidade via Fixture",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Criar Unidade via Fixture\n        Unidade unidade = UnidadeFixture.unidadePadrao();\n        unidade.setCodigo(null);\n        unidade.setNome(\"Unidade CDU-16\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Criar Processo via Fixture",
    "context": "        unidade.setSigla(\"U16\");\n        unidade = unidadeRepo.save(unidade);\n\n        // Criar Processo via Fixture\n        Processo processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setDescricao(\"Processo de Revis√£o\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Criar Subprocesso via Fixture (Primeiro o subprocesso, pois Mapa depende dele)",
    "context": "        processo.setSituacao(SituacaoProcesso.EM_ANDAMENTO);\n        processo = processoRepo.save(processo);\n\n        // Criar Subprocesso via Fixture (Primeiro o subprocesso, pois Mapa depende dele)\n        subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        subprocesso.setMapa(null); // Importante: limpar mapa da fixture para evitar depend√™ncia circular errada"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Criar Mapa via Fixture (Ligado ao Subprocesso)",
    "context": "        subprocesso.setSituacaoForcada(SituacaoSubprocesso.REVISAO_MAPA_AJUSTADO);\n        subprocesso = subprocessoRepo.save(subprocesso);\n\n        // Criar Mapa via Fixture (Ligado ao Subprocesso)\n        Mapa mapa = MapaFixture.mapaPadrao(subprocesso);\n        mapa.setCodigo(null);\n        mapa = mapaRepo.save(mapa);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 68,
    "length": 1,
    "text": "// Atualizar refer√™ncia no subprocesso (para consist√™ncia do objeto em mem√≥ria)",
    "context": "        mapa.setCodigo(null);\n        mapa = mapaRepo.save(mapa);\n\n        // Atualizar refer√™ncia no subprocesso (para consist√™ncia do objeto em mem√≥ria)\n        subprocesso.setMapa(mapa);\n\n        // Garante que o subprocesso esteja na unidade do ADMIN (1) para permitir ajuste"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Garante que o subprocesso esteja na unidade do ADMIN (1) para permitir ajuste",
    "context": "        // Atualizar refer√™ncia no subprocesso (para consist√™ncia do objeto em mem√≥ria)\n        subprocesso.setMapa(mapa);\n\n        // Garante que o subprocesso esteja na unidade do ADMIN (1) para permitir ajuste\n        Unidade adminUnit = unidadeRepo.findById(1L).orElseThrow();\n        Movimentacao movAdmin = Movimentacao.builder()\n                .subprocesso(subprocesso)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 82,
    "length": 1,
    "text": "// Criar Compet√™ncias e Atividades",
    "context": "                .build();\n        movimentacaoRepo.save(movAdmin);\n\n        // Criar Compet√™ncias e Atividades\n        var c1 = competenciaRepo.save(Competencia.builder().descricao(\"Compet√™ncia 1\").mapa(mapa).build());\n\n        // As atividades devem ser salvas antes de serem associadas √† compet√™ncia"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 85,
    "length": 1,
    "text": "// As atividades devem ser salvas antes de serem associadas √† compet√™ncia",
    "context": "        // Criar Compet√™ncias e Atividades\n        var c1 = competenciaRepo.save(Competencia.builder().descricao(\"Compet√™ncia 1\").mapa(mapa).build());\n\n        // As atividades devem ser salvas antes de serem associadas √† compet√™ncia\n        atividade1 = Atividade.builder().mapa(mapa).descricao(\"Atividade 1\").build();\n        var atividade2 = Atividade.builder().mapa(mapa).descricao(\"Atividade 2\").build();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// Associar atividades √† compet√™ncia",
    "context": "        atividade1 = atividadesSalvas.get(0);\n        var atividade2Salva = atividadesSalvas.get(1);\n\n        // Associar atividades √† compet√™ncia\n        atividade1.getCompetencias().add(c1);\n        atividade2Salva.getCompetencias().add(c1);\n        c1.getAtividades().add(atividade1);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU16IntegrationTest.java",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Salvar associa√ß√µes",
    "context": "        c1.getAtividades().add(atividade1);\n        c1.getAtividades().add(atividade2Salva);\n\n        // Salvar associa√ß√µes\n        atividadeRepo.saveAll(List.of(atividade1, atividade2Salva));\n        competenciaRepo.save(c1);\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU17IntegrationTest.java",
    "type": "line",
    "line": 52,
    "length": 1,
    "text": "// Ensure Admin user has profile in ADMIN (ID 1)",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Ensure Admin user has profile in ADMIN (ID 1)\n        jdbcTemplate.update(\"MERGE INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, unidade_codigo, perfil) KEY(usuario_titulo, unidade_codigo, perfil) VALUES (?, ?, ?)\",\n                \"111111111111\", 1, \"ADMIN\");\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU17IntegrationTest.java",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Criar Unidade via Fixture",
    "context": "        jdbcTemplate.update(\"MERGE INTO SGC.VW_USUARIO_PERFIL_UNIDADE (usuario_titulo, unidade_codigo, perfil) KEY(usuario_titulo, unidade_codigo, perfil) VALUES (?, ?, ?)\",\n                \"111111111111\", 1, \"ADMIN\");\n\n        // Criar Unidade via Fixture\n        unidade = UnidadeFixture.unidadePadrao();\n        unidade.setCodigo(null);\n        unidade.setNome(\"Unidade CDU-17\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU17IntegrationTest.java",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Criar Processo via Fixture",
    "context": "        unidade.setSigla(\"U17\");\n        unidade = unidadeRepo.save(unidade);\n\n        // Criar Processo via Fixture\n        Processo processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.REVISAO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU17IntegrationTest.java",
    "type": "line",
    "line": 69,
    "length": 1,
    "text": "// Criar Mapa",
    "context": "        processo.setTipo(TipoProcesso.REVISAO);\n        processo = processoRepo.save(processo);\n\n        // Criar Mapa\n        mapa = MapaFixture.mapaPadrao(null);\n        mapa.setCodigo(null);\n        mapa = mapaRepo.save(mapa);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU17IntegrationTest.java",
    "type": "line",
    "line": 74,
    "length": 1,
    "text": "// Criar Subprocesso via Fixture",
    "context": "        mapa.setCodigo(null);\n        mapa = mapaRepo.save(mapa);\n\n        // Criar Subprocesso via Fixture\n        subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        subprocesso.setMapa(mapa);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU17IntegrationTest.java",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Associar (ManyToMany manually if needed or via helper methods)",
    "context": "        Competencia competencia = Competencia.builder().descricao(\"Competencia Valida\").mapa(mapa).build();\n        competencia = competenciaRepo.save(competencia);\n\n        // Associar (ManyToMany manually if needed or via helper methods)\n        atividade.getCompetencias().add(competencia);\n        atividadeRepo.save(atividade);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU17IntegrationTest.java",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Print error if 500",
    "context": "            String observacoes = \"Observa√ß√µes de teste para o mapa.\";\n            DisponibilizarMapaRequest request = new DisponibilizarMapaRequest(dataLimite, observacoes);\n\n            // Print error if 500\n            mockMvc.perform(\n                            post(API_URL, subprocesso.getCodigo())\n                                    .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU17IntegrationTest.java",
    "type": "line",
    "line": 202,
    "length": 1,
    "text": "// Cria uma nova atividade sem compet√™ncias para criar o cen√°rio de erro",
    "context": "        @DisplayName(\"N√£o deve disponibilizar mapa se houver atividade sem compet√™ncia associada\")\n        @WithMockAdmin\n        void disponibilizarMapa_comAtividadeNaoAssociada_retornaBadRequest() throws Exception {\n            // Cria uma nova atividade sem compet√™ncias para criar o cen√°rio de erro\n            Atividade atividadeSolta = Atividade.builder().mapa(mapa).descricao(\"Atividade Solta\").build();\n            atividadeRepo.save(atividadeSolta);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU18IntegrationTest.java",
    "type": "line",
    "line": 33,
    "length": 1,
    "text": "// Criar Unidade via Fixture",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Criar Unidade via Fixture\n        unidade = UnidadeFixture.unidadePadrao();\n        unidade.setCodigo(null);\n        unidade.setNome(\"Unidade CDU-18\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU18IntegrationTest.java",
    "type": "line",
    "line": 40,
    "length": 1,
    "text": "// Criar Processo via Fixture",
    "context": "        unidade.setSigla(\"U18\");\n        unidade = unidadeRepo.save(unidade);\n\n        // Criar Processo via Fixture\n        Processo processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU18IntegrationTest.java",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Criar Mapa via Fixture",
    "context": "        processo.setSituacao(SituacaoProcesso.EM_ANDAMENTO);\n        processo = processoRepo.save(processo);\n\n        // Criar Mapa via Fixture\n        Mapa mapa = MapaFixture.mapaPadrao(null);\n        mapa.setCodigo(null);\n        mapa = mapaRepo.save(mapa);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU18IntegrationTest.java",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Criar Subprocesso via Fixture",
    "context": "        mapa.setCodigo(null);\n        mapa = mapaRepo.save(mapa);\n\n        // Criar Subprocesso via Fixture\n        subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        subprocesso.setMapa(mapa);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU18IntegrationTest.java",
    "type": "line",
    "line": 86,
    "length": 1,
    "text": "// Configurar relacionamento bidirecional no lado owning (Atividade)",
    "context": "        competencia2 = competenciaRepo.save(competencia2);\n        mapa.getCompetencias().add(competencia2);\n\n        // Configurar relacionamento bidirecional no lado owning (Atividade)\n        atividade1.getCompetencias().add(competencia1);\n        atividade2.getCompetencias().add(competencia2);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU18IntegrationTest.java",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// Configurar o lado inverso para garantir consist√™ncia no teste transacional",
    "context": "        atividade1.getCompetencias().add(competencia1);\n        atividade2.getCompetencias().add(competencia2);\n\n        // Configurar o lado inverso para garantir consist√™ncia no teste transacional\n        competencia1.getAtividades().add(atividade1);\n        competencia2.getAtividades().add(atividade2);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU19IntegrationTest.java",
    "type": "line",
    "line": 37,
    "length": 4,
    "text": "// Use existing units from data.sql to match @WithMockChefe user\n// Unit 6 (COSIS - INTERMEDIARIA) is the parent\n// Unit 9 (SEDIA - OPERACIONAL) is subordinate to 6\n// User '333333333333' has CHEFE profile for unit 9",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Use existing units from data.sql to match @WithMockChefe user\n        // Unit 6 (COSIS - INTERMEDIARIA) is the parent\n        // Unit 9 (SEDIA - OPERACIONAL) is subordinate to 6\n        // User '333333333333' has CHEFE profile for unit 9\n        unidadeSuperior = unidadeRepo.findById(6L)\n                .orElseThrow(() -> new RuntimeException(\"Unit 6 not found in data.sql\"));\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU19IntegrationTest.java",
    "type": "line",
    "line": 72,
    "length": 1,
    "text": "// CHEFE of unit 9",
    "context": "        @DisplayName(\n                \"Deve apresentar sugest√µes, alterar status, mas n√£o criar movimenta√ß√£o ou alerta\")\n        @WithMockChefe(\"333333333333\")\n            // CHEFE of unit 9\n        void testApresentarSugestoes_Sucesso() throws Exception {\n            String sugestoes = \"Minha sugest√£o de teste\";\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU19IntegrationTest.java",
    "type": "line",
    "line": 116,
    "length": 1,
    "text": "// CHEFE of unit 9",
    "context": "        @Test\n        @DisplayName(\"Deve validar o mapa, alterar status, registrar movimenta√ß√£o e criar alerta\")\n        @WithMockChefe(\"333333333333\")\n            // CHEFE of unit 9\n        void testValidarMapa_Sucesso() throws Exception {\n            mockMvc.perform(\n                            post(\"/api/subprocessos/{id}/validar-mapa\", subprocesso.getCodigo())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 47,
    "length": 6,
    "text": "// Use existing 3-level hierarchy from data.sql:\n// Unit 2 (STIC - INTEROPERACIONAL) - top level\n// Unit 6 (COSIS - INTERMEDIARIA) - subordinate to 2\n// Unit 9 (SEDIA - OPERACIONAL) - subordinate to 6\n// User '666666666666' is GESTOR of unit 6\n// User '333333333333' is CHEFE of unit 9",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Use existing 3-level hierarchy from data.sql:\n        // Unit 2 (STIC - INTEROPERACIONAL) - top level\n        // Unit 6 (COSIS - INTERMEDIARIA) - subordinate to 2\n        // Unit 9 (SEDIA - OPERACIONAL) - subordinate to 6\n        // User '666666666666' is GESTOR of unit 6\n        // User '333333333333' is CHEFE of unit 9\n        unidadeSuperiorSuperior = unidadeRepo.findById(2L)\n                .orElseThrow(() -> new RuntimeException(\"Unit 2 not found in data.sql\"));\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 62,
    "length": 1,
    "text": "// Load users from database with their profiles",
    "context": "        unidade = unidadeRepo.findById(9L)\n                .orElseThrow(() -> new RuntimeException(\"Unit 9 not found in data.sql\"));\n\n        // Load users from database with their profiles\n        usuarioGestor = usuarioService.buscarPorLogin(\"666666666666\");\n        usuarioGestor.setPerfilAtivo(Perfil.GESTOR);\n        usuarioGestor.setUnidadeAtivaCodigo(6L);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 85,
    "length": 1,
    "text": "// Simular que o mapa foi validado e enviado para a unidade superior (6)",
    "context": "        subprocesso.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_MAPA_VALIDADO);\n        subprocesso = subprocessoRepo.save(subprocesso);\n\n        // Simular que o mapa foi validado e enviado para a unidade superior (6)\n        Movimentacao m = Movimentacao.builder()\n                .subprocesso(subprocesso)\n                .unidadeOrigem(unidade)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 101,
    "length": 1,
    "text": "// Devolu√ß√£o do mapa (GESTOR of unit 6 devolves to subordinate unit 9)",
    "context": "    @Test\n    @DisplayName(\"Devolu√ß√£o e aceita√ß√£o da valida√ß√£o do mapa com verifica√ß√£o do hist√≥rico\")\n    void devolucaoEAceitacaoComVerificacaoHistorico() throws Exception {\n        // Devolu√ß√£o do mapa (GESTOR of unit 6 devolves to subordinate unit 9)\n        JustificativaRequest devolverReq = new JustificativaRequest(\"Justificativa da devolu√ß√£o\");\n        mockMvc.perform(post(\"/api/subprocessos/{id}/devolver-validacao\", subprocesso.getCodigo())\n                        .with(user(usuarioGestor))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Verifica√ß√£o do hist√≥rico ap√≥s devolu√ß√£o",
    "context": "                        .content(objectMapper.writeValueAsString(devolverReq)))\n                .andExpect(status().isOk());\n\n        // Verifica√ß√£o do hist√≥rico ap√≥s devolu√ß√£o\n        String responseDevolucao =\n                mockMvc.perform(get(\"/api/subprocessos/{id}/historico-validacao\", subprocesso.getCodigo())\n                                .with(user(usuarioGestor))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 130,
    "length": 1,
    "text": "// Adicionar verifica√ß√£o de Movimentacao e Alerta ap√≥s devolu√ß√£o",
    "context": "        assertThat(historicoDevolucao.getFirst().observacoes())\n                .isEqualTo(\"Justificativa da devolu√ß√£o\");\n\n        // Adicionar verifica√ß√£o de Movimentacao e Alerta ap√≥s devolu√ß√£o\n        List<Movimentacao> movimentacoesDevolucao =\n                movimentacaoRepo.findBySubprocessoCodigoOrderByDataHoraDesc(\n                        subprocesso.getCodigo());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 144,
    "length": 3,
    "text": "// No setUp n√£o gera alerta manual, mas a devolu√ß√£o gera.\n// Se houver algum alerta de in√≠cio de processo, considerar.\n// No BaseIntegrationTest o BD √© limpo? Sim, @Transactional.",
    "context": "\n        List<Alerta> alertasDevolucao =\n                alertaRepo.findByProcessoCodigo(subprocesso.getProcesso().getCodigo());\n        // No setUp n√£o gera alerta manual, mas a devolu√ß√£o gera. \n        // Se houver algum alerta de in√≠cio de processo, considerar. \n        // No BaseIntegrationTest o BD √© limpo? Sim, @Transactional.\n        assertThat(alertasDevolucao).isNotEmpty();\n        assertThat(alertasDevolucao.getFirst().getDescricao())\n                .contains("
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 155,
    "length": 1,
    "text": "// Unidade inferior valida o mapa novamente (CHEFE of unit 9)",
    "context": "        assertThat(alertasDevolucao.getFirst().getUnidadeDestino().getSigla())\n                .isEqualTo(subprocesso.getUnidade().getSigla());\n\n        // Unidade inferior valida o mapa novamente (CHEFE of unit 9)\n        mockMvc.perform(post(\"/api/subprocessos/{id}/validar-mapa\", subprocesso.getCodigo())\n                        .with(user(usuarioChefe))\n                        .with(csrf()))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 161,
    "length": 1,
    "text": "// GESTOR da unidade superior aceita a valida√ß√£o",
    "context": "                        .with(csrf()))\n                .andExpect(status().isOk());\n\n        // GESTOR da unidade superior aceita a valida√ß√£o\n        mockMvc.perform(post(\"/api/subprocessos/{id}/aceitar-validacao\", subprocesso.getCodigo())\n                        .with(user(usuarioGestor))\n                        .with(csrf()))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 167,
    "length": 1,
    "text": "// Verifica√ß√£o do hist√≥rico ap√≥s aceite",
    "context": "                        .with(csrf()))\n                .andExpect(status().isOk());\n\n        // Verifica√ß√£o do hist√≥rico ap√≥s aceite\n        String responseAceite =\n                mockMvc.perform(get(\"/api/subprocessos/{id}/historico-validacao\", subprocesso.getCodigo())\n                                .with(user(usuarioGestor))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 185,
    "length": 1,
    "text": "// Adicionar verifica√ß√£o de Movimentacao e Alerta ap√≥s aceite",
    "context": "                .isEqualTo(TipoAcaoAnalise.ACEITE_MAPEAMENTO);\n        assertThat(historicoAceite.getFirst().unidadeSigla()).isNotNull();\n\n        // Adicionar verifica√ß√£o de Movimentacao e Alerta ap√≥s aceite\n        List<Movimentacao> movimentacoesAceite =\n                movimentacaoRepo.findBySubprocessoCodigoOrderByDataHoraDesc(\n                        subprocesso.getCodigo());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 201,
    "length": 1,
    "text": "// Verifica o alerta de aceite para a unidade hierarquicamente superior",
    "context": "                alertaRepo.findByProcessoCodigo(subprocesso.getProcesso().getCodigo());\n        assertThat(alertasAceite).isNotEmpty(); // devolu√ß√£o + valida√ß√£o + aceite (pode variar se houver de processo)\n\n        // Verifica o alerta de aceite para a unidade hierarquicamente superior\n        Alerta alertaDeAceite =\n                alertasAceite.stream()\n                        .filter("
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 226,
    "length": 1,
    "text": "// Cen√°rio: Subprocesso j√° validado e localizado na unidade (9)",
    "context": "                    + \" registrando movimenta√ß√£o e alerta\")\n    @WithMockAdmin\n    void testHomologarValidacao_Sucesso() throws Exception {\n        // Cen√°rio: Subprocesso j√° validado e localizado na unidade (9)\n        subprocesso.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_MAPA_VALIDADO);\n        subprocessoRepo.save(subprocesso);\n        subprocessoRepo.flush();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 231,
    "length": 1,
    "text": "// Garante que o subprocesso esteja na unidade do ADMIN (1)",
    "context": "        subprocessoRepo.save(subprocesso);\n        subprocessoRepo.flush();\n\n        // Garante que o subprocesso esteja na unidade do ADMIN (1)\n        Unidade adminUnit = unidadeRepo.findById(1L).orElseThrow();\n        Movimentacao movAdmin = Movimentacao.builder()\n                .subprocesso(subprocesso)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 242,
    "length": 1,
    "text": "// A√ß√£o",
    "context": "                .build();\n        movimentacaoRepo.save(movAdmin);\n\n        // A√ß√£o\n        mockMvc.perform(\n                        post(\"/api/subprocessos/{id}/homologar-validacao\", subprocesso.getCodigo())\n                                .with(csrf()))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 248,
    "length": 1,
    "text": "// Verifica√ß√µes",
    "context": "                                .with(csrf()))\n                .andExpect(status().isOk());\n\n        // Verifica√ß√µes\n        Subprocesso spAtualizado = subprocessoRepo.findById(subprocesso.getCodigo()).orElseThrow();\n        assertThat(spAtualizado.getSituacao())\n                .isEqualTo(SituacaoSubprocesso.MAPEAMENTO_MAPA_HOMOLOGADO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 256,
    "length": 1,
    "text": "// Deve ter o setup + homologa√ß√£o",
    "context": "        List<Movimentacao> movimentacoes =\n                movimentacaoRepo.findBySubprocessoCodigoOrderByDataHoraDesc(\n                        subprocesso.getCodigo());\n        // Deve ter o setup + homologa√ß√£o\n        assertThat(movimentacoes).hasSizeGreaterThanOrEqualTo(2);\n        assertThat(movimentacoes.getFirst().getDescricao())\n                .isEqualTo(\"Mapa de compet√™ncias homologado\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU20IntegrationTest.java",
    "type": "line",
    "line": 263,
    "length": 1,
    "text": "// Homologa√ß√£o n√£o gera alerta (por design)",
    "context": "        assertThat(movimentacoes.getFirst().getUnidadeOrigem().getSigla()).isEqualTo(\"ADMIN\");\n        assertThat(movimentacoes.getFirst().getUnidadeDestino().getSigla()).isEqualTo(\"ADMIN\");\n\n        // Homologa√ß√£o n√£o gera alerta (por design)\n        List<Alerta> alertas =\n                alertaRepo.findByProcessoCodigo(subprocesso.getProcesso().getCodigo());\n        assertThat(alertas).isEmpty(); // MAPA_HOMOLOGADO n√£o gera alerta"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU22IntegrationTest.java",
    "type": "line",
    "line": 43,
    "length": 5,
    "text": "// Use existing units from data.sql:\n// Unit 6 (COSIS - INTERMEDIARIA) is the parent\n// Unit 8 (SEDESENV - OPERACIONAL) subordinate to 6\n// Unit 9 (SEDIA - OPERACIONAL) subordinate to 6\n// User '666666666666' is GESTOR of unit 6",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Use existing units from data.sql:\n        // Unit 6 (COSIS - INTERMEDIARIA) is the parent\n        // Unit 8 (SEDESENV - OPERACIONAL) subordinate to 6\n        // Unit 9 (SEDIA - OPERACIONAL) subordinate to 6\n        // User '666666666666' is GESTOR of unit 6\n        unidadeSuperior = unidadeRepo.findById(6L)\n                .orElseThrow(() -> new RuntimeException(\"Unit 6 not found in data.sql\"));\n        Unidade unidade1 = unidadeRepo.findById(8L)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU22IntegrationTest.java",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// Create test process",
    "context": "        Unidade unidade2 = unidadeRepo.findById(9L)\n                .orElseThrow(() -> new RuntimeException(\"Unit 9 not found in data.sql\"));\n\n        // Create test process\n        processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU22IntegrationTest.java",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Create subprocesses for both units",
    "context": "        processo.setDescricao(\"Processo Bloco CDU-22\");\n        processo = processoRepo.save(processo);\n\n        // Create subprocesses for both units\n        subprocesso1 = SubprocessoFixture.subprocessoPadrao(processo, unidade1);\n        subprocesso1.setCodigo(null);\n        subprocesso1.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_DISPONIBILIZADO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU22IntegrationTest.java",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Subprocessos devem estar na unidade superior (6) para o Gestor aceitar",
    "context": "        subprocesso2.setDataLimiteEtapa1(LocalDateTime.now().plusDays(10));\n        subprocesso2 = subprocessoRepo.save(subprocesso2);\n\n        // Subprocessos devem estar na unidade superior (6) para o Gestor aceitar\n        Movimentacao m1 = Movimentacao.builder()\n                .subprocesso(subprocesso1)\n                .unidadeOrigem(unidade1)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU22IntegrationTest.java",
    "type": "line",
    "line": 96,
    "length": 1,
    "text": "// Reload to attach",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Reload to attach\n        processoRepo.findById(processo.getCodigo()).orElseThrow();\n        subprocesso1 = subprocessoRepo.findById(subprocesso1.getCodigo()).orElseThrow();\n        subprocesso2 = subprocessoRepo.findById(subprocesso2.getCodigo()).orElseThrow();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU22IntegrationTest.java",
    "type": "line",
    "line": 106,
    "length": 1,
    "text": "// GESTOR of unit 6 (parent of units 8 and 9)",
    "context": "    @Test\n    @DisplayName(\"Deve aceitar cadastro de m√∫ltiplas unidades em bloco\")\n    @WithMockGestor(\"666666666666\")\n        // GESTOR of unit 6 (parent of units 8 and 9)\n    void aceitarCadastroEmBloco_deveAceitarTodasSelecionadas() throws Exception {\n\n        Long codigoContexto = processo.getCodigo();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU22IntegrationTest.java",
    "type": "line",
    "line": 129,
    "length": 1,
    "text": "// Verify Subprocesso 1",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Verify Subprocesso 1\n        Subprocesso s1 = subprocessoRepo.findById(subprocesso1.getCodigo()).orElseThrow();\n        List<Analise> analises1 = analiseRepo.findBySubprocessoCodigoOrderByDataHoraDesc(s1.getCodigo());\n        assertThat(analises1).isNotEmpty();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU22IntegrationTest.java",
    "type": "line",
    "line": 139,
    "length": 1,
    "text": "// O aceite envia para a unidade superior da unidade atual (6 -> 2)",
    "context": "        List<Movimentacao> movs1 = movimentacaoRepo.findBySubprocessoCodigoOrderByDataHoraDesc(s1.getCodigo());\n        assertThat(movs1).isNotEmpty();\n        assertThat(movs1.getFirst().getDescricao()).contains(\"aceito\");\n        // O aceite envia para a unidade superior da unidade atual (6 -> 2)\n        assertThat(movs1.getFirst().getUnidadeDestino().getCodigo()).isEqualTo(2L);\n\n        // Verify Subprocesso 2"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU22IntegrationTest.java",
    "type": "line",
    "line": 142,
    "length": 1,
    "text": "// Verify Subprocesso 2",
    "context": "        // O aceite envia para a unidade superior da unidade atual (6 -> 2)\n        assertThat(movs1.getFirst().getUnidadeDestino().getCodigo()).isEqualTo(2L);\n\n        // Verify Subprocesso 2\n        Subprocesso s2 = subprocessoRepo.findById(subprocesso2.getCodigo()).orElseThrow();\n        List<Analise> analises2 = analiseRepo.findBySubprocessoCodigoOrderByDataHoraDesc(s2.getCodigo());\n        assertThat(analises2).isNotEmpty();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU23IntegrationTest.java",
    "type": "line",
    "line": 49,
    "length": 1,
    "text": "// Criar Unidades",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Criar Unidades\n        Long idSuperior = 5000L;\n        Long idUnidade1 = 5001L;\n        Long idUnidade2 = 5002L;"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU23IntegrationTest.java",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Criar Usu√°rio",
    "context": "        unidade1 = unidadeRepo.findById(idUnidade1).orElseThrow();\n        unidade2 = unidadeRepo.findById(idUnidade2).orElseThrow();\n\n        // Criar Usu√°rio\n        Usuario admin = UsuarioFixture.usuarioPadrao();\n        admin.setTituloEleitoral(\"999999999999\");\n        usuarioRepo.save(admin);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU23IntegrationTest.java",
    "type": "line",
    "line": 68,
    "length": 1,
    "text": "// Criar Processo",
    "context": "        admin.setTituloEleitoral(\"999999999999\");\n        usuarioRepo.save(admin);\n\n        // Criar Processo\n        processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU23IntegrationTest.java",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Criar Subprocessos",
    "context": "        processo.setDescricao(\"Processo Homologa√ß√£o CDU-23\");\n        processo = processoRepo.save(processo);\n\n        // Criar Subprocessos\n        subprocesso1 = SubprocessoFixture.subprocessoPadrao(processo, unidade1);\n        subprocesso1.setCodigo(null);\n        subprocesso1.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_DISPONIBILIZADO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU23IntegrationTest.java",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// Para homologar, os subprocessos devem estar na unidade do Admin (1)",
    "context": "        Long codigoContexto = processo.getCodigo();\n        List<Long> subprocessosSelecionados = List.of(subprocesso1.getCodigo(), subprocesso2.getCodigo());\n\n        // Para homologar, os subprocessos devem estar na unidade do Admin (1)\n        Unidade adminUnit = unidadeRepo.findById(1L).orElseThrow();\n\n        Movimentacao m1 = Movimentacao.builder()"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU23IntegrationTest.java",
    "type": "line",
    "line": 143,
    "length": 1,
    "text": "// Verify Subprocesso 1",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Verify Subprocesso 1\n        Subprocesso s1 = subprocessoRepo.findById(subprocesso1.getCodigo()).orElseThrow();\n        assertThat(s1.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_HOMOLOGADO);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU23IntegrationTest.java",
    "type": "line",
    "line": 151,
    "length": 1,
    "text": "// Verify Subprocesso 2",
    "context": "        assertThat(movs1).isNotEmpty();\n        assertThat(movs1.getFirst().getDescricao()).contains(\"homologado\");\n\n        // Verify Subprocesso 2\n        Subprocesso s2 = subprocessoRepo.findById(subprocesso2.getCodigo()).orElseThrow();\n        assertThat(s2.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_HOMOLOGADO);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 45,
    "length": 4,
    "text": "// Use existing units from data.sql:\n// Unit 8 (SEDESENV - OPERACIONAL) subordinate to 6\n// Unit 9 (SEDIA - OPERACIONAL) subordinate to 6\n// User '111111111111' is ADMIN (can disponibilizar mapas em bloco)",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Use existing units from data.sql:\n        // Unit 8 (SEDESENV - OPERACIONAL) subordinate to 6\n        // Unit 9 (SEDIA - OPERACIONAL) subordinate to 6\n        // User '111111111111' is ADMIN (can disponibilizar mapas em bloco)\n        unidade1 = unidadeRepo.findById(8L)\n                .orElseThrow(() -> new RuntimeException(\"Unit 8 not found in data.sql\"));\n        unidade2 = unidadeRepo.findById(9L)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 54,
    "length": 1,
    "text": "// Create test process",
    "context": "        unidade2 = unidadeRepo.findById(9L)\n                .orElseThrow(() -> new RuntimeException(\"Unit 9 not found in data.sql\"));\n\n        // Create test process\n        processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 62,
    "length": 1,
    "text": "// Create subprocesses with complete maps (Status: MAPEAMENTO_MAPA_CRIADO)",
    "context": "        processo.setDescricao(\"Processo Mapa CDU-24\");\n        processo = processoRepo.save(processo);\n\n        // Create subprocesses with complete maps (Status: MAPEAMENTO_MAPA_CRIADO)\n        subprocesso1 = createSubprocessoComMapaCompleto(unidade1);\n        subprocesso2 = createSubprocessoComMapaCompleto(unidade2);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 75,
    "length": 1,
    "text": "// Criar Subprocesso in correct state for disponibilizar mapa",
    "context": "    }\n\n    private Subprocesso createSubprocessoComMapaCompleto(Unidade unidade) {\n        // Criar Subprocesso in correct state for disponibilizar mapa\n        Subprocesso sub = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        sub.setCodigo(null);\n        sub.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_HOMOLOGADO); // Changed from MAPEAMENTO_MAPA_CRIADO"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// Criar Mapa",
    "context": "        sub.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_HOMOLOGADO); // Changed from MAPEAMENTO_MAPA_CRIADO\n        sub = subprocessoRepo.save(sub);\n\n        // Criar Mapa\n        Mapa mapa = new Mapa();\n        mapa.setSubprocesso(sub);\n        mapa = mapaRepo.save(mapa);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 86,
    "length": 1,
    "text": "// Associar mapa ao subprocesso",
    "context": "        mapa.setSubprocesso(sub);\n        mapa = mapaRepo.save(mapa);\n\n        // Associar mapa ao subprocesso\n        sub.setMapa(mapa);\n        sub = subprocessoRepo.save(sub);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// Criar Atividade",
    "context": "        sub.setMapa(mapa);\n        sub = subprocessoRepo.save(sub);\n\n        // Criar Atividade\n        Atividade ativ = Atividade.builder().mapa(mapa).descricao(\"Atividade Teste \" + unidade.getSigla()).build();\n        atividadeRepo.save(ativ);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 94,
    "length": 1,
    "text": "// Criar Compet√™ncia",
    "context": "        Atividade ativ = Atividade.builder().mapa(mapa).descricao(\"Atividade Teste \" + unidade.getSigla()).build();\n        atividadeRepo.save(ativ);\n\n        // Criar Compet√™ncia\n        Competencia comp = Competencia.builder().descricao(\"Compet√™ncia Teste \" + unidade.getSigla()).mapa(mapa).build();\n        competenciaRepo.save(comp);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 98,
    "length": 1,
    "text": "// Associar (ManyToMany)",
    "context": "        Competencia comp = Competencia.builder().descricao(\"Compet√™ncia Teste \" + unidade.getSigla()).mapa(mapa).build();\n        competenciaRepo.save(comp);\n\n        // Associar (ManyToMany)\n        ativ.getCompetencias().add(comp);\n        atividadeRepo.save(ativ);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 113,
    "length": 1,
    "text": "// Garante que os subprocessos estejam na unidade do ADMIN (1)",
    "context": "        Long codigoContexto = processo.getCodigo();\n        List<Long> unidadesSelecionadas = List.of(subprocesso1.getCodigo(), subprocesso2.getCodigo());\n\n        // Garante que os subprocessos estejam na unidade do ADMIN (1)\n        Unidade adminUnit = unidadeRepo.findById(1L).orElseThrow();\n        Movimentacao movAdmin1 = Movimentacao.builder()\n                .subprocesso(subprocesso1)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 154,
    "length": 1,
    "text": "// Verifica√ß√µes para Subprocesso 1",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Verifica√ß√µes para Subprocesso 1\n        Subprocesso s1 = subprocessoRepo.findById(subprocesso1.getCodigo()).orElseThrow();\n        assertThat(s1.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_MAPA_DISPONIBILIZADO);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU24IntegrationTest.java",
    "type": "line",
    "line": 162,
    "length": 1,
    "text": "// Verifica√ß√µes para Subprocesso 2",
    "context": "        assertThat(movs1).isNotEmpty();\n        assertThat(movs1.getFirst().getDescricao()).contains(\"Disponibiliza√ß√£o do mapa\");\n\n        // Verifica√ß√µes para Subprocesso 2\n        Subprocesso s2 = subprocessoRepo.findById(subprocesso2.getCodigo()).orElseThrow();\n        assertThat(s2.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_MAPA_DISPONIBILIZADO);\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU25IntegrationTest.java",
    "type": "line",
    "line": 42,
    "length": 5,
    "text": "// Use existing 3-level hierarchy from data.sql:\n// Unit 2 (STIC - INTEROPERACIONAL) - top level\n// Unit 6 (COSIS - INTERMEDIARIA) - subordinate to 2, user '666666666666' is GESTOR\n// Unit 8 (SEDESENV - OPERACIONAL) - subordinate to 6\n// Unit 9 (SEDIA - OPERACIONAL) - subordinate to 6",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Use existing 3-level hierarchy from data.sql:\n        // Unit 2 (STIC - INTEROPERACIONAL) - top level\n        // Unit 6 (COSIS - INTERMEDIARIA) - subordinate to 2, user '666666666666' is GESTOR\n        // Unit 8 (SEDESENV - OPERACIONAL) - subordinate to 6\n        // Unit 9 (SEDIA - OPERACIONAL) - subordinate to 6\n\n        Unidade unidade1 = unidadeRepo.findById(8L)\n                .orElseThrow(() -> new RuntimeException(\"Unit 8 not found in data.sql\"));"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU25IntegrationTest.java",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Create test process",
    "context": "        Unidade unidade2 = unidadeRepo.findById(9L)\n                .orElseThrow(() -> new RuntimeException(\"Unit 9 not found in data.sql\"));\n\n        // Create test process\n        processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU25IntegrationTest.java",
    "type": "line",
    "line": 61,
    "length": 1,
    "text": "// Create subprocesses in MAPEAMENTO_MAPA_VALIDADO state",
    "context": "        processo.setDescricao(\"Processo Valida√ß√£o CDU-25\");\n        processo = processoRepo.save(processo);\n\n        // Create subprocesses in MAPEAMENTO_MAPA_VALIDADO state\n        subprocesso1 = SubprocessoFixture.subprocessoPadrao(processo, unidade1);\n        subprocesso1.setCodigo(null);\n        subprocesso1.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_MAPA_VALIDADO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU25IntegrationTest.java",
    "type": "line",
    "line": 72,
    "length": 1,
    "text": "// Subprocessos devem estar na unidade superior (6) para o Gestor aceitar",
    "context": "        subprocesso2.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_MAPA_VALIDADO);\n        subprocesso2 = subprocessoRepo.save(subprocesso2);\n\n        // Subprocessos devem estar na unidade superior (6) para o Gestor aceitar\n        Unidade unidadeSuperior = unidadeRepo.findById(6L).orElseThrow();\n        Movimentacao m1 = Movimentacao.builder()\n                .subprocesso(subprocesso1)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU25IntegrationTest.java",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// GESTOR of unit 6 (parent of units 8 and 9)",
    "context": "    @Test\n    @DisplayName(\"Deve aceitar valida√ß√£o de mapas em bloco\")\n    @WithMockGestor(\"666666666666\")\n        // GESTOR of unit 6 (parent of units 8 and 9)\n    void aceitarValidacaoEmBloco_deveAceitarSucesso() throws Exception {\n\n        Long codigoContexto = processo.getCodigo();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU25IntegrationTest.java",
    "type": "line",
    "line": 126,
    "length": 1,
    "text": "// Check Subprocesso 1",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Check Subprocesso 1\n        Subprocesso s1 = subprocessoRepo.findById(subprocesso1.getCodigo()).orElseThrow();\n        List<Analise> analises1 = analiseRepo.findBySubprocessoCodigoOrderByDataHoraDesc(s1.getCodigo());\n        assertThat(analises1).isNotEmpty();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU25IntegrationTest.java",
    "type": "line",
    "line": 136,
    "length": 1,
    "text": "// Check Subprocesso 2",
    "context": "        assertThat(movs1).isNotEmpty();\n        assertThat(movs1.getFirst().getDescricao()).contains(\"Valida√ß√£o do mapa aceita\");\n\n        // Check Subprocesso 2\n        Subprocesso s2 = subprocessoRepo.findById(subprocesso2.getCodigo()).orElseThrow();\n        assertThat(analiseRepo.findBySubprocessoCodigoOrderByDataHoraDesc(s2.getCodigo())).isNotEmpty();\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU26IntegrationTest.java",
    "type": "line",
    "line": 71,
    "length": 3,
    "text": "// Subprocessos (Status deve ser Validado ou similar, pronto para homologa√ß√£o)\n// O CDU-26 geralmente segue o aceite da valida√ß√£o. Se o gestor aceitou, sobe para admin homologar.\n// O status \"MAPEAMENTO_MAPA_VALIDADO\" √© um bom candidato se n√£o houver um \"VALIDACAO_ACEITA\" intermedi√°rio.",
    "context": "        processo.setDescricao(\"Processo Homologa√ß√£o Valida√ß√£o CDU-26\");\n        processo = processoRepo.save(processo);\n\n        // Subprocessos (Status deve ser Validado ou similar, pronto para homologa√ß√£o)\n        // O CDU-26 geralmente segue o aceite da valida√ß√£o. Se o gestor aceitou, sobe para admin homologar.\n        // O status \"MAPEAMENTO_MAPA_VALIDADO\" √© um bom candidato se n√£o houver um \"VALIDACAO_ACEITA\" intermedi√°rio.\n        subprocesso1 = SubprocessoFixture.subprocessoPadrao(processo, unidade1);\n        subprocesso1.setCodigo(null);\n        subprocesso1.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_MAPA_VALIDADO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU26IntegrationTest.java",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Garante que os subprocessos estejam na unidade do ADMIN (1)",
    "context": "        Long codigoContexto = processo.getCodigo();\n        List<Long> subprocessosSelecionados = List.of(subprocesso1.getCodigo(), subprocesso2.getCodigo());\n\n        // Garante que os subprocessos estejam na unidade do ADMIN (1)\n        Unidade adminUnit = unidadeRepo.findById(1L).orElseThrow();\n        Movimentacao movAdmin1 = Movimentacao.builder()\n                .subprocesso(subprocesso1)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU26IntegrationTest.java",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// Check Subprocesso 1",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Check Subprocesso 1\n        Subprocesso s1 = subprocessoRepo.findById(subprocesso1.getCodigo()).orElseThrow();\n        assertThat(s1.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_MAPA_HOMOLOGADO);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU26IntegrationTest.java",
    "type": "line",
    "line": 146,
    "length": 1,
    "text": "// A mensagem de homologa√ß√£o pode variar. \"Mapa de compet√™ncias homologado\"",
    "context": "\n        List<Movimentacao> movs1 = movimentacaoRepo.findBySubprocessoCodigoOrderByDataHoraDesc(s1.getCodigo());\n        assertThat(movs1).isNotEmpty();\n        // A mensagem de homologa√ß√£o pode variar. \"Mapa de compet√™ncias homologado\"\n        assertThat(movs1.getFirst().getDescricao()).contains(\"homologado\");\n\n        // Check Subprocesso 2"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU26IntegrationTest.java",
    "type": "line",
    "line": 149,
    "length": 1,
    "text": "// Check Subprocesso 2",
    "context": "        // A mensagem de homologa√ß√£o pode variar. \"Mapa de compet√™ncias homologado\"\n        assertThat(movs1.getFirst().getDescricao()).contains(\"homologado\");\n\n        // Check Subprocesso 2\n        Subprocesso s2 = subprocessoRepo.findById(subprocesso2.getCodigo()).orElseThrow();\n        assertThat(s2.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_MAPA_HOMOLOGADO);\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU27IntegrationTest.java",
    "type": "line",
    "line": 39,
    "length": 1,
    "text": "// Obter Unidade",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Obter Unidade\n        Unidade unidade = unidadeRepo.findById(1L).orElseThrow();\n\n        // Criar Processo"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU27IntegrationTest.java",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Criar Processo",
    "context": "        // Obter Unidade\n        Unidade unidade = unidadeRepo.findById(1L).orElseThrow();\n\n        // Criar Processo\n        Processo processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU27IntegrationTest.java",
    "type": "line",
    "line": 50,
    "length": 1,
    "text": "// Criar Subprocesso",
    "context": "        processo.setDescricao(\"Processo CDU-27\");\n        processo = processoRepo.save(processo);\n\n        // Criar Subprocesso\n        subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        subprocesso.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_EM_ANDAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU27IntegrationTest.java",
    "type": "line",
    "line": 60,
    "length": 1,
    "text": "// Reload to attach",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Reload to attach\n        subprocesso = subprocessoRepo.findById(subprocesso.getCodigo()).orElseThrow();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU27IntegrationTest.java",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// Verify Alerta",
    "context": "        Subprocesso atualizado = subprocessoRepo.findById(subprocesso.getCodigo()).orElseThrow();\n        assertThat(atualizado.getDataLimiteEtapa1().toLocalDate()).isEqualTo(novaData);\n\n        // Verify Alerta\n        boolean alertaExiste = alertaRepo.findAll().stream()\n                .anyMatch(a -> a.getUnidadeDestino() != null &&\n                        a.getUnidadeDestino().getCodigo().equals(atualizado.getUnidade().getCodigo()) &&"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU27IntegrationTest.java",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// When/Then",
    "context": "        LocalDate novaData = LocalDate.now().plusDays(20);\n        DataRequest request = new DataRequest(novaData);\n\n        // When/Then\n        mockMvc.perform(\n                        post(\"/api/subprocessos/{codigo}/data-limite\", subprocesso.getCodigo())\n                                .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU28IntegrationTest.java",
    "type": "line",
    "line": 94,
    "length": 1,
    "text": "// When/Then",
    "context": "                \"Datas inv√°lidas\"\n        );\n\n        // When/Then\n        mockMvc.perform(\n                        post(\"/api/unidades/{codUnidade}/atribuicoes-temporarias\", unidade.getCodigo())\n                                .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU29IntegrationTest.java",
    "type": "line",
    "line": 25,
    "length": 1,
    "text": "// Unidades do data.sql: 1 (admin), 101 (gestor), 102 (chefe). 1 -> 101 -> 102",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Unidades do data.sql: 1 (admin), 101 (gestor), 102 (chefe). 1 -> 101 -> 102\n        Unidade u101 = unidadeRepo.findById(101L).orElseThrow();\n        Unidade u102 = unidadeRepo.findById(102L).orElseThrow();\n        Unidade u10 = unidadeRepo.findById(10L).orElseThrow();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU29IntegrationTest.java",
    "type": "line",
    "line": 32,
    "length": 1,
    "text": "// Processo 1: Finalizado, participa unidade 101 (Gestor)",
    "context": "\n        LocalDateTime agora = LocalDateTime.now();\n\n        // Processo 1: Finalizado, participa unidade 101 (Gestor)\n        processoFinalizado1 = Processo.builder()\n                .descricao(\"Processo Finalizado 1\")\n                .situacao(SituacaoProcesso.FINALIZADO)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU29IntegrationTest.java",
    "type": "line",
    "line": 45,
    "length": 1,
    "text": "// Processo 2: Finalizado, participa unidade 102 (Chefe)",
    "context": "        processoFinalizado1 = processoRepo.save(processoFinalizado1);\n        processoRepo.flush();\n\n        // Processo 2: Finalizado, participa unidade 102 (Chefe)\n        Processo processoFinalizado2 = Processo.builder()\n                .descricao(\"Processo Finalizado 2\")\n                .situacao(SituacaoProcesso.FINALIZADO)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU29IntegrationTest.java",
    "type": "line",
    "line": 58,
    "length": 1,
    "text": "// Processo 3: Finalizado, participa unidade 10 (Fora da hierarquia)",
    "context": "        processoRepo.save(processoFinalizado2);\n        processoRepo.flush();\n\n        // Processo 3: Finalizado, participa unidade 10 (Fora da hierarquia)\n        Processo processoFinalizado3 = Processo.builder()\n                .descricao(\"Processo Finalizado 3\")\n                .situacao(SituacaoProcesso.FINALIZADO)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU29IntegrationTest.java",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Criar processo em andamento (n√£o deve aparecer no hist√≥rico)",
    "context": "        processoRepo.save(processoFinalizado3);\n        processoRepo.flush();\n\n        // Criar processo em andamento (n√£o deve aparecer no hist√≥rico)\n        Processo processoEmAndamento = Processo.builder()\n                .descricao(\"Processo Em Andamento\")\n                .situacao(SituacaoProcesso.EM_ANDAMENTO)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 36,
    "length": 1,
    "text": "// Usar unidade existente",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Usar unidade existente\n        Unidade unidade = unidadeRepo.findById(1L).orElseThrow();\n\n        // Criar usu√°rio 1 (que ser√° administrador inicial)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 39,
    "length": 1,
    "text": "// Criar usu√°rio 1 (que ser√° administrador inicial)",
    "context": "        // Usar unidade existente\n        Unidade unidade = unidadeRepo.findById(1L).orElseThrow();\n\n        // Criar usu√°rio 1 (que ser√° administrador inicial)\n        usuario1 = Usuario.builder()\n                .tituloEleitoral(\"123456789012\")\n                .nome(\"Admin Inicial\")"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 49,
    "length": 1,
    "text": "// Criar usu√°rio 2 (que ser√° adicionado como administrador)",
    "context": "                .build();\n        usuarioRepo.save(usuario1);\n\n        // Criar usu√°rio 2 (que ser√° adicionado como administrador)\n        usuario2 = Usuario.builder()\n                .tituloEleitoral(\"234567890123\")\n                .nome(\"Novo Admin\")"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 59,
    "length": 1,
    "text": "// Adicionar admin inicial",
    "context": "                .build();\n        usuarioRepo.save(usuario2);\n\n        // Adicionar admin inicial\n        Administrador admin1 = Administrador.builder().usuarioTitulo(usuario1.getTituloEleitoral()).build();\n        administradorRepo.save(admin1);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 95,
    "length": 1,
    "text": "// Verificar que foi adicionado ao banco",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Verificar que foi adicionado ao banco\n        assertThat(administradorRepo.existsById(usuario2.getTituloEleitoral())).isTrue();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// Adicionar um segundo administrador primeiro",
    "context": "    @DisplayName(\"Deve remover um administrador\")\n    @WithMockAdmin\n    void removerAdministrador_sucesso() throws Exception {\n        // Adicionar um segundo administrador primeiro\n        Administrador admin2 = Administrador.builder().usuarioTitulo(usuario2.getTituloEleitoral()).build();\n        administradorRepo.save(admin2);\n        entityManager.flush();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 109,
    "length": 1,
    "text": "// Remover o segundo administrador",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Remover o segundo administrador\n        mockMvc.perform(post(\"/api/usuarios/administradores/{usuarioTitulo}/remover\", usuario2.getTituloEleitoral())\n                        .with(csrf()))\n                .andExpect(status().isOk());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 117,
    "length": 1,
    "text": "// Verificar que foi removido do banco",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Verificar que foi removido do banco\n        assertThat(administradorRepo.existsById(usuario2.getTituloEleitoral())).isFalse();\n        // Mas o primeiro ainda existe\n        assertThat(administradorRepo.existsById(usuario1.getTituloEleitoral())).isTrue();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 119,
    "length": 1,
    "text": "// Mas o primeiro ainda existe",
    "context": "\n        // Verificar que foi removido do banco\n        assertThat(administradorRepo.existsById(usuario2.getTituloEleitoral())).isFalse();\n        // Mas o primeiro ainda existe\n        assertThat(administradorRepo.existsById(usuario1.getTituloEleitoral())).isTrue();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU30IntegrationTest.java",
    "type": "line",
    "line": 127,
    "length": 1,
    "text": "// Remover todos os outros administradores primeiro, deixando apenas usuario1",
    "context": "    @DisplayName(\"N√£o deve permitir remover o √∫nico administrador\")\n    @WithMockAdmin\n    void removerAdministrador_unico() throws Exception {\n        // Remover todos os outros administradores primeiro, deixando apenas usuario1\n        long totalAdmins = administradorRepo.count();\n        if (totalAdmins > 1) {\n            administradorRepo.findAll().stream()"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU31IntegrationTest.java",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// Listar",
    "context": "    @DisplayName(\"Deve permitir listar e atualizar configura√ß√µes como ADMIN\")\n    @WithMockAdmin\n    void atualizarConfiguracoes_sucesso() throws Exception {\n        // Listar\n        mockMvc.perform(get(\"/api/configuracoes\")\n                        .with(csrf()))\n                .andExpect(status().isOk())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU31IntegrationTest.java",
    "type": "line",
    "line": 65,
    "length": 1,
    "text": "// Atualizar",
    "context": "                    assertThat(content).contains(\"30\");\n                });\n\n        // Atualizar\n        List<Parametro> existing = parametroRepo.findAll();\n        existing.forEach(p -> {\n            if (p.getChave().equals(\"DIAS_INATIVACAO_PROCESSO\")) p.setValor(\"60\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU32IntegrationTest.java",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Garantir que ADMIN existe",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Garantir que ADMIN existe\n        if (unidadeRepo.findBySigla(\"ADMIN\").isEmpty()) {\n            Unidade admin = new Unidade();\n            admin.setSigla(\"ADMIN\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU32IntegrationTest.java",
    "type": "line",
    "line": 54,
    "length": 1,
    "text": "// Obter Unidade",
    "context": "            unidadeRepo.save(admin);\n        }\n\n        // Obter Unidade\n        Unidade unidade = unidadeRepo.findById(1L).orElseGet(() -> {\n            Unidade u = new Unidade();\n            u.setCodigo(1L);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU32IntegrationTest.java",
    "type": "line",
    "line": 65,
    "length": 1,
    "text": "// Criar Processo",
    "context": "            return unidadeRepo.save(u);\n        });\n\n        // Criar Processo\n        Processo processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU32IntegrationTest.java",
    "type": "line",
    "line": 73,
    "length": 2,
    "text": "// Criar Subprocesso em estado que permite reabertura\n// (MAPEAMENTO_CADASTRO_HOMOLOGADO)",
    "context": "        processo.setDescricao(\"Processo CDU-32\");\n        processo = processoRepo.save(processo);\n\n        // Criar Subprocesso em estado que permite reabertura\n        // (MAPEAMENTO_CADASTRO_HOMOLOGADO)\n        subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        subprocesso.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_HOMOLOGADO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU32IntegrationTest.java",
    "type": "line",
    "line": 84,
    "length": 1,
    "text": "// Reload to attach",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Reload to attach\n        subprocesso = subprocessoRepo.findById(subprocesso.getCodigo()).orElseThrow();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU32IntegrationTest.java",
    "type": "line",
    "line": 111,
    "length": 1,
    "text": "// Verificar se foi criada uma movimenta√ß√£o",
    "context": "        Subprocesso reaberto = subprocessoRepo.findById(subprocesso.getCodigo()).orElseThrow();\n        assertThat(reaberto.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_EM_ANDAMENTO);\n\n        // Verificar se foi criada uma movimenta√ß√£o\n        List<Movimentacao> movimentacoes = movimentacaoRepo\n                .findBySubprocessoCodigoOrderByDataHoraDesc(subprocesso.getCodigo());\n        assertThat(movimentacoes).isNotEmpty();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU32IntegrationTest.java",
    "type": "line",
    "line": 120,
    "length": 1,
    "text": "// Verificar se foi criado um alerta",
    "context": "                        m.getDescricao().contains(\"Reabertura de cadastro\"));\n        assertThat(movimentacaoExiste).isTrue();\n\n        // Verificar se foi criado um alerta\n        List<Alerta> alerts = alertaRepo.findAll();\n        assertThat(alerts).isNotEmpty();\n        boolean alertaExiste = alerts.stream()"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU32IntegrationTest.java",
    "type": "line",
    "line": 139,
    "length": 1,
    "text": "// When/Then",
    "context": "\n        JustificativaRequest request = new JustificativaRequest(\"Tentativa sem permiss√£o\");\n\n        // When/Then\n        mockMvc.perform(\n                        post(API_REABRIR_CADASTRO, subprocesso.getCodigo())\n                                .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU32IntegrationTest.java",
    "type": "line",
    "line": 155,
    "length": 1,
    "text": "// When/Then",
    "context": "\n        JustificativaRequest request = new JustificativaRequest(\"\");\n\n        // When/Then\n        mockMvc.perform(\n                        post(API_REABRIR_CADASTRO, subprocesso.getCodigo())\n                                .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU33IntegrationTest.java",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Garantir que ADMIN existe",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Garantir que ADMIN existe\n        if (unidadeRepo.findBySigla(\"ADMIN\").isEmpty()) {\n            Unidade admin = new Unidade();\n            admin.setSigla(\"ADMIN\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU33IntegrationTest.java",
    "type": "line",
    "line": 54,
    "length": 1,
    "text": "// Obter Unidade",
    "context": "            unidadeRepo.save(admin);\n        }\n\n        // Obter Unidade\n        Unidade unidade = unidadeRepo.findById(1L).orElseGet(() -> {\n            Unidade u = new Unidade();\n            u.setCodigo(1L);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU33IntegrationTest.java",
    "type": "line",
    "line": 65,
    "length": 1,
    "text": "// Criar Processo de REVISAO",
    "context": "            return unidadeRepo.save(u);\n        });\n\n        // Criar Processo de REVISAO\n        Processo processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.REVISAO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU33IntegrationTest.java",
    "type": "line",
    "line": 73,
    "length": 2,
    "text": "// Criar Subprocesso em estado que permite reabertura de revis√£o\n// (REVISAO_CADASTRO_HOMOLOGADA)",
    "context": "        processo.setDescricao(\"Processo CDU-33\");\n        processo = processoRepo.save(processo);\n\n        // Criar Subprocesso em estado que permite reabertura de revis√£o\n        // (REVISAO_CADASTRO_HOMOLOGADA)\n        subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        subprocesso.setSituacaoForcada(SituacaoSubprocesso.REVISAO_CADASTRO_HOMOLOGADA);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU33IntegrationTest.java",
    "type": "line",
    "line": 84,
    "length": 1,
    "text": "// Reload to attach",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Reload to attach\n        subprocesso = subprocessoRepo.findById(subprocesso.getCodigo()).orElseThrow();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU33IntegrationTest.java",
    "type": "line",
    "line": 111,
    "length": 1,
    "text": "// Verificar se foi criada uma movimenta√ß√£o",
    "context": "        Subprocesso reaberto = subprocessoRepo.findById(subprocesso.getCodigo()).orElseThrow();\n        assertThat(reaberto.getSituacao()).isEqualTo(SituacaoSubprocesso.REVISAO_CADASTRO_EM_ANDAMENTO);\n\n        // Verificar se foi criada uma movimenta√ß√£o\n        List<Movimentacao> movimentacoes = movimentacaoRepo\n                .findBySubprocessoCodigoOrderByDataHoraDesc(subprocesso.getCodigo());\n        assertThat(movimentacoes).isNotEmpty();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU33IntegrationTest.java",
    "type": "line",
    "line": 120,
    "length": 1,
    "text": "// Verificar se foi criado um alerta",
    "context": "                        m.getDescricao().contains(\"Reabertura de revis√£o de cadastro\"));\n        assertThat(movimentacaoExiste).isTrue();\n\n        // Verificar se foi criado um alerta\n        List<Alerta> alerts = alertaRepo.findAll();\n        assertThat(alerts).isNotEmpty();\n        boolean alertaExiste = alerts.stream()"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU33IntegrationTest.java",
    "type": "line",
    "line": 139,
    "length": 1,
    "text": "// When/Then",
    "context": "\n        JustificativaRequest request = new JustificativaRequest(\"Tentativa sem permiss√£o\");\n\n        // When/Then\n        mockMvc.perform(\n                        post(API_REABRIR_REVISAO, subprocesso.getCodigo())\n                                .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU33IntegrationTest.java",
    "type": "line",
    "line": 155,
    "length": 1,
    "text": "// When/Then",
    "context": "\n        JustificativaRequest request = new JustificativaRequest(\"\");\n\n        // When/Then\n        mockMvc.perform(\n                        post(API_REABRIR_REVISAO, subprocesso.getCodigo())\n                                .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU34IntegrationTest.java",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// Obter Unidade",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Obter Unidade\n        unidade = unidadeRepo.findById(2L).orElseThrow();\n\n        // Criar Processo"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU34IntegrationTest.java",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// Criar Processo",
    "context": "        // Obter Unidade\n        unidade = unidadeRepo.findById(2L).orElseThrow();\n\n        // Criar Processo\n        processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU34IntegrationTest.java",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// Criar Subprocesso com prazo pr√≥ximo",
    "context": "        processo.adicionarParticipantes(Set.of(unidade)); // Adicionar unidade como participante\n        processo = processoRepo.save(processo);\n\n        // Criar Subprocesso com prazo pr√≥ximo\n        Subprocesso subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        subprocesso.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_EM_ANDAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU34IntegrationTest.java",
    "type": "line",
    "line": 65,
    "length": 1,
    "text": "// Reload to attach",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Reload to attach\n        subprocessoRepo.findById(subprocesso.getCodigo()).orElseThrow();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU34IntegrationTest.java",
    "type": "line",
    "line": 91,
    "length": 1,
    "text": "// Verificar se foi criado um alerta",
    "context": "        entityManager.flush();\n        entityManager.clear();\n\n        // Verificar se foi criado um alerta\n        boolean alertaExiste = alertaRepo.findAll().stream()\n                .anyMatch(a -> a.getUnidadeDestino() != null &&\n                        a.getUnidadeDestino().getCodigo().equals(unidade.getCodigo()) &&"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU34IntegrationTest.java",
    "type": "line",
    "line": 114,
    "length": 1,
    "text": "// When/Then",
    "context": "                .unidadeCodigo(unidade.getCodigo())\n                .build();\n\n        // When/Then\n        mockMvc.perform(\n                        post(\"/api/processos/{codigo}/enviar-lembrete\", processo.getCodigo())\n                                .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU34IntegrationTest.java",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// When/Then",
    "context": "                .unidadeCodigo(99999L)\n                .build();\n\n        // When/Then\n        mockMvc.perform(\n                        post(\"/api/processos/{codigo}/enviar-lembrete\", processo.getCodigo())\n                                .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU36IntegrationTest.java",
    "type": "line",
    "line": 35,
    "length": 1,
    "text": "// Obter Unidade",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Obter Unidade\n        unidade = unidadeRepo.findById(1L).orElseThrow();\n\n        // Criar Processo"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU36IntegrationTest.java",
    "type": "line",
    "line": 38,
    "length": 1,
    "text": "// Criar Processo",
    "context": "        // Obter Unidade\n        unidade = unidadeRepo.findById(1L).orElseThrow();\n\n        // Criar Processo\n        processo = ProcessoFixture.processoPadrao();\n        processo.setCodigo(null);\n        processo.setTipo(TipoProcesso.MAPEAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU36IntegrationTest.java",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// Criar Subprocesso",
    "context": "        processo.setDescricao(\"Processo CDU-36\");\n        processo = processoRepo.save(processo);\n\n        // Criar Subprocesso\n        Subprocesso subprocesso = SubprocessoFixture.subprocessoPadrao(processo, unidade);\n        subprocesso.setCodigo(null);\n        subprocesso.setSituacaoForcada(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_EM_ANDAMENTO);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU36IntegrationTest.java",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Criar Mapa (opcional, mas ajuda a tornar o teste mais realista)",
    "context": "        subprocesso.setDataLimiteEtapa1(LocalDateTime.now().plusDays(10));\n        subprocesso = subprocessoRepo.save(subprocesso);\n\n        // Criar Mapa (opcional, mas ajuda a tornar o teste mais realista)\n        Mapa mapa = new Mapa();\n        mapa.setSubprocesso(subprocesso);\n        mapaRepo.save(mapa);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU36IntegrationTest.java",
    "type": "line",
    "line": 66,
    "length": 1,
    "text": "// When/Then - Relat√≥rio de todos os mapas do processo",
    "context": "    @DisplayName(\"Deve gerar relat√≥rio de mapas em PDF quando ADMIN\")\n    @WithMockAdmin\n    void gerarRelatorioMapas_comoAdmin_sucesso() throws Exception {\n        // When/Then - Relat√≥rio de todos os mapas do processo\n        mockMvc.perform(get(API_REL_MAPAS, processo.getCodigo()).with(csrf()))\n                .andExpect(status().isOk())\n                .andExpect(header().string(\"Content-Type\", \"application/pdf\"))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU36IntegrationTest.java",
    "type": "line",
    "line": 77,
    "length": 1,
    "text": "// When/Then - Relat√≥rio filtrado por unidade espec√≠fica",
    "context": "    @DisplayName(\"Deve gerar relat√≥rio de mapas filtrado por unidade quando ADMIN\")\n    @WithMockAdmin\n    void gerarRelatorioMapas_filtradoPorUnidade_sucesso() throws Exception {\n        // When/Then - Relat√≥rio filtrado por unidade espec√≠fica\n        mockMvc.perform(get(API_REL_MAPAS, processo.getCodigo())\n                        .param(\"codUnidade\", unidade.getCodigo().toString()).with(csrf()))\n                .andExpect(status().isOk())"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU36IntegrationTest.java",
    "type": "line",
    "line": 89,
    "length": 1,
    "text": "// When/Then",
    "context": "    @DisplayName(\"N√£o deve permitir gerar relat√≥rio de mapas sem ser ADMIN\")\n    @WithMockUser(roles = \"GESTOR\")\n    void gerarRelatorioMapas_semPermissao_proibido() throws Exception {\n        // When/Then\n        mockMvc.perform(get(API_REL_MAPAS, processo.getCodigo()).with(csrf()))\n                .andExpect(status().isForbidden());\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/CDU36IntegrationTest.java",
    "type": "line",
    "line": 98,
    "length": 1,
    "text": "// When/Then",
    "context": "    @DisplayName(\"Deve retornar erro ao gerar relat√≥rio de processo inexistente\")\n    @WithMockAdmin\n    void gerarRelatorioMapas_processoInexistente_erro() throws Exception {\n        // When/Then\n        mockMvc.perform(get(API_REL_MAPAS, 99999L).with(csrf())).andExpect(status().is4xxClientError());\n    }\n}"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/MapaManutencaoServiceIntegrationTest.java",
    "type": "line",
    "line": 39,
    "length": 1,
    "text": "// Em data.sql, a atividade 17001 est√° inserida e associada ao mapa 1700",
    "context": "        @Test\n        @DisplayName(\"Deve obter atividade por c√≥digo\")\n        void deveObterPorCodigo() {\n            // Em data.sql, a atividade 17001 est√° inserida e associada ao mapa 1700\n            Atividade ativ = service.obterAtividadePorCodigo(17001L);\n            assertThat(ativ).isNotNull();\n            assertThat(ativ.getCodigo()).isEqualTo(17001L);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/MapaManutencaoServiceIntegrationTest.java",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Em data.sql, o mapa 1700 possui a atividade 17001",
    "context": "        @Test\n        @DisplayName(\"Deve buscar atividades por mapa (com conhecimentos)\")\n        void deveBuscarPorMapa() {\n            // Em data.sql, o mapa 1700 possui a atividade 17001\n            List<Atividade> ativs = service.buscarAtividadesPorMapaCodigo(1700L);\n            assertThat(ativs).isNotEmpty();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/MapaManutencaoServiceIntegrationTest.java",
    "type": "line",
    "line": 66,
    "length": 1,
    "text": "// Em data.sql, a Unidade 8 possui o mapa 1001 como vigente no subprocesso 60000",
    "context": "        @Test\n        @DisplayName(\"Deve buscar mapa vigente por unidade\")\n        void buscarMapaVigentePorUnidade() {\n            // Em data.sql, a Unidade 8 possui o mapa 1001 como vigente no subprocesso 60000\n            Mapa mapa = service.buscarMapaVigentePorUnidade(8L).orElse(null);\n            assertThat(mapa).isNotNull();\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/MapaManutencaoServiceIntegrationTest.java",
    "type": "line",
    "line": 74,
    "length": 1,
    "text": "// Em data.sql, o subprocesso 60000 est√° associado ao mapa 1001",
    "context": "        @Test\n        @DisplayName(\"Deve buscar mapa por c√≥digo de subprocesso\")\n        void buscarMapaPorSubprocessoCodigo() {\n            // Em data.sql, o subprocesso 60000 est√° associado ao mapa 1001\n            Mapa mapa = service.buscarMapaPorSubprocessoCodigo(60000L).orElse(null);\n            assertThat(mapa).isNotNull();\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/MapaManutencaoServiceIntegrationTest.java",
    "type": "line",
    "line": 82,
    "length": 1,
    "text": "// Em data.sql, o mapa 1001 existe",
    "context": "        @Test\n        @DisplayName(\"Deve verificar se mapa existe\")\n        void mapaExiste() {\n            // Em data.sql, o mapa 1001 existe\n            boolean existe = service.mapaExiste(1001L);\n            assertThat(existe).isTrue();\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/MapaManutencaoServiceIntegrationTest.java",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Criando dados ad-hoc pois precisamos modificar, para n√£o impactar outros testes com data.sql",
    "context": "        @Test\n        @DisplayName(\"Deve atualizar atividade com sucesso\")\n        void deveAtualizarAtividade() {\n            // Criando dados ad-hoc pois precisamos modificar, para n√£o impactar outros testes com data.sql\n            Subprocesso sub = subprocessoRepo.findById(60000L).orElseThrow();\n            Mapa mapa = mapaRepo.saveAndFlush(Mapa.builder().subprocesso(sub).build());\n            Atividade atividade = atividadeRepo.saveAndFlush(Atividade.builder().mapa(mapa).descricao(\"Antiga\").build());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/MapaManutencaoServiceIntegrationTest.java",
    "type": "line",
    "line": 184,
    "length": 1,
    "text": "// No data.sql o mapa 1001 possui compet√™ncias 10001 e 10002",
    "context": "        @Test\n        @DisplayName(\"Deve buscar compet√™ncias por c√≥digo e por mapa\")\n        void leitura() {\n            // No data.sql o mapa 1001 possui compet√™ncias 10001 e 10002\n            List<Competencia> comps = service.buscarCompetenciasPorCodMapa(1001L);\n            assertThat(comps).isNotEmpty();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/MapaManutencaoServiceIntegrationTest.java",
    "type": "line",
    "line": 232,
    "length": 1,
    "text": "// Flush and clear cache to ensure DB has the correct state and the entity manager fetches it afresh",
    "context": "            CriarConhecimentoRequest req1 = CriarConhecimentoRequest.builder().descricao(\"Conhecimento 1\").build();\n            Conhecimento c1 = service.criarConhecimento(atividade.getCodigo(), req1);\n\n            // Flush and clear cache to ensure DB has the correct state and the entity manager fetches it afresh\n            entityManager.flush();\n            entityManager.clear();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/MapaManutencaoServiceIntegrationTest.java",
    "type": "line",
    "line": 251,
    "length": 1,
    "text": "// Flush to trigger actual DB deletion and clear the persistence context cache to ensure correct check",
    "context": "\n            service.excluirConhecimento(atividade.getCodigo(), c1.getCodigo());\n\n            // Flush to trigger actual DB deletion and clear the persistence context cache to ensure correct check\n            entityManager.flush();\n            entityManager.clear();\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoBuscaIntegrationTest.java",
    "type": "line",
    "line": 60,
    "length": 1,
    "text": "// Autenticar como ADMIN para ter vis√£o global",
    "context": "    @Test\n    @DisplayName(\"buscarPorProcessoEUnidade - Deve encontrar subprocesso existente no banco\")\n    void buscarPorProcessoEUnidade_Sucesso() throws Exception {\n        // Autenticar como ADMIN para ter vis√£o global\n        sgc.organizacao.model.Usuario admin = usuarioRepo.findById(\"111111111111\").orElseThrow();\n        admin.setPerfilAtivo(sgc.organizacao.model.Perfil.ADMIN);\n        admin.setUnidadeAtivaCodigo(1L);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 47,
    "length": 1,
    "text": "// 1. Unidades",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // 1. Unidades\n        unidadeRaiz = unidadeRepo.findById(1L).orElseThrow();\n\n        unidadeFilha = UnidadeFixture.unidadePadrao();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 57,
    "length": 1,
    "text": "// 2. Usu√°rios",
    "context": "        unidadeFilha.setUnidadeSuperior(unidadeRaiz);\n        unidadeFilha = unidadeRepo.save(unidadeFilha);\n\n        // 2. Usu√°rios\n        admin = usuarioRepo.findById(\"111111111111\").orElseThrow(); // Admin padr√£o do seed (Admin Teste V2)\n\n        Usuario chefe = UsuarioFixture.usuarioPadrao();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 75,
    "length": 1,
    "text": "// 3. Processo",
    "context": "                .build();\n        usuarioPerfilRepo.save(perfilChefe);\n\n        // 3. Processo\n        Processo processo = Processo.builder()\n                .descricao(\"Processo Mapeamento Teste\")\n                .tipo(TipoProcesso.MAPEAMENTO)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 84,
    "length": 1,
    "text": "// 4. Subprocesso Inicial",
    "context": "                .build();\n        processoRepo.save(processo);\n\n        // 4. Subprocesso Inicial\n        subprocesso = Subprocesso.builder()\n                .unidade(unidadeFilha)\n                .situacao(SituacaoSubprocesso.MAPEAMENTO_CADASTRO_HOMOLOGADO) // Come√ßando j√° homologado para focar no mapa"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Criar atividade para associar",
    "context": "        mapaRepo.save(mapa);\n        subprocesso.setMapa(mapa);\n\n        // Criar atividade para associar\n        Atividade ativ = Atividade.builder().mapa(mapa).descricao(\"Atividade 1\").build();\n        atividadeRepo.save(ativ);\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// Definir mapa vigente para a unidade (necess√°rio para permiss√µes de impacto e outras verifica√ß√µes)",
    "context": "        Atividade ativ = Atividade.builder().mapa(mapa).descricao(\"Atividade 1\").build();\n        atividadeRepo.save(ativ);\n\n        // Definir mapa vigente para a unidade (necess√°rio para permiss√µes de impacto e outras verifica√ß√µes)\n        unidadeService.definirMapaVigente(unidadeFilha.getCodigo(), mapa);\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Se eu setar a unidade ativa do ADMIN para a unidade filha, deve passar.",
    "context": "    private void autenticar(Usuario usuario, Perfil perfil) {\n        usuario.setPerfilAtivo(perfil);\n\n        // Se eu setar a unidade ativa do ADMIN para a unidade filha, deve passar.\n        usuario.setUnidadeAtivaCodigo(unidadeFilha.getCodigo());\n\n        usuario.setAuthorities(Set.of(new org.springframework.security.core.authority.SimpleGrantedAuthority(\"ROLE_\" + perfil.name())));"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 124,
    "length": 6,
    "text": "// 1. Adicionar Compet√™ncia (ADMIN)\n// O ADMIN est√° na Unidade RAIZ. O Subprocesso est√° na Unidade FILHA.\n// A Regra de Ouro (SgcPermissionEvaluator) exige que a localiza√ß√£o do subprocesso (FILHA)\n// seja igual √† unidade ativa do usu√°rio para a√ß√µes de escrita (EDITAR_MAPA, DISPONIBILIZAR_MAPA).\n// Mesmo ADMIN n√£o escapa dessa regra para a√ß√µes de escrita.\n// Portanto, o ADMIN deve \"simular\" estar na unidade FILHA para realizar estas a√ß√µes.",
    "context": "        Long spId = subprocesso.getCodigo();\n        Long mapaId = subprocesso.getMapa().getCodigo();\n\n        // 1. Adicionar Compet√™ncia (ADMIN)\n        // O ADMIN est√° na Unidade RAIZ. O Subprocesso est√° na Unidade FILHA.\n        // A Regra de Ouro (SgcPermissionEvaluator) exige que a localiza√ß√£o do subprocesso (FILHA)\n        // seja igual √† unidade ativa do usu√°rio para a√ß√µes de escrita (EDITAR_MAPA, DISPONIBILIZAR_MAPA).\n        // Mesmo ADMIN n√£o escapa dessa regra para a√ß√µes de escrita.\n        // Portanto, o ADMIN deve \"simular\" estar na unidade FILHA para realizar estas a√ß√µes.\n\n        admin.setUnidadeAtivaCodigo(unidadeFilha.getCodigo()); // Admin troca de unidade para atuar no subprocesso\n        autenticar(admin, Perfil.ADMIN);"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 151,
    "length": 3,
    "text": "// 2. Disponibilizar Mapa (ADMIN)\n// Situa√ß√£o deve mudar para MAPA_DISPONIBILIZADO\n// Admin continua na unidade filha para essa a√ß√£o de escrita.",
    "context": "        Subprocesso sp = subprocessoRepo.findById(spId).orElseThrow();\n        assertThat(sp.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_MAPA_CRIADO);\n\n        // 2. Disponibilizar Mapa (ADMIN)\n        // Situa√ß√£o deve mudar para MAPA_DISPONIBILIZADO\n        // Admin continua na unidade filha para essa a√ß√£o de escrita.\n\n        DisponibilizarMapaRequest dispReq = DisponibilizarMapaRequest.builder()\n                .dataLimite(LocalDate.now().plusDays(10))"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 170,
    "length": 4,
    "text": "// Situa√ß√£o deve mudar para MAPA_VALIDADO\n// A Disponibiliza√ß√£o enviou o processo para a Unidade Superior (RAIZ).\n// Quem valida a disponibiliza√ß√£o √© o Chefe da Unidade SUPERIOR (que recebeu o processo).\n// O ADMIN √© titular da RAIZ e possui o perfil CHEFE l√° (segundo seed).",
    "context": "        assertThat(sp.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_MAPA_DISPONIBILIZADO);\n\n\n        // Situa√ß√£o deve mudar para MAPA_VALIDADO\n        // A Disponibiliza√ß√£o enviou o processo para a Unidade Superior (RAIZ).\n        // Quem valida a disponibiliza√ß√£o √© o Chefe da Unidade SUPERIOR (que recebeu o processo).\n        // O ADMIN √© titular da RAIZ e possui o perfil CHEFE l√° (segundo seed).\n\n        // Para validar mapa, a regra √©:\n        // 1. Ser perfil CHEFE."
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 175,
    "length": 3,
    "text": "// Para validar mapa, a regra √©:\n// 1. Ser perfil CHEFE.\n// 2. Estar na mesma unidade onde est√° o subprocesso (RAIZ).",
    "context": "        // Quem valida a disponibiliza√ß√£o √© o Chefe da Unidade SUPERIOR (que recebeu o processo).\n        // O ADMIN √© titular da RAIZ e possui o perfil CHEFE l√° (segundo seed).\n\n        // Para validar mapa, a regra √©:\n        // 1. Ser perfil CHEFE.\n        // 2. Estar na mesma unidade onde est√° o subprocesso (RAIZ).\n\n        admin.setUnidadeAtivaCodigo(unidadeRaiz.getCodigo()); // Admin atuando na RAIZ\n        autenticar(admin, Perfil.CHEFE); // Admin como CHEFE da Raiz"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoFluxoIntegrationTest.java",
    "type": "line",
    "line": 190,
    "length": 4,
    "text": "// O teste j√° cobre:\n// - Adicionar compet√™ncia (Escrita na Unidade Filha)\n// - Disponibilizar Mapa (Transi√ß√£o de estado e localiza√ß√£o para cima)\n// - Validar Mapa (Escrita na Unidade Raiz pelo Chefe)",
    "context": "        assertThat(sp.getSituacao()).isEqualTo(SituacaoSubprocesso.MAPEAMENTO_MAPA_VALIDADO);\n\n\n        // O teste j√° cobre:\n        // - Adicionar compet√™ncia (Escrita na Unidade Filha)\n        // - Disponibilizar Mapa (Transi√ß√£o de estado e localiza√ß√£o para cima)\n        // - Validar Mapa (Escrita na Unidade Raiz pelo Chefe)\n\n    }\n}"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/SubprocessoServiceContextoIntegrationTest.java",
    "type": "line",
    "line": 38,
    "length": 2,
    "text": "// Find existing unit with a responsibility established in the seed.sql/data.sql\n// Unidade 8 (SEDESENV) has titular '3' (00000003)",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Find existing unit with a responsibility established in the seed.sql/data.sql\n        // Unidade 8 (SEDESENV) has titular '3' (00000003)\n        unidade = unidadeRepo.findById(8L).orElseThrow();\n\n        admin = usuarioRepo.findById(\"3\").orElseThrow(); // Using existing titular to avoid mock setups"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/TestLoginHelper.java",
    "type": "line",
    "line": 28,
    "length": 1,
    "text": "// 1. Autenticar",
    "context": "     * Realiza login completo e retorna o token JWT.\n     */\n    public String login(MockMvc mockMvc, String titulo, Perfil perfil, Long unidadeCodigo) throws Exception {\n        // 1. Autenticar\n        AutenticarRequest autenticarRequest = new AutenticarRequest(titulo, \"senha123\");\n        MvcResult autenticarResult = mockMvc.perform(post(\"/api/usuarios/autenticar\")\n                        .contentType(MediaType.APPLICATION_JSON)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/TestLoginHelper.java",
    "type": "line",
    "line": 36,
    "length": 1,
    "text": "// Extrair cookie de pr√©-autentica√ß√£o",
    "context": "                .andExpect(status().isOk())\n                .andReturn();\n\n        // Extrair cookie de pr√©-autentica√ß√£o\n        Cookie preAuthCookie = autenticarResult.getResponse().getCookie(\"SGC_PRE_AUTH\");\n        if (preAuthCookie == null) {\n            throw new IllegalStateException(\"Cookie de pr√©-autentica√ß√£o n√£o encontrado\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/TestLoginHelper.java",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// 2. Autorizar (n√£o precisa do resultado, mas faz parte do fluxo)",
    "context": "            throw new IllegalStateException(\"Cookie de pr√©-autentica√ß√£o n√£o encontrado\");\n        }\n\n        // 2. Autorizar (n√£o precisa do resultado, mas faz parte do fluxo)\n        AutorizarRequest autorizarRequest = new AutorizarRequest(titulo);\n        mockMvc.perform(post(\"/api/usuarios/autorizar\")\n                        .cookie(preAuthCookie)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/TestLoginHelper.java",
    "type": "line",
    "line": 50,
    "length": 1,
    "text": "// 3. Entrar com perfil e unidade",
    "context": "                        .content(objectMapper.writeValueAsString(autorizarRequest)))\n                .andExpect(status().isOk());\n\n        // 3. Entrar com perfil e unidade\n        EntrarRequest entrarRequest = new EntrarRequest(titulo, perfil.name(), unidadeCodigo);\n        MvcResult entrarResult = mockMvc.perform(post(\"/api/usuarios/entrar\")\n                        .cookie(preAuthCookie)"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/TestLoginHelper.java",
    "type": "line",
    "line": 59,
    "length": 1,
    "text": "// Extrair token da resposta",
    "context": "                .andExpect(status().isOk())\n                .andReturn();\n\n        // Extrair token da resposta\n        String responseBody = entrarResult.getResponse().getContentAsString();\n        EntrarResponse response = objectMapper.readValue(responseBody, EntrarResponse.class);\n        return response.token();"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/WithMockAdminSecurityContextFactory.java",
    "type": "line",
    "line": 38,
    "length": 1,
    "text": "// ADMIN atua na unidade raiz (id=1) conforme acesso.md",
    "context": "\n        principal.setPerfilAtivo(Perfil.ADMIN);\n\n        // ADMIN atua na unidade raiz (id=1) conforme acesso.md\n        principal.setUnidadeAtivaCodigo(1L);\n\n        Set<GrantedAuthority> authorities = Set.of(Perfil.ADMIN.toGrantedAuthority());"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/WithMockChefeSecurityContextFactory.java",
    "type": "line",
    "line": 29,
    "length": 1,
    "text": "// Carregar atribui√ß√µes do banco de dados",
    "context": "        Usuario usuario = usuarioRepo.findById(titulo)\n                .orElseThrow(() -> new IllegalStateException(\"Usu√°rio n√£o encontrado no data.sql: \" + titulo));\n\n        // Carregar atribui√ß√µes do banco de dados\n        var atribuicoes = usuarioPerfilRepo.findByUsuarioTitulo(titulo);\n        if (atribuicoes.isEmpty()) {\n            throw new IllegalStateException(\"Usu√°rio \" + titulo + \" n√£o possui perfis no data.sql\");"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/WithMockChefeSecurityContextFactory.java",
    "type": "line",
    "line": 35,
    "length": 1,
    "text": "// Define perfil ativo como CHEFE",
    "context": "            throw new IllegalStateException(\"Usu√°rio \" + titulo + \" n√£o possui perfis no data.sql\");\n        }\n\n        // Define perfil ativo como CHEFE\n        usuario.setPerfilAtivo(Perfil.CHEFE);\n\n        // Busca a unidade onde ele √© CHEFE"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/WithMockChefeSecurityContextFactory.java",
    "type": "line",
    "line": 38,
    "length": 1,
    "text": "// Busca a unidade onde ele √© CHEFE",
    "context": "        // Define perfil ativo como CHEFE\n        usuario.setPerfilAtivo(Perfil.CHEFE);\n\n        // Busca a unidade onde ele √© CHEFE\n        UsuarioPerfil chefia = atribuicoes.stream()\n                .filter(a -> a.getPerfil() == Perfil.CHEFE)\n                .findFirst()"
  },
  {
    "file": "backend/src/test/java/sgc/integracao/mocks/WithMockCustomUserSecurityContextFactory.java",
    "type": "line",
    "line": 31,
    "length": 1,
    "text": "// Define perfil ativo (pega o primeiro dos informados na anota√ß√£o)",
    "context": "        Unidade unidade = unidadeRepo.findById(customUser.unidadeId())\n                .orElseThrow(() -> new IllegalStateException(\"Unidade \" + customUser.unidadeId() + \" n√£o encontrada no data.sql\"));\n\n        // Define perfil ativo (pega o primeiro dos informados na anota√ß√£o)\n        if (customUser.perfis().length > 0) {\n            principal.setPerfilAtivo(Perfil.valueOf(customUser.perfis()[0]));\n        } else {"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/AtividadeControllerTest.java",
    "type": "line",
    "line": 90,
    "length": 2,
    "text": "// Sem @WithMockUser, o contexto de seguran√ßa est√° vazio\n// O controller deve retornar 401",
    "context": "        @Test\n        @DisplayName(\"Deve retornar 401 se sem autentica√ß√£o\")\n        void deveRetornar401SeSemAutenticacao() throws Exception {\n            // Sem @WithMockUser, o contexto de seguran√ßa est√° vazio\n            // O controller deve retornar 401\n            mockMvc.perform(post(\"/api/atividades\")\n                            .with(csrf())\n                            .contentType(MediaType.APPLICATION_JSON)"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/MapaControllerTest.java",
    "type": "line",
    "line": 104,
    "length": 1,
    "text": "// Assert suffix instead of exact match to ignore host/port differences",
    "context": "                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(objectMapper.writeValueAsString(mapa)))\n                .andExpect(status().isCreated())\n                // Assert suffix instead of exact match to ignore host/port differences\n                .andExpect(header().string(\"Location\", org.hamcrest.Matchers.endsWith(API_MAPAS_1)));\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/dto/ImpactoMapaResponseTest.java",
    "type": "line",
    "line": 16,
    "length": 1,
    "text": "// 1. Com impactos",
    "context": "    @DisplayName(\"Deve cobrir branches de cria√ß√£o de ImpactoMapaResponse\")\n    void deveCobrirBranches() {\n        AtividadeImpactadaDto dto = AtividadeImpactadaDto.builder().build();\n        // 1. Com impactos\n        ImpactoMapaResponse d1 = ImpactoMapaResponse.builder()\n                .temImpactos(true)\n                .inseridas(List.of(dto))"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/dto/ImpactoMapaResponseTest.java",
    "type": "line",
    "line": 27,
    "length": 1,
    "text": "// 2. Sem impactos via builder",
    "context": "        assertThat(d1.temImpactos()).isTrue();\n        assertThat(d1.inseridas()).containsExactly(dto);\n\n        // 2. Sem impactos via builder\n        ImpactoMapaResponse d2 = ImpactoMapaResponse.builder()\n                .temImpactos(false)\n                .inseridas(List.of())"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/dto/ImpactoMapaResponseTest.java",
    "type": "line",
    "line": 37,
    "length": 1,
    "text": "// 3. Sem impacto via helper",
    "context": "                .build();\n        assertThat(d2.temImpactos()).isFalse();\n\n        // 3. Sem impacto via helper\n        ImpactoMapaResponse d3 = ImpactoMapaResponse.semImpacto();\n        assertThat(d3.temImpactos()).isFalse();\n        assertThat(d3.inseridas()).isEmpty();"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/CopiaMapaServiceCoverageTest.java",
    "type": "line",
    "line": 50,
    "length": 1,
    "text": "// Associada a uma atividade que N√ÉO existe no mapa de origem (ou ID errado no mock)",
    "context": "        compFonte.setCodigo(200L);\n        compFonte.setDescricao(\"Competencia Teste\");\n\n        // Associada a uma atividade que N√ÉO existe no mapa de origem (ou ID errado no mock)\n        Atividade ativFantasma = new Atividade();\n        ativFantasma.setCodigo(999L);\n        compFonte.setAtividades(Set.of(ativFantasma));"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/ImpactoMapaServiceTest.java",
    "type": "line",
    "line": 38,
    "length": 1,
    "text": "// Default permission behavior for tests unless overridden",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Default permission behavior for tests unless overridden\n        doReturn(true).when(permissionEvaluator).checkPermission(any(), any(), any());\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/ImpactoMapaServiceTest.java",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Helper para criar usu√°rio ADMIN para testes gen√©ricos",
    "context": "        doReturn(true).when(permissionEvaluator).checkPermission(any(), any(), any());\n    }\n\n    // Helper para criar usu√°rio ADMIN para testes gen√©ricos\n    private Usuario usuarioAdmin() {\n        Usuario u = new Usuario();\n        u.setPerfilAtivo(Perfil.ADMIN);"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/ImpactoMapaServiceTest.java",
    "type": "line",
    "line": 88,
    "length": 1,
    "text": "// Vigente: vazio",
    "context": "        when(mapaRepo.findMapaVigenteByUnidade(1L)).thenReturn(Optional.of(mapaVigente));\n        when(mapaRepo.findBySubprocessoCodigo(10L)).thenReturn(Optional.of(mapaSub));\n\n        // Vigente: vazio\n        when(mapaManutencaoService.buscarAtividadesPorMapaCodigoComConhecimentos(100L)).thenReturn(Collections.emptyList());\n\n        // Atual: 1 atividade"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/ImpactoMapaServiceTest.java",
    "type": "line",
    "line": 91,
    "length": 1,
    "text": "// Atual: 1 atividade",
    "context": "        // Vigente: vazio\n        when(mapaManutencaoService.buscarAtividadesPorMapaCodigoComConhecimentos(100L)).thenReturn(Collections.emptyList());\n\n        // Atual: 1 atividade\n        Atividade nova = new Atividade();\n        nova.setCodigo(1L);\n        nova.setDescricao(\"Nova\");"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/ImpactoMapaServiceTest.java",
    "type": "line",
    "line": 125,
    "length": 1,
    "text": "// Vigente: 1 atividade \"Antiga\"",
    "context": "        when(mapaRepo.findMapaVigenteByUnidade(1L)).thenReturn(Optional.of(mapaVigente));\n        when(mapaRepo.findBySubprocessoCodigo(10L)).thenReturn(Optional.of(mapaSub));\n\n        // Vigente: 1 atividade \"Antiga\"\n        Atividade antiga = new Atividade();\n        antiga.setCodigo(1L);\n        antiga.setDescricao(\"Antiga\");"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/ImpactoMapaServiceTest.java",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// Atual: vazio (foi removida)",
    "context": "        antiga.setConhecimentos(Collections.emptySet());\n        when(mapaManutencaoService.buscarAtividadesPorMapaCodigoComConhecimentos(100L)).thenReturn(Collections.singletonList(antiga));\n\n        // Atual: vazio (foi removida)\n        when(mapaManutencaoService.buscarAtividadesPorMapaCodigoComConhecimentos(200L)).thenReturn(Collections.emptyList());\n\n        // Competencia ligada √† atividade antiga"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/ImpactoMapaServiceTest.java",
    "type": "line",
    "line": 135,
    "length": 1,
    "text": "// Competencia ligada √† atividade antiga",
    "context": "        // Atual: vazio (foi removida)\n        when(mapaManutencaoService.buscarAtividadesPorMapaCodigoComConhecimentos(200L)).thenReturn(Collections.emptyList());\n\n        // Competencia ligada √† atividade antiga\n        Competencia comp = new Competencia();\n        comp.setCodigo(50L);\n        comp.setDescricao(\"Comp A\");"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/ImpactoMapaServiceTest.java",
    "type": "line",
    "line": 170,
    "length": 1,
    "text": "// Vigente: Ativ A com Conhecimento C1",
    "context": "        when(mapaRepo.findMapaVigenteByUnidade(1L)).thenReturn(Optional.of(mapaVigente));\n        when(mapaRepo.findBySubprocessoCodigo(10L)).thenReturn(Optional.of(mapaSub));\n\n        // Vigente: Ativ A com Conhecimento C1\n        Atividade ativVigente = new Atividade();\n        ativVigente.setCodigo(1L);\n        ativVigente.setDescricao(\"Ativ A\");"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/ImpactoMapaServiceTest.java",
    "type": "line",
    "line": 180,
    "length": 1,
    "text": "// Atual: Ativ A com Conhecimento C2 (alterado)",
    "context": "\n        when(mapaManutencaoService.buscarAtividadesPorMapaCodigoComConhecimentos(100L)).thenReturn(Collections.singletonList(ativVigente));\n\n        // Atual: Ativ A com Conhecimento C2 (alterado)\n        Atividade ativAtual = new Atividade();\n        ativAtual.setCodigo(2L);\n        ativAtual.setDescricao(\"Ativ A\");"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/MapaManutencaoServicePbtTest.java",
    "type": "line",
    "line": 20,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "\n    @Property\n    void criarAtividade_deveFalharSeDescricaoDuplicadaNoMapa(@ForAll(\"descricoesIguais\") String[] descricoes) {\n        // Mock dependencies\n        AtividadeRepo atividadeRepo = mock(AtividadeRepo.class);\n        CompetenciaRepo competenciaRepo = mock(CompetenciaRepo.class);\n        ConhecimentoRepo conhecimentoRepo = mock(ConhecimentoRepo.class);"
  },
  {
    "file": "backend/src/test/java/sgc/mapa/service/MapaManutencaoServicePbtTest.java",
    "type": "line",
    "line": 40,
    "length": 1,
    "text": "// Simular que j√° existe uma atividade com a mesma descri√ß√£o",
    "context": "\n        when(repo.buscar(Mapa.class, mapaCodigo)).thenReturn(mapa);\n\n        // Simular que j√° existe uma atividade com a mesma descri√ß√£o\n        Atividade existente = new Atividade();\n        existente.setDescricao(descricoes[0]);\n        when(atividadeRepo.findByMapaCodigoSemFetch(mapaCodigo)).thenReturn(List.of(existente));"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ModelExtraTest.java",
    "type": "line",
    "line": 26,
    "length": 1,
    "text": "// Prepare",
    "context": "    @Test\n    @DisplayName(\"UnidadeRepo.findBySigla - Deve chamar findBySiglaAndSituacao\")\n    void unidadeRepo_findBySigla() {\n        // Prepare\n        String sigla = \"U1\";\n        Unidade u = new Unidade();\n        u.setSigla(sigla);"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ModelExtraTest.java",
    "type": "line",
    "line": 31,
    "length": 1,
    "text": "// Mocking the interface method that the default method calls",
    "context": "        Unidade u = new Unidade();\n        u.setSigla(sigla);\n\n        // Mocking the interface method that the default method calls\n        when(unidadeRepo.findBySiglaAndSituacao(sigla, SituacaoUnidade.ATIVA))\n                .thenReturn(Optional.of(u));\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ModelExtraTest.java",
    "type": "line",
    "line": 35,
    "length": 1,
    "text": "// Call the default method",
    "context": "        when(unidadeRepo.findBySiglaAndSituacao(sigla, SituacaoUnidade.ATIVA))\n                .thenReturn(Optional.of(u));\n\n        // Call the default method\n        doCallRealMethod().when(unidadeRepo).findBySigla(anyString());\n\n        Optional<Unidade> result = unidadeRepo.findBySigla(sigla);"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 69,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(unidadeService.buscarTodasUnidades()).thenReturn(Collections.emptyList());\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$\").isArray())"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 86,
    "length": 1,
    "text": "// Act & Assert",
    "context": "        when(unidadeService.buscarArvoreComElegibilidade(anyBoolean(), any()))\n                .thenReturn(Collections.emptyList());\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades/arvore-com-elegibilidade\")\n                        .param(\"tipoProcesso\", \"MAPEAMENTO\"))\n                .andExpect(status().isOk());"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(unidadeService.verificarMapaVigente(1L)).thenReturn(true);\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades/1/mapa-vigente\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.temMapaVigente\").value(true));"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 117,
    "length": 1,
    "text": "// Act & Assert",
    "context": "                .build();\n        when(unidadeService.usuariosPorCodigoUnidade(1L)).thenReturn(List.of(usuario));\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades/1/usuarios\")).andExpect(status().isOk());\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 128,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(unidadeService.buscarPorSigla(\"SIGLA\")).thenReturn(UnidadeDto.builder().build());\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades/sigla/SIGLA\")).andExpect(status().isOk());\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 139,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(unidadeService.dtoPorCodigo(1L)).thenReturn(UnidadeDto.builder().build());\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades/1\")).andExpect(status().isOk());\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 150,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(unidadeService.buscarArvore(1L)).thenReturn(UnidadeDto.builder().build());\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades/1/arvore\"))\n                .andExpect(status().isOk());\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 162,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(unidadeService.buscarSiglasSubordinadas(\"SIGLA\")).thenReturn(List.of(\"SIGLA\", \"FILHA\"));\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades/sigla/SIGLA/subordinadas\"))\n                .andExpect(status().isOk());\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 174,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(unidadeService.buscarSiglaSuperior(\"FILHA\")).thenReturn(Optional.of(\"SIGLA\"));\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades/sigla/FILHA/superior\"))\n                .andExpect(status().isOk());\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeControllerTest.java",
    "type": "line",
    "line": 186,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(unidadeService.buscarSiglaSuperior(\"RAIZ\")).thenReturn(Optional.empty());\n\n        // Act & Assert\n        mockMvc.perform(get(\"/api/unidades/sigla/RAIZ/superior\"))\n                .andExpect(status().isNoContent());\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeHierarchyTest.java",
    "type": "line",
    "line": 39,
    "length": 5,
    "text": "// Hierarquia:\n// Raiz (1)\n//   -> Filho 1 (2)\n//      -> Neto 1 (3)\n//   -> Filho 2 (4)",
    "context": "    @Test\n    @DisplayName(\"buscarIdsDescendentes: deve retornar todos os descendentes diretos e indiretos\")\n    void buscarIdsDescendentes_ComHierarquiaComplexa() {\n        // Hierarquia:\n        // Raiz (1)\n        //   -> Filho 1 (2)\n        //      -> Neto 1 (3)\n        //   -> Filho 2 (4)\n\n        when(unidadeHierarquiaService.buscarIdsDescendentes(1L))\n                .thenReturn(List.of(2L, 3L, 4L));"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeHierarchyTest.java",
    "type": "line",
    "line": 52,
    "length": 1,
    "text": "// Teste: Descendentes da Raiz (1) devem ser 2, 3 e 4",
    "context": "        when(unidadeHierarquiaService.buscarIdsDescendentes(3L))\n                .thenReturn(List.of());\n\n        // Teste: Descendentes da Raiz (1) devem ser 2, 3 e 4\n        List<Long> idsRaiz = unidadeService.buscarIdsDescendentes(1L);\n        assertThat(idsRaiz).containsExactlyInAnyOrder(2L, 3L, 4L);\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeHierarchyTest.java",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Teste: Descendentes do Filho 1 (2) deve ser apenas 3",
    "context": "        List<Long> idsRaiz = unidadeService.buscarIdsDescendentes(1L);\n        assertThat(idsRaiz).containsExactlyInAnyOrder(2L, 3L, 4L);\n\n        // Teste: Descendentes do Filho 1 (2) deve ser apenas 3\n        List<Long> idsFilho1 = unidadeService.buscarIdsDescendentes(2L);\n        assertThat(idsFilho1).containsExactlyInAnyOrder(3L);\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeHierarchyTest.java",
    "type": "line",
    "line": 60,
    "length": 1,
    "text": "// Teste: Descendentes do Neto 1 (3) deve ser vazio",
    "context": "        List<Long> idsFilho1 = unidadeService.buscarIdsDescendentes(2L);\n        assertThat(idsFilho1).containsExactlyInAnyOrder(3L);\n\n        // Teste: Descendentes do Neto 1 (3) deve ser vazio\n        List<Long> idsNeto1 = unidadeService.buscarIdsDescendentes(3L);\n        assertThat(idsNeto1).isEmpty();\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeHierarchyTest.java",
    "type": "line",
    "line": 68,
    "length": 2,
    "text": "// Arvore A: 1 -> 2\n// Arvore B: 10 -> 11",
    "context": "    @Test\n    @DisplayName(\"buscarIdsDescendentes: deve ignorar unidades de outras √°rvores\")\n    void buscarIdsDescendentes_OutrasArvores() {\n        // Arvore A: 1 -> 2\n        // Arvore B: 10 -> 11\n\n        when(unidadeHierarquiaService.buscarIdsDescendentes(1L))\n                .thenReturn(List.of(2L));"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeTest.java",
    "type": "line",
    "line": 50,
    "length": 1,
    "text": "// M√©todos auxiliares",
    "context": "        verify(hierarquiaService).buscarArvoreComElegibilidade(any());\n    }\n\n    // M√©todos auxiliares\n    private Unidade criarUnidade(Long codigo, String sigla) {\n        Unidade unidade = new Unidade();\n        unidade.setCodigo(codigo);"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeTest.java",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            Unidade u = criarUnidade(1L, \"U1\");\n            when(unidadeService.buscarPorSigla(\"U1\")).thenReturn(u);\n\n            // Act & Assert\n            assertThat(facade.buscarPorSigla(\"U1\")).isNotNull();\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeTest.java",
    "type": "line",
    "line": 98,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            Unidade unidade = criarUnidade(1L, \"U1\");\n            when(unidadeService.buscarPorId(1L)).thenReturn(unidade);\n\n            // Act & Assert\n            assertThat(facade.dtoPorCodigo(1L)).isNotNull();\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeTest.java",
    "type": "line",
    "line": 109,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            UnidadeDto dto = UnidadeDto.builder().codigo(1L).build();\n            when(hierarquiaService.buscarArvore(1L)).thenReturn(dto);\n\n            // Act & Assert\n            assertThat(facade.buscarArvore(1L)).isNotNull();\n            verify(hierarquiaService).buscarArvore(1L);\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeTest.java",
    "type": "line",
    "line": 134,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(hierarquiaService.buscarSiglaSuperior(\"FILHO\")).thenReturn(Optional.of(\"PAI\"));\n\n            // Act & Assert\n            assertThat(facade.buscarSiglaSuperior(\"FILHO\")).contains(\"PAI\");\n            verify(hierarquiaService).buscarSiglaSuperior(\"FILHO\");\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeTest.java",
    "type": "line",
    "line": 181,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(unidadeService.verificarMapaVigente(1L)).thenReturn(true);\n\n            // Act & Assert\n            assertThat(facade.verificarMapaVigente(1L)).isTrue();\n            verify(unidadeService).verificarMapaVigente(1L);\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UnidadeFacadeTest.java",
    "type": "line",
    "line": 210,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(usuarioService.buscarPorUnidadeLotacao(1L)).thenReturn(List.of(new Usuario()));\n\n            // Act & Assert\n            assertThat(facade.usuariosPorCodigoUnidade(1L)).hasSize(1);\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UsuarioFacadeTest.java",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// M√©todos auxiliares",
    "context": "        assertThat(facade.extrairTituloUsuario(null)).isNull();\n    }\n\n    // M√©todos auxiliares\n    private Usuario criarUsuario(String titulo) {\n        Usuario usuario = new Usuario();\n        usuario.setTituloEleitoral(titulo);"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UsuarioServiceTest.java",
    "type": "line",
    "line": 227,
    "length": 1,
    "text": "// Act & Assert",
    "context": "        @Test\n        @DisplayName(\"Deve verificar se usu√°rio tem perfil\")\n        void deveVerificarUsuarioTemPerfil() {\n            // Act & Assert\n            assertTrue(usuarioService.usuarioTemPerfil(TITULO_CHEFE_UNIT2, String.valueOf(Perfil.CHEFE), 2L));\n            assertTrue(usuarioService.usuarioTemPerfil(TITULO_ADMIN, String.valueOf(Perfil.ADMIN), 1L));\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UsuarioServiceTest.java",
    "type": "line",
    "line": 271,
    "length": 1,
    "text": "// Verifica se √© CHEFE na unidade 99 (n√£o √©)",
    "context": "        @DisplayName(\"Deve retornar false se usu√°rio n√£o tiver perfil na unidade\")\n        void deveRetornarFalseSeNaoTiverPerfil() {\n\n            // Verifica se √© CHEFE na unidade 99 (n√£o √©)\n            assertFalse(usuarioService.usuarioTemPerfil(TITULO_CHEFE_UNIT2, String.valueOf(Perfil.CHEFE), 99L));\n\n            // Verifica se √© GESTOR na unidade 2 (n√£o √©)"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UsuarioServiceTest.java",
    "type": "line",
    "line": 274,
    "length": 1,
    "text": "// Verifica se √© GESTOR na unidade 2 (n√£o √©)",
    "context": "            // Verifica se √© CHEFE na unidade 99 (n√£o √©)\n            assertFalse(usuarioService.usuarioTemPerfil(TITULO_CHEFE_UNIT2, String.valueOf(Perfil.CHEFE), 99L));\n\n            // Verifica se √© GESTOR na unidade 2 (n√£o √©)\n            assertFalse(usuarioService.usuarioTemPerfil(TITULO_CHEFE_UNIT2, String.valueOf(Perfil.GESTOR), 2L));\n        }\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UsuarioServiceTest.java",
    "type": "line",
    "line": 288,
    "length": 1,
    "text": "// Adicionar",
    "context": "\n            String tituloNovoAdmin = TITULO_CHEFE_UNIT2;\n\n            // Adicionar\n            usuarioService.adicionarAdministrador(tituloNovoAdmin);\n            assertTrue(usuarioService.isAdministrador(tituloNovoAdmin));\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UsuarioServiceTest.java",
    "type": "line",
    "line": 292,
    "length": 1,
    "text": "// Listar",
    "context": "            usuarioService.adicionarAdministrador(tituloNovoAdmin);\n            assertTrue(usuarioService.isAdministrador(tituloNovoAdmin));\n\n            // Listar\n            List<AdministradorDto> admins = usuarioService.listarAdministradores();\n            assertTrue(admins.stream().anyMatch(a -> a.tituloEleitoral().equals(tituloNovoAdmin)));\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UsuarioServiceTest.java",
    "type": "line",
    "line": 296,
    "length": 1,
    "text": "// Falhar ao adicionar duplicado",
    "context": "            List<AdministradorDto> admins = usuarioService.listarAdministradores();\n            assertTrue(admins.stream().anyMatch(a -> a.tituloEleitoral().equals(tituloNovoAdmin)));\n\n            // Falhar ao adicionar duplicado\n            assertThrows(ErroValidacao.class,\n                    () -> usuarioService.adicionarAdministrador(tituloNovoAdmin));\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/UsuarioServiceTest.java",
    "type": "line",
    "line": 300,
    "length": 1,
    "text": "// Remover",
    "context": "            assertThrows(ErroValidacao.class,\n                    () -> usuarioService.adicionarAdministrador(tituloNovoAdmin));\n\n            // Remover\n            usuarioService.removerAdministrador(tituloNovoAdmin, TITULO_ADMIN);\n            assertFalse(usuarioService.isAdministrador(tituloNovoAdmin));\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(u1));\n            when(usuarioRepo.findAllById(List.of(\"TITULO_1\"))).thenReturn(List.of(titular));\n\n            // Act & Assert\n            assertThatCode(() -> validador.run(args)).doesNotThrowAnyException();\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 75,
    "length": 2,
    "text": "// Como o reposit√≥rio agora filtra por situa√ß√£o ATIVA no banco,\n// unidades inativas n√£o seriam retornadas pelo m√©todo simulado.",
    "context": "        @DisplayName(\"Deve ignorar unidades inativas\")\n        void deveIgnorarUnidadesInativas() {\n\n            // Como o reposit√≥rio agora filtra por situa√ß√£o ATIVA no banco,\n            // unidades inativas n√£o seriam retornadas pelo m√©todo simulado.\n            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of());\n\n            // Act & Assert"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 79,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            // unidades inativas n√£o seriam retornadas pelo m√©todo simulado.\n            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of());\n\n            // Act & Assert\n            assertThatCode(() -> validador.run(args)).doesNotThrowAnyException();\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 87,
    "length": 2,
    "text": "// Como o reposit√≥rio agora filtra por tipo participante no banco,\n// unidades SEM_EQUIPE e RAIZ n√£o seriam retornadas.",
    "context": "        @DisplayName(\"Deve ignorar unidades SEM_EQUIPE e RAIZ\")\n        void deveIgnorarUnidadesNaoParticipantes() {\n\n            // Como o reposit√≥rio agora filtra por tipo participante no banco,\n            // unidades SEM_EQUIPE e RAIZ n√£o seriam retornadas.\n            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of());\n\n            // Act & Assert"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 91,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            // unidades SEM_EQUIPE e RAIZ n√£o seriam retornadas.\n            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of());\n\n            // Act & Assert\n            assertThatCode(() -> validador.run(args)).doesNotThrowAnyException();\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(usuarioRepo.findAllById(List.of(\"TITULO_1\", \"TITULO_2\")))\n                    .thenReturn(List.of(titularPai, titularFilha));\n\n            // Act & Assert\n            assertThatCode(() -> validador.run(args)).doesNotThrowAnyException();\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 123,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(u));\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class)\n                    .hasMessageContaining(\"1 viola√ß√£o\");"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(u1));\n            when(usuarioRepo.findAllById(List.of(\"TITULO_1\"))).thenReturn(List.of(titular1, titular2));\n\n            // Act & Assert\n            assertThatCode(() -> validador.run(args)).doesNotThrowAnyException();\n        }\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 159,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(u));\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class)\n                    .hasMessageContaining(\"1 viola√ß√£o\");"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 174,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(u));\n            when(usuarioRepo.findAllById(List.of(\"TITULO_1\"))).thenReturn(List.of()); // Usu√°rio n√£o existe\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class)\n                    .hasMessageContaining(\"1 viola√ß√£o\");"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 191,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(u));\n            when(usuarioRepo.findAllById(List.of(\"TITULO_1\"))).thenReturn(List.of(titular));\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class);\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 206,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(intermediaria));\n            when(usuarioRepo.findAllById(List.of(\"TITULO_1\"))).thenReturn(List.of(titular));\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class)\n                    .hasMessageContaining(\"1 viola√ß√£o\");"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 221,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(semTitular));\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class)\n                    .hasMessageContaining(\"1 viola√ß√£o\");"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 249,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(u));\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class)\n                    .hasMessageContaining(\"1 viola√ß√£o\");"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 263,
    "length": 1,
    "text": "// For√ßamos a responsabilidade ser nula para gerar Viola√ß√£o 2",
    "context": "            for (long i = 1; i <= 4; i++) {\n                Unidade u = criarUnidadeValida(i, \"U\" + i, TipoUnidade.OPERACIONAL);\n                u.setTituloTitular(\"\"); // Viola√ß√£o 1: Titular ausente\n                // For√ßamos a responsabilidade ser nula para gerar Viola√ß√£o 2\n                u.setResponsabilidade(null);\n                unidades.add(u);\n            }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 270,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(unidades);\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class)\n                    .hasMessageContaining(\"viola√ß√µes encontradas\")"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 287,
    "length": 1,
    "text": "// Responsabilidade presente mas com t√≠tulo em branco",
    "context": "            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(u));\n            when(usuarioRepo.findAllById(anyList())).thenReturn(List.of(titular));\n\n            // Responsabilidade presente mas com t√≠tulo em branco\n            u.getResponsabilidade().setUsuarioTitulo(\"   \");\n\n            // Act & Assert"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 290,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            // Responsabilidade presente mas com t√≠tulo em branco\n            u.getResponsabilidade().setUsuarioTitulo(\"   \");\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class);\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 305,
    "length": 1,
    "text": "// Responsabilidade nula",
    "context": "            when(unidadeRepo.findBySituacaoAtivaAndTipoIn(anySet())).thenReturn(List.of(u));\n            when(usuarioRepo.findAllById(anyList())).thenReturn(List.of(titular));\n\n            // Responsabilidade nula\n            u.setResponsabilidade(null);\n\n            // Act & Assert"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/ValidadorDadosOrgServiceTest.java",
    "type": "line",
    "line": 308,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            // Responsabilidade nula\n            u.setResponsabilidade(null);\n\n            // Act & Assert\n            assertThatThrownBy(() -> validador.run(args))\n                    .isInstanceOf(ErroConfiguracao.class);\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/organizacao/model/UsuarioJsonViewTest.java",
    "type": "line",
    "line": 40,
    "length": 1,
    "text": "// Campos sens√≠veis ou internos n√£o devem aparecer",
    "context": "        assertThat(json).contains(\"\\\"matricula\\\":\\\"88888888\\\"\");\n        assertThat(json).contains(\"\\\"unidadeCodigo\\\":10\");\n\n        // Campos sens√≠veis ou internos n√£o devem aparecer\n        assertThat(json).doesNotContain(\"\\\"unidadeLotacao\\\"\");\n        assertThat(json).doesNotContain(\"\\\"ramal\\\"\");\n        assertThat(json).doesNotContain(\"\\\"authorities\\\"\");"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(processoFacade.criar(any(CriarProcessoRequest.class))).thenReturn(processo);\n\n            // Act & Assert\n            mockMvc.perform(\n                            post(API_PROCESSOS)\n                                    .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Act & Assert",
    "context": "                    new CriarProcessoRequest(\n                            \"\", TipoProcesso.MAPEAMENTO, LocalDateTime.now().plusDays(30), List.of(1L));\n\n            // Act & Assert\n            mockMvc.perform(\n                            post(API_PROCESSOS)\n                                    .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 153,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(processoFacade.obterPorId(1L)).thenReturn(Optional.of(processo));\n\n            // Act & Assert\n            mockMvc.perform(get(API_PROCESSOS_1))\n                    .andExpect(status().isOk())\n                    .andExpect(jsonPath(CODIGO_JSON_PATH).value(1L))"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 178,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(processoFacade.obterDetalhes(eq(1L), any(Usuario.class))).thenReturn(dto);\n\n            // Act & Assert\n            mockMvc.perform(get(\"/api/processos/1/detalhes\"))\n                    .andExpect(status().isOk())\n                    .andExpect(jsonPath(CODIGO_JSON_PATH).value(1L))"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 194,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            doThrow(new ErroAcessoNegado(\"Acesso negado\")).when(processoFacade).obterDetalhes(eq(1L), any(Usuario.class));\n\n            // Act & Assert\n            mockMvc.perform(get(\"/api/processos/1/detalhes\")).andExpect(status().isForbidden());\n        }\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 205,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(processoFacade.obterPorId(999L)).thenReturn(Optional.empty());\n\n            // Act & Assert\n            mockMvc.perform(get(API_PROCESSOS_999))\n                    .andExpect(status().isNotFound());\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 239,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            when(processoFacade.atualizar(eq(1L), any(AtualizarProcessoRequest.class))).thenReturn(processo);\n\n            // Act & Assert\n            mockMvc.perform(\n                            post(API_PROCESSOS + \"/1/atualizar\")\n                                    .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 269,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(processoFacade.obterEntidadePorId(1L)).thenReturn(processo);\n            when(processoFacade.iniciarProcessoMapeamento(eq(1L), anyList())).thenReturn(List.of());\n\n            // Act & Assert\n            mockMvc.perform(\n                            post(\"/api/processos/1/iniciar\")\n                                    .with(csrf())"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 289,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n            doNothing().when(processoFacade).finalizar(1L);\n\n            // Act & Assert\n            mockMvc.perform(post(\"/api/processos/1/finalizar\").with(csrf())).andExpect(status().isOk());\n\n            verify(processoFacade).finalizar(1L);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 307,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(processoFacade.listarFinalizados())\n                    .thenReturn(List.of(Processo.builder().codigo(1L).build()));\n\n            // Act & Assert\n            mockMvc.perform(get(\"/api/processos/finalizados\"))\n                    .andExpect(status().isOk())\n                    .andExpect(jsonPath(\"$\").isArray())"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 323,
    "length": 1,
    "text": "// Act & Assert",
    "context": "                    .thenReturn(\n                            List.of(Subprocesso.builder().codigo(10L).build()));\n\n            // Act & Assert\n            mockMvc.perform(get(\"/api/processos/1/subprocessos\"))\n                    .andExpect(status().isOk())\n                    .andExpect(jsonPath(\"$\").isArray())"
  },
  {
    "file": "backend/src/test/java/sgc/processo/ProcessoControllerTest.java",
    "type": "line",
    "line": 414,
    "length": 1,
    "text": "// Usar mocks manuais para testes isolados",
    "context": "    @DisplayName(\"Cobertura Extra\")\n    class CoberturaExtra {\n\n        // Usar mocks manuais para testes isolados\n        private ProcessoController controller;\n        private ProcessoFacade processoFacadeMock;\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/model/ModelCoverageTest.java",
    "type": "line",
    "line": 52,
    "length": 1,
    "text": "// Isso cobre both true/false do removeIf em Proceso.java:86",
    "context": "        assertThat(processo.getParticipantes()).hasSize(2);\n\n\n        // Isso cobre both true/false do removeIf em Proceso.java:86\n        processo.sincronizarParticipantes(new HashSet<>(Collections.singletonList(u2)));\n\n        assertThat(processo.getParticipantes()).hasSize(1);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/model/ProcessoRepoTest.java",
    "type": "line",
    "line": 119,
    "length": 1,
    "text": "// Processo participa de DUAS unidades que eu estou buscando",
    "context": "        Unidade u1 = criarUnidade(\"Unidade 1\", \"U1\");\n        Unidade u2 = criarUnidade(\"Unidade 2\", \"U2\");\n\n        // Processo participa de DUAS unidades que eu estou buscando\n        criarProcesso(\"Processo Ambos\", SituacaoProcesso.EM_ANDAMENTO, u1, u2);\n\n        entityManager.flush();"
  },
  {
    "file": "backend/src/test/java/sgc/processo/model/ProcessoRepoTest.java",
    "type": "line",
    "line": 150,
    "length": 1,
    "text": "// Act - Pagina√ß√£o com tamanho 2 (espera-se 3 p√°ginas: 2, 2, 1)",
    "context": "\n        entityManager.flush();\n\n        // Act - Pagina√ß√£o com tamanho 2 (espera-se 3 p√°ginas: 2, 2, 1)\n        Page<Processo> resultado = processoRepo.findDistinctByParticipantes_IdUnidadeCodigoInAndSituacaoNot(\n                List.of(u1.getCodigo()),\n                SituacaoProcesso.CRIADO,"
  },
  {
    "file": "backend/src/test/java/sgc/processo/model/ProcessoTest.java",
    "type": "line",
    "line": 160,
    "length": 1,
    "text": "// Simular cria√ß√£o manual de snapshot j√° que n√£o temos o ID do processo persistido ainda",
    "context": "            Unidade unidade = UnidadeFixture.unidadePadrao();\n            unidade.setCodigo(1L);\n\n            // Simular cria√ß√£o manual de snapshot j√° que n√£o temos o ID do processo persistido ainda\n            UnidadeProcesso snapshot = UnidadeProcesso.criarSnapshot(processo, unidade);\n            novosParticipantes.add(snapshot);\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/model/ProcessoTest.java",
    "type": "line",
    "line": 246,
    "length": 1,
    "text": "// Arrange & Act & Assert",
    "context": "        @Test\n        @DisplayName(\"Deve permitir todas as situa√ß√µes v√°lidas\")\n        void devePermitirTodasAsSituacoesValidas() {\n            // Arrange & Act & Assert\n            for (SituacaoProcesso situacao : SituacaoProcesso.values()) {\n                processo.setSituacao(situacao);\n                assertThat(processo.getSituacao()).isEqualTo(situacao);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/model/ProcessoTest.java",
    "type": "line",
    "line": 256,
    "length": 1,
    "text": "// Arrange & Act & Assert",
    "context": "        @Test\n        @DisplayName(\"Deve permitir todos os tipos v√°lidos\")\n        void devePermitirTodosOsTiposValidos() {\n            // Arrange & Act & Assert\n            for (TipoProcesso tipo : TipoProcesso.values()) {\n                processo.setTipo(tipo);\n                assertThat(processo.getTipo()).isEqualTo(tipo);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelFacadeTest.java",
    "type": "line",
    "line": 72,
    "length": 3,
    "text": "// Simular exce√ß√£o ao buscar unidade para link (usado para perfis n√£o ADMIN/GESTOR)\n// Mas listarProcessos chama unidadeService.buscarIdsDescendentes para GESTOR.\n// Para CHEFE chama apenas para propria unidade.",
    "context": "        Processo p = criarProcesso(1L, SituacaoProcesso.EM_ANDAMENTO);\n        Page<Processo> page = new PageImpl<>(List.of(p));\n\n        // Simular exce√ß√£o ao buscar unidade para link (usado para perfis n√£o ADMIN/GESTOR)\n        // Mas listarProcessos chama unidadeService.buscarIdsDescendentes para GESTOR.\n        // Para CHEFE chama apenas para propria unidade.\n\n        when(OrganizacaoFacade.buscarMapaHierarquia()).thenReturn(new HashMap<>());\n        when(processoFacade.listarPorParticipantesIgnorandoCriado(anyList(), any(Pageable.class))).thenReturn(page);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelFacadeTest.java",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// Mock deve esperar sortedPageable que √© igual ao sorted passado (pois n√£o entra no if)",
    "context": "        a.setDataHora(LocalDateTime.now());\n\n        Page<Alerta> page = new PageImpl<>(List.of(a));\n        // Mock deve esperar sortedPageable que √© igual ao sorted passado (pois n√£o entra no if)\n        when(alertaFacade.listarPorUnidade(100L, sorted)).thenReturn(page);\n        when(alertaFacade.obterDataHoraLeitura(1L, \"123\")).thenReturn(Optional.of(LocalDateTime.now()));\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelFacadeTest.java",
    "type": "line",
    "line": 144,
    "length": 1,
    "text": "// Paged e Unsorted",
    "context": "    @Test\n    @DisplayName(\"Deve listar alertas com ordena√ß√£o padr√£o (paged e unsorted)\")\n    void deveListarAlertasComOrdenacaoPadrao() {\n        // Paged e Unsorted\n        Pageable unsortedPaged = PageRequest.of(0, 10);\n\n        Alerta a = new Alerta();"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelFacadeTest.java",
    "type": "line",
    "line": 161,
    "length": 1,
    "text": "// Mock deve esperar um pageable SORTED, pois o m√©todo aplica sort default",
    "context": "\n        Page<Alerta> page = new PageImpl<>(List.of(a));\n\n        // Mock deve esperar um pageable SORTED, pois o m√©todo aplica sort default\n        when(alertaFacade.listarPorUnidade(eq(100L), argThat(p ->\n                p.isPaged() && p.getSort().isSorted() && p.getSort().getOrderFor(\"dataHora\") != null\n        ))).thenReturn(page);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelFacadeTest.java",
    "type": "line",
    "line": 248,
    "length": 1,
    "text": "// Se U2 participa e U1 participa, e U2 √© √∫nica subordinada de U1, deve mostrar apenas U1",
    "context": "        Page<ProcessoResumoDto> result = painelFacade.listarProcessos(Perfil.ADMIN, 100L, PageRequest.of(0, 10));\n\n\n        // Se U2 participa e U1 participa, e U2 √© √∫nica subordinada de U1, deve mostrar apenas U1\n        assertThat(result.getContent().getFirst().unidadesParticipantes()).isEqualTo(\"U1\");\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelServiceIntegrationTest.java",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Verificar que existe pelo menos um processo com a descri√ß√£o esperada",
    "context": "\n            List<ProcessoResumoDto> listaProcessos = processos.getContent();\n\n            // Verificar que existe pelo menos um processo com a descri√ß√£o esperada\n            boolean processoRevisaoEncontrado = listaProcessos.stream()\n                    .anyMatch(p -> p.descricao().equals(\"Processo Revis√£o Teste\"));\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelServiceIntegrationTest.java",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Verificar que o linkDestino est√° correto",
    "context": "                            \"Processos retornados: \" + listaProcessos.size())\n                    .isTrue();\n\n            // Verificar que o linkDestino est√° correto\n            ProcessoResumoDto pResumo = listaProcessos.stream()\n                    .filter(p -> p.descricao().equals(\"Processo Revis√£o Teste\"))\n                    .findFirst()"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelServiceIntegrationTest.java",
    "type": "line",
    "line": 113,
    "length": 1,
    "text": "// (Mais os 2 processos seed do banco)",
    "context": "            );\n\n\n            // (Mais os 2 processos seed do banco)\n            assertThat(processos.getTotalElements())\n                    .withFailMessage(\"Total de processos incorreto\")\n                    .isGreaterThanOrEqualTo(5);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelServiceIntegrationTest.java",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// Criar processo de Revis√£o (Alvo do teste)",
    "context": "            );\n            Processo processoSeed = processoFacade.criar(reqSeedLike);\n\n            // Criar processo de Revis√£o (Alvo do teste)\n            CriarProcessoRequest reqRevisao = new CriarProcessoRequest(\n                    \"Processo Revis√£o Alvo\",\n                    TipoProcesso.REVISAO,"
  },
  {
    "file": "backend/src/test/java/sgc/processo/painel/PainelServiceIntegrationTest.java",
    "type": "line",
    "line": 157,
    "length": 1,
    "text": "// Garantir que um n√£o tem o ID do outro",
    "context": "            assertThat(dtoSeed.linkDestino()).contains(processoSeed.getCodigo().toString());\n            assertThat(dtoRevisao.linkDestino()).contains(processoRevisao.getCodigo().toString());\n\n            // Garantir que um n√£o tem o ID do outro\n            assertThat(dtoRevisao.linkDestino()).doesNotContain(processoSeed.getCodigo().toString());\n        }\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoAcessoServiceTest.java",
    "type": "line",
    "line": 78,
    "length": 1,
    "text": "// Mock hierarquia: 1 -> 101 -> 102",
    "context": "                PerfilDto.builder().unidadeCodigo(1L).build()\n        ));\n\n        // Mock hierarquia: 1 -> 101 -> 102\n        Unidade u100 = UnidadeTestBuilder.umaDe().comCodigo(\"1\").build();\n        Unidade u101 = UnidadeTestBuilder.umaDe().comCodigo(\"101\").comSuperior(u100).build();\n        Unidade u102 = UnidadeTestBuilder.umaDe().comCodigo(\"102\").comSuperior(u101).build();"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoAcessoServiceTest.java",
    "type": "line",
    "line": 157,
    "length": 1,
    "text": "// Deve retornar ambos e parar",
    "context": "\n        List<Long> descendentes = processoAcessoService.buscarCodigosDescendentes(1L);\n\n        // Deve retornar ambos e parar\n        assertThat(descendentes).containsExactlyInAnyOrder(1L, 2L);\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoAcessoServiceTest.java",
    "type": "line",
    "line": 170,
    "length": 1,
    "text": "// A implementa√ß√£o com bug pegaria apenas o primeiro (1) e negaria o acesso.",
    "context": "        when(auth.getAuthorities()).thenAnswer(m -> List.of(new SimpleGrantedAuthority(\"ROLE_GESTOR\")));\n\n\n        // A implementa√ß√£o com bug pegaria apenas o primeiro (1) e negaria o acesso.\n        when(usuarioService.buscarPerfisUsuario(\"multi_perfil_user\")).thenReturn(List.of(\n                PerfilDto.builder().unidadeCodigo(1L).build(),\n                PerfilDto.builder().unidadeCodigo(200L).build()"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoAcessoServiceTest.java",
    "type": "line",
    "line": 182,
    "length": 1,
    "text": "// Se a lista de IDs conter 200, acesso √© permitido. Se tiver apenas 100, negado.",
    "context": "        when(unidadeService.unidadesComHierarquia()).thenReturn(List.of(u100, u200));\n\n\n        // Se a lista de IDs conter 200, acesso √© permitido. Se tiver apenas 100, negado.\n        when(queryService.verificarAcessoUnidadeAoProcesso(eq(1L), anyList())).thenAnswer(invocation -> {\n            List<Long> ids = invocation.getArgument(1);\n            return ids.contains(200L);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoDetalheBuilderTest.java",
    "type": "line",
    "line": 305,
    "length": 1,
    "text": "// Subprocesso existe mas unidade n√£o est√° em participantes",
    "context": "        sp.setUnidade(u1);\n        sp.setSituacaoForcada(SituacaoSubprocesso.NAO_INICIADO);\n\n        // Subprocesso existe mas unidade n√£o est√° em participantes\n        when(subprocessoRepo.findByProcessoCodigoWithUnidade(1L)).thenReturn(List.of(sp));\n\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoFacadeTest.java",
    "type": "line",
    "line": 194,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(processoAcessoService.checarAcesso(auth, 1L)).thenReturn(false);\n            when(processoAcessoService.checarAcesso(null, 1L)).thenReturn(false);\n\n            // Act & Assert\n            assertThat(processoFacade.checarAcesso(auth, 1L)).isFalse();\n            assertThat(processoFacade.checarAcesso(null, 1L)).isFalse();\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoFacadeTest.java",
    "type": "line",
    "line": 332,
    "length": 1,
    "text": "// Simula retorno do servi√ßo",
    "context": "\n            when(processoManutencaoService.criar(req)).thenAnswer(\n                    i -> {\n                        // Simula retorno do servi√ßo\n                        Processo p = new Processo();\n                        p.setCodigo(100L);\n                        p.setDescricao(req.descricao());"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoFacadeTest.java",
    "type": "line",
    "line": 358,
    "length": 1,
    "text": "// Act & Assert",
    "context": "            when(processoManutencaoService.criar(req))\n                    .thenThrow(new ErroEntidadeNaoEncontrada(\"Unidade\", 99L));\n\n            // Act & Assert\n            assertThatThrownBy(() -> processoFacade.criar(req))\n                    .isInstanceOf(ErroEntidadeNaoEncontrada.class)\n                    .hasMessageContaining(\"Unidade\")"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoFacadeTest.java",
    "type": "line",
    "line": 422,
    "length": 1,
    "text": "// Act & Assert",
    "context": "                    .thenReturn(List.of(ProcessoFixture.processoPadrao()));\n            when(processoConsultaService.processosAndamento())\n                    .thenReturn(List.of(ProcessoFixture.processoPadrao()));\n            // Act & Assert\n            assertThat(processoFacade.listarFinalizados()).hasSize(1);\n            assertThat(processoFacade.listarAtivos()).hasSize(1);\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoManutencaoServicePbtTest.java",
    "type": "line",
    "line": 21,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "\n    @Property\n    void criar_rejeitaProcessoRevisaoSemMapa(@ForAll(\"requisicaoRevisaoInvalida\") CriarProcessoRequest req) {\n        // Mock dependencies\n        ProcessoRepo processoRepo = mock(ProcessoRepo.class);\n        OrganizacaoFacade unidadeService = mock(OrganizacaoFacade.class);\n        ProcessoValidador processoValidador = mock(ProcessoValidador.class);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoManutencaoServicePbtTest.java",
    "type": "line",
    "line": 40,
    "length": 1,
    "text": "// Act & Assert",
    "context": "        });\n        when(processoValidador.getMensagemErroUnidadesSemMapa(any())).thenReturn(Optional.of(\"Erro: Unidade sem mapa\"));\n\n        // Act & Assert\n        assertThatThrownBy(() -> service.criar(req))\n                .isInstanceOf(ErroProcesso.class)\n                .hasMessage(\"Erro: Unidade sem mapa\");"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoManutencaoServicePbtTest.java",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "\n    @Property\n    void criar_aceitaProcessoValido(@ForAll(\"requisicaoValida\") CriarProcessoRequest req) {\n        // Mock dependencies\n        ProcessoRepo processoRepo = mock(ProcessoRepo.class);\n        OrganizacaoFacade unidadeService = mock(OrganizacaoFacade.class);\n        ProcessoValidador processoValidador = mock(ProcessoValidador.class);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoManutencaoServicePbtTest.java",
    "type": "line",
    "line": 78,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "    @Property\n    void atualizar_rejeitaSeNaoForCriado(@ForAll(\"situacaoNaoCriada\") SituacaoProcesso situacao,\n                                         @ForAll(\"requisicaoValidaAtualizar\") AtualizarProcessoRequest req) {\n        // Mock dependencies\n        ProcessoRepo processoRepo = mock(ProcessoRepo.class);\n        OrganizacaoFacade unidadeService = mock(OrganizacaoFacade.class);\n        ProcessoValidador processoValidador = mock(ProcessoValidador.class);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoManutencaoServicePbtTest.java",
    "type": "line",
    "line": 94,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(processoConsultaService.buscarProcessoCodigo(anyLong())).thenReturn(processo);\n\n        // Act & Assert\n        assertThatThrownBy(() -> service.atualizar(1L, req))\n                .isInstanceOf(ErroProcessoEmSituacaoInvalida.class)\n                .hasMessage(\"Apenas processos na situa√ß√£o 'CRIADO' podem ser editados.\");"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoManutencaoServicePbtTest.java",
    "type": "line",
    "line": 102,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "\n    @Property\n    void apagar_rejeitaSeNaoForCriado(@ForAll(\"situacaoNaoCriada\") SituacaoProcesso situacao) {\n        // Mock dependencies\n        ProcessoRepo processoRepo = mock(ProcessoRepo.class);\n        OrganizacaoFacade unidadeService = mock(OrganizacaoFacade.class);\n        ProcessoValidador processoValidador = mock(ProcessoValidador.class);"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoManutencaoServicePbtTest.java",
    "type": "line",
    "line": 118,
    "length": 1,
    "text": "// Act & Assert",
    "context": "\n        when(processoConsultaService.buscarProcessoCodigo(anyLong())).thenReturn(processo);\n\n        // Act & Assert\n        assertThatThrownBy(() -> service.apagar(1L))\n                .isInstanceOf(ErroProcessoEmSituacaoInvalida.class)\n                .hasMessage(\"Apenas processos na situa√ß√£o 'CRIADO' podem ser removidos.\");"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoManutencaoServiceValidationTest.java",
    "type": "line",
    "line": 50,
    "length": 1,
    "text": "// When/Then",
    "context": "        when(processoValidador.validarTiposUnidades(anyList()))\n                .thenReturn(Optional.of(\"Unidades do tipo INTERMEDIARIA n√£o podem participar de processos: COORD_11\"));\n\n        // When/Then\n        assertThatThrownBy(() -> service.criar(request))\n                .isInstanceOf(ErroProcesso.class)\n                .hasMessageContaining(\"Unidades do tipo INTERMEDIARIA n√£o podem participar de processos\");"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoNotificacaoServiceCoverageTest.java",
    "type": "line",
    "line": 47,
    "length": 1,
    "text": "// p.participantes is initialized as empty list by default",
    "context": "        Long codProcesso = 1L;\n        Processo p = new Processo();\n        p.setCodigo(codProcesso);\n        // p.participantes is initialized as empty list by default\n\n        when(processoRepo.findByIdComParticipantes(codProcesso)).thenReturn(Optional.of(p));\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoNotificacaoServiceCoverageTest.java",
    "type": "line",
    "line": 126,
    "length": 1,
    "text": "// Setup para processarFinalizacaoProcesso",
    "context": "        sub.setSituacao(SituacaoUnidade.ATIVA);\n        sub.setUnidadeSuperior(inter);\n\n        // Setup para processarFinalizacaoProcesso\n        p.adicionarParticipantes(Set.of(inter, sub));\n\n        when(processoRepo.findByIdComParticipantes(codProcesso)).thenReturn(Optional.of(p));"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoNotificacaoServiceCoverageTest.java",
    "type": "line",
    "line": 156,
    "length": 1,
    "text": "// Setup para processarFinalizacaoProcesso",
    "context": "        inter.setTipo(TipoUnidade.INTERMEDIARIA);\n        inter.setSituacao(SituacaoUnidade.ATIVA);\n\n        // Setup para processarFinalizacaoProcesso\n        p.adicionarParticipantes(Set.of(inter));\n\n        when(processoRepo.findByIdComParticipantes(codProcesso)).thenReturn(Optional.of(p));"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoNotificacaoServiceCoverageTest.java",
    "type": "line",
    "line": 184,
    "length": 1,
    "text": "// Mocking subprocessoService to return a subprocesso",
    "context": "        sp.setUnidade(u);\n        sp.setProcesso(p);\n\n        // Mocking subprocessoService to return a subprocesso\n        when(subprocessoService.listarEntidadesPorProcesso(codProcesso)).thenReturn(List.of(sp));\n\n        when(processoRepo.findByIdComParticipantes(codProcesso)).thenReturn(Optional.of(p));"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoNotificacaoServiceCoverageTest.java",
    "type": "line",
    "line": 196,
    "length": 1,
    "text": "// Should not throw exception",
    "context": "\n        doThrow(new RuntimeException(\"SMTP Error\")).when(emailService).enviarEmailHtml(any(), any(), any());\n\n        // Should not throw exception\n        service.emailInicioProcesso(codProcesso);\n\n        verify(alertaService).criarAlertasProcessoIniciado(any(), anyList());"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoNotificacaoServiceTest.java",
    "type": "line",
    "line": 57,
    "length": 1,
    "text": "// Mock default para evitar NullPointerException nas novas l√≥gicas de unidades superiores",
    "context": "\n    @BeforeEach\n    void setUp() {\n        // Mock default para evitar NullPointerException nas novas l√≥gicas de unidades superiores\n        lenient().when(organizacaoFacade.unidadePorCodigo(anyLong())).thenAnswer(invocation -> {\n            Long cod = invocation.getArgument(0);\n            Unidade u = new Unidade();"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoNotificacaoServiceTest.java",
    "type": "line",
    "line": 122,
    "length": 1,
    "text": "// Na nova l√≥gica, se subprocessos.isEmpty(), retorna imediatamente, ent√£o alertaService n√£o √© chamado.",
    "context": "        service.emailInicioProcesso(1L);\n\n        verifyNoInteractions(emailService);\n        // Na nova l√≥gica, se subprocessos.isEmpty(), retorna imediatamente, ent√£o alertaService n√£o √© chamado.\n        verifyNoInteractions(alertaService);\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoNotificacaoServiceTest.java",
    "type": "line",
    "line": 217,
    "length": 1,
    "text": "// Siglas nos e-mails seguem o padr√£o do mock U+cod (u1, u2, u3)",
    "context": "\n        service.emailInicioProcesso(1L);\n\n        // Siglas nos e-mails seguem o padr√£o do mock U+cod (u1, u2, u3)\n        verify(emailService, times(1)).enviarEmailHtml(eq(\"u1@tre-pe.jus.br\"), anyString(), anyString());\n        verify(emailService, times(1)).enviarEmailHtml(eq(\"u2@tre-pe.jus.br\"), anyString(), anyString());\n        verify(emailService, times(1)).enviarEmailHtml(eq(\"u3@tre-pe.jus.br\"), anyString(), anyString());"
  },
  {
    "file": "backend/src/test/java/sgc/processo/service/ProcessoValidadorTest.java",
    "type": "line",
    "line": 96,
    "length": 1,
    "text": "// Should not throw exception",
    "context": "        when(queryService.validarSubprocessosParaFinalizacao(1L))\n                .thenReturn(ConsultasSubprocessoService.ValidationResult.ofValido());\n\n        // Should not throw exception\n        Assertions.assertDoesNotThrow(() -> validador.validarTodosSubprocessosHomologados(p));\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/relatorio/service/RelatorioFacadeTest.java",
    "type": "line",
    "line": 139,
    "length": 1,
    "text": "// Filtra pela unidade 1",
    "context": "        when(mapaManutencaoService.buscarCompetenciasPorCodMapa(10L)).thenReturn(List.of());\n\n        OutputStream out = new ByteArrayOutputStream();\n        // Filtra pela unidade 1\n        relatorioService.gerarRelatorioMapas(1L, 1L, out);\n        verify(document, atLeastOnce()).add(any());\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/ConfigCorsTest.java",
    "type": "line",
    "line": 23,
    "length": 1,
    "text": "// Injeta no bean de configura√ß√£o",
    "context": "                true\n        );\n\n        // Injeta no bean de configura√ß√£o\n        ConfigCors config = new ConfigCors(properties);\n\n        CorsConfigurationSource source = config.corsConfigurationSource();"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/ConfigCorsTest.java",
    "type": "line",
    "line": 47,
    "length": 1,
    "text": "// Compact constructor aplica valores default",
    "context": "    @Test\n    @DisplayName(\"Deve usar valores padr√£o quando propriedades s√£o null\")\n    void deveUsarValoresPadraoQuandoPropriedadesSaoNull() {\n        // Compact constructor aplica valores default\n        ConfigCorsProperties properties = new ConfigCorsProperties(null, null, null, false);\n\n        assertThat(properties.allowedOrigins()).containsExactly(\"http://localhost:5173\");"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/SgcPermissionEvaluatorCoverageTest.java",
    "type": "line",
    "line": 109,
    "length": 1,
    "text": "// Acao de escrita",
    "context": "\n        Usuario user = usuario(Perfil.CHEFE, 10L); // Chefe na unidade 10\n\n        // Acao de escrita\n        boolean result = evaluator.checkPermission(user, sp, \"EDITAR_CADASTRO\");\n        assertThat(result).isFalse();\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/SgcPermissionEvaluatorCoverageTest.java",
    "type": "line",
    "line": 156,
    "length": 1,
    "text": "// sp.localizacaoAtual is null",
    "context": "    void obterUnidadeLocalizacao_Fallback() {\n        Subprocesso sp = criarSubprocesso(1L, 10L);\n        sp.setProcesso(new Processo());\n        // sp.localizacaoAtual is null\n\n        when(movimentacaoRepo.findFirstBySubprocessoCodigoOrderByDataHoraDesc(1L)).thenReturn(Optional.empty());\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/SgcPermissionEvaluatorCoverageTest.java",
    "type": "line",
    "line": 161,
    "length": 1,
    "text": "// Deve usar unidade do sp (10L) que √© igual a do usuario -> allow",
    "context": "        when(movimentacaoRepo.findFirstBySubprocessoCodigoOrderByDataHoraDesc(1L)).thenReturn(Optional.empty());\n\n        Usuario user = usuario(Perfil.CHEFE, 10L);\n        // Deve usar unidade do sp (10L) que √© igual a do usuario -> allow\n        boolean result = evaluator.checkPermission(user, sp, \"EDITAR_CADASTRO\");\n\n        assertThat(result).isTrue();"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/SgcPermissionEvaluatorCoverageTest.java",
    "type": "line",
    "line": 209,
    "length": 1,
    "text": "// Using the interface method directly",
    "context": "\n        Usuario user = usuario(Perfil.CHEFE, 10L);\n\n        // Using the interface method directly\n        org.springframework.security.core.Authentication auth = mock(org.springframework.security.core.Authentication.class);\n        when(auth.getPrincipal()).thenReturn(user);\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/ClienteAcessoAdTest.java",
    "type": "line",
    "line": 97,
    "length": 1,
    "text": "// Valida Predicate",
    "context": "\n        clienteAcessoAd.autenticar(\"123\", \"senha\");\n\n        // Valida Predicate\n        assertTrue(predicateCaptor.getValue().test(HttpStatusCode.valueOf(400)));\n        assertTrue(predicateCaptor.getValue().test(HttpStatusCode.valueOf(500)));\n        // Valida que 2xx retorna false"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/ClienteAcessoAdTest.java",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Valida que 2xx retorna false",
    "context": "        // Valida Predicate\n        assertTrue(predicateCaptor.getValue().test(HttpStatusCode.valueOf(400)));\n        assertTrue(predicateCaptor.getValue().test(HttpStatusCode.valueOf(500)));\n        // Valida que 2xx retorna false\n        assertFalse(predicateCaptor.getValue().test(HttpStatusCode.valueOf(200)));\n\n        // Valida ErrorHandler"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/ClienteAcessoAdTest.java",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// Valida ErrorHandler",
    "context": "        // Valida que 2xx retorna false\n        assertFalse(predicateCaptor.getValue().test(HttpStatusCode.valueOf(200)));\n\n        // Valida ErrorHandler\n        HttpRequest request = mock(HttpRequest.class);\n        ClientHttpResponse response = mock(ClientHttpResponse.class);\n        when(response.getStatusCode()).thenReturn(HttpStatusCode.valueOf(400));"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtSecurityTest.java",
    "type": "line",
    "line": 32,
    "length": 2,
    "text": "// Simula que N√ÉO √© um ambiente de teste/dev (retorna false para os perfis\n// seguros)",
    "context": "    void deveLancarErroEmProducaoComSecretPadrao() {\n\n        when(jwtProperties.secret()).thenReturn(DEFAULT_SECRET);\n        // Simula que N√ÉO √© um ambiente de teste/dev (retorna false para os perfis\n        // seguros)\n        when(environment.acceptsProfiles(any(Profiles.class))).thenReturn(false);\n\n        // When & Then"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtSecurityTest.java",
    "type": "line",
    "line": 36,
    "length": 1,
    "text": "// When & Then",
    "context": "        // seguros)\n        when(environment.acceptsProfiles(any(Profiles.class))).thenReturn(false);\n\n        // When & Then\n        assertThrows(ErroConfiguracao.class, () -> gerenciadorJwt.verificarSegurancaChave());\n    }\n}"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtTest.java",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// Correctly match the Profiles.of argument using an ArgumentMatcher",
    "context": "    @DisplayName(\"Deve alertar (warn) se segredo padr√£o em ambiente de teste\")\n    void warnDefaultTest() {\n        when(jwtProperties.secret()).thenReturn(DEFAULT_SECRET);\n        // Correctly match the Profiles.of argument using an ArgumentMatcher\n        when(environment.acceptsProfiles(any(Profiles.class))).thenReturn(true);\n\n        assertThatCode(() -> gerenciador.verificarSegurancaChave())"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtTest.java",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Mock secret() calls in verification and generation",
    "context": "    @Test\n    @DisplayName(\"Deve falhar se segredo muito curto\")\n    void failShortSecret() {\n        // Mock secret() calls in verification and generation\n        when(jwtProperties.secret()).thenReturn(DEFAULT_SECRET_SHORT);\n\n        // init check doesn't check length, only equality to default."
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtTest.java",
    "type": "line",
    "line": 70,
    "length": 2,
    "text": "// init check doesn't check length, only equality to default.\n// length check happens on signing key generation which happens on usage.",
    "context": "        // Mock secret() calls in verification and generation\n        when(jwtProperties.secret()).thenReturn(DEFAULT_SECRET_SHORT);\n\n        // init check doesn't check length, only equality to default.\n        // length check happens on signing key generation which happens on usage.\n\n        assertThatThrownBy(() -> gerenciador.gerarToken(\"123\", Perfil.ADMIN, 1L))\n                .isInstanceOf(ErroConfiguracao.class)"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtTest.java",
    "type": "line",
    "line": 107,
    "length": 1,
    "text": "// Gerar token \"mal formado\" (business logic wise) mas valido (crypto wise)",
    "context": "    void validateMissingClaims() {\n        when(jwtProperties.secret()).thenReturn(SECURE_SECRET);\n\n        // Gerar token \"mal formado\" (business logic wise) mas valido (crypto wise)\n        String token = Jwts.builder()\n                .subject(null) // missing subject\n                .signWith(Keys"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtTest.java",
    "type": "line",
    "line": 126,
    "length": 1,
    "text": "// Missing perfil",
    "context": "        String token = Jwts.builder()\n                .subject(\"123\")\n                .claim(\"unidade\", 1L)\n                // Missing perfil\n                .signWith(Keys\n                        .hmacShaKeyFor(SECURE_SECRET.getBytes(StandardCharsets.UTF_8)))\n                .compact();"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtTest.java",
    "type": "line",
    "line": 143,
    "length": 1,
    "text": "// Missing unidade",
    "context": "        String token = Jwts.builder()\n                .subject(\"123\")\n                .claim(\"perfil\", Perfil.ADMIN.name())\n                // Missing unidade\n                .signWith(Keys\n                        .hmacShaKeyFor(SECURE_SECRET.getBytes(StandardCharsets.UTF_8)))\n                .compact();"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtTest.java",
    "type": "line",
    "line": 155,
    "length": 1,
    "text": "// Simular NPE ao acessar o segredo durante a valida√ß√£o",
    "context": "    @Test\n    @DisplayName(\"Deve capturar exce√ß√£o inesperada ao validar token\")\n    void validateUnexpectedException() {\n        // Simular NPE ao acessar o segredo durante a valida√ß√£o\n        when(jwtProperties.secret()).thenReturn(null);\n\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/GerenciadorJwtTest.java",
    "type": "line",
    "line": 181,
    "length": 1,
    "text": "// Token normal usado como pr√©-auth",
    "context": "        when(jwtProperties.secret()).thenReturn(SECURE_SECRET);\n        when(jwtProperties.expiracaoMinutos()).thenReturn(60);\n\n        // Token normal usado como pr√©-auth\n        String token = gerenciador.gerarToken(\"123\", Perfil.ADMIN, 1L);\n        Optional<String> result = gerenciador.validarTokenPreAuth(token);\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 36,
    "length": 1,
    "text": "// 5 tentativas permitidas",
    "context": "    void devePermitirAteLimiteDeTentativas() {\n        String ip = \"192.168.1.1\";\n\n        // 5 tentativas permitidas\n        IntStream.range(0, 5).forEach(i -> assertDoesNotThrow(() -> limitador.verificar(ip)));\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Consome as 5 tentativas",
    "context": "    void deveBloquearAposLimiteExcedido() {\n        String ip = \"192.168.1.2\";\n\n        // Consome as 5 tentativas\n        IntStream.range(0, 5).forEach(i -> limitador.verificar(ip));\n\n        // 6¬™ tentativa deve falhar"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 47,
    "length": 1,
    "text": "// 6¬™ tentativa deve falhar",
    "context": "        // Consome as 5 tentativas\n        IntStream.range(0, 5).forEach(i -> limitador.verificar(ip));\n\n        // 6¬™ tentativa deve falhar\n        var exception = assertThrows(ErroMuitasTentativas.class, () -> limitador.verificar(ip));\n        assertNotNull(exception);\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 57,
    "length": 1,
    "text": "// Bloqueia ip1",
    "context": "        String ip1 = \"10.0.0.1\";\n        String ip2 = \"10.0.0.2\";\n\n        // Bloqueia ip1\n        IntStream.range(0, 5).forEach(i -> limitador.verificar(ip1));\n        var exception = assertThrows(ErroMuitasTentativas.class, () -> limitador.verificar(ip1));\n        assertNotNull(exception);"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 62,
    "length": 1,
    "text": "// ip2 deve continuar livre",
    "context": "        var exception = assertThrows(ErroMuitasTentativas.class, () -> limitador.verificar(ip1));\n        assertNotNull(exception);\n\n        // ip2 deve continuar livre\n        assertDoesNotThrow(() -> limitador.verificar(ip2));\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 72,
    "length": 1,
    "text": "// Com perfil 'test', n√£o deve bloquear nunca",
    "context": "\n        String ip = \"192.168.1.4\";\n\n        // Com perfil 'test', n√£o deve bloquear nunca\n        IntStream.range(0, 10).forEach(i -> assertDoesNotThrow(() -> limitador.verificar(ip)));\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 82,
    "length": 1,
    "text": "// Com perfil 'e2e', n√£o deve bloquear nunca",
    "context": "\n        String ip = \"192.168.1.5\";\n\n        // Com perfil 'e2e', n√£o deve bloquear nunca\n        IntStream.range(0, 10).forEach(i -> assertDoesNotThrow(() -> limitador.verificar(ip)));\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 89,
    "length": 1,
    "text": "// 1. Adiciona uma tentativa",
    "context": "    @Test\n    void deveLimparTentativasAntigasAoVerificarNovamente() {\n        String ip = \"192.168.1.10\";\n        // 1. Adiciona uma tentativa\n        limitador.verificar(ip);\n\n        // 2. Avan√ßa o tempo para expirar a tentativa (11 minutos, janela √© 10)"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 92,
    "length": 1,
    "text": "// 2. Avan√ßa o tempo para expirar a tentativa (11 minutos, janela √© 10)",
    "context": "        // 1. Adiciona uma tentativa\n        limitador.verificar(ip);\n\n        // 2. Avan√ßa o tempo para expirar a tentativa (11 minutos, janela √© 10)\n        when(clock.instant()).thenReturn(Instant.now().plusSeconds(660));\n\n        // 3. Verifica novamente o mesmo IP."
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 95,
    "length": 3,
    "text": "// 3. Verifica novamente o mesmo IP.\n// Isso deve chamar limparTentativasAntigas(ip), remover a antiga,\n// esvaziar a lista desse IP, remover do mapa, e adicionar a nova.",
    "context": "        // 2. Avan√ßa o tempo para expirar a tentativa (11 minutos, janela √© 10)\n        when(clock.instant()).thenReturn(Instant.now().plusSeconds(660));\n\n        // 3. Verifica novamente o mesmo IP.\n        // Isso deve chamar limparTentativasAntigas(ip), remover a antiga,\n        // esvaziar a lista desse IP, remover do mapa, e adicionar a nova.\n        assertDoesNotThrow(() -> limitador.verificar(ip));\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// Configura um limitador com cache pequeno (100 entradas) para teste r√°pido",
    "context": "\n    @Test\n    void deveLimparCacheAoAtingirLimiteMaximoEntradas() {\n        // Configura um limitador com cache pequeno (100 entradas) para teste r√°pido\n        int limiteTeste = 100;\n        LimitadorTentativasLogin limitadorTeste = new LimitadorTentativasLogin(environment, limiteTeste, clock);\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 107,
    "length": 1,
    "text": "// Adiciona entradas √∫nicas at√© o limite",
    "context": "        int limiteTeste = 100;\n        LimitadorTentativasLogin limitadorTeste = new LimitadorTentativasLogin(environment, limiteTeste, clock);\n\n        // Adiciona entradas √∫nicas at√© o limite\n        for (int i = 0; i < limiteTeste; i++) {\n            limitadorTeste.verificar(\"10.0.0.\" + i);\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 112,
    "length": 1,
    "text": "// Verifica se atingiu o limite",
    "context": "            limitadorTeste.verificar(\"10.0.0.\" + i);\n        }\n\n        // Verifica se atingiu o limite\n        assertEquals(limiteTeste, limitadorTeste.getCacheSize());\n\n        // Avan√ßa o tempo para al√©m da janela (2 minutos)"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 115,
    "length": 1,
    "text": "// Avan√ßa o tempo para al√©m da janela (2 minutos)",
    "context": "        // Verifica se atingiu o limite\n        assertEquals(limiteTeste, limitadorTeste.getCacheSize());\n\n        // Avan√ßa o tempo para al√©m da janela (2 minutos)\n        when(clock.instant()).thenReturn(Instant.now().plusSeconds(120));\n\n        // Adiciona mais uma entrada, deve acionar a limpeza"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 118,
    "length": 3,
    "text": "// Adiciona mais uma entrada, deve acionar a limpeza\n// Como o tempo passou, ele deve limpar as antigas e N√ÉO precisar limpar tudo\n// (clear)",
    "context": "        // Avan√ßa o tempo para al√©m da janela (2 minutos)\n        when(clock.instant()).thenReturn(Instant.now().plusSeconds(120));\n\n        // Adiciona mais uma entrada, deve acionar a limpeza\n        // Como o tempo passou, ele deve limpar as antigas e N√ÉO precisar limpar tudo\n        // (clear)\n        limitadorTeste.verificar(\"10.0.0.\" + limiteTeste);\n\n        // O tamanho deve ser 1 (apenas a nova, as velhas expiraram)"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 123,
    "length": 1,
    "text": "// O tamanho deve ser 1 (apenas a nova, as velhas expiraram)",
    "context": "        // (clear)\n        limitadorTeste.verificar(\"10.0.0.\" + limiteTeste);\n\n        // O tamanho deve ser 1 (apenas a nova, as velhas expiraram)\n        assertEquals(1, limitadorTeste.getCacheSize());\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 129,
    "length": 1,
    "text": "// Cache min√∫sculo",
    "context": "\n    @Test\n    void deveBloquearNovosIpsSeCacheCheioEEntradasRecentes() {\n        // Cache min√∫sculo\n        int limiteTeste = 5;\n        LimitadorTentativasLogin limitadorTeste = new LimitadorTentativasLogin(environment, limiteTeste, clock);\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 133,
    "length": 1,
    "text": "// Enche o cache",
    "context": "        int limiteTeste = 5;\n        LimitadorTentativasLogin limitadorTeste = new LimitadorTentativasLogin(environment, limiteTeste, clock);\n\n        // Enche o cache\n        for (int i = 0; i < limiteTeste; i++) {\n            limitadorTeste.verificar(\"Ip\" + i);\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 139,
    "length": 2,
    "text": "// Tenta adicionar mais um, SEM avan√ßar o tempo\n// Deve lan√ßar erro indicando sobrecarga",
    "context": "        }\n        assertEquals(limiteTeste, limitadorTeste.getCacheSize());\n\n        // Tenta adicionar mais um, SEM avan√ßar o tempo\n        // Deve lan√ßar erro indicando sobrecarga\n        var exception = assertThrows(ErroMuitasTentativas.class, () -> limitadorTeste.verificar(\"IpNovo\"));\n        assertNotNull(exception);\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 144,
    "length": 1,
    "text": "// O cache N√ÉO deve ter sido limpo. Size = limiteTeste.",
    "context": "        var exception = assertThrows(ErroMuitasTentativas.class, () -> limitadorTeste.verificar(\"IpNovo\"));\n        assertNotNull(exception);\n\n        // O cache N√ÉO deve ter sido limpo. Size = limiteTeste.\n        assertEquals(limiteTeste, limitadorTeste.getCacheSize());\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 153,
    "length": 1,
    "text": "// Enche o cache",
    "context": "        int limiteTeste = 5;\n        LimitadorTentativasLogin limitadorTeste = new LimitadorTentativasLogin(environment, limiteTeste, clock);\n\n        // Enche o cache\n        for (int i = 0; i < limiteTeste; i++) {\n            limitadorTeste.verificar(\"Ip\" + i);\n        }"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 158,
    "length": 2,
    "text": "// Tenta verificar um IP J√Å existente no cache (\"Ip0\")\n// Deve permitir (n√£o lan√ßar erro) pois ele j√° est√° sendo rastreado",
    "context": "            limitadorTeste.verificar(\"Ip\" + i);\n        }\n\n        // Tenta verificar um IP J√Å existente no cache (\"Ip0\")\n        // Deve permitir (n√£o lan√ßar erro) pois ele j√° est√° sendo rastreado\n        assertDoesNotThrow(() -> limitadorTeste.verificar(\"Ip0\"));\n\n        // Verifica se contou a tentativa (Ip0 agora deve ter 2 tentativas)"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 162,
    "length": 2,
    "text": "// Verifica se contou a tentativa (Ip0 agora deve ter 2 tentativas)\n// Se eu chamar mais 3 vezes (total 5), deve bloquear na 6¬™.",
    "context": "        // Deve permitir (n√£o lan√ßar erro) pois ele j√° est√° sendo rastreado\n        assertDoesNotThrow(() -> limitadorTeste.verificar(\"Ip0\"));\n\n        // Verifica se contou a tentativa (Ip0 agora deve ter 2 tentativas)\n        // Se eu chamar mais 3 vezes (total 5), deve bloquear na 6¬™.\n        IntStream.range(0, 3).forEach(i -> limitadorTeste.verificar(\"Ip0\")); // Total 5\n        var exception = assertThrows(ErroMuitasTentativas.class, () -> limitadorTeste.verificar(\"Ip0\")); // 6¬™\n        assertNotNull(exception);"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 174,
    "length": 1,
    "text": "// Deve permitir infinitamente",
    "context": "        when(environment.getProperty(\"aplicacao.ambiente-testes\", Boolean.class, false)).thenReturn(true);\n        String ip = \"192.168.1.15\";\n\n        // Deve permitir infinitamente\n        IntStream.range(0, 10).forEach(i -> assertDoesNotThrow(() -> limitador.verificar(ip)));\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 183,
    "length": 1,
    "text": "// Consome 5",
    "context": "        when(environment.getActiveProfiles()).thenReturn(new String[]{\"prod\"});\n        String ip = \"192.168.1.16\";\n\n        // Consome 5\n        IntStream.range(0, 5).forEach(i -> limitador.verificar(ip));\n        // 6¬™ falha\n        var exception = assertThrows(ErroMuitasTentativas.class, () -> limitador.verificar(ip));"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LimitadorTentativasLoginTest.java",
    "type": "line",
    "line": 185,
    "length": 1,
    "text": "// 6¬™ falha",
    "context": "\n        // Consome 5\n        IntStream.range(0, 5).forEach(i -> limitador.verificar(ip));\n        // 6¬™ falha\n        var exception = assertThrows(ErroMuitasTentativas.class, () -> limitador.verificar(ip));\n        assertNotNull(exception);\n    }"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LoginControllerLogInjectionTest.java",
    "type": "line",
    "line": 55,
    "length": 2,
    "text": "// Payload de Log Injection: Tenta injetar uma nova linha e um log falso\n// O valor original poderia ser algo como: \"10.0.0.1\\nINFO User logged in as admin\"",
    "context": "    @DisplayName(\"POST /api/usuarios/autenticar - Deve sanitizar IP no header X-Forwarded-For (Log Injection)\")\n    @WithMockUser\n    void autenticar_DeveSanitizarIpLogInjection() throws Exception {\n        // Payload de Log Injection: Tenta injetar uma nova linha e um log falso\n        // O valor original poderia ser algo como: \"10.0.0.1\\nINFO User logged in as admin\"\n        String ipMalicioso = \"10.0.0.1\\nINFO User logged in as admin\";\n\n"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LoginControllerLogInjectionTest.java",
    "type": "line",
    "line": 74,
    "length": 2,
    "text": "// Verifica se o valor passado para o limitador (e consequentemente para o log) foi sanitizado.\n// Esperamos que n√£o contenha \\n ou \\r",
    "context": "                        .content(objectMapper.writeValueAsString(req)))\n                .andExpect(status().isOk());\n\n        // Verifica se o valor passado para o limitador (e consequentemente para o log) foi sanitizado.\n        // Esperamos que n√£o contenha \\n ou \\r\n        verify(limitadorTentativasLogin).verificar(\"10.0.0.1_INFO User logged in as admin\");\n    }\n}"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LoginControllerTest.java",
    "type": "line",
    "line": 188,
    "length": 2,
    "text": "// Log Injection Payload: Digits followed by newline and fake log\n// Must be <= 12 chars to bypass @Size check, but contains newline/letters to fail @Pattern",
    "context": "    @DisplayName(\"POST /api/usuarios/autenticar - Deve rejeitar t√≠tulo n√£o num√©rico\")\n    @WithMockUser\n    void autenticar_DeveRejeitarTituloNaoNumerico() throws Exception {\n        // Log Injection Payload: Digits followed by newline and fake log\n        // Must be <= 12 chars to bypass @Size check, but contains newline/letters to fail @Pattern\n        String maliciousTitle = \"12\\nFake\";\n\n        AutenticarRequest req = AutenticarRequest.builder()"
  },
  {
    "file": "backend/src/test/java/sgc/seguranca/login/LoginControllerTest.java",
    "type": "line",
    "line": 375,
    "length": 1,
    "text": "// No cookies",
    "context": "            EntrarRequest req = new EntrarRequest(\"user\", \"ADMIN\", 1L);\n            HttpServletRequest httpReq = mock(HttpServletRequest.class);\n\n            // No cookies\n            when(httpReq.getCookies()).thenReturn(null);\n\n            Assertions.assertThrows(ErroAutenticacao.class,"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/dto/MapaAjusteDtoTest.java",
    "type": "line",
    "line": 65,
    "length": 1,
    "text": "// Setup",
    "context": "        @Test\n        @DisplayName(\"Deve mapear hierarquia de compet√™ncias e atividades\")\n        void deveMapearHierarquia() {\n            // Setup\n            Atividade ativ = new Atividade();\n            ativ.setCodigo(2L);\n            ativ.setDescricao(\"Ativ 1\");"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/dto/MapaAjusteDtoTest.java",
    "type": "line",
    "line": 80,
    "length": 1,
    "text": "// Execute",
    "context": "            comp.setDescricao(\"Comp 1\");\n            comp.setAtividades(Set.of(ativ));\n\n            // Execute\n            Analise analise = new Analise();\n            analise.setObservacoes(\"\");\n            MapaAjusteDto dto = MapaAjusteDto.of("
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoPbtTest.java",
    "type": "line",
    "line": 22,
    "length": 1,
    "text": "// Se a transi√ß√£o √© permitida para um tipo, elas devem ser compat√≠veis",
    "context": "    void imutabilidadeTipo(@ForAll SituacaoSubprocesso s1,\n                           @ForAll SituacaoSubprocesso s2,\n                           @ForAll TipoProcesso tipo) {\n        // Se a transi√ß√£o √© permitida para um tipo, elas devem ser compat√≠veis\n        if (s1.podeTransicionarPara(s2, tipo) && s1 != s2 && s2 != SituacaoSubprocesso.NAO_INICIADO) {\n            String prefixoS1 = getPrefix(s1);\n            String prefixoS2 = getPrefix(s2);"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 25,
    "length": 1,
    "text": "// --- MAPEAMENTO ---",
    "context": "            \"NAO_INICIADO, DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, false, MAPEAMENTO\",\n            \"NAO_INICIADO, NAO_INICIADO, true, MAPEAMENTO\",\n\n            // --- MAPEAMENTO ---\n            \"MAPEAMENTO_CADASTRO_EM_ANDAMENTO, MAPEAMENTO_CADASTRO_DISPONIBILIZADO, true, MAPEAMENTO\",\n            \"MAPEAMENTO_CADASTRO_DISPONIBILIZADO, MAPEAMENTO_CADASTRO_EM_ANDAMENTO, true, MAPEAMENTO\",\n            \"MAPEAMENTO_CADASTRO_DISPONIBILIZADO, MAPEAMENTO_CADASTRO_HOMOLOGADO, true, MAPEAMENTO\","
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// --- REVISAO ---",
    "context": "            \"MAPEAMENTO_MAPA_VALIDADO, MAPEAMENTO_MAPA_DISPONIBILIZADO, true, MAPEAMENTO\",\n            \"MAPEAMENTO_MAPA_HOMOLOGADO, MAPEAMENTO_MAPA_VALIDADO, false, MAPEAMENTO\",\n\n            // --- REVISAO ---\n            \"REVISAO_CADASTRO_EM_ANDAMENTO, REVISAO_CADASTRO_DISPONIBILIZADA, true, REVISAO\",\n            \"REVISAO_CADASTRO_DISPONIBILIZADA, REVISAO_CADASTRO_EM_ANDAMENTO, true, REVISAO\",\n            \"REVISAO_CADASTRO_DISPONIBILIZADA, REVISAO_CADASTRO_HOMOLOGADA, true, REVISAO\","
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 62,
    "length": 1,
    "text": "// --- DIAGNOSTICO ---",
    "context": "            \"REVISAO_MAPA_VALIDADO, REVISAO_MAPA_DISPONIBILIZADO, true, REVISAO\",\n            \"REVISAO_MAPA_HOMOLOGADO, REVISAO_MAPA_VALIDADO, false, REVISAO\",\n\n            // --- DIAGNOSTICO ---\n            \"DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, DIAGNOSTICO_MONITORAMENTO, true, DIAGNOSTICO\",\n            \"DIAGNOSTICO_MONITORAMENTO, DIAGNOSTICO_CONCLUIDO, true, DIAGNOSTICO\",\n            \"DIAGNOSTICO_CONCLUIDO, DIAGNOSTICO_MONITORAMENTO, false, DIAGNOSTICO\","
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Transi√ß√µes Inv√°lidas (Misturando tipos)",
    "context": "            \"DIAGNOSTICO_MONITORAMENTO, DIAGNOSTICO_CONCLUIDO, true, DIAGNOSTICO\",\n            \"DIAGNOSTICO_CONCLUIDO, DIAGNOSTICO_MONITORAMENTO, false, DIAGNOSTICO\",\n\n            // Transi√ß√µes Inv√°lidas (Misturando tipos)\n            \"MAPEAMENTO_CADASTRO_EM_ANDAMENTO, REVISAO_CADASTRO_EM_ANDAMENTO, false, MAPEAMENTO\",\n            \"REVISAO_CADASTRO_EM_ANDAMENTO, MAPEAMENTO_CADASTRO_EM_ANDAMENTO, false, REVISAO\",\n            \"DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, MAPEAMENTO_CADASTRO_EM_ANDAMENTO, false, DIAGNOSTICO\","
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 88,
    "length": 2,
    "text": "// this != NAO_INICIADO && nova != NAO_INICIADO\n// this.name().startsWith(\"MAPEAMENTO\") && !nova.name().startsWith(\"MAPEAMENTO\") -> false",
    "context": "    @Test\n    @DisplayName(\"Deve testar ramos da verifica√ß√£o de prefixo (MAPEAMENTO)\")\n    void testRamosPrefixoMapeamento() {\n        // this != NAO_INICIADO && nova != NAO_INICIADO\n        // this.name().startsWith(\"MAPEAMENTO\") && !nova.name().startsWith(\"MAPEAMENTO\") -> false\n        assertThat(MAPEAMENTO_CADASTRO_EM_ANDAMENTO.podeTransicionarPara(REVISAO_CADASTRO_EM_ANDAMENTO, TipoProcesso.MAPEAMENTO)).isFalse();\n\n        // this.name().startsWith(\"MAPEAMENTO\") && nova.name().startsWith(\"MAPEAMENTO\") -> prossegue para switch"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 92,
    "length": 1,
    "text": "// this.name().startsWith(\"MAPEAMENTO\") && nova.name().startsWith(\"MAPEAMENTO\") -> prossegue para switch",
    "context": "        // this.name().startsWith(\"MAPEAMENTO\") && !nova.name().startsWith(\"MAPEAMENTO\") -> false\n        assertThat(MAPEAMENTO_CADASTRO_EM_ANDAMENTO.podeTransicionarPara(REVISAO_CADASTRO_EM_ANDAMENTO, TipoProcesso.MAPEAMENTO)).isFalse();\n\n        // this.name().startsWith(\"MAPEAMENTO\") && nova.name().startsWith(\"MAPEAMENTO\") -> prossegue para switch\n        assertThat(MAPEAMENTO_CADASTRO_EM_ANDAMENTO.podeTransicionarPara(MAPEAMENTO_CADASTRO_DISPONIBILIZADO, TipoProcesso.MAPEAMENTO)).isTrue();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 110,
    "length": 3,
    "text": "// ===========================================\n// Testes mesclados de SituacaoSubprocessoCoverageTest\n// ===========================================",
    "context": "        assertThat(DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO.podeTransicionarPara(DIAGNOSTICO_MONITORAMENTO, TipoProcesso.DIAGNOSTICO)).isTrue();\n    }\n\n    // ===========================================\n    // Testes mesclados de SituacaoSubprocessoCoverageTest\n    // ===========================================\n\n    @Test\n    @DisplayName(\"Mistura de tipos deve retornar false\")"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 125,
    "length": 1,
    "text": "// Casos de transi√ß√£o inv√°lida (esperado=false) - mesclados do CoverageTest",
    "context": "\n    @ParameterizedTest(name = \"De {0} para {1} (Tipo {2}) deve ser {3}\")\n    @CsvSource({\n            // Casos de transi√ß√£o inv√°lida (esperado=false) - mesclados do CoverageTest\n            \"MAPEAMENTO_CADASTRO_EM_ANDAMENTO, MAPEAMENTO_CADASTRO_HOMOLOGADO, MAPEAMENTO, false\",\n            \"MAPEAMENTO_CADASTRO_DISPONIBILIZADO, MAPEAMENTO_MAPA_CRIADO, MAPEAMENTO, false\",\n            \"MAPEAMENTO_CADASTRO_HOMOLOGADO, MAPEAMENTO_MAPA_VALIDADO, MAPEAMENTO, false\","
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 145,
    "length": 1,
    "text": "// Transi√ß√£o para NAO_INICIADO",
    "context": "            \"DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, DIAGNOSTICO_CONCLUIDO, DIAGNOSTICO, false\",\n            \"DIAGNOSTICO_MONITORAMENTO, DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, DIAGNOSTICO, false\",\n\n            // Transi√ß√£o para NAO_INICIADO\n            \"MAPEAMENTO_CADASTRO_EM_ANDAMENTO, NAO_INICIADO, MAPEAMENTO, false\",\n            \"REVISAO_CADASTRO_EM_ANDAMENTO, NAO_INICIADO, REVISAO, false\",\n"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 149,
    "length": 1,
    "text": "// Casos para podeIniciar - cobrir combina√ß√µes de falha",
    "context": "            \"MAPEAMENTO_CADASTRO_EM_ANDAMENTO, NAO_INICIADO, MAPEAMENTO, false\",\n            \"REVISAO_CADASTRO_EM_ANDAMENTO, NAO_INICIADO, REVISAO, false\",\n\n            // Casos para podeIniciar - cobrir combina√ß√µes de falha\n            \"NAO_INICIADO, MAPEAMENTO_CADASTRO_EM_ANDAMENTO, REVISAO, false\",\n            \"NAO_INICIADO, REVISAO_CADASTRO_EM_ANDAMENTO, MAPEAMENTO, false\",\n            \"NAO_INICIADO, DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, MAPEAMENTO, false\""
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 159,
    "length": 3,
    "text": "// ===========================================\n// Testes mesclados de SituacaoSubprocessoGapTest\n// ===========================================",
    "context": "        assertThat(de.podeTransicionarPara(para, tipo)).isEqualTo(esperado);\n    }\n\n    // ===========================================\n    // Testes mesclados de SituacaoSubprocessoGapTest\n    // ===========================================\n\n    @Test\n    @DisplayName(\"Deve cobrir todas as branches de podeIniciar (m√©todo privado)\")"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 166,
    "length": 1,
    "text": "// MAPEAMENTO",
    "context": "    @Test\n    @DisplayName(\"Deve cobrir todas as branches de podeIniciar (m√©todo privado)\")\n    void testPodeIniciarBranches() {\n        // MAPEAMENTO\n        assertThat(invocarPodeIniciar(MAPEAMENTO_CADASTRO_EM_ANDAMENTO, MAPEAMENTO_CADASTRO_EM_ANDAMENTO, TipoProcesso.MAPEAMENTO)).isTrue();\n        assertThat(invocarPodeIniciar(MAPEAMENTO_CADASTRO_EM_ANDAMENTO, REVISAO_CADASTRO_EM_ANDAMENTO, TipoProcesso.MAPEAMENTO)).isFalse();\n"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 170,
    "length": 1,
    "text": "// REVISAO",
    "context": "        assertThat(invocarPodeIniciar(MAPEAMENTO_CADASTRO_EM_ANDAMENTO, MAPEAMENTO_CADASTRO_EM_ANDAMENTO, TipoProcesso.MAPEAMENTO)).isTrue();\n        assertThat(invocarPodeIniciar(MAPEAMENTO_CADASTRO_EM_ANDAMENTO, REVISAO_CADASTRO_EM_ANDAMENTO, TipoProcesso.MAPEAMENTO)).isFalse();\n\n        // REVISAO\n        assertThat(invocarPodeIniciar(REVISAO_CADASTRO_EM_ANDAMENTO, REVISAO_CADASTRO_EM_ANDAMENTO, TipoProcesso.REVISAO)).isTrue();\n        assertThat(invocarPodeIniciar(REVISAO_CADASTRO_EM_ANDAMENTO, MAPEAMENTO_CADASTRO_EM_ANDAMENTO, TipoProcesso.REVISAO)).isFalse();\n"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 174,
    "length": 1,
    "text": "// DIAGNOSTICO",
    "context": "        assertThat(invocarPodeIniciar(REVISAO_CADASTRO_EM_ANDAMENTO, REVISAO_CADASTRO_EM_ANDAMENTO, TipoProcesso.REVISAO)).isTrue();\n        assertThat(invocarPodeIniciar(REVISAO_CADASTRO_EM_ANDAMENTO, MAPEAMENTO_CADASTRO_EM_ANDAMENTO, TipoProcesso.REVISAO)).isFalse();\n\n        // DIAGNOSTICO\n        assertThat(invocarPodeIniciar(DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, TipoProcesso.DIAGNOSTICO)).isTrue();\n        assertThat(invocarPodeIniciar(DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, REVISAO_CADASTRO_EM_ANDAMENTO, TipoProcesso.DIAGNOSTICO)).isFalse();\n"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/model/SituacaoSubprocessoTest.java",
    "type": "line",
    "line": 178,
    "length": 1,
    "text": "// Tipo nulo",
    "context": "        assertThat(invocarPodeIniciar(DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, TipoProcesso.DIAGNOSTICO)).isTrue();\n        assertThat(invocarPodeIniciar(DIAGNOSTICO_AUTOAVALIACAO_EM_ANDAMENTO, REVISAO_CADASTRO_EM_ANDAMENTO, TipoProcesso.DIAGNOSTICO)).isFalse();\n\n        // Tipo nulo\n        assertThat(invocarPodeIniciar(MAPEAMENTO_CADASTRO_EM_ANDAMENTO, MAPEAMENTO_CADASTRO_EM_ANDAMENTO, null)).isFalse();\n    }\n"
  },
  {
    "file": "backend/src/test/java/sgc/subprocesso/service/query/ConsultasSubprocessoServiceTest.java",
    "type": "line",
    "line": 153,
    "length": 1,
    "text": "// Verifica que apenas queries de contagem foram chamadas, n√£o findAll",
    "context": "            queryService.validarSubprocessosParaFinalizacao(processoId);\n\n\n            // Verifica que apenas queries de contagem foram chamadas, n√£o findAll\n            verify(subprocessoRepo).countByProcessoCodigo(processoId);\n            verify(subprocessoRepo).countByProcessoCodigoAndSituacaoIn(anyLong(), anyList());\n            verify(subprocessoRepo, never()).findByProcessoCodigo(anyLong());"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 31,
    "length": 1,
    "text": "// Diret√≥rio onde as screenshots ser√£o salvas",
    "context": " * N√ÉO √© um teste de regress√£o visual, mas sim uma ferramenta de documenta√ß√£o visual.\n */\n\n// Diret√≥rio onde as screenshots ser√£o salvas\nconst SCREENSHOTS_DIR = path.join(process.cwd(), 'screenshots');\n\n// Criar diret√≥rio se n√£o existir"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 34,
    "length": 1,
    "text": "// Criar diret√≥rio se n√£o existir",
    "context": "// Diret√≥rio onde as screenshots ser√£o salvas\nconst SCREENSHOTS_DIR = path.join(process.cwd(), 'screenshots');\n\n// Criar diret√≥rio se n√£o existir\nif (fs.existsSync(SCREENSHOTS_DIR)) {\n    fs.rmSync(SCREENSHOTS_DIR, {recursive: true, force: true});\n}"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 78,
    "length": 1,
    "text": "// Tela de login inicial",
    "context": "    test.describe('01 - Autentica√ß√£o', () => {\n        test('Captura telas de login', async ({page}) => {\n            await page.goto('/login');\n            // Tela de login inicial\n            await capturarTela(page, '01-seguranca', '01-login-inicial');\n            await page.getByTestId('inp-login-usuario').click();\n            await capturarTela(page, '01-seguranca', '01b-login-campo-usuario-foco');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 83,
    "length": 1,
    "text": "// Erro de credenciais inv√°lidas",
    "context": "            await page.getByTestId('inp-login-usuario').click();\n            await capturarTela(page, '01-seguranca', '01b-login-campo-usuario-foco');\n\n            // Erro de credenciais inv√°lidas\n            await page.getByTestId('inp-login-usuario').fill(USUARIOS.INVALIDO.titulo);\n            await capturarTela(page, '01-seguranca', '01c-login-usuario-preenchido');\n            await page.getByTestId('inp-login-senha').fill(USUARIOS.INVALIDO.senha);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 91,
    "length": 1,
    "text": "// Limpar e fazer login com m√∫ltiplos perfis",
    "context": "            await page.waitForTimeout(500);\n            await capturarTela(page, '01-seguranca', '02-login-erro-credenciais');\n\n            // Limpar e fazer login com m√∫ltiplos perfis\n            await page.getByTestId('inp-login-usuario').fill(USUARIOS.ADMIN_2_PERFIS.titulo);\n            await page.getByTestId('inp-login-senha').fill(USUARIOS.ADMIN_2_PERFIS.senha);\n            await page.getByTestId('btn-login-entrar').click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 98,
    "length": 2,
    "text": "// Login com perfil selecionado\n// Reiniciar a p√°gina para garantir estado limpo para a fun√ß√£o helper",
    "context": "            await page.waitForTimeout(500);\n            await capturarTela(page, '01-seguranca', '03-login-selecao-perfil');\n\n            // Login com perfil selecionado\n            // Reiniciar a p√°gina para garantir estado limpo para a fun√ß√£o helper\n            await loginComPerfil(page, USUARIOS.ADMIN_2_PERFIS.titulo, USUARIOS.ADMIN_2_PERFIS.senha, USUARIOS.ADMIN_2_PERFIS.perfil);\n            await capturarTela(page, '01-seguranca', '04-painel-apos-login', {fullPage: true});\n        });"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 109,
    "length": 1,
    "text": "// Painel inicial vazio",
    "context": "        test('Captura painel ADMIN', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Painel inicial vazio\n            await capturarTela(page, '02-painel', '01-painel-admin-vazio', {fullPage: true});\n\n            // Criar um processo para popular o painel"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 112,
    "length": 1,
    "text": "// Criar um processo para popular o painel",
    "context": "            // Painel inicial vazio\n            await capturarTela(page, '02-painel', '01-painel-admin-vazio', {fullPage: true});\n\n            // Criar um processo para popular o painel\n            const descricaoProcesso = `Processo Captura ${Date.now()}`;\n            await page.getByTestId('btn-painel-criar-processo').click();\n            await expect(page).toHaveURL(/\\/processo\\/cadastro/);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 118,
    "length": 1,
    "text": "// Preenchendo formul√°rio",
    "context": "            await expect(page).toHaveURL(/\\/processo\\/cadastro/);\n            await capturarTela(page, '02-painel', '02-criar-processo-form-vazio');\n\n            // Preenchendo formul√°rio\n            await page.getByTestId('inp-processo-descricao').fill(descricaoProcesso);\n            await page.getByTestId('sel-processo-tipo').selectOption('MAPEAMENTO');\n            const dataLimite = new Date();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 126,
    "length": 1,
    "text": "// Expandir √°rvore de unidades",
    "context": "            await page.getByTestId('inp-processo-data-limite').fill(dataLimite.toISOString().split('T')[0]);\n            await capturarTela(page, '02-painel', '03-criar-processo-form-preenchido');\n\n            // Expandir √°rvore de unidades\n            await expect(page.getByText('Carregando unidades...')).toBeHidden();\n            await page.getByTestId('btn-arvore-expand-SECRETARIA_1').click();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// Expandir COORD_11 para acessar SECAO_111",
    "context": "            await page.waitForTimeout(300);\n            await capturarTela(page, '02-painel', '04-arvore-unidades-expandida');\n\n            // Expandir COORD_11 para acessar SECAO_111\n            await page.waitForTimeout(300);\n            await page.getByTestId('btn-arvore-expand-COORD_11').click();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 137,
    "length": 1,
    "text": "// Selecionar m√∫ltiplas unidades",
    "context": "            await page.getByTestId('btn-arvore-expand-COORD_11').click();\n            await page.waitForTimeout(300);\n\n            // Selecionar m√∫ltiplas unidades\n            await page.getByTestId('chk-arvore-unidade-ASSESSORIA_11').click();\n            await page.getByTestId('chk-arvore-unidade-ASSESSORIA_12').click();\n            await page.getByTestId('chk-arvore-unidade-SECAO_111').click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 143,
    "length": 1,
    "text": "// Salvar processo",
    "context": "            await page.getByTestId('chk-arvore-unidade-SECAO_111').click();\n            await capturarTela(page, '02-painel', '05-arvore-unidades-selecionada');\n\n            // Salvar processo\n            await page.getByTestId('btn-processo-salvar').click();\n            await expect(page).toHaveURL(/\\/painel/);\n            await expect(page.getByTestId('tbl-processos')).toBeVisible();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 150,
    "length": 1,
    "text": "// Capturar ID para cleanup",
    "context": "            await expect(page.getByTestId('tbl-processos').getByText(descricaoProcesso).first()).toBeVisible();\n            await capturarComponente(page.getByTestId('tbl-processos'), '02-painel', '06a-tabela-processos');\n\n            // Capturar ID para cleanup\n            await page.getByTestId('tbl-processos').getByText(descricaoProcesso).first().click();\n            await expect(page).toHaveURL(/codProcesso=\\d+/);\n            const processoId = await extrairProcessoId(page);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 157,
    "length": 1,
    "text": "// Painel com processo criado",
    "context": "            if (processoId > 0) cleanup.registrar(processoId);\n            await page.goto('/painel');\n\n            // Painel com processo criado\n            await capturarTela(page, '02-painel', '06-painel-admin-com-processo', {fullPage: true});\n\n            // Hover em linha da tabela"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 160,
    "length": 1,
    "text": "// Hover em linha da tabela",
    "context": "            // Painel com processo criado\n            await capturarTela(page, '02-painel', '06-painel-admin-com-processo', {fullPage: true});\n\n            // Hover em linha da tabela\n            await page.getByText(descricaoProcesso).hover();\n            await capturarTela(page, '02-painel', '07-painel-hover-processo');\n        });"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 166,
    "length": 1,
    "text": "// Criar processo para o Gestor primeiro como ADMIN",
    "context": "        });\n\n        test('Captura painel GESTOR', async ({page}) => {\n            // Criar processo para o Gestor primeiro como ADMIN\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n            const desc = `Processo Gestor ${Date.now()}`;\n            await criarProcesso(page, {"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 186,
    "length": 1,
    "text": "// Criar processo para o Chefe primeiro como ADMIN",
    "context": "        });\n\n        test('Captura painel CHEFE', async ({page}) => {\n            // Criar processo para o Chefe primeiro como ADMIN\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n            const desc = `Processo Chefe ${Date.now()}`;\n            await criarProcesso(page, {"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 219,
    "length": 1,
    "text": "// Capturar ID para cleanup",
    "context": "                expandir: ['SECRETARIA_1']\n            });\n\n            // Capturar ID para cleanup\n            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 224,
    "length": 1,
    "text": "// Tela de edi√ß√£o de processo",
    "context": "            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);\n\n            // Tela de edi√ß√£o de processo\n            await capturarTela(page, '03-processo', '01-processo-edicao');\n\n            // Modal de iniciar processo"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 227,
    "length": 1,
    "text": "// Modal de iniciar processo",
    "context": "            // Tela de edi√ß√£o de processo\n            await capturarTela(page, '03-processo', '01-processo-edicao');\n\n            // Modal de iniciar processo\n            await page.getByTestId('btn-processo-iniciar').click();\n            await page.waitForTimeout(300);\n            await capturarTela(page, '03-processo', '02-modal-iniciar-processo');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 234,
    "length": 1,
    "text": "// Acessar detalhes do processo iniciado",
    "context": "            await page.getByTestId('btn-iniciar-processo-confirmar').click();\n            await expect(page).toHaveURL(/\\/painel/);\n\n            // Acessar detalhes do processo iniciado\n            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n            await capturarTela(page, '03-processo', '03-detalhes-processo-iniciado', {fullPage: true});"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 239,
    "length": 1,
    "text": "// Modal de finalizar processo",
    "context": "            await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n            await capturarTela(page, '03-processo', '03-detalhes-processo-iniciado', {fullPage: true});\n\n            // Modal de finalizar processo\n            await page.getByTestId('btn-processo-finalizar').click();\n            await page.waitForTimeout(300);\n            await capturarTela(page, '03-processo', '04-modal-finalizar-processo');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 253,
    "length": 1,
    "text": "// Capturar estado inicial com bot√µes desativados (formul√°rio vazio)",
    "context": "            await page.getByTestId('btn-painel-criar-processo').click();\n            await expect(page).toHaveURL(/\\/processo\\/cadastro/);\n\n            // Capturar estado inicial com bot√µes desativados (formul√°rio vazio)\n            await page.waitForTimeout(300);\n            await capturarTela(page, '03-processo', '10-botoes-desativados-form-vazio');\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 257,
    "length": 1,
    "text": "// Preencher apenas descri√ß√£o (bot√µes ainda desativados)",
    "context": "            await page.waitForTimeout(300);\n            await capturarTela(page, '03-processo', '10-botoes-desativados-form-vazio');\n\n            // Preencher apenas descri√ß√£o (bot√µes ainda desativados)\n            await page.getByTestId('inp-processo-descricao').fill('Teste Valida√ß√£o');\n            await page.waitForTimeout(300);\n            await capturarTela(page, '03-processo', '11-botoes-desativados-falta-data-unidade');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 262,
    "length": 1,
    "text": "// Selecionar tipo de processo (necess√°rio para carregar √°rvore de unidades)",
    "context": "            await page.waitForTimeout(300);\n            await capturarTela(page, '03-processo', '11-botoes-desativados-falta-data-unidade');\n\n            // Selecionar tipo de processo (necess√°rio para carregar √°rvore de unidades)\n            await page.getByTestId('sel-processo-tipo').selectOption('MAPEAMENTO');\n\n            // Preencher data limite (bot√µes ainda desativados - falta unidade)"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 265,
    "length": 1,
    "text": "// Preencher data limite (bot√µes ainda desativados - falta unidade)",
    "context": "            // Selecionar tipo de processo (necess√°rio para carregar √°rvore de unidades)\n            await page.getByTestId('sel-processo-tipo').selectOption('MAPEAMENTO');\n\n            // Preencher data limite (bot√µes ainda desativados - falta unidade)\n            const dataLimite = new Date();\n            dataLimite.setDate(dataLimite.getDate() + 30);\n            await page.getByTestId('inp-processo-data-limite').fill(dataLimite.toISOString().split('T')[0]);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 272,
    "length": 1,
    "text": "// Expandir e selecionar unidade (agora bot√µes devem estar ativados)",
    "context": "            await page.waitForTimeout(300);\n            await capturarTela(page, '03-processo', '12-botoes-desativados-falta-unidade');\n\n            // Expandir e selecionar unidade (agora bot√µes devem estar ativados)\n            await expect(page.getByText('Carregando unidades...')).toBeHidden();\n            await page.getByTestId('btn-arvore-expand-SECRETARIA_1').click();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 287,
    "length": 1,
    "text": "// Admin cria processo",
    "context": "            const descricao = `Proc Atividades ${Date.now()}`;\n            const UNIDADE_ALVO = 'SECAO_211';\n\n            // Admin cria processo\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            await criarProcesso(page, {"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 307,
    "length": 1,
    "text": "// Logout e login como Chefe",
    "context": "            await page.getByTestId('btn-iniciar-processo-confirmar').click();\n            await expect(page).toHaveURL(/\\/painel/);\n\n            // Logout e login como Chefe\n            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.CHEFE_SECAO_211.titulo, USUARIOS.CHEFE_SECAO_211.senha);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 311,
    "length": 1,
    "text": "// Acessar subprocesso",
    "context": "            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.CHEFE_SECAO_211.titulo, USUARIOS.CHEFE_SECAO_211.senha);\n\n            // Acessar subprocesso\n            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await navegarParaSubprocesso(page, UNIDADE_ALVO);\n            await capturarTela(page, '04-subprocesso', '01-dashboard-subprocesso', {fullPage: true});"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 316,
    "length": 1,
    "text": "// Entrar em atividades",
    "context": "            await navegarParaSubprocesso(page, UNIDADE_ALVO);\n            await capturarTela(page, '04-subprocesso', '01-dashboard-subprocesso', {fullPage: true});\n\n            // Entrar em atividades\n            await navegarParaAtividades(page);\n            await capturarTela(page, '04-subprocesso', '02-cadastro-atividades-vazio', {fullPage: true});\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 320,
    "length": 1,
    "text": "// Adicionar atividade",
    "context": "            await navegarParaAtividades(page);\n            await capturarTela(page, '04-subprocesso', '02-cadastro-atividades-vazio', {fullPage: true});\n\n            // Adicionar atividade\n            const atividadeDesc = `Atividade Teste ${Date.now()}`;\n            await page.getByTestId('inp-nova-atividade').fill(atividadeDesc);\n            await capturarTela(page, '04-subprocesso', '03-cadastro-atividades-preenchendo');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 328,
    "length": 1,
    "text": "// Adicionar conhecimentos",
    "context": "            await expect(page.getByText(atividadeDesc, {exact: true})).toBeVisible();\n            await capturarTela(page, '04-subprocesso', '04-cadastro-atividades-com-uma', {fullPage: true});\n\n            // Adicionar conhecimentos\n            const card = page.locator('.atividade-card', {has: page.getByText(atividadeDesc)});\n            await card.getByTestId('inp-novo-conhecimento').fill('Java');\n            await capturarTela(page, '04-subprocesso', '05-cadastro-conhecimento-preenchendo');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 337,
    "length": 1,
    "text": "// Hover na atividade para ver a√ß√µes",
    "context": "            await adicionarConhecimento(page, atividadeDesc, 'Oracle');\n            await capturarTela(page, '04-subprocesso', '06-cadastro-atividade-completa', {fullPage: true});\n\n            // Hover na atividade para ver a√ß√µes\n            await card.locator('.atividade-hover-row').hover();\n            await page.waitForTimeout(300);\n            await capturarTela(page, '04-subprocesso', '07-cadastro-atividade-hover');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 342,
    "length": 1,
    "text": "// Tentar disponibilizar sem data",
    "context": "            await page.waitForTimeout(300);\n            await capturarTela(page, '04-subprocesso', '07-cadastro-atividade-hover');\n\n            // Tentar disponibilizar sem data\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(300);\n            await capturarTela(page, '04-subprocesso', '08-modal-disponibilizar-atividades');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 384,
    "length": 1,
    "text": "// Capturar tela inicial vazia com label \"Conhecimentos *\"",
    "context": "            await navegarParaSubprocesso(page, UNIDADE_ALVO);\n            await navegarParaAtividades(page);\n\n            // Capturar tela inicial vazia com label \"Conhecimentos *\"\n            await capturarTela(page, '04-subprocesso', '20-cadastro-vazio-com-label-obrigatorio', {fullPage: true});\n\n            // Adicionar primeira atividade SEM conhecimento"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 387,
    "length": 1,
    "text": "// Adicionar primeira atividade SEM conhecimento",
    "context": "            // Capturar tela inicial vazia com label \"Conhecimentos *\"\n            await capturarTela(page, '04-subprocesso', '20-cadastro-vazio-com-label-obrigatorio', {fullPage: true});\n\n            // Adicionar primeira atividade SEM conhecimento\n            const atividade1 = `Atividade Sem Conhecimento 1 ${Date.now()}`;\n            await adicionarAtividade(page, atividade1);\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 393,
    "length": 1,
    "text": "// Adicionar segunda atividade SEM conhecimento",
    "context": "            await page.waitForTimeout(300);\n            await capturarTela(page, '04-subprocesso', '21-atividade-sem-conhecimento', {fullPage: true});\n\n            // Adicionar segunda atividade SEM conhecimento\n            const atividade2 = `Atividade Sem Conhecimento 2 ${Date.now()}`;\n            await adicionarAtividade(page, atividade2);\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 398,
    "length": 1,
    "text": "// Adicionar terceira atividade COM conhecimento (para contraste)",
    "context": "            await adicionarAtividade(page, atividade2);\n            await page.waitForTimeout(300);\n\n            // Adicionar terceira atividade COM conhecimento (para contraste)\n            const atividade3 = `Atividade Com Conhecimento ${Date.now()}`;\n            await adicionarAtividade(page, atividade3);\n            await adicionarConhecimento(page, atividade3, 'Java');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 405,
    "length": 1,
    "text": "// Tentar disponibilizar - deve mostrar valida√ß√£o inline",
    "context": "            await page.waitForTimeout(300);\n            await capturarTela(page, '04-subprocesso', '22-mix-atividades-com-sem-conhecimento', {fullPage: true});\n\n            // Tentar disponibilizar - deve mostrar valida√ß√£o inline\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500); // Aguardar scroll autom√°tico\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 409,
    "length": 1,
    "text": "// Capturar primeira atividade com erro inline (scroll autom√°tico j√° levou at√© ela)",
    "context": "            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500); // Aguardar scroll autom√°tico\n\n            // Capturar primeira atividade com erro inline (scroll autom√°tico j√° levou at√© ela)\n            await capturarTela(page, '04-subprocesso', '23-validacao-inline-primeira-atividade', {fullPage: true});\n\n            // Scroll para segunda atividade com erro"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 412,
    "length": 1,
    "text": "// Scroll para segunda atividade com erro",
    "context": "            // Capturar primeira atividade com erro inline (scroll autom√°tico j√° levou at√© ela)\n            await capturarTela(page, '04-subprocesso', '23-validacao-inline-primeira-atividade', {fullPage: true});\n\n            // Scroll para segunda atividade com erro\n            const card2 = page.locator('.atividade-card', {has: page.getByText(atividade2)});\n            await card2.scrollIntoViewIfNeeded();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 418,
    "length": 1,
    "text": "// Capturar zoom na mensagem de erro inline",
    "context": "            await page.waitForTimeout(300);\n            await capturarTela(page, '04-subprocesso', '24-validacao-inline-segunda-atividade');\n\n            // Capturar zoom na mensagem de erro inline\n            const primeiroCard = page.locator('.atividade-card', {has: page.getByText(atividade1)});\n            await primeiroCard.scrollIntoViewIfNeeded();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 423,
    "length": 1,
    "text": "// Capturar apenas o card com erro para detalhe",
    "context": "            await primeiroCard.scrollIntoViewIfNeeded();\n            await page.waitForTimeout(300);\n\n            // Capturar apenas o card com erro para detalhe\n            await primeiroCard.screenshot({\n                path: path.join(SCREENSHOTS_DIR, '04-subprocesso--25-detalhe-card-com-erro.png')\n            });"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 428,
    "length": 1,
    "text": "// Corrigir primeira atividade adicionando conhecimento",
    "context": "                path: path.join(SCREENSHOTS_DIR, '04-subprocesso--25-detalhe-card-com-erro.png')\n            });\n\n            // Corrigir primeira atividade adicionando conhecimento\n            await adicionarConhecimento(page, atividade1, 'Python');\n            await page.waitForTimeout(500);\n            await capturarTela(page, '04-subprocesso', '26-erro-desaparece-apos-correcao', {fullPage: true});"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 433,
    "length": 1,
    "text": "// Tentar disponibilizar novamente - ainda deve ter erro na atividade 2",
    "context": "            await page.waitForTimeout(500);\n            await capturarTela(page, '04-subprocesso', '26-erro-desaparece-apos-correcao', {fullPage: true});\n\n            // Tentar disponibilizar novamente - ainda deve ter erro na atividade 2\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500);\n            await capturarTela(page, '04-subprocesso', '27-validacao-apenas-atividade-restante');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 438,
    "length": 1,
    "text": "// Corrigir segunda atividade",
    "context": "            await page.waitForTimeout(500);\n            await capturarTela(page, '04-subprocesso', '27-validacao-apenas-atividade-restante');\n\n            // Corrigir segunda atividade\n            await adicionarConhecimento(page, atividade2, 'JavaScript');\n            await page.waitForTimeout(500);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 442,
    "length": 1,
    "text": "// Tentar disponibilizar - agora deve funcionar",
    "context": "            await adicionarConhecimento(page, atividade2, 'JavaScript');\n            await page.waitForTimeout(500);\n\n            // Tentar disponibilizar - agora deve funcionar\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 446,
    "length": 1,
    "text": "// Modal de confirma√ß√£o deve aparecer",
    "context": "            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500);\n\n            // Modal de confirma√ß√£o deve aparecer\n            const modalConfirmacao = page.locator('.modal-content').filter({hasText: 'Disponibiliza√ß√£o do cadastro'});\n\n            // Garantir que a modal est√° vis√≠vel antes de capturar"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 449,
    "length": 1,
    "text": "// Garantir que a modal est√° vis√≠vel antes de capturar",
    "context": "            // Modal de confirma√ß√£o deve aparecer\n            const modalConfirmacao = page.locator('.modal-content').filter({hasText: 'Disponibiliza√ß√£o do cadastro'});\n\n            // Garantir que a modal est√° vis√≠vel antes de capturar\n            await expect(modalConfirmacao).toBeVisible();\n            await capturarTela(page, '04-subprocesso', '28-modal-confirmacao-disponibilizacao');\n        });"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 470,
    "length": 1,
    "text": "// Setup: criar processo e disponibilizar atividades",
    "context": "            const descricao = `Proc Mapa ${Date.now()}`;\n            const UNIDADE_ALVO = 'SECAO_121';\n\n            // Setup: criar processo e disponibilizar atividades\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            await criarProcesso(page, {"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 495,
    "length": 1,
    "text": "// Adicionar atividades",
    "context": "            await acessarSubprocessoChefeDireto(page, descricao, 'SECAO_121');\n            await navegarParaAtividades(page);\n\n            // Adicionar atividades\n            await adicionarAtividade(page, 'Desenvolvimento Web');\n            await adicionarConhecimento(page, 'Desenvolvimento Web', 'Vue.js');\n            await adicionarConhecimento(page, 'Desenvolvimento Web', 'TypeScript');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 504,
    "length": 1,
    "text": "// Disponibilizar (como chefe)",
    "context": "            await adicionarConhecimento(page, 'Desenvolvimento Backend', 'Java');\n            await adicionarConhecimento(page, 'Desenvolvimento Backend', 'Spring Boot');\n\n            // Disponibilizar (como chefe)\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n            await page.waitForTimeout(500);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 509,
    "length": 1,
    "text": "// 1. GESTOR COORD_12 - Primeiro Aceite",
    "context": "            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n            await page.waitForTimeout(500);\n\n            // 1. GESTOR COORD_12 - Primeiro Aceite\n            await page.getByTestId('btn-logout').click({force: true});\n            await login(page, USUARIOS.GESTOR_COORD_12.titulo, USUARIOS.GESTOR_COORD_12.senha);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 521,
    "length": 1,
    "text": "// 2. GESTOR SECRETARIA_1 - Segundo Aceite",
    "context": "            await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n            await expect(page.getByText(/Cadastro aceito/i).first()).toBeVisible();\n\n            // 2. GESTOR SECRETARIA_1 - Segundo Aceite\n            await page.getByTestId('btn-logout').click({force: true});\n            await loginComPerfil(page, USUARIOS.GESTOR_SECRETARIA_1.titulo, USUARIOS.GESTOR_SECRETARIA_1.senha, USUARIOS.GESTOR_SECRETARIA_1.perfil);\n            await acessarSubprocessoGestor(page, descricao, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 532,
    "length": 1,
    "text": "// 3. ADMIN - Homologa√ß√£o Final",
    "context": "            await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n            await expect(page.getByText(/Cadastro aceito/i).first()).toBeVisible();\n\n            // 3. ADMIN - Homologa√ß√£o Final\n            await page.getByTestId('btn-logout').click({force: true});\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 536,
    "length": 1,
    "text": "// Navegar para o subprocesso (admin v√™ tabela de unidades)",
    "context": "            await page.getByTestId('btn-logout').click({force: true});\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Navegar para o subprocesso (admin v√™ tabela de unidades)\n            await acessarSubprocessoAdmin(page, descricao, UNIDADE_ALVO);\n\n            // Entrar no cadastro de atividades (visualiza√ß√£o)"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 539,
    "length": 1,
    "text": "// Entrar no cadastro de atividades (visualiza√ß√£o)",
    "context": "            // Navegar para o subprocesso (admin v√™ tabela de unidades)\n            await acessarSubprocessoAdmin(page, descricao, UNIDADE_ALVO);\n\n            // Entrar no cadastro de atividades (visualiza√ß√£o)\n            await navegarParaAtividadesVisualizacao(page);\n\n            // Homologar cadastro"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 542,
    "length": 1,
    "text": "// Homologar cadastro",
    "context": "            // Entrar no cadastro de atividades (visualiza√ß√£o)\n            await navegarParaAtividadesVisualizacao(page);\n\n            // Homologar cadastro\n            await page.getByTestId('btn-acao-analisar-principal').click();\n            await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n            await page.waitForTimeout(100);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 547,
    "length": 2,
    "text": "// Agora o Mapa deve estar habilitado para edi√ß√£o pelo Admin\n// Navegar para mapa",
    "context": "            await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n            await page.waitForTimeout(100);\n\n            // Agora o Mapa deve estar habilitado para edi√ß√£o pelo Admin\n            // Navegar para mapa\n            await navegarParaMapa(page);\n            await capturarTela(page, '05-mapa', '01-mapa-vazio', {fullPage: true});\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 552,
    "length": 1,
    "text": "// Criar compet√™ncia",
    "context": "            await navegarParaMapa(page);\n            await capturarTela(page, '05-mapa', '01-mapa-vazio', {fullPage: true});\n\n            // Criar compet√™ncia\n            await abrirModalCriarCompetencia(page);\n            await page.waitForTimeout(100);\n            await capturarTela(page, '05-mapa', '02-modal-criar-competencia');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 561,
    "length": 1,
    "text": "// Selecionar atividades",
    "context": "            await page.getByTestId('inp-criar-competencia-descricao').fill(competenciaDesc);\n            await capturarTela(page, '05-mapa', '03-modal-criar-competencia-preenchida');\n\n            // Selecionar atividades\n            const modal = page.getByTestId('mdl-criar-competencia');\n            await modal.locator('label').filter({hasText: 'Desenvolvimento Web'}).click();\n            await modal.locator('label').filter({hasText: 'Desenvolvimento Backend'}).click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 572,
    "length": 1,
    "text": "// Hover na compet√™ncia",
    "context": "            await page.waitForTimeout(100);\n            await capturarTela(page, '05-mapa', '05-mapa-com-competencia', {fullPage: true});\n\n            // Hover na compet√™ncia\n            const card = page.locator('.competencia-card', {has: page.getByText(competenciaDesc)});\n            await card.hover();\n            await page.waitForTimeout(100);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 578,
    "length": 1,
    "text": "// Disponibilizar mapa",
    "context": "            await page.waitForTimeout(100);\n            await capturarTela(page, '05-mapa', '06-mapa-competencia-hover');\n\n            // Disponibilizar mapa\n            await page.getByTestId('btn-cad-mapa-disponibilizar').click();\n            await page.waitForTimeout(100);\n            await capturarTela(page, '05-mapa', '07-modal-disponibilizar-mapa');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 600,
    "length": 1,
    "text": "// Menu principal",
    "context": "        test('Captura elementos de navega√ß√£o', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Menu principal\n            await capturarTela(page, '06-navegacao', '01-menu-principal');\n\n            // Configura√ß√µes (se admin)"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 603,
    "length": 1,
    "text": "// Configura√ß√µes (se admin)",
    "context": "            // Menu principal\n            await capturarTela(page, '06-navegacao', '01-menu-principal');\n\n            // Configura√ß√µes (se admin)\n            await page.getByTestId('btn-configuracoes').click();\n            await page.waitForTimeout(300);\n            await capturarTela(page, '06-navegacao', '02-menu-configuracoes');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 609,
    "length": 1,
    "text": "// Se√ß√£o Unidades (para ADMIN)",
    "context": "            await capturarTela(page, '06-navegacao', '02-menu-configuracoes');\n            await page.goto('/painel');\n\n            // Se√ß√£o Unidades (para ADMIN)\n            await page.getByText('Unidades').first().click();\n            await page.waitForTimeout(100);\n            await capturarTela(page, '06-navegacao', '03-unidades', {fullPage: true});"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 614,
    "length": 1,
    "text": "// Se√ß√£o Relat√≥rios",
    "context": "            await page.waitForTimeout(100);\n            await capturarTela(page, '06-navegacao', '03-unidades', {fullPage: true});\n\n            // Se√ß√£o Relat√≥rios\n            await page.getByText('Relat√≥rios').click();\n            await page.waitForTimeout(100);\n            await capturarTela(page, '06-navegacao', '04-relatorios', {fullPage: true});"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 619,
    "length": 1,
    "text": "// Se√ß√£o Hist√≥rico",
    "context": "            await page.waitForTimeout(100);\n            await capturarTela(page, '06-navegacao', '04-relatorios', {fullPage: true});\n\n            // Se√ß√£o Hist√≥rico\n            await page.getByText('Hist√≥rico').click();\n            await page.waitForTimeout(100);\n            await capturarTela(page, '06-navegacao', '05-historico', {fullPage: true});"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 625,
    "length": 1,
    "text": "// Rodap√©",
    "context": "            await capturarTela(page, '06-navegacao', '05-historico', {fullPage: true});\n            await capturarComponente(page.getByRole('navigation').first(), '06-navegacao', '05a-barra-lateral');\n\n            // Rodap√©\n            await page.evaluate(() => window.scrollTo(0, document.body.scrollHeight));\n            await page.waitForTimeout(100);\n            await capturarTela(page, '06-navegacao', '06-rodape');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 636,
    "length": 1,
    "text": "// Processo CRIADO",
    "context": "        test('Captura diferentes estados de processo', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Processo CRIADO\n            const processosCriado = `Proc CRIADO ${Date.now()}`;\n            await criarProcesso(page, {\n                descricao: processosCriado,"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 654,
    "length": 1,
    "text": "// Processo EM_ANDAMENTO",
    "context": "\n            await capturarTela(page, '07-estados', '01-processo-criado');\n\n            // Processo EM_ANDAMENTO\n            const processosAndamento = `Proc ANDAMENTO ${Date.now()}`;\n            await criarProcesso(page, {\n                descricao: processosAndamento,"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 675,
    "length": 1,
    "text": "// Desktop padr√£o (1920x1080)",
    "context": "        test('Captura em diferentes resolu√ß√µes', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Desktop padr√£o (1920x1080)\n            await page.setViewportSize({width: 1920, height: 1080});\n            await capturarTela(page, '08-responsividade', '01-desktop-1920x1080', {fullPage: true});\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 679,
    "length": 1,
    "text": "// Desktop m√©dio (1366x768)",
    "context": "            await page.setViewportSize({width: 1920, height: 1080});\n            await capturarTela(page, '08-responsividade', '01-desktop-1920x1080', {fullPage: true});\n\n            // Desktop m√©dio (1366x768)\n            await page.setViewportSize({width: 1366, height: 768});\n            await capturarTela(page, '08-responsividade', '02-desktop-1366x768', {fullPage: true});\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 683,
    "length": 1,
    "text": "// Tablet (768x1024)",
    "context": "            await page.setViewportSize({width: 1366, height: 768});\n            await capturarTela(page, '08-responsividade', '02-desktop-1366x768', {fullPage: true});\n\n            // Tablet (768x1024)\n            await page.setViewportSize({width: 768, height: 1024});\n            await capturarTela(page, '08-responsividade', '03-tablet-768x1024', {fullPage: true});\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 687,
    "length": 1,
    "text": "// Mobile (375x667)",
    "context": "            await page.setViewportSize({width: 768, height: 1024});\n            await capturarTela(page, '08-responsividade', '03-tablet-768x1024', {fullPage: true});\n\n            // Mobile (375x667)\n            await page.setViewportSize({width: 375, height: 667});\n            await capturarTela(page, '08-responsividade', '04-mobile-375x667', {fullPage: true});\n        });"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 693,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 09 - OPERA√á√ïES EM BLOCO (CDUs 22-26)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 09 - OPERA√á√ïES EM BLOCO (CDUs 22-26)\n    // ========================================================================\n    test.describe('09 - Opera√ß√µes em Bloco', () => {\n        test('Captura fluxo de aceitar cadastros em bloco', async ({page}) => {\n            // Prepara cen√°rio: criar processo com unidades subordinadas e disponibilizar cadastros"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 698,
    "length": 1,
    "text": "// Prepara cen√°rio: criar processo com unidades subordinadas e disponibilizar cadastros",
    "context": "    // ========================================================================\n    test.describe('09 - Opera√ß√µes em Bloco', () => {\n        test('Captura fluxo de aceitar cadastros em bloco', async ({page}) => {\n            // Prepara cen√°rio: criar processo com unidades subordinadas e disponibilizar cadastros\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            const descricao = `Processo Bloco ${Date.now()}`;"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 702,
    "length": 2,
    "text": "// Criar com m√∫ltiplas unidades para que GESTOR veja tela de \"Unidades participantes\"\n// COORD_11 tem SECAO_111, SECAO_112, SECAO_113 e √© gerido por GESTOR_COORD",
    "context": "            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            const descricao = `Processo Bloco ${Date.now()}`;\n            // Criar com m√∫ltiplas unidades para que GESTOR veja tela de \"Unidades participantes\"\n            // COORD_11 tem SECAO_111, SECAO_112, SECAO_113 e √© gerido por GESTOR_COORD\n            await criarProcesso(page, {\n                descricao,\n                tipo: 'MAPEAMENTO',"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 713,
    "length": 1,
    "text": "// Login como Chefe da SECAO_111 para disponibilizar cadastro",
    "context": "                iniciar: true\n            });\n\n            // Login como Chefe da SECAO_111 para disponibilizar cadastro\n            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.CHEFE_SECAO_111.titulo, USUARIOS.CHEFE_SECAO_111.senha);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 721,
    "length": 1,
    "text": "// Capturar ID para cleanup (ap√≥s navegar para o subprocesso)",
    "context": "            await navegarParaSubprocesso(page, 'SECAO_111');\n            await expect(page).toHaveURL(/processo\\/\\d+/);\n\n            // Capturar ID para cleanup (ap√≥s navegar para o subprocesso)\n            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);\n            await navegarParaAtividades(page);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 732,
    "length": 1,
    "text": "// Login como Gestor da COORD_11 para ver bot√£o de aceitar em bloco",
    "context": "            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n            await page.waitForTimeout(500);\n\n            // Login como Gestor da COORD_11 para ver bot√£o de aceitar em bloco\n            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.GESTOR_COORD.titulo, USUARIOS.GESTOR_COORD.senha);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 740,
    "length": 1,
    "text": "// Capturar bot√£o de aceitar em bloco (se vis√≠vel)",
    "context": "            await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n            await capturarTela(page, '09-operacoes-bloco', '01-detalhes-processo-gestor', {fullPage: true});\n\n            // Capturar bot√£o de aceitar em bloco (se vis√≠vel)\n            const btnAceitarBloco = page.getByRole('button', {name: /Aceitar.*Bloco/i});\n            if (await btnAceitarBloco.isVisible().catch(() => false)) {\n                await btnAceitarBloco.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 749,
    "length": 1,
    "text": "// Login como Admin para homologar em bloco",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // Login como Admin para homologar em bloco\n            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 756,
    "length": 1,
    "text": "// Capturar bot√£o de homologar cadastro em bloco (CDU-23)",
    "context": "            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n\n            // Capturar bot√£o de homologar cadastro em bloco (CDU-23)\n            const btnHomologarBloco = page.getByRole('button', {name: /Homologar.*Bloco/i});\n            if (await btnHomologarBloco.isVisible().catch(() => false)) {\n                await btnHomologarBloco.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 765,
    "length": 1,
    "text": "// Capturar bot√£o de disponibilizar mapas em bloco (CDU-24)",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // Capturar bot√£o de disponibilizar mapas em bloco (CDU-24)\n            const btnDisponibilizarMapaBloco = page.getByRole('button', {name: /Disponibilizar.*mapa.*Bloco/i});\n            if (await btnDisponibilizarMapaBloco.isVisible().catch(() => false)) {\n                await btnDisponibilizarMapaBloco.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 774,
    "length": 1,
    "text": "// Capturar bot√µes de aceitar/homologar mapa em bloco (CDU-25 e CDU-26 - se vis√≠veis)",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // Capturar bot√µes de aceitar/homologar mapa em bloco (CDU-25 e CDU-26 - se vis√≠veis)\n            const btnAceitarMapaBloco = page.getByRole('button', {name: /Aceitar.*mapa.*Bloco/i});\n            if (await btnAceitarMapaBloco.isVisible().catch(() => false)) {\n                await btnAceitarMapaBloco.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 793,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 10 - GEST√ÉO DE SUBPROCESSOS (CDUs 27, 32-34)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 10 - GEST√ÉO DE SUBPROCESSOS (CDUs 27, 32-34)\n    // ========================================================================\n    test.describe('10 - Gest√£o de Subprocessos', () => {\n        test('Captura modais de gest√£o de subprocesso', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 810,
    "length": 1,
    "text": "// Navegar para a p√°gina de detalhes do processo (estamos em /painel ap√≥s criar)",
    "context": "                iniciar: true\n            });\n\n            // Navegar para a p√°gina de detalhes do processo (estamos em /painel ap√≥s criar)\n            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 814,
    "length": 1,
    "text": "// Registrar para cleanup",
    "context": "            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n\n            // Registrar para cleanup\n            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);\n"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 818,
    "length": 1,
    "text": "// Acessar subprocesso",
    "context": "            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);\n\n            // Acessar subprocesso\n            await page.getByRole('row', {name: /SECAO_121/i}).click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+\\/SECAO_121/);\n            await capturarTela(page, '10-gestao-subprocessos', '01-detalhes-subprocesso-admin', {fullPage: true});"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 823,
    "length": 1,
    "text": "// Modal de alterar data limite (CDU-27)",
    "context": "            await expect(page).toHaveURL(/\\/processo\\/\\d+\\/SECAO_121/);\n            await capturarTela(page, '10-gestao-subprocessos', '01-detalhes-subprocesso-admin', {fullPage: true});\n\n            // Modal de alterar data limite (CDU-27)\n            const btnAlterarData = page.getByRole('button', {name: /Alterar.*data.*limite/i});\n            if (await btnAlterarData.isVisible().catch(() => false)) {\n                await btnAlterarData.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 832,
    "length": 1,
    "text": "// Modal de reabrir cadastro (CDU-32)",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // Modal de reabrir cadastro (CDU-32)\n            const btnReabrirCadastro = page.getByRole('button', {name: /Reabrir.*cadastro/i});\n            if (await btnReabrirCadastro.isVisible().catch(() => false)) {\n                await btnReabrirCadastro.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 841,
    "length": 1,
    "text": "// CDU-34: Bot√£o de enviar lembrete (a√ß√£o direta, sem modal)",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // CDU-34: Bot√£o de enviar lembrete (a√ß√£o direta, sem modal)\n            const btnEnviarLembrete = page.getByRole('button', {name: /Enviar.*lembrete/i});\n            if (await btnEnviarLembrete.isVisible().catch(() => false)) {\n                // Apenas capturar o bot√£o vis√≠vel, n√£o clicar pois executa a√ß√£o direta"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 844,
    "length": 1,
    "text": "// Apenas capturar o bot√£o vis√≠vel, n√£o clicar pois executa a√ß√£o direta",
    "context": "            // CDU-34: Bot√£o de enviar lembrete (a√ß√£o direta, sem modal)\n            const btnEnviarLembrete = page.getByRole('button', {name: /Enviar.*lembrete/i});\n            if (await btnEnviarLembrete.isVisible().catch(() => false)) {\n                // Apenas capturar o bot√£o vis√≠vel, n√£o clicar pois executa a√ß√£o direta\n                await capturarTela(page, '10-gestao-subprocessos', '04-botao-enviar-lembrete');\n            }\n        });"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 850,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 11 - GEST√ÉO DE UNIDADES E ATRIBUI√á√ïES (CDU-28)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 11 - GEST√ÉO DE UNIDADES E ATRIBUI√á√ïES (CDU-28)\n    // ========================================================================\n    test.describe('11 - Gest√£o de Unidades', () => {\n        test('Captura p√°gina de unidades e atribui√ß√£o tempor√°ria', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 857,
    "length": 1,
    "text": "// Navegar para p√°gina de unidades",
    "context": "        test('Captura p√°gina de unidades e atribui√ß√£o tempor√°ria', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Navegar para p√°gina de unidades\n            const linkUnidades = page.getByRole('link', {name: /Unidades/i});\n            if (await linkUnidades.isVisible().catch(() => false)) {\n                await linkUnidades.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 864,
    "length": 1,
    "text": "// Expandir √°rvore para ver unidades",
    "context": "                await page.waitForTimeout(500);\n                await capturarTela(page, '11-unidades', '01-arvore-unidades', {fullPage: true});\n\n                // Expandir √°rvore para ver unidades\n                const btnExpand = page.getByTestId('btn-arvore-expand-SECRETARIA_1');\n                if (await btnExpand.isVisible().catch(() => false)) {\n                    await btnExpand.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 872,
    "length": 1,
    "text": "// Clicar em uma unidade para ver detalhes",
    "context": "                    await capturarTela(page, '11-unidades', '02-arvore-unidades-expandida', {fullPage: true});\n                }\n\n                // Clicar em uma unidade para ver detalhes\n                const unidade = page.getByText('SECAO_121').first();\n                if (await unidade.isVisible().catch(() => false)) {\n                    await unidade.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 879,
    "length": 1,
    "text": "// Modal de criar atribui√ß√£o tempor√°ria (CDU-28)",
    "context": "                    await page.waitForTimeout(500);\n                    await capturarTela(page, '11-unidades', '03-detalhes-unidade', {fullPage: true});\n\n                    // Modal de criar atribui√ß√£o tempor√°ria (CDU-28)\n                    const btnCriarAtribuicao = page.getByRole('button', {name: /Criar atribui√ß√£o|Nova atribui√ß√£o/i});\n                    if (await btnCriarAtribuicao.isVisible().catch(() => false)) {\n                        await btnCriarAtribuicao.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 892,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 12 - HIST√ìRICO DE PROCESSOS (CDU-29)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 12 - HIST√ìRICO DE PROCESSOS (CDU-29)\n    // ========================================================================\n    test.describe('12 - Hist√≥rico', () => {\n        test('Captura se√ß√£o de hist√≥rico', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 899,
    "length": 1,
    "text": "// Acessar se√ß√£o de hist√≥rico",
    "context": "        test('Captura se√ß√£o de hist√≥rico', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Acessar se√ß√£o de hist√≥rico\n            const linkHistorico = page.getByRole('link', {name: /Hist√≥rico/i});\n            if (await linkHistorico.isVisible().catch(() => false)) {\n                await linkHistorico.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 906,
    "length": 1,
    "text": "// Tabela de processos finalizados",
    "context": "                await page.waitForTimeout(500);\n                await capturarTela(page, '12-historico', '01-pagina-historico', {fullPage: true});\n\n                // Tabela de processos finalizados\n                const tabela = page.locator('table');\n                if (await tabela.isVisible().catch(() => false)) {\n                    await capturarTela(page, '12-historico', '02-tabela-processos-finalizados', {fullPage: true});"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 916,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 13 - CONFIGURA√á√ïES E ADMINISTRADORES (CDUs 30-31)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 13 - CONFIGURA√á√ïES E ADMINISTRADORES (CDUs 30-31)\n    // ========================================================================\n    test.describe('13 - Configura√ß√µes', () => {\n        test('Captura p√°gina de configura√ß√µes e administradores', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 923,
    "length": 1,
    "text": "// Acessar configura√ß√µes",
    "context": "        test('Captura p√°gina de configura√ß√µes e administradores', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Acessar configura√ß√µes\n            await page.getByTestId('btn-configuracoes').click();\n            await page.waitForTimeout(500);\n            await capturarTela(page, '13-configuracoes', '01-pagina-configuracoes', {fullPage: true});"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 928,
    "length": 1,
    "text": "// Se√ß√£o de configura√ß√µes do sistema (CDU-31)",
    "context": "            await page.waitForTimeout(500);\n            await capturarTela(page, '13-configuracoes', '01-pagina-configuracoes', {fullPage: true});\n\n            // Se√ß√£o de configura√ß√µes do sistema (CDU-31)\n            const inputDiasInativacao = page.getByTestId('inp-config-dias-inativacao');\n            if (await inputDiasInativacao.isVisible().catch(() => false)) {\n                await capturarTela(page, '13-configuracoes', '02-config-sistema');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 934,
    "length": 1,
    "text": "// Se√ß√£o de administradores (CDU-30)",
    "context": "                await capturarTela(page, '13-configuracoes', '02-config-sistema');\n            }\n\n            // Se√ß√£o de administradores (CDU-30)\n            const secaoAdmins = page.getByText(/Administradores/i);\n            if (await secaoAdmins.isVisible().catch(() => false)) {\n                await secaoAdmins.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 941,
    "length": 1,
    "text": "// Bot√£o de adicionar administrador",
    "context": "                await page.waitForTimeout(300);\n                await capturarTela(page, '13-configuracoes', '03-lista-administradores', {fullPage: true});\n\n                // Bot√£o de adicionar administrador\n                const btnAdicionar = page.getByRole('button', {name: /Adicionar|Novo/i});\n                if (await btnAdicionar.isVisible().catch(() => false)) {\n                    await btnAdicionar.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 953,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 14 - RELAT√ìRIOS (CDUs 35-36)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 14 - RELAT√ìRIOS (CDUs 35-36)\n    // ========================================================================\n    test.describe('14 - Relat√≥rios', () => {\n        test('Captura p√°gina e modais de relat√≥rios', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 960,
    "length": 1,
    "text": "// Acessar relat√≥rios",
    "context": "        test('Captura p√°gina e modais de relat√≥rios', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Acessar relat√≥rios\n            const linkRelatorios = page.getByRole('link', {name: /Relat√≥rios/i});\n            if (await linkRelatorios.isVisible().catch(() => false)) {\n                await linkRelatorios.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 967,
    "length": 1,
    "text": "// Card de relat√≥rio de andamento (CDU-35)",
    "context": "                await page.waitForTimeout(500);\n                await capturarTela(page, '14-relatorios', '01-pagina-relatorios', {fullPage: true});\n\n                // Card de relat√≥rio de andamento (CDU-35)\n                const cardAndamento = page.getByTestId('card-relatorio-andamento');\n                if (await cardAndamento.isVisible().catch(() => false)) {\n                    await cardAndamento.click();"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 978,
    "length": 1,
    "text": "// Verificar filtros",
    "context": "                        await capturarComponente(modalRelatorio, '14-relatorios', '02a-modal-relatorio-andamento-detalhe');\n                    }\n\n                    // Verificar filtros\n                    const filtroTipo = page.getByTestId('sel-filtro-tipo');\n                    if (await filtroTipo.isVisible().catch(() => false)) {\n                        await capturarTela(page, '14-relatorios', '03-filtros-relatorio');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 984,
    "length": 1,
    "text": "// Verificar bot√£o de exporta√ß√£o",
    "context": "                        await capturarTela(page, '14-relatorios', '03-filtros-relatorio');\n                    }\n\n                    // Verificar bot√£o de exporta√ß√£o\n                    const btnExportar = page.getByRole('button', {name: /Exportar|PDF|CSV/i});\n                    if (await btnExportar.isVisible().catch(() => false)) {\n                        await capturarTela(page, '14-relatorios', '04-botao-exportacao');"
  },
  {
    "file": "e2e/captura-telas.spec.ts",
    "type": "line",
    "line": 995,
    "length": 1,
    "text": "// Card de relat√≥rio de mapas (CDU-36)",
    "context": "                    await page.waitForTimeout(300);\n                }\n\n                // Card de relat√≥rio de mapas (CDU-36)\n                const cardMapas = page.getByTestId('card-relatorio-mapas');\n                if (await cardMapas.isVisible().catch(() => false)) {\n                    await cardMapas.click();"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 16,
    "length": 1,
    "text": "// Usu√°rio 222222 (GESTOR_COORD_11) tem apenas um perfil",
    "context": "    });\n\n    test('Deve realizar login com sucesso (Perfil √önico)', async ({page}: { page: Page }) => {\n        // Usu√°rio 222222 (GESTOR_COORD_11) tem apenas um perfil\n        await autenticar(page, USUARIOS.GESTOR_COORD.titulo, USUARIOS.GESTOR_COORD.senha);\n\n        // Verifica que o usu√°rio est√° logado"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 19,
    "length": 1,
    "text": "// Verifica que o usu√°rio est√° logado",
    "context": "        // Usu√°rio 222222 (GESTOR_COORD_11) tem apenas um perfil\n        await autenticar(page, USUARIOS.GESTOR_COORD.titulo, USUARIOS.GESTOR_COORD.senha);\n\n        // Verifica que o usu√°rio est√° logado\n        await expect(page.getByText('GESTOR - COORD_11')).toBeVisible();\n    });\n"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Usu√°rio 111111 (ADMIN_SEDOC_E_CHEFE_SEDOC) tem m√∫ltiplos perfis",
    "context": "    });\n\n    test('Deve exibir sele√ß√£o de perfil se houver m√∫ltiplos', async ({page}: { page: Page }) => {\n        // Usu√°rio 111111 (ADMIN_SEDOC_E_CHEFE_SEDOC) tem m√∫ltiplos perfis\n        await loginComPerfil(page,\n            USUARIOS.ADMIN_2_PERFIS.titulo,\n            USUARIOS.ADMIN_2_PERFIS.senha,"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 31,
    "length": 1,
    "text": "// Verifica que o perfil selecionado est√° vis√≠vel",
    "context": "            USUARIOS.ADMIN_2_PERFIS.perfil\n        );\n\n        // Verifica que o perfil selecionado est√° vis√≠vel\n        await expect(page.getByText('ADMIN - ADMIN')).toBeVisible();\n    });\n"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 39,
    "length": 1,
    "text": "// Login como ADMIN (191919) via fixture",
    "context": "        page: Page,\n        autenticadoComoAdmin: void\n    }) => {\n        // Login como ADMIN (191919) via fixture\n\n        // Verifica Barra de Navega√ß√£o\n        await expect(page.getByRole('link', {name: 'SGC'})).toBeVisible();"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 41,
    "length": 1,
    "text": "// Verifica Barra de Navega√ß√£o",
    "context": "    }) => {\n        // Login como ADMIN (191919) via fixture\n\n        // Verifica Barra de Navega√ß√£o\n        await expect(page.getByRole('link', {name: 'SGC'})).toBeVisible();\n        await expect(page.getByText('Painel')).toBeVisible();\n        await expect(page.getByRole('link', {name: 'Unidades'})).toBeVisible();"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Login como ADMIN (191919)",
    "context": "        page: Page,\n        autenticadoComoAdmin: void\n    }) => {\n        // Login como ADMIN (191919)\n\n\n        // Verifica Informa√ß√µes do Usu√°rio"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Verifica Informa√ß√µes do Usu√°rio",
    "context": "        // Login como ADMIN (191919)\n\n\n        // Verifica Informa√ß√µes do Usu√°rio\n        await expect(page.getByText('ADMIN - ADMIN')).toBeVisible();\n\n        // Verifica √çcone de Configura√ß√µes de Admin"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 59,
    "length": 1,
    "text": "// Verifica √çcone de Configura√ß√µes de Admin",
    "context": "        // Verifica Informa√ß√µes do Usu√°rio\n        await expect(page.getByText('ADMIN - ADMIN')).toBeVisible();\n\n        // Verifica √çcone de Configura√ß√µes de Admin\n        await expect(page.getByTestId('btn-configuracoes')).toBeVisible();\n\n        // Verifica Logout"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 62,
    "length": 1,
    "text": "// Verifica Logout",
    "context": "        // Verifica √çcone de Configura√ß√µes de Admin\n        await expect(page.getByTestId('btn-configuracoes')).toBeVisible();\n\n        // Verifica Logout\n        await expect(page.getByTestId('btn-logout')).toBeVisible();\n    });\n"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Login como ADMIN (191919)",
    "context": "    });\n\n    test('Deve exibir rodap√©', async ({page, autenticadoComoAdmin}: { page: Page, autenticadoComoAdmin: void }) => {\n        // Login como ADMIN (191919)\n\n\n        // Verifica Rodap√©"
  },
  {
    "file": "e2e/cdu-01.spec.ts",
    "type": "line",
    "line": 70,
    "length": 1,
    "text": "// Verifica Rodap√©",
    "context": "        // Login como ADMIN (191919)\n\n\n        // Verifica Rodap√©\n        await expect(page.getByText('¬© SESEL/COSIS/TRE-PE')).toBeVisible();\n    });\n});"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 29,
    "length": 1,
    "text": "// O estado inicial no PainelView.vue √© 'ascending' para Descri√ß√£o",
    "context": "                const cabecalhoDescricao = page.getByTestId('tbl-processos').getByRole('columnheader', {name: 'Descri√ß√£o'});\n                await expect(cabecalhoDescricao).toHaveClass(/b-table-sortable-column/);\n\n                // O estado inicial no PainelView.vue √© 'ascending' para Descri√ß√£o\n                await expect(cabecalhoDescricao).toHaveAttribute('aria-sort', 'ascending');\n\n                await cabecalhoDescricao.click();"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// Capturar ID do processo para cleanup",
    "context": "                expandir: ['SECRETARIA_2']\n            });\n\n            // Capturar ID do processo para cleanup\n            await page.getByTestId('tbl-processos').getByText(descricaoProcesso).first().click();\n            await expect(page).toHaveURL(/processo\\/cadastro/);\n            const processoId = await extrairProcessoId(page);"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 88,
    "length": 1,
    "text": "// Capturar ID do processo para cleanup",
    "context": "                expandir: ['SECRETARIA_1']\n            });\n\n            // Capturar ID do processo para cleanup\n            await page.getByTestId('tbl-processos').getByText(descricaoProcesso).first().click();\n            await expect(page).toHaveURL(/processo\\/cadastro/);\n            const processoId = await extrairProcessoId(page);"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 95,
    "length": 1,
    "text": "// Verifica que o processo est√° vis√≠vel para ADMIN",
    "context": "            if (processoId > 0) cleanupAutomatico.registrar(processoId);\n            await page.goto('/painel');\n\n            // Verifica que o processo est√° vis√≠vel para ADMIN\n            await expect(page.getByTestId('tbl-processos').getByText(descricaoProcesso).first()).toBeVisible();\n\n            // Faz logout e login como GESTOR"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 98,
    "length": 1,
    "text": "// Faz logout e login como GESTOR",
    "context": "            // Verifica que o processo est√° vis√≠vel para ADMIN\n            await expect(page.getByTestId('tbl-processos').getByText(descricaoProcesso).first()).toBeVisible();\n\n            // Faz logout e login como GESTOR\n            await fazerLogout(page);\n            await login(page,\n                USUARIOS.GESTOR_COORD.titulo,"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// Verifica que o processo N√ÉO est√° vis√≠vel para GESTOR",
    "context": "                USUARIOS.GESTOR_COORD.senha\n            );\n\n            // Verifica que o processo N√ÉO est√° vis√≠vel para GESTOR\n            await expect(page.getByTestId('tbl-processos').getByText(descricaoProcesso)).not.toBeVisible();\n        });\n"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 130,
    "length": 2,
    "text": "// Expande a hierarquia de forma sequencial e natural: SECRETARIA_1 -> COORD_11\n// OBS: SEDOC √© oculta na √°rvore, ent√£o SECRETARIA_1 aparece na raiz",
    "context": "            dataLimite.setDate(dataLimite.getDate() + 30);\n            await page.getByTestId('inp-processo-data-limite').fill(dataLimite.toISOString().split('T')[0]);\n\n            // Expande a hierarquia de forma sequencial e natural: SECRETARIA_1 -> COORD_11\n            // OBS: SEDOC √© oculta na √°rvore, ent√£o SECRETARIA_1 aparece na raiz\n\n            // Aguarda a anima√ß√£o/renderiza√ß√£o e expande SECRETARIA_1\n            const btnSecretaria = page.getByTestId('btn-arvore-expand-SECRETARIA_1');"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 133,
    "length": 1,
    "text": "// Aguarda a anima√ß√£o/renderiza√ß√£o e expande SECRETARIA_1",
    "context": "            // Expande a hierarquia de forma sequencial e natural: SECRETARIA_1 -> COORD_11\n            // OBS: SEDOC √© oculta na √°rvore, ent√£o SECRETARIA_1 aparece na raiz\n\n            // Aguarda a anima√ß√£o/renderiza√ß√£o e expande SECRETARIA_1\n            const btnSecretaria = page.getByTestId('btn-arvore-expand-SECRETARIA_1');\n            await btnSecretaria.waitFor({state: 'visible'});\n            await btnSecretaria.click();"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 138,
    "length": 1,
    "text": "// Verifica que COORD_11 (INTERMEDIARIA) est√° HABILITADA (novo comportamento)",
    "context": "            await btnSecretaria.waitFor({state: 'visible'});\n            await btnSecretaria.click();\n\n            // Verifica que COORD_11 (INTERMEDIARIA) est√° HABILITADA (novo comportamento)\n            const checkboxIntermediaria = page.getByTestId('chk-arvore-unidade-COORD_11');\n            await expect(checkboxIntermediaria).toBeEnabled();\n            await expect(checkboxIntermediaria).not.toBeChecked();"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 143,
    "length": 1,
    "text": "// Clica em COORD_11 (INTERMEDIARIA) para selecionar suas filhas",
    "context": "            await expect(checkboxIntermediaria).toBeEnabled();\n            await expect(checkboxIntermediaria).not.toBeChecked();\n\n            // Clica em COORD_11 (INTERMEDIARIA) para selecionar suas filhas\n            await checkboxIntermediaria.click();\n\n            // Verifica que COORD_11 foi marcada (comportamento visual, embora filtrada no envio)"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 146,
    "length": 1,
    "text": "// Verifica que COORD_11 foi marcada (comportamento visual, embora filtrada no envio)",
    "context": "            // Clica em COORD_11 (INTERMEDIARIA) para selecionar suas filhas\n            await checkboxIntermediaria.click();\n\n            // Verifica que COORD_11 foi marcada (comportamento visual, embora filtrada no envio)\n            await expect(checkboxIntermediaria).toBeChecked();\n\n            // Expande COORD_11 para ver as filhas"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 149,
    "length": 1,
    "text": "// Expande COORD_11 para ver as filhas",
    "context": "            // Verifica que COORD_11 foi marcada (comportamento visual, embora filtrada no envio)\n            await expect(checkboxIntermediaria).toBeChecked();\n\n            // Expande COORD_11 para ver as filhas\n            await page.getByTestId('btn-arvore-expand-COORD_11').click();\n\n            // Verifica que as filhas OPERACIONAIS foram selecionadas automaticamente"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 152,
    "length": 1,
    "text": "// Verifica que as filhas OPERACIONAIS foram selecionadas automaticamente",
    "context": "            // Expande COORD_11 para ver as filhas\n            await page.getByTestId('btn-arvore-expand-COORD_11').click();\n\n            // Verifica que as filhas OPERACIONAIS foram selecionadas automaticamente\n            await expect(page.getByTestId('chk-arvore-unidade-SECAO_111')).toBeChecked();\n            await expect(page.getByTestId('chk-arvore-unidade-SECAO_112')).toBeChecked();\n            await expect(page.getByTestId('chk-arvore-unidade-SECAO_113')).toBeChecked();"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 157,
    "length": 1,
    "text": "// Salva o processo",
    "context": "            await expect(page.getByTestId('chk-arvore-unidade-SECAO_112')).toBeChecked();\n            await expect(page.getByTestId('chk-arvore-unidade-SECAO_113')).toBeChecked();\n\n            // Salva o processo\n            await page.getByTestId('btn-processo-salvar').click();\n\n            await expect(page).toHaveURL(/\\/painel/);"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 162,
    "length": 1,
    "text": "// Capturar ID do processo para cleanup",
    "context": "\n            await expect(page).toHaveURL(/\\/painel/);\n\n            // Capturar ID do processo para cleanup\n            await page.getByTestId('tbl-processos').getByText(descricaoProcesso).first().click();\n            await expect(page).toHaveURL(/processo\\/cadastro/);\n            const processoId = await extrairProcessoId(page);"
  },
  {
    "file": "e2e/cdu-02.spec.ts",
    "type": "line",
    "line": 169,
    "length": 1,
    "text": "// Verifica que o processo foi criado e aparece na tabela",
    "context": "            if (processoId > 0) cleanupAutomatico.registrar(processoId);\n            await page.goto('/painel');\n\n            // Verifica que o processo foi criado e aparece na tabela\n            await verificarProcessoNaTabela(page, {\n                descricao: descricaoProcesso,\n                situacao: 'Criado',"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 15,
    "length": 1,
    "text": "// Verifica que bot√µes est√£o desativados quando formul√°rio est√° vazio",
    "context": "        await page.getByTestId('btn-painel-criar-processo').click();\n        await expect(page).toHaveURL(/\\/processo\\/cadastro/);\n\n        // Verifica que bot√µes est√£o desativados quando formul√°rio est√° vazio\n        await expect(page.getByTestId('btn-processo-salvar')).toBeDisabled();\n        await expect(page.getByTestId('btn-processo-iniciar')).toBeDisabled();\n"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 19,
    "length": 1,
    "text": "// Preenche descri√ß√£o - bot√µes ainda devem estar desativados (falta data e unidade)",
    "context": "        await expect(page.getByTestId('btn-processo-salvar')).toBeDisabled();\n        await expect(page.getByTestId('btn-processo-iniciar')).toBeDisabled();\n\n        // Preenche descri√ß√£o - bot√µes ainda devem estar desativados (falta data e unidade)\n        await page.getByTestId('inp-processo-descricao').fill('Descri√ß√£o Teste');\n        await expect(page.getByTestId('btn-processo-salvar')).toBeDisabled();\n"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 23,
    "length": 1,
    "text": "// Preenche data limite - bot√µes ainda devem estar desativados (falta unidade)",
    "context": "        await page.getByTestId('inp-processo-descricao').fill('Descri√ß√£o Teste');\n        await expect(page.getByTestId('btn-processo-salvar')).toBeDisabled();\n\n        // Preenche data limite - bot√µes ainda devem estar desativados (falta unidade)\n        const dataLimite = new Date();\n        dataLimite.setDate(dataLimite.getDate() + 30);\n        await page.getByTestId('inp-processo-data-limite').fill(dataLimite.toISOString().split('T')[0]);"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 29,
    "length": 1,
    "text": "// Seleciona tipo - bot√µes ainda devem estar desativados (falta unidade)",
    "context": "        await page.getByTestId('inp-processo-data-limite').fill(dataLimite.toISOString().split('T')[0]);\n        await expect(page.getByTestId('btn-processo-salvar')).toBeDisabled();\n\n        // Seleciona tipo - bot√µes ainda devem estar desativados (falta unidade)\n        await page.getByTestId('sel-processo-tipo').selectOption('MAPEAMENTO');\n        await expect(page.getByTestId('btn-processo-salvar')).toBeDisabled();\n"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 33,
    "length": 1,
    "text": "// Seleciona unidade - agora bot√µes devem estar habilitados",
    "context": "        await page.getByTestId('sel-processo-tipo').selectOption('MAPEAMENTO');\n        await expect(page.getByTestId('btn-processo-salvar')).toBeDisabled();\n\n        // Seleciona unidade - agora bot√µes devem estar habilitados\n        await expect(page.getByText('Carregando unidades...')).toBeHidden();\n        await page.getByTestId('btn-arvore-expand-SECRETARIA_1').click();\n        await page.getByTestId('chk-arvore-unidade-ASSESSORIA_12').click();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 47,
    "length": 1,
    "text": "// Cria um processo inicial",
    "context": "        cleanupAutomatico: ReturnType<typeof useProcessoCleanup>\n    }) => {\n        const descricaoOriginal = `Processo para Edi√ß√£o - ${Date.now()}`;\n        // Cria um processo inicial\n        await criarProcesso(page, {\n            descricao: descricaoOriginal,\n            tipo: 'MAPEAMENTO',"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Capturar ID do processo para cleanup (caso o teste falhe antes de remover)",
    "context": "            expandir: ['SECRETARIA_1']\n        });\n\n        // Capturar ID do processo para cleanup (caso o teste falhe antes de remover)\n        await page.getByTestId('tbl-processos').getByText(descricaoOriginal).first().click();\n        await page.waitForURL(/\\/processo\\/cadastro\\?codProcesso=\\d+/);\n        const url = new URL(page.url());"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Verifica que os dados foram carregados",
    "context": "        const processoId = Number.parseInt(url.searchParams.get('codProcesso') || '0');\n        if (processoId > 0) cleanupAutomatico.registrar(processoId);\n\n        // Verifica que os dados foram carregados\n        await expect(page.getByTestId('inp-processo-descricao')).toHaveValue(descricaoOriginal);\n\n        // Verifica que a sele√ß√£o de Tipo est√° restrita na edi√ß√£o (a API manda op√ß√µes inativas ou readonly no backend)"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 66,
    "length": 1,
    "text": "// Verifica que a sele√ß√£o de Tipo est√° restrita na edi√ß√£o (a API manda op√ß√µes inativas ou readonly no backend)",
    "context": "        // Verifica que os dados foram carregados\n        await expect(page.getByTestId('inp-processo-descricao')).toHaveValue(descricaoOriginal);\n\n        // Verifica que a sele√ß√£o de Tipo est√° restrita na edi√ß√£o (a API manda op√ß√µes inativas ou readonly no backend)\n        const drowdownTipo = page.getByTestId('sel-processo-tipo');\n        await expect(drowdownTipo).toBeDisabled();\n"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 70,
    "length": 1,
    "text": "// Modifica o processo",
    "context": "        const drowdownTipo = page.getByTestId('sel-processo-tipo');\n        await expect(drowdownTipo).toBeDisabled();\n\n        // Modifica o processo\n        const novaDescricao = descricaoOriginal + ' (Editado)';\n        await page.getByTestId('inp-processo-descricao').fill(novaDescricao);\n        await page.getByTestId('btn-processo-salvar').click();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 75,
    "length": 1,
    "text": "// Validar mensagem \"Processo alterado.\"",
    "context": "        await page.getByTestId('inp-processo-descricao').fill(novaDescricao);\n        await page.getByTestId('btn-processo-salvar').click();\n\n        // Validar mensagem \"Processo alterado.\"\n        await expect(page.getByText(/Processo alterado/i).first()).toBeVisible();\n        await expect(page).toHaveURL(/\\/painel/);\n        await expect(page.getByText(novaDescricao)).toBeVisible();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 116,
    "length": 1,
    "text": "// Seleciona tipo para carregar a √°rvore",
    "context": "    }) => {\n        await page.getByTestId('btn-painel-criar-processo').click();\n\n        // Seleciona tipo para carregar a √°rvore\n        await page.getByTestId('sel-processo-tipo').selectOption('MAPEAMENTO');\n        await expect(page.getByText('Carregando unidades...')).toBeHidden();\n"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 128,
    "length": 1,
    "text": "// 1. Selecionar pai deve selecionar todos os filhos eleg√≠veis",
    "context": "        await expect(btnExpandCoord).toBeVisible();\n        await btnExpandCoord.click();\n\n        // 1. Selecionar pai deve selecionar todos os filhos eleg√≠veis\n        const chkCoord = page.getByTestId('chk-arvore-unidade-COORD_11');\n        await expect(chkCoord).toBeVisible();\n        await chkCoord.click();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 133,
    "length": 1,
    "text": "// Locators flex√≠veis para o input interno",
    "context": "        await expect(chkCoord).toBeVisible();\n        await chkCoord.click();\n\n        // Locators flex√≠veis para o input interno\n        const input111 = page.getByTestId('chk-arvore-unidade-SECAO_111').locator('input').or(page.getByTestId('chk-arvore-unidade-SECAO_111'));\n        const input112 = page.getByTestId('chk-arvore-unidade-SECAO_112').locator('input').or(page.getByTestId('chk-arvore-unidade-SECAO_112'));\n        const input113 = page.getByTestId('chk-arvore-unidade-SECAO_113').locator('input').or(page.getByTestId('chk-arvore-unidade-SECAO_113'));"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 142,
    "length": 1,
    "text": "// 2. Desmarcar um filho deve deixar o pai em estado indeterminado",
    "context": "        await expect(input112).toBeChecked();\n        await expect(input113).toBeChecked();\n\n        // 2. Desmarcar um filho deve deixar o pai em estado indeterminado\n        await page.getByTestId('chk-arvore-unidade-SECAO_111').click();\n        const inputCoord = chkCoord.locator('input').or(chkCoord);\n        await expect(inputCoord).toHaveJSProperty('indeterminate', true);"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 147,
    "length": 1,
    "text": "// 3. Desmarcar todos os filhos deve desmarcar o pai",
    "context": "        const inputCoord = chkCoord.locator('input').or(chkCoord);\n        await expect(inputCoord).toHaveJSProperty('indeterminate', true);\n\n        // 3. Desmarcar todos os filhos deve desmarcar o pai\n        await page.getByTestId('chk-arvore-unidade-SECAO_112').click();\n        await page.getByTestId('chk-arvore-unidade-SECAO_113').click();\n        await expect(inputCoord).not.toBeChecked();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 152,
    "length": 2,
    "text": "// 4. Teste √Årvore Regra: \"Se todas as unidades de uma sub√°rvore estiverem selecionadas, a raiz √© selecionada.\"\n// (De baixo para cima)",
    "context": "        await page.getByTestId('chk-arvore-unidade-SECAO_113').click();\n        await expect(inputCoord).not.toBeChecked();\n\n        // 4. Teste √Årvore Regra: \"Se todas as unidades de uma sub√°rvore estiverem selecionadas, a raiz √© selecionada.\"\n        // (De baixo para cima)\n        await page.getByTestId('chk-arvore-unidade-SECAO_111').click();\n        await page.getByTestId('chk-arvore-unidade-SECAO_112').click();\n        await page.getByTestId('chk-arvore-unidade-SECAO_113').click();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 157,
    "length": 1,
    "text": "// Clicou nos 3 filhos, a Coordena√ß√£o 11 que os engloba precisa estar automaticamente marcada",
    "context": "        await page.getByTestId('chk-arvore-unidade-SECAO_111').click();\n        await page.getByTestId('chk-arvore-unidade-SECAO_112').click();\n        await page.getByTestId('chk-arvore-unidade-SECAO_113').click();\n        // Clicou nos 3 filhos, a Coordena√ß√£o 11 que os engloba precisa estar automaticamente marcada\n        await expect(inputCoord).toBeChecked();\n\n        // 5. Teste Unidade Interoperacional (Raiz independente)"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 160,
    "length": 3,
    "text": "// 5. Teste Unidade Interoperacional (Raiz independente)\n// Requisito: \"Se a raiz for interoperacional, ela poder√° ser selecionada ainda que subordinadas n√£o o sejam\".\n// Limpar filhos",
    "context": "        // Clicou nos 3 filhos, a Coordena√ß√£o 11 que os engloba precisa estar automaticamente marcada\n        await expect(inputCoord).toBeChecked();\n\n        // 5. Teste Unidade Interoperacional (Raiz independente)\n        // Requisito: \"Se a raiz for interoperacional, ela poder√° ser selecionada ainda que subordinadas n√£o o sejam\".\n        // Limpar filhos\n        await page.getByTestId('chk-arvore-unidade-SECAO_111').click();\n        await page.getByTestId('chk-arvore-unidade-SECAO_112').click();\n        await page.getByTestId('chk-arvore-unidade-SECAO_113').click();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 178,
    "length": 1,
    "text": "// \"A lista de unidades deve deixar desativadas as unidades que j√° estejam participando de um processo ativo do tipo\"",
    "context": "        autenticadoComoAdmin: void,\n        cleanupAutomatico: any\n    }) => {\n        // \"A lista de unidades deve deixar desativadas as unidades que j√° estejam participando de um processo ativo do tipo\"\n        const descricaoProcessoBase = `Restrito base - ${Date.now()}`;\n\n        await criarProcesso(page, {"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 190,
    "length": 1,
    "text": "// Pegar cleanup",
    "context": "            iniciar: true\n        });\n\n        // Pegar cleanup\n        await page.getByTestId('tbl-processos').getByText(descricaoProcessoBase).first().click();\n        await page.waitForURL(/\\/processo\\/\\d+/);\n        const idProcesso = await extrairProcessoId(page);"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 197,
    "length": 1,
    "text": "// Criar um SEGUNDO PROCESSO e tentar inserir a mesma unidade na mesma Categoria (MAPEAMENTO)",
    "context": "        cleanupAutomatico.registrar(idProcesso);\n        await page.goto('/painel');\n\n        // Criar um SEGUNDO PROCESSO e tentar inserir a mesma unidade na mesma Categoria (MAPEAMENTO)\n        await page.getByTestId('btn-painel-criar-processo').click();\n        await expect(page).toHaveURL(/\\/processo\\/cadastro/);\n"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 220,
    "length": 1,
    "text": "// Seleciona tipo REVIS√ÉO",
    "context": "    }) => {\n        await page.getByTestId('btn-painel-criar-processo').click();\n\n        // Seleciona tipo REVIS√ÉO\n        await page.getByTestId('sel-processo-tipo').selectOption('REVISAO');\n        await expect(page.getByText('Carregando unidades...')).toBeHidden();\n"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 228,
    "length": 1,
    "text": "// ASSESSORIA_11 n√£o tem mapa vigente -> deve estar desabilitada",
    "context": "        await expect(btnExpandSecretaria).toBeVisible();\n        await btnExpandSecretaria.click();\n\n        // ASSESSORIA_11 n√£o tem mapa vigente -> deve estar desabilitada\n        const chkInvalida = page.getByTestId('chk-arvore-unidade-ASSESSORIA_11');\n        await expect(chkInvalida).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 232,
    "length": 1,
    "text": "// O locator do checkbox em si j√° deve suportar toBeDisabled",
    "context": "        const chkInvalida = page.getByTestId('chk-arvore-unidade-ASSESSORIA_11');\n        await expect(chkInvalida).toBeVisible();\n\n        // O locator do checkbox em si j√° deve suportar toBeDisabled\n        await expect(chkInvalida.locator('input').or(chkInvalida)).toBeDisabled();\n\n        // ASSESSORIA_12 TEM mapa vigente -> deve estar habilitada"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 235,
    "length": 1,
    "text": "// ASSESSORIA_12 TEM mapa vigente -> deve estar habilitada",
    "context": "        // O locator do checkbox em si j√° deve suportar toBeDisabled\n        await expect(chkInvalida.locator('input').or(chkInvalida)).toBeDisabled();\n\n        // ASSESSORIA_12 TEM mapa vigente -> deve estar habilitada\n        const chkValida = page.getByTestId('chk-arvore-unidade-ASSESSORIA_12');\n        await expect(chkValida).toBeVisible();\n        await expect(chkValida.locator('input').or(chkValida)).toBeEnabled();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 252,
    "length": 1,
    "text": "// 1. Cancelar cria√ß√£o",
    "context": "    }) => {\n        const descricao = `Processo Feedback - ${Date.now()}`;\n\n        // 1. Cancelar cria√ß√£o\n        await page.getByTestId('btn-painel-criar-processo').click();\n        await page.getByTestId('inp-processo-descricao').fill(descricao);\n        await page.getByRole('button', {name: 'Cancelar'}).click();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 268,
    "length": 1,
    "text": "// Mensagem de sucesso deve estar em um toast",
    "context": "            expandir: ['SECRETARIA_1']\n        });\n\n        // Mensagem de sucesso deve estar em um toast\n        await expect(page.getByText(/Processo criado/i).first()).toBeVisible();\n\n        // Capturar ID para cleanup"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 271,
    "length": 1,
    "text": "// Capturar ID para cleanup",
    "context": "        // Mensagem de sucesso deve estar em um toast\n        await expect(page.getByText(/Processo criado/i).first()).toBeVisible();\n\n        // Capturar ID para cleanup\n        await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n        await page.waitForURL(/\\/processo\\/cadastro\\?codProcesso=\\d+/);\n        const id = await extrairProcessoId(page);"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 278,
    "length": 1,
    "text": "// 3. Cancelar remo√ß√£o",
    "context": "        if (id) cleanupAutomatico.registrar(id);\n        await page.goto('/painel');\n\n        // 3. Cancelar remo√ß√£o\n        await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n        await page.getByTestId('btn-processo-remover').click();\n        await page.getByTestId('btn-modal-confirmacao-cancelar').click();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 284,
    "length": 1,
    "text": "// 4. Confirmar remo√ß√£o e validar mensagem",
    "context": "        await page.getByTestId('btn-modal-confirmacao-cancelar').click();\n        await expect(page.getByText(`Remover o processo '${descricao}'?`)).not.toBeVisible();\n\n        // 4. Confirmar remo√ß√£o e validar mensagem\n        await page.getByTestId('btn-processo-remover').click();\n        await page.getByRole('dialog').getByRole('button', {name: 'Remover'}).click();\n        await expect(page.getByText(/removido/i).first()).toBeVisible();"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 318,
    "length": 1,
    "text": "// Capturar ID para cleanup",
    "context": "        await expect(page).toHaveURL(/\\/painel/);\n        await expect(page.getByText(/Processo iniciado/i).first()).toBeVisible();\n\n        // Capturar ID para cleanup\n        await page.getByTestId('tbl-processos').getByText(descricaoAlt).first().click();\n        await page.waitForURL(/\\/processo\\/\\d+/);\n        const idAlt = await extrairProcessoId(page);"
  },
  {
    "file": "e2e/cdu-03.spec.ts",
    "type": "line",
    "line": 324,
    "length": 1,
    "text": "// Processo iniciado (Situacao 'Andamento') n√£o pode mais ser editado",
    "context": "        const idAlt = await extrairProcessoId(page);\n        if (idAlt) cleanupAutomatico.registrar(idAlt);\n\n        // Processo iniciado (Situacao 'Andamento') n√£o pode mais ser editado\n        await expect(page).toHaveURL(/\\/processo\\/\\d+$/);\n    });\n});"
  },
  {
    "file": "e2e/cdu-04.spec.ts",
    "type": "line",
    "line": 28,
    "length": 1,
    "text": "// Capturar ID para cleanup",
    "context": "            iniciar: false\n        });\n\n        // Capturar ID para cleanup\n        await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n        const processoId = await extrairProcessoId(page);\n        cleanupAutomatico.registrar(processoId);"
  },
  {
    "file": "e2e/cdu-04.spec.ts",
    "type": "line",
    "line": 33,
    "length": 1,
    "text": "// 2. Iniciar processo",
    "context": "        const processoId = await extrairProcessoId(page);\n        cleanupAutomatico.registrar(processoId);\n\n        // 2. Iniciar processo\n        await page.getByTestId('btn-processo-iniciar').click();\n\n        // Validar texto do modal"
  },
  {
    "file": "e2e/cdu-04.spec.ts",
    "type": "line",
    "line": 36,
    "length": 1,
    "text": "// Validar texto do modal",
    "context": "        // 2. Iniciar processo\n        await page.getByTestId('btn-processo-iniciar').click();\n\n        // Validar texto do modal\n        const modal = page.getByRole('dialog');\n        await expect(modal.getByText(/Ao iniciar o processo, n√£o ser√° mais poss√≠vel edit√°-lo ou remov√™-lo/i)).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-04.spec.ts",
    "type": "line",
    "line": 40,
    "length": 1,
    "text": "// 3. Cancelar e verificar que continua na mesma tela",
    "context": "        const modal = page.getByRole('dialog');\n        await expect(modal.getByText(/Ao iniciar o processo, n√£o ser√° mais poss√≠vel edit√°-lo ou remov√™-lo/i)).toBeVisible();\n\n        // 3. Cancelar e verificar que continua na mesma tela\n        await page.getByTestId('btn-iniciar-processo-cancelar').click();\n        await expect(page).toHaveURL(new RegExp(`codProcesso=${processoId}`));\n        await expect(page.getByTestId('btn-processo-iniciar')).toBeVisible();"
  },
  {
    "file": "e2e/cdu-04.spec.ts",
    "type": "line",
    "line": 45,
    "length": 1,
    "text": "// 4. Confirmar inicia√ß√£o",
    "context": "        await expect(page).toHaveURL(new RegExp(`codProcesso=${processoId}`));\n        await expect(page.getByTestId('btn-processo-iniciar')).toBeVisible();\n\n        // 4. Confirmar inicia√ß√£o\n        await page.getByTestId('btn-processo-iniciar').click();\n        await page.getByTestId('btn-iniciar-processo-confirmar').click();\n"
  },
  {
    "file": "e2e/cdu-04.spec.ts",
    "type": "line",
    "line": 60,
    "length": 1,
    "text": "// Na tela de detalhes, verificar se os subprocessos foram criados",
    "context": "        await linha.click();\n        await page.waitForURL(new RegExp(`\\\\/processo\\\\/${processoId}$`));\n\n        // Na tela de detalhes, verificar se os subprocessos foram criados\n        await verificarDetalhesProcesso(page, {\n            descricao: descricao,\n            tipo: 'Mapeamento',"
  },
  {
    "file": "e2e/cdu-04.spec.ts",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Verificar unidades na tabela de participantes",
    "context": "            situacao: 'Em andamento'\n        });\n\n        // Verificar unidades na tabela de participantes\n        await expect(page.locator('tr', {hasText: 'ASSESSORIA_11'})).toContainText('N√£o iniciado');\n        await expect(page.locator('tr', {hasText: 'ASSESSORIA_12'})).toContainText('N√£o iniciado');\n"
  },
  {
    "file": "e2e/cdu-04.spec.ts",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Secretaria 1 √© interoperacional e tamb√©m deve ter um subprocesso (conforme seed.sql)",
    "context": "        await expect(page.locator('tr', {hasText: 'ASSESSORIA_11'})).toContainText('N√£o iniciado');\n        await expect(page.locator('tr', {hasText: 'ASSESSORIA_12'})).toContainText('N√£o iniciado');\n\n        // Secretaria 1 √© interoperacional e tamb√©m deve ter um subprocesso (conforme seed.sql)\n        await expect(page.locator('tr', {hasText: 'SECRETARIA_1'})).toContainText('N√£o iniciado');\n    });\n});"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Unidade ASSESSORIA_21 (12) - Titular 777777 (Janis Joplin)",
    "context": "\n\ntest.describe.serial('CDU-05 - Iniciar processo de revisao', () => {\n    // Unidade ASSESSORIA_21 (12) - Titular 777777 (Janis Joplin)\n    const UNIDADE_ALVO = 'ASSESSORIA_21';\n    const USUARIO_CHEFE = '777777';\n    const SENHA_CHEFE = 'senha';"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 33,
    "length": 3,
    "text": "// ========================================================================\n// PASSOS DE PREPARA√á√ÉO - PROCESSO DE MAPEAMENTO\n// ========================================================================",
    "context": "    const descProcMapeamento = `Mapeamento Setup ${timestamp}`;\n    const descProcRevisao = `Revis√£o Teste ${timestamp}`;\n\n    // ========================================================================\n    // PASSOS DE PREPARA√á√ÉO - PROCESSO DE MAPEAMENTO\n    // ========================================================================\n\n    async function passo1_AdminCriaEIniciaProcessoMapeamento(page: Page, descricao: string): Promise<void> {\n        await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Valida√ß√£o: Processo foi criado e est√° na tela de cadastro",
    "context": "            expandir: ['SECRETARIA_2']\n        });\n\n        // Valida√ß√£o: Processo foi criado e est√° na tela de cadastro\n        await verificarProcessoNaTabela(page, {\n            descricao,\n            situacao: 'Criado',"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 60,
    "length": 1,
    "text": "// Iniciar processo",
    "context": "        await expect(page).toHaveURL(/\\/processo\\/cadastro/);\n        await expect(page.getByTestId('inp-processo-descricao')).toHaveValue(descricao);\n\n        // Iniciar processo\n        await page.getByTestId('btn-processo-iniciar').click();\n        await page.getByTestId('btn-iniciar-processo-confirmar').click();\n"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 64,
    "length": 1,
    "text": "// Valida√ß√£o: Processo iniciado com sucesso",
    "context": "        await page.getByTestId('btn-processo-iniciar').click();\n        await page.getByTestId('btn-iniciar-processo-confirmar').click();\n\n        // Valida√ß√£o: Processo iniciado com sucesso\n        await verificarPaginaPainel(page);\n        await verificarProcessoNaTabela(page, {\n            descricao,"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 74,
    "length": 3,
    "text": "// ========================================================================\n// TESTE PRINCIPAL\n// ========================================================================",
    "context": "    }\n\n\n    // ========================================================================\n    // TESTE PRINCIPAL\n    // ========================================================================\n\n    test('Fase 1.1: ADMIN cria e inicia processo de Mapeamento', async ({\n                                                                            page,"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 84,
    "length": 1,
    "text": "// Capturar ID do processo para cleanup",
    "context": "                                                                            cleanupAutomatico\n                                                                        }) => {\n        await passo1_AdminCriaEIniciaProcessoMapeamento(page, descProcMapeamento);\n        // Capturar ID do processo para cleanup\n        await page.goto('/painel');\n        await page.getByTestId('tbl-processos').getByText(descProcMapeamento).first().click();\n        const processoMapeamentoId = Number.parseInt(page.url().match(/\\/processo\\/(\\d+)/)?.[1] || '0');"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 97,
    "length": 1,
    "text": "// Adicionar Atividade e Conhecimento usando helpers",
    "context": "        await acessarSubprocessoChefeDireto(page, descProcMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividades(page);\n\n        // Adicionar Atividade e Conhecimento usando helpers\n        const descAtividade = `Atividade Teste ${timestamp}`;\n        await adicionarAtividade(page, descAtividade);\n        await adicionarConhecimento(page, descAtividade, 'Conhecimento Teste');"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 109,
    "length": 1,
    "text": "// Valida√ß√£o: Mensagem de sucesso e redirecionamento para o painel",
    "context": "        await navegarParaAtividades(page);\n        await disponibilizarCadastro(page);\n\n        // Valida√ß√£o: Mensagem de sucesso e redirecionamento para o painel\n        await expect(page.getByText(/Cadastro de atividades disponibilizado/i).first()).toBeVisible();\n        await verificarPaginaPainel(page);\n    });"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 115,
    "length": 1,
    "text": "// George Harrison (212121) √© Gestor da SECRETARIA_2",
    "context": "    });\n\n    test('Fase 1.3b: GESTOR da SECRETARIA_2 registra aceite', async ({page}) => {\n        // George Harrison (212121) √© Gestor da SECRETARIA_2\n        await loginComPerfil(page, '212121', 'senha', 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 172,
    "length": 1,
    "text": "// Login as Admin",
    "context": "    });\n\n    test('Fase 2: Iniciar processo de Revis√£o', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n        // Login as Admin\n\n\n        // Criar processo de REVIS√ÉO"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 175,
    "length": 1,
    "text": "// Criar processo de REVIS√ÉO",
    "context": "        // Login as Admin\n\n\n        // Criar processo de REVIS√ÉO\n        await criarProcesso(page, {\n            descricao: descProcRevisao,\n            tipo: 'REVISAO',"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 184,
    "length": 1,
    "text": "// Capturar ID do processo para cleanup",
    "context": "            expandir: ['SECRETARIA_2']\n        });\n\n        // Capturar ID do processo para cleanup\n        await page.getByTestId('tbl-processos').getByText(descProcRevisao).first().click();\n        await expect(page).toHaveURL(/\\/processo\\/cadastro/);\n        const processoRevisaoId = Number.parseInt(page.url().match(/\\/processo\\/cadastro\\/(\\d+)/)?.[1] || '0');"
  },
  {
    "file": "e2e/cdu-05.spec.ts",
    "type": "line",
    "line": 198,
    "length": 1,
    "text": "// Valida√ß√£o: Redirecionamento e situa√ß√£o do processo iniciado",
    "context": "        await expect(modal.getByText('Ao iniciar o processo, n√£o ser√° mais poss√≠vel edit√°-lo')).toBeVisible();\n        await page.getByTestId('btn-iniciar-processo-confirmar').click();\n\n        // Valida√ß√£o: Redirecionamento e situa√ß√£o do processo iniciado\n        await verificarPaginaPainel(page);\n        await verificarProcessoNaTabela(page, {\n            descricao: descProcRevisao,"
  },
  {
    "file": "e2e/cdu-06.spec.ts",
    "type": "line",
    "line": 12,
    "length": 1,
    "text": "// Criar e iniciar processo",
    "context": "        const timestamp = Date.now();\n        const descricao = `Processo CDU-06 ${timestamp}`;\n\n        // Criar e iniciar processo\n        await criarProcesso(page, {\n            descricao,\n            tipo: 'MAPEAMENTO',"
  },
  {
    "file": "e2e/cdu-06.spec.ts",
    "type": "line",
    "line": 22,
    "length": 1,
    "text": "// Navegar para detalhes do processo",
    "context": "            iniciar: true\n        });\n\n        // Navegar para detalhes do processo\n        await page.getByTestId('tbl-processos').getByRole('row', {name: descricao}).click();\n        await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n"
  },
  {
    "file": "e2e/cdu-06.spec.ts",
    "type": "line",
    "line": 26,
    "length": 1,
    "text": "// Capturar ID do processo para cleanup",
    "context": "        await page.getByTestId('tbl-processos').getByRole('row', {name: descricao}).click();\n        await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n\n        // Capturar ID do processo para cleanup\n        const processoId = Number.parseInt(page.url().match(/\\/processo\\/(\\d+)/)?.[1] || '0');\n        if (processoId > 0) cleanupAutomatico.registrar(processoId);\n"
  },
  {
    "file": "e2e/cdu-06.spec.ts",
    "type": "line",
    "line": 30,
    "length": 1,
    "text": "// Verificar detalhes do processo (usando caixa alta conforme observado em reviews)",
    "context": "        const processoId = Number.parseInt(page.url().match(/\\/processo\\/(\\d+)/)?.[1] || '0');\n        if (processoId > 0) cleanupAutomatico.registrar(processoId);\n\n        // Verificar detalhes do processo (usando caixa alta conforme observado em reviews)\n        await verificarDetalhesProcesso(page, {\n            descricao,\n            tipo: 'Mapeamento',"
  },
  {
    "file": "e2e/cdu-06.spec.ts",
    "type": "line",
    "line": 37,
    "length": 1,
    "text": "// Verificar unidade participante",
    "context": "            situacao: 'Em andamento'\n        });\n\n        // Verificar unidade participante\n        await verificarUnidadeParticipante(page, {\n            sigla: 'ASSESSORIA_12',\n            situacao: 'N√£o iniciado',"
  },
  {
    "file": "e2e/cdu-06.spec.ts",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Verificar bot√£o de finalizar (apenas ADMIN)",
    "context": "            dataLimite: '/'\n        });\n\n        // Verificar bot√£o de finalizar (apenas ADMIN)\n        await expect(page.getByTestId('btn-processo-finalizar')).toBeVisible();\n    });\n"
  },
  {
    "file": "e2e/cdu-06.spec.ts",
    "type": "line",
    "line": 68,
    "length": 1,
    "text": "// Aguardar que o processo apare√ßa no painel",
    "context": "\n        await login(page, USUARIOS.GESTOR_COORD.titulo, USUARIOS.GESTOR_COORD.senha);\n\n        // Aguardar que o processo apare√ßa no painel\n        await expect(page.getByTestId('tbl-processos').getByRole('row', {name: descricao})).toBeVisible();\n        await page.getByTestId('tbl-processos').getByRole('row', {name: descricao}).click();\n"
  },
  {
    "file": "e2e/cdu-06.spec.ts",
    "type": "line",
    "line": 74,
    "length": 1,
    "text": "// Capturar ID do processo para cleanup",
    "context": "\n        await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n\n        // Capturar ID do processo para cleanup\n        const processoId = Number.parseInt(page.url().match(/\\/processo\\/(\\d+)/)?.[1] || '0');\n        if (processoId > 0) cleanupAutomatico.registrar(processoId);\n"
  },
  {
    "file": "e2e/cdu-08.spec.ts",
    "type": "line",
    "line": 32,
    "length": 1,
    "text": "// Capturar ID para cleanup",
    "context": "                iniciar: true\n            });\n\n            // Capturar ID para cleanup\n            await page.getByTestId('tbl-processos').getByText(descricaoProcesso).first().click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n            const processoId = await extrairProcessoId(page);"
  },
  {
    "file": "e2e/cdu-08.spec.ts",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Navega para o subprocesso usando helper robusto",
    "context": "        await test.step('2. Acessar tela de Atividades', async () => {\n            await login(page, CHEFE_UNIDADE, SENHA_CHEFE);\n\n            // Navega para o subprocesso usando helper robusto\n            await acessarSubprocessoChefeDireto(page, descricaoProcesso, UNIDADE_ALVO);\n\n            // Agora navega para atividades"
  },
  {
    "file": "e2e/cdu-08.spec.ts",
    "type": "line",
    "line": 47,
    "length": 1,
    "text": "// Agora navega para atividades",
    "context": "            // Navega para o subprocesso usando helper robusto\n            await acessarSubprocessoChefeDireto(page, descricaoProcesso, UNIDADE_ALVO);\n\n            // Agora navega para atividades\n            await AtividadeHelpers.navegarParaAtividades(page);\n\n            await expect(page.getByTestId('btn-empty-state-importar')).toBeVisible();"
  },
  {
    "file": "e2e/cdu-08.spec.ts",
    "type": "line",
    "line": 62,
    "length": 1,
    "text": "// Verifica mudan√ßa de status",
    "context": "        await test.step('3. Adicionar Atividade e Conhecimento', async () => {\n            await AtividadeHelpers.adicionarAtividade(page, atividade1);\n\n            // Verifica mudan√ßa de status\n            await AtividadeHelpers.verificarSituacaoSubprocesso(page, 'Cadastro em andamento');\n\n            const conhecimento1 = `Conhecimento 1 ${timestamp}`;"
  },
  {
    "file": "e2e/cdu-08.spec.ts",
    "type": "line",
    "line": 118,
    "length": 1,
    "text": "// Navega para o subprocesso usando helper robusto",
    "context": "        await test.step('Verificar Bot√£o Impacto', async () => {\n            await login(page, CHEFE_REVISAO, SENHA_REVISAO);\n\n            // Navega para o subprocesso usando helper robusto\n            await acessarSubprocessoChefeDireto(page, descricao, UNIDADE_REVISAO);\n\n            await AtividadeHelpers.navegarParaAtividades(page);"
  },
  {
    "file": "e2e/cdu-08.spec.ts",
    "type": "line",
    "line": 123,
    "length": 1,
    "text": "// Adicionar uma atividade para garantir que o status mude para EM_ANDAMENTO e o bot√£o apare√ßa",
    "context": "\n            await AtividadeHelpers.navegarParaAtividades(page);\n\n            // Adicionar uma atividade para garantir que o status mude para EM_ANDAMENTO e o bot√£o apare√ßa\n            await AtividadeHelpers.adicionarAtividade(page, 'Atividade Trigger');\n            await AtividadeHelpers.verificarBotaoImpactoDropdown(page);\n            await AtividadeHelpers.abrirModalImpacto(page);"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 32,
    "length": 1,
    "text": "// Definir um timeout maior para este teste espec√≠fico pois ele engloba muitos passos sequenciais",
    "context": "    const UNIDADE_ALVO = 'SECAO_221';\n\n    test('Fluxo completo de revis√£o de cadastro', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n        // Definir um timeout maior para este teste espec√≠fico pois ele engloba muitos passos sequenciais\n        test.setTimeout(90000);\n\n        const timestamp = Date.now();"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 41,
    "length": 1,
    "text": "// Admin cria e inicia processo de mapeamento",
    "context": "        let processoRevisaoId: number;\n\n        await test.step('1. Prepara√ß√£o: Mapeamento completo e Revis√£o iniciada', async () => {\n            // Admin cria e inicia processo de mapeamento\n            await criarProcesso(page, {\n                descricao: descProcessoMapeamento,\n                tipo: 'MAPEAMENTO',"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 60,
    "length": 1,
    "text": "// Chefe adiciona atividades e disponibiliza cadastro",
    "context": "            await page.getByTestId('btn-iniciar-processo-confirmar').click();\n            await verificarPaginaPainel(page);\n\n            // Chefe adiciona atividades e disponibiliza cadastro\n            await login(page, USUARIOS.CHEFE_SECAO_221.titulo, USUARIOS.CHEFE_SECAO_221.senha);\n            await acessarSubprocessoChefeDireto(page, descProcessoMapeamento, UNIDADE_ALVO);\n            await navegarParaAtividades(page);"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 72,
    "length": 1,
    "text": "// Aceites intermedi√°rios para Cadastro",
    "context": "            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n            await verificarPaginaPainel(page);\n\n            // Aceites intermedi√°rios para Cadastro\n            await login(page, USUARIOS.GESTOR_COORD_22.titulo, USUARIOS.GESTOR_COORD_22.senha);\n            await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n            await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 83,
    "length": 1,
    "text": "// Admin homologa cadastro",
    "context": "            await navegarParaAtividadesVisualizacao(page);\n            await aceitarCadastroMapeamento(page, 'Aceite intermedi√°rio SECRETARIA_2');\n\n            // Admin homologa cadastro\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n            await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n            const linhaUnidade = page.getByRole('row', {name: UNIDADE_ALVO});"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// Admin adiciona compet√™ncias e disponibiliza mapa",
    "context": "            await navegarParaAtividadesVisualizacao(page);\n            await homologarCadastroMapeamento(page);\n\n            // Admin adiciona compet√™ncias e disponibiliza mapa\n            await page.goto('/painel');\n            await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n            await navegarParaSubprocesso(page, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// Chefe valida mapa",
    "context": "            await page.getByTestId('btn-disponibilizar-mapa-confirmar').click();\n            await expect(page).toHaveURL(/\\/painel/);\n\n            // Chefe valida mapa\n            await login(page, USUARIOS.CHEFE_SECAO_221.titulo, USUARIOS.CHEFE_SECAO_221.senha);\n            await acessarSubprocessoChefeDireto(page, descProcessoMapeamento, UNIDADE_ALVO);\n            await navegarParaMapa(page);"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 114,
    "length": 1,
    "text": "// Aceites intermedi√°rios para Mapa",
    "context": "            await expect(page).toHaveURL(/\\/vis-mapa/);\n            await page.goto('/painel');\n\n            // Aceites intermedi√°rios para Mapa\n            await login(page, USUARIOS.GESTOR_COORD_22.titulo, USUARIOS.GESTOR_COORD_22.senha);\n            await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n            await navegarParaMapa(page);"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 127,
    "length": 1,
    "text": "// Admin homologa mapa e finaliza processo",
    "context": "            await page.getByTestId('btn-mapa-homologar-aceite').click();\n            await page.getByTestId('btn-aceite-mapa-confirmar').click();\n\n            // Admin homologa mapa e finaliza processo\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n            await acessarSubprocessoAdmin(page, descProcessoMapeamento, UNIDADE_ALVO);\n            if (/\\/processo\\/\\d+$/.test(page.url())) {"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 143,
    "length": 1,
    "text": "// Admin cria e inicia processo de revis√£o",
    "context": "            await page.getByTestId('btn-finalizar-processo-confirmar').click();\n            await verificarPaginaPainel(page);\n\n            // Admin cria e inicia processo de revis√£o\n            await criarProcesso(page, {\n                descricao: descProcessoRevisao,\n                tipo: 'REVISAO',"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 159,
    "length": 1,
    "text": "// Chefe revisa atividades (muda situa√ß√£o para EM_ANDAMENTO)",
    "context": "            await page.getByTestId('btn-iniciar-processo-confirmar').click();\n            await verificarPaginaPainel(page);\n\n            // Chefe revisa atividades (muda situa√ß√£o para EM_ANDAMENTO)\n            await login(page, USUARIOS.CHEFE_SECAO_221.titulo, USUARIOS.CHEFE_SECAO_221.senha);\n            await acessarSubprocessoChefeDireto(page, descProcessoRevisao, UNIDADE_ALVO);\n            await navegarParaAtividades(page);"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 242,
    "length": 1,
    "text": "// Gestor devolve novamente",
    "context": "            await expect(page.getByText(/Revis√£o do cadastro de atividades disponibilizada/i).first()).toBeVisible();\n            await verificarPaginaPainel(page);\n\n            // Gestor devolve novamente\n            await login(page, USUARIOS.GESTOR_COORD_22.titulo, USUARIOS.GESTOR_COORD_22.senha);\n            await acessarSubprocessoGestor(page, descProcessoRevisao, UNIDADE_ALVO);\n            await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-10.spec.ts",
    "type": "line",
    "line": 251,
    "length": 1,
    "text": "// Chefe verifica que hist√≥rico tem apenas a √∫ltima devolu√ß√£o",
    "context": "            await page.getByTestId('btn-devolucao-cadastro-confirmar').click({force: true});\n            await verificarPaginaPainel(page);\n\n            // Chefe verifica que hist√≥rico tem apenas a √∫ltima devolu√ß√£o\n            await login(page, USUARIOS.CHEFE_SECAO_221.titulo, USUARIOS.CHEFE_SECAO_221.senha);\n            await acessarSubprocessoChefeDireto(page, descProcessoRevisao, UNIDADE_ALVO);\n            await navegarParaAtividades(page);"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 34,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO - Criar processo de mapeamento com atividades disponibilizadas\n// ========================================================================",
    "context": "\n    let processoMapeamentoId: number;\n\n    // ========================================================================\n    // PREPARA√á√ÉO - Criar processo de mapeamento com atividades disponibilizadas\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo de mapeamento', async ({\n                                                                                page,"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Selecionar o processo na tabela para obter o ID",
    "context": "            expandir: ['SECRETARIA_2', 'COORD_21']\n        });\n\n        // Selecionar o processo na tabela para obter o ID\n\n        const linhaProcesso = page.getByTestId('tbl-processos').locator('tr').filter({has: page.getByText(descProcessoMapeamento)});\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 61,
    "length": 2,
    "text": "// N√£o registrar cleanup aqui pois os testes seguintes dependem deste processo (serial)\n// O registro ser√° feito no √∫ltimo cen√°rio.",
    "context": "        await expect(page.getByTestId('inp-processo-descricao')).toHaveValue(descProcessoMapeamento);\n        await expect(page.getByText('Carregando unidades...')).toBeHidden();\n        processoMapeamentoId = await extrairProcessoId(page);\n        // N√£o registrar cleanup aqui pois os testes seguintes dependem deste processo (serial)\n        // O registro ser√° feito no √∫ltimo cen√°rio.\n\n        // Iniciar processo\n        await page.getByTestId('btn-processo-iniciar').click();"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 64,
    "length": 1,
    "text": "// Iniciar processo",
    "context": "        // N√£o registrar cleanup aqui pois os testes seguintes dependem deste processo (serial)\n        // O registro ser√° feito no √∫ltimo cen√°rio.\n\n        // Iniciar processo\n        await page.getByTestId('btn-processo-iniciar').click();\n        await page.getByTestId('btn-iniciar-processo-confirmar').click();\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 79,
    "length": 1,
    "text": "// Chefe vai direto para subprocesso",
    "context": "\n        await acessarSubprocessoChefeDireto(page, descProcessoMapeamento, UNIDADE_ALVO);\n\n        // Chefe vai direto para subprocesso\n        await verificarPaginaSubprocesso(page, UNIDADE_ALVO);\n        await navegarParaAtividades(page);\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 83,
    "length": 1,
    "text": "// Adicionar primeira atividade com dois conhecimentos",
    "context": "        await verificarPaginaSubprocesso(page, UNIDADE_ALVO);\n        await navegarParaAtividades(page);\n\n        // Adicionar primeira atividade com dois conhecimentos\n        await adicionarAtividade(page, atividadeA);\n        await adicionarConhecimento(page, atividadeA, conhecimento1);\n        await adicionarConhecimento(page, atividadeA, conhecimento2);"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 88,
    "length": 1,
    "text": "// Adicionar segunda atividade com um conhecimento",
    "context": "        await adicionarConhecimento(page, atividadeA, conhecimento1);\n        await adicionarConhecimento(page, atividadeA, conhecimento2);\n\n        // Adicionar segunda atividade com um conhecimento\n        await adicionarAtividade(page, atividadeB);\n        await adicionarConhecimento(page, atividadeB, conhecimento3);\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 92,
    "length": 1,
    "text": "// Disponibilizar cadastro",
    "context": "        await adicionarAtividade(page, atividadeB);\n        await adicionarConhecimento(page, atividadeB, conhecimento3);\n\n        // Disponibilizar cadastro\n        await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n        await page.getByTestId('btn-confirmar-disponibilizacao').click();\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 100,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS - CDU-11\n// ========================================================================",
    "context": "        await verificarPaginaPainel(page);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS - CDU-11\n    // ========================================================================\n\n    test('Cenario 1: ADMIN visualiza cadastro clicando na unidade subordinada', async ({\n                                                                                           page,"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 108,
    "length": 4,
    "text": "// Fluxo principal passo 2 - ADMIN/GESTOR:\n// 2.1 Sistema mostra tela Detalhes do processo\n// 2.2 Usu√°rio clica em unidade subordinada operacional/interoperacional\n// 2.3 Sistema mostra tela Detalhes do subprocesso",
    "context": "                                                                                           page,\n                                                                                           autenticadoComoAdmin\n                                                                                       }) => {\n        // Fluxo principal passo 2 - ADMIN/GESTOR: \n        // 2.1 Sistema mostra tela Detalhes do processo\n        // 2.2 Usu√°rio clica em unidade subordinada operacional/interoperacional\n        // 2.3 Sistema mostra tela Detalhes do subprocesso\n\n\n        await expect(page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first()).toBeVisible();"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 117,
    "length": 1,
    "text": "// Aguardar p√°gina de Detalhes do processo carregar",
    "context": "        await expect(page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first()).toBeVisible();\n        await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n\n        // Aguardar p√°gina de Detalhes do processo carregar\n        await expect(page).toHaveURL(/\\/processo\\/\\d+$/);\n        await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 121,
    "length": 1,
    "text": "// Passo 2.2: Clicar na unidade subordinada - esperar a tabela de dados carregar",
    "context": "        await expect(page).toHaveURL(/\\/processo\\/\\d+$/);\n        await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n\n        // Passo 2.2: Clicar na unidade subordinada - esperar a tabela de dados carregar\n        const tabela = page.getByTestId('tbl-tree');\n        await expect(tabela).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 125,
    "length": 1,
    "text": "// Clicar na c√©lula SECAO_211 dentro da tabela de unidades",
    "context": "        const tabela = page.getByTestId('tbl-tree');\n        await expect(tabela).toBeVisible();\n\n        // Clicar na c√©lula SECAO_211 dentro da tabela de unidades\n        const celula = tabela.getByRole('cell', {name: 'SECAO_211'}).first();\n        await expect(celula).toBeVisible();\n        await celula.click();"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 130,
    "length": 1,
    "text": "// Aguardar navega√ß√£o para Detalhes do subprocesso",
    "context": "        await expect(celula).toBeVisible();\n        await celula.click();\n\n        // Aguardar navega√ß√£o para Detalhes do subprocesso\n        await expect(page).toHaveURL(/\\/processo\\/\\d+\\/\\w+$/);\n\n        // Passo 2.3: Verificar visualiza√ß√£o"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 133,
    "length": 1,
    "text": "// Passo 2.3: Verificar visualiza√ß√£o",
    "context": "        // Aguardar navega√ß√£o para Detalhes do subprocesso\n        await expect(page).toHaveURL(/\\/processo\\/\\d+\\/\\w+$/);\n\n        // Passo 2.3: Verificar visualiza√ß√£o\n        await navegarParaAtividadesVisualizacao(page);\n        await expect(page.getByRole('heading', {name: 'Atividades e conhecimentos', exact: true})).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 137,
    "length": 1,
    "text": "// Passo 5 e 6: Verificar tela de atividades com dados da unidade",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await expect(page.getByRole('heading', {name: 'Atividades e conhecimentos', exact: true})).toBeVisible();\n\n        // Passo 5 e 6: Verificar tela de atividades com dados da unidade\n        await expect(page.getByRole('heading', {name: 'Atividades e conhecimentos'})).toBeVisible();\n\n        // Verificar que continua no subprocesso da unidade alvo"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// Verificar que continua no subprocesso da unidade alvo",
    "context": "        // Passo 5 e 6: Verificar tela de atividades com dados da unidade\n        await expect(page.getByRole('heading', {name: 'Atividades e conhecimentos'})).toBeVisible();\n\n        // Verificar que continua no subprocesso da unidade alvo\n        await expect(page).toHaveURL(new RegExp(String.raw`/processo/\\d+/${UNIDADE_ALVO}/`));\n\n        // Verificar que as atividades est√£o apresentadas como tabelas"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 143,
    "length": 2,
    "text": "// Verificar que as atividades est√£o apresentadas como tabelas\n// Cada atividade aparece com descri√ß√£o como cabe√ßalho",
    "context": "        // Verificar que continua no subprocesso da unidade alvo\n        await expect(page).toHaveURL(new RegExp(String.raw`/processo/\\d+/${UNIDADE_ALVO}/`));\n\n        // Verificar que as atividades est√£o apresentadas como tabelas\n        // Cada atividade aparece com descri√ß√£o como cabe√ßalho\n        await expect(page.getByText(atividadeA)).toBeVisible();\n        await expect(page.getByText(atividadeB)).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 148,
    "length": 1,
    "text": "// Verificar que os conhecimentos est√£o listados dentro das atividades",
    "context": "        await expect(page.getByText(atividadeA)).toBeVisible();\n        await expect(page.getByText(atividadeB)).toBeVisible();\n\n        // Verificar que os conhecimentos est√£o listados dentro das atividades\n        await expect(page.getByText(conhecimento1)).toBeVisible();\n        await expect(page.getByText(conhecimento2)).toBeVisible();\n        await expect(page.getByText(conhecimento3)).toBeVisible();"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 158,
    "length": 2,
    "text": "// Fluxo principal passo 3 - CHEFE/SERVIDOR:\n// 3.1 Sistema exibe diretamente a tela Detalhes do subprocesso",
    "context": "                                                                                                  page,\n                                                                                                  autenticadoComoChefeSecao211\n                                                                                              }) => {\n        // Fluxo principal passo 3 - CHEFE/SERVIDOR:\n        // 3.1 Sistema exibe diretamente a tela Detalhes do subprocesso\n\n\n        // Passo 1: Clicar no processo em andamento"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 162,
    "length": 1,
    "text": "// Passo 1: Clicar no processo em andamento",
    "context": "        // 3.1 Sistema exibe diretamente a tela Detalhes do subprocesso\n\n\n        // Passo 1: Clicar no processo em andamento\n        await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n\n        // Verifica que foi diretamente para o subprocesso (sem passar pela lista de unidades)"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 165,
    "length": 1,
    "text": "// Verifica que foi diretamente para o subprocesso (sem passar pela lista de unidades)",
    "context": "        // Passo 1: Clicar no processo em andamento\n        await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n\n        // Verifica que foi diretamente para o subprocesso (sem passar pela lista de unidades)\n        await verificarPaginaSubprocesso(page, UNIDADE_ALVO);\n\n        // Passo 4: Clicar no card Atividades e conhecimentos"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 168,
    "length": 1,
    "text": "// Passo 4: Clicar no card Atividades e conhecimentos",
    "context": "        // Verifica que foi diretamente para o subprocesso (sem passar pela lista de unidades)\n        await verificarPaginaSubprocesso(page, UNIDADE_ALVO);\n\n        // Passo 4: Clicar no card Atividades e conhecimentos\n        await navegarParaAtividadesVisualizacao(page);\n\n        // Passo 5 e 6: Verificar tela de atividades"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 171,
    "length": 1,
    "text": "// Passo 5 e 6: Verificar tela de atividades",
    "context": "        // Passo 4: Clicar no card Atividades e conhecimentos\n        await navegarParaAtividadesVisualizacao(page);\n\n        // Passo 5 e 6: Verificar tela de atividades\n        await expect(page.getByRole('heading', {name: 'Atividades e conhecimentos'})).toBeVisible();\n\n        // Verificar que continua no subprocesso da unidade alvo"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 174,
    "length": 1,
    "text": "// Verificar que continua no subprocesso da unidade alvo",
    "context": "        // Passo 5 e 6: Verificar tela de atividades\n        await expect(page.getByRole('heading', {name: 'Atividades e conhecimentos'})).toBeVisible();\n\n        // Verificar que continua no subprocesso da unidade alvo\n        await expect(page).toHaveURL(new RegExp(String.raw`/processo/\\d+/${UNIDADE_ALVO}/`));\n\n        // Verificar atividades aparecem como tabelas com descri√ß√£o"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 177,
    "length": 1,
    "text": "// Verificar atividades aparecem como tabelas com descri√ß√£o",
    "context": "        // Verificar que continua no subprocesso da unidade alvo\n        await expect(page).toHaveURL(new RegExp(String.raw`/processo/\\d+/${UNIDADE_ALVO}/`));\n\n        // Verificar atividades aparecem como tabelas com descri√ß√£o\n        await expect(page.getByText(atividadeA)).toBeVisible();\n        await expect(page.getByText(atividadeB)).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 181,
    "length": 1,
    "text": "// Verificar conhecimentos dentro das atividades",
    "context": "        await expect(page.getByText(atividadeA)).toBeVisible();\n        await expect(page.getByText(atividadeB)).toBeVisible();\n\n        // Verificar conhecimentos dentro das atividades\n        await expect(page.getByText(conhecimento1)).toBeVisible();\n        await expect(page.getByText(conhecimento2)).toBeVisible();\n        await expect(page.getByText(conhecimento3)).toBeVisible();"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 189,
    "length": 1,
    "text": "// Preparar: Admin homologa o cadastro",
    "context": "\n    test('Cenario 3: Visualizar processo finalizado', async ({page, autenticadoComoGestorCoord21}) => {\n        test.setTimeout(90000);\n        // Preparar: Admin homologa o cadastro\n\n\n        await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 193,
    "length": 1,
    "text": "// Aceitar cadastro",
    "context": "\n\n        await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n        // Aceitar cadastro\n        await navegarParaAtividadesVisualizacao(page);\n        await page.getByTestId('btn-acao-analisar-principal').click();\n        await page.getByTestId('inp-aceite-cadastro-obs').fill('Aceite para finaliza√ß√£o do cen√°rio');"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 201,
    "length": 1,
    "text": "// Aceite SECRETARIA_2 (Cadastro)",
    "context": "\n        await verificarPaginaPainel(page);\n\n        // Aceite SECRETARIA_2 (Cadastro)\n        await loginComPerfil(page, '212121', 'senha', 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 223,
    "length": 1,
    "text": "// Adicionar compet√™ncias e disponibilizar mapa",
    "context": "        await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n        await navegarParaSubprocesso(page, UNIDADE_ALVO);\n\n        // Adicionar compet√™ncias e disponibilizar mapa\n        await navegarParaMapa(page);\n\n        await abrirModalCriarCompetencia(page);"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 232,
    "length": 1,
    "text": "// Adicionar compet√™ncia para a segunda atividade (obrigat√≥rio)",
    "context": "        await page.getByTestId('btn-criar-competencia-salvar').click();\n        await expect(page.getByTestId('mdl-criar-competencia')).toBeHidden();\n\n        // Adicionar compet√™ncia para a segunda atividade (obrigat√≥rio)\n        await abrirModalCriarCompetencia(page);\n        await page.getByTestId('inp-criar-competencia-descricao').fill(`Compet√™ncia 2 ${timestamp}`);\n        await page.getByText(atividadeB).click();"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 244,
    "length": 1,
    "text": "// Aguardar redirecionamento para o painel e verificar mensagem de sucesso",
    "context": "        await page.getByTestId('btn-disponibilizar-mapa-confirmar').click();\n        await expect(page.getByTestId('mdl-disponibilizar-mapa')).toBeHidden();\n\n        // Aguardar redirecionamento para o painel e verificar mensagem de sucesso\n        await verificarPaginaPainel(page);\n\n        // Chefe valida mapa"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 247,
    "length": 1,
    "text": "// Chefe valida mapa",
    "context": "        // Aguardar redirecionamento para o painel e verificar mensagem de sucesso\n        await verificarPaginaPainel(page);\n\n        // Chefe valida mapa\n        await fazerLogout(page);\n        await login(page, USUARIOS.CHEFE_SECAO_211.titulo, USUARIOS.CHEFE_SECAO_211.senha);\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 257,
    "length": 1,
    "text": "// Aceite COORD_21 (Mapa)",
    "context": "        await page.getByTestId('btn-validar-mapa-confirmar').click();\n        await expect(page.getByText(/Mapa validado/i).first()).toBeVisible();\n\n        // Aceite COORD_21 (Mapa)\n        await login(page, USUARIOS.GESTOR_COORD_21.titulo, USUARIOS.GESTOR_COORD_21.senha);\n        await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n        await navegarParaSubprocesso(page, 'SECAO_211');"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 266,
    "length": 1,
    "text": "// Aceite SECRETARIA_2 (Mapa)",
    "context": "        await page.getByTestId('btn-aceite-mapa-confirmar').click();\n        await verificarPaginaPainel(page);\n\n        // Aceite SECRETARIA_2 (Mapa)\n        await loginComPerfil(page, '212121', 'senha', 'GESTOR - SECRETARIA_2');\n        await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n        await navegarParaSubprocesso(page, 'SECAO_211');"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 275,
    "length": 1,
    "text": "// Admin homologa mapa e finaliza processo",
    "context": "        await page.getByTestId('btn-aceite-mapa-confirmar').click();\n        await verificarPaginaPainel(page);\n\n        // Admin homologa mapa e finaliza processo\n        await fazerLogout(page);\n        await login(page, USUARIO_ADMIN, SENHA_ADMIN);\n"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 292,
    "length": 1,
    "text": "// Verificar que estamos na p√°gina de detalhes do processo",
    "context": "        await verificarPaginaPainel(page);\n        await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n\n        // Verificar que estamos na p√°gina de detalhes do processo\n        await expect(page).toHaveURL(/\\/processo\\/\\d+$/);\n\n        // Verificar que a tabela de unidades est√° vis√≠vel"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 295,
    "length": 1,
    "text": "// Verificar que a tabela de unidades est√° vis√≠vel",
    "context": "        // Verificar que estamos na p√°gina de detalhes do processo\n        await expect(page).toHaveURL(/\\/processo\\/\\d+$/);\n\n        // Verificar que a tabela de unidades est√° vis√≠vel\n        await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n\n        // Clicar na linha da unidade"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 298,
    "length": 1,
    "text": "// Clicar na linha da unidade",
    "context": "        // Verificar que a tabela de unidades est√° vis√≠vel\n        await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n\n        // Clicar na linha da unidade\n        await navegarParaSubprocesso(page, 'SECAO_211');\n\n        // O card deve estar vis√≠vel para visualiza√ß√£o em processo finalizado"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 301,
    "length": 1,
    "text": "// O card deve estar vis√≠vel para visualiza√ß√£o em processo finalizado",
    "context": "        // Clicar na linha da unidade\n        await navegarParaSubprocesso(page, 'SECAO_211');\n\n        // O card deve estar vis√≠vel para visualiza√ß√£o em processo finalizado\n        await navegarParaAtividadesVisualizacao(page);\n\n        await expect(page.getByRole('heading', {name: 'Atividades e conhecimentos'})).toBeVisible();"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 314,
    "length": 1,
    "text": "// Registrar cleanup aqui pois √© o √∫ltimo teste que depende deste processo",
    "context": "                                                                                  autenticadoComoChefeSecao211,\n                                                                                  cleanupAutomatico\n                                                                              }) => {\n        // Registrar cleanup aqui pois √© o √∫ltimo teste que depende deste processo\n        if (processoMapeamentoId > 0) cleanupAutomatico.registrar(processoMapeamentoId);\n\n        // Mesmo cen√°rio mas com perfil CHEFE - deve ir direto para subprocesso"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 317,
    "length": 1,
    "text": "// Mesmo cen√°rio mas com perfil CHEFE - deve ir direto para subprocesso",
    "context": "        // Registrar cleanup aqui pois √© o √∫ltimo teste que depende deste processo\n        if (processoMapeamentoId > 0) cleanupAutomatico.registrar(processoMapeamentoId);\n\n        // Mesmo cen√°rio mas com perfil CHEFE - deve ir direto para subprocesso\n\n\n        // Clicar no processo finalizado"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 320,
    "length": 1,
    "text": "// Clicar no processo finalizado",
    "context": "        // Mesmo cen√°rio mas com perfil CHEFE - deve ir direto para subprocesso\n\n\n        // Clicar no processo finalizado\n        await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n\n        // Verificar que foi diretamente para subprocesso (perfil CHEFE)"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 323,
    "length": 1,
    "text": "// Verificar que foi diretamente para subprocesso (perfil CHEFE)",
    "context": "        // Clicar no processo finalizado\n        await page.getByTestId('tbl-processos').getByText(descProcessoMapeamento).first().click();\n\n        // Verificar que foi diretamente para subprocesso (perfil CHEFE)\n        await verificarPaginaSubprocesso(page, UNIDADE_ALVO);\n\n        // Visualizar atividades"
  },
  {
    "file": "e2e/cdu-11.spec.ts",
    "type": "line",
    "line": 326,
    "length": 1,
    "text": "// Visualizar atividades",
    "context": "        // Verificar que foi diretamente para subprocesso (perfil CHEFE)\n        await verificarPaginaSubprocesso(page, UNIDADE_ALVO);\n\n        // Visualizar atividades\n        await navegarParaAtividadesVisualizacao(page);\n\n        await expect(page.getByRole('heading', {name: 'Atividades e conhecimentos'})).toBeVisible();"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 40,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO - Criar Mapa Vigente e Iniciar Revis√£o\n// ========================================================================",
    "context": "    let codProcessoMapeamento: number;\n    let processoRevisaoId: number;\n\n    // ========================================================================\n    // PREPARA√á√ÉO - Criar Mapa Vigente e Iniciar Revis√£o\n    // ========================================================================\n\n    test('Preparacao: Setup Mapeamento e In√≠cio da Revis√£o', async ({page, cleanupAutomatico}) => {\n        test.slow();"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 61,
    "length": 1,
    "text": "// N√£o registrar cleanup aqui para permitir que os pr√≥ximos testes usem o Mapa Vigente",
    "context": "        await linhaProcesso.click();\n\n        codProcessoMapeamento = await extrairProcessoId(page);\n        // N√£o registrar cleanup aqui para permitir que os pr√≥ximos testes usem o Mapa Vigente\n\n        await page.getByTestId('btn-processo-iniciar').click();\n        await page.getByTestId('btn-iniciar-processo-confirmar').click();"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 68,
    "length": 1,
    "text": "// 2. FASE CADASTRO: Chefe preenche atividades e disponibiliza (Localiza√ß√£o: SECAO_211 -> COORD_21)",
    "context": "        await expect(page.getByText(/Processo iniciado/i).first()).toBeVisible();\n        await limparNotificacoes(page);\n\n        // 2. FASE CADASTRO: Chefe preenche atividades e disponibiliza (Localiza√ß√£o: SECAO_211 -> COORD_21)\n        await fazerLogout(page);\n        await login(page, USUARIO_CHEFE, SENHA_CHEFE);\n        await acessarSubprocessoChefeDireto(page, descProcessoMapeamento, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 84,
    "length": 2,
    "text": "// 3. FASE CADASTRO: Aceites e Homologa√ß√£o (Tramita√ß√£o pela hierarquia)\n// 3.1 GESTOR COORD_21 aceita (Localiza√ß√£o: COORD_21 -> SECRETARIA_2)",
    "context": "        await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n        await page.getByTestId('btn-confirmar-disponibilizacao').click();\n\n        // 3. FASE CADASTRO: Aceites e Homologa√ß√£o (Tramita√ß√£o pela hierarquia)\n        // 3.1 GESTOR COORD_21 aceita (Localiza√ß√£o: COORD_21 -> SECRETARIA_2)\n        await login(page, USUARIO_GESTOR_COORD, SENHA_GESTOR_COORD);\n        await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 91,
    "length": 1,
    "text": "// 3.2 GESTOR SECRETARIA_2 aceita (Localiza√ß√£o: SECRETARIA_2 -> ADMIN)",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page, 'Aceite COORD_21');\n\n        // 3.2 GESTOR SECRETARIA_2 aceita (Localiza√ß√£o: SECRETARIA_2 -> ADMIN)\n        await loginComPerfil(page, '212121', 'senha', 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 97,
    "length": 1,
    "text": "// 3.3 ADMIN homologa (Localiza√ß√£o: ADMIN)",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page, 'Aceite SECRETARIA_2');\n\n        // 3.3 ADMIN homologa (Localiza√ß√£o: ADMIN)\n        await login(page, USUARIO_ADMIN, SENHA_ADMIN);\n        await page.getByTestId('tbl-processos').locator('tr', {has: page.getByText(descProcessoMapeamento)}).click();\n        await navegarParaSubprocesso(page, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// 4. FASE MAPA: Admin cria compet√™ncias e disponibiliza (Localiza√ß√£o: ADMIN -> SECAO_211)",
    "context": "        await page.getByTestId('btn-acao-analisar-principal').click();\n        await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n\n        // 4. FASE MAPA: Admin cria compet√™ncias e disponibiliza (Localiza√ß√£o: ADMIN -> SECAO_211)\n        await navegarParaMapa(page);\n        await criarCompetencia(page, `Compet√™ncia 1 ${timestamp}`, [`Atividade Base 1 ${timestamp}`]);\n        await criarCompetencia(page, `Compet√™ncia 2 ${timestamp}`, [`Atividade Base 2 ${timestamp}`]);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 115,
    "length": 2,
    "text": "// 5. FASE MAPA: Valida√ß√£o e Homologa√ß√£o (Tramita√ß√£o pela hierarquia)\n// 5.1 CHEFE valida (Localiza√ß√£o: SECAO_211 -> COORD_21)",
    "context": "        await page.getByTestId('inp-disponibilizar-mapa-data').fill('2030-12-31');\n        await page.getByTestId('btn-disponibilizar-mapa-confirmar').click();\n\n        // 5. FASE MAPA: Valida√ß√£o e Homologa√ß√£o (Tramita√ß√£o pela hierarquia)\n        // 5.1 CHEFE valida (Localiza√ß√£o: SECAO_211 -> COORD_21)\n        await fazerLogout(page);\n        await login(page, USUARIO_CHEFE, SENHA_CHEFE);\n        await acessarSubprocessoChefeDireto(page, descProcessoMapeamento, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// 5.2 GESTOR COORD_21 aceita (Localiza√ß√£o: COORD_21 -> SECRETARIA_2)",
    "context": "        await page.getByTestId('btn-mapa-validar').click();\n        await page.getByTestId('btn-validar-mapa-confirmar').click();\n\n        // 5.2 GESTOR COORD_21 aceita (Localiza√ß√£o: COORD_21 -> SECRETARIA_2)\n        await login(page, USUARIO_GESTOR_COORD, SENHA_GESTOR_COORD);\n        await page.getByTestId('tbl-processos').locator('tr', {has: page.getByText(descProcessoMapeamento)}).click();\n        await navegarParaSubprocesso(page, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// 5.3 GESTOR SECRETARIA_2 aceita (Localiza√ß√£o: SECRETARIA_2 -> ADMIN)",
    "context": "        await page.getByTestId('btn-mapa-homologar-aceite').click();\n        await page.getByTestId('btn-aceite-mapa-confirmar').click();\n\n        // 5.3 GESTOR SECRETARIA_2 aceita (Localiza√ß√£o: SECRETARIA_2 -> ADMIN)\n        await loginComPerfil(page, '212121', 'senha', 'GESTOR - SECRETARIA_2');\n        await page.getByTestId('tbl-processos').locator('tr', {has: page.getByText(descProcessoMapeamento)}).click();\n        await navegarParaSubprocesso(page, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// 5.4 ADMIN homologa (Localiza√ß√£o: ADMIN)",
    "context": "        await page.getByTestId('btn-mapa-homologar-aceite').click();\n        await page.getByTestId('btn-aceite-mapa-confirmar').click();\n\n        // 5.4 ADMIN homologa (Localiza√ß√£o: ADMIN)\n        await login(page, USUARIO_ADMIN, SENHA_ADMIN);\n        await page.getByTestId('tbl-processos').locator('tr', {has: page.getByText(descProcessoMapeamento)}).click();\n        await navegarParaSubprocesso(page, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 148,
    "length": 1,
    "text": "// Finalizar Processo",
    "context": "        await page.getByTestId('btn-mapa-homologar-aceite').click();\n        await page.getByTestId('btn-aceite-mapa-confirmar').click();\n\n        // Finalizar Processo\n        await page.goto('/painel');\n        await page.getByTestId('tbl-processos').locator('tr', {has: page.getByText(descProcessoMapeamento)}).click();\n        await page.getByTestId('btn-processo-finalizar').click();"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 155,
    "length": 1,
    "text": "// 6. Iniciar Processo de Revis√£o",
    "context": "        await page.getByTestId('btn-finalizar-processo-confirmar').click();\n        await expect(page.getByText(/Processo finalizado/i).first()).toBeVisible();\n\n        // 6. Iniciar Processo de Revis√£o\n        await criarProcesso(page, {\n            descricao: descProcessoRevisao,\n            tipo: 'REVISAO',"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 165,
    "length": 1,
    "text": "// O registro ser√° feito no √∫ltimo cen√°rio do teste serial",
    "context": "        });\n        await page.getByTestId('tbl-processos').locator('tr', {has: page.getByText(descProcessoRevisao)}).click();\n        processoRevisaoId = await extrairProcessoId(page);\n        // O registro ser√° feito no √∫ltimo cen√°rio do teste serial\n\n        await page.getByTestId('btn-processo-iniciar').click();\n        await page.getByTestId('btn-iniciar-processo-confirmar').click();"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 172,
    "length": 3,
    "text": "// ========================================================================\n// FLUXO DE VERIFICA√á√ÉO DE IMPACTOS (Tramita√ß√£o)\n// ========================================================================",
    "context": "        await expect(page.getByText(/Processo iniciado/i).first()).toBeVisible();\n    });\n\n    // ========================================================================\n    // FLUXO DE VERIFICA√á√ÉO DE IMPACTOS (Tramita√ß√£o)\n    // ========================================================================\n\n    test('Fluxo CHEFE: Realizar altera√ß√µes e verificar impactos', async ({page}) => {\n        // Debbie Harry possui apenas 1 perfil"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 177,
    "length": 1,
    "text": "// Debbie Harry possui apenas 1 perfil",
    "context": "    // ========================================================================\n\n    test('Fluxo CHEFE: Realizar altera√ß√µes e verificar impactos', async ({page}) => {\n        // Debbie Harry possui apenas 1 perfil\n        await login(page, USUARIO_CHEFE, SENHA_CHEFE);\n        await acessarSubprocessoChefeDireto(page, descProcessoRevisao, UNIDADE_ALVO);\n        await navegarParaAtividades(page);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 182,
    "length": 1,
    "text": "// 1. Inclus√£o (Muda o status para REVISAO_CADASTRO_EM_ANDAMENTO, liberando o bot√£o de impactos)",
    "context": "        await acessarSubprocessoChefeDireto(page, descProcessoRevisao, UNIDADE_ALVO);\n        await navegarParaAtividades(page);\n\n        // 1. Inclus√£o (Muda o status para REVISAO_CADASTRO_EM_ANDAMENTO, liberando o bot√£o de impactos)\n        const novaAtividade = `Atividade Nova Revis√£o ${timestamp}`;\n        const novoConhecimento = `Conhecimento Novo ${timestamp}`;\n        await adicionarAtividade(page, novaAtividade);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 194,
    "length": 1,
    "text": "// 3. Altera√ß√£o (Atividade e Conhecimento)",
    "context": "        await expect(page.locator('.modal-content').getByText(novoConhecimento)).toBeVisible();\n        await fecharModalImpacto(page);\n\n        // 3. Altera√ß√£o (Atividade e Conhecimento)\n        const descNova = `Atividade Base 2 Editada ${timestamp}`;\n        await editarAtividade(page, `Atividade Base 2 ${timestamp}`, descNova);\n        await adicionarConhecimento(page, `Atividade Base 1 ${timestamp}`, `Conhecimento Extra ${timestamp}`);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 203,
    "length": 1,
    "text": "// 4. Remo√ß√£o",
    "context": "        await expect(page.locator('.modal-content').getByText(`Compet√™ncia 1 ${timestamp}`)).toBeVisible();\n        await fecharModalImpacto(page);\n\n        // 4. Remo√ß√£o\n        await removerAtividade(page, `Atividade Base 3 ${timestamp}`);\n        await abrirModalImpacto(page);\n        await expect(page.locator('.modal-content').getByText(`Compet√™ncia 3 ${timestamp}`)).toBeVisible();"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 209,
    "length": 1,
    "text": "// 5. Disponibilizar (Localiza√ß√£o: SECAO_211 -> COORD_21)",
    "context": "        await expect(page.locator('.modal-content').getByText(`Compet√™ncia 3 ${timestamp}`)).toBeVisible();\n        await fecharModalImpacto(page);\n\n        // 5. Disponibilizar (Localiza√ß√£o: SECAO_211 -> COORD_21)\n        await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n        await page.getByTestId('btn-confirmar-disponibilizacao').click();\n    });"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 215,
    "length": 1,
    "text": "// Registrar cleanup aqui para ambos os processos, pois este √© o √∫ltimo teste",
    "context": "    });\n\n    test('Fluxo GESTOR e ADMIN: Verificar visualiza√ß√£o de impactos', async ({page, cleanupAutomatico}) => {\n        // Registrar cleanup aqui para ambos os processos, pois este √© o √∫ltimo teste\n        if (codProcessoMapeamento > 0) cleanupAutomatico.registrar(codProcessoMapeamento);\n        if (processoRevisaoId > 0) cleanupAutomatico.registrar(processoRevisaoId);\n"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 219,
    "length": 1,
    "text": "// 1. GESTOR verifica na visualiza√ß√£o (Localiza√ß√£o: COORD_21)",
    "context": "        if (codProcessoMapeamento > 0) cleanupAutomatico.registrar(codProcessoMapeamento);\n        if (processoRevisaoId > 0) cleanupAutomatico.registrar(processoRevisaoId);\n\n        // 1. GESTOR verifica na visualiza√ß√£o (Localiza√ß√£o: COORD_21)\n        await login(page, USUARIO_GESTOR_COORD, SENHA_GESTOR_COORD);\n        await acessarSubprocessoGestor(page, descProcessoRevisao, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 229,
    "length": 2,
    "text": "// 2. ADMIN verifica na visualiza√ß√£o (Ap√≥s aceite de SECRETARIA_2 para chegar em ADMIN)\n// 2.1 Aceite SECRETARIA_2 (Localiza√ß√£o: SECRETARIA_2 -> ADMIN)",
    "context": "        await fecharModalImpacto(page);\n        await aceitarRevisao(page, 'Aceite revis√£o COORD_21');\n\n        // 2. ADMIN verifica na visualiza√ß√£o (Ap√≥s aceite de SECRETARIA_2 para chegar em ADMIN)\n        // 2.1 Aceite SECRETARIA_2 (Localiza√ß√£o: SECRETARIA_2 -> ADMIN)\n        await loginComPerfil(page, '212121', 'senha', 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcessoRevisao, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 236,
    "length": 1,
    "text": "// 2.2 ADMIN verifica (Localiza√ß√£o: ADMIN)",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarRevisao(page, 'Aceite revis√£o SECRETARIA_2');\n\n        // 2.2 ADMIN verifica (Localiza√ß√£o: ADMIN)\n        await login(page, USUARIO_ADMIN, SENHA_ADMIN);\n        await page.getByTestId('tbl-processos').locator('tr', {has: page.getByText(descProcessoRevisao)}).click();\n        await navegarParaSubprocesso(page, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 245,
    "length": 1,
    "text": "// Homologar para liberar edi√ß√£o de mapa (Requisito 3.3)",
    "context": "        await expect(page.locator('.modal-content').getByText('Compet√™ncias impactadas')).toBeVisible();\n        await fecharModalImpacto(page);\n\n        // Homologar para liberar edi√ß√£o de mapa (Requisito 3.3)\n        await page.getByTestId('btn-acao-analisar-principal').click();\n        await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n"
  },
  {
    "file": "e2e/cdu-12.spec.ts",
    "type": "line",
    "line": 249,
    "length": 1,
    "text": "// 2.3 ADMIN verifica na Edi√ß√£o do Mapa (Requisito 3.3)",
    "context": "        await page.getByTestId('btn-acao-analisar-principal').click();\n        await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n\n        // 2.3 ADMIN verifica na Edi√ß√£o do Mapa (Requisito 3.3)\n        await navegarParaMapa(page);\n        await expect(page.getByTestId('cad-mapa__btn-impactos-mapa')).toBeVisible();\n        await page.getByTestId('cad-mapa__btn-impactos-mapa').click();"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Passo 9.11/10.9: Redireciona para o Painel",
    "context": "            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n\n            // Passo 9.11/10.9: Redireciona para o Painel\n            await expect(page).toHaveURL(/\\/painel/);\n            await fazerLogout(page);\n        });"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Conforme CDU-13 Passo 10",
    "context": "            await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n            await navegarParaAtividadesVisualizacao(page);\n\n            // Conforme CDU-13 Passo 10\n            await aceitarCadastroMapeamento(page, 'Ok pela Coordena√ß√£o');\n\n            // Passo 10.9: Redireciona para o Painel"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 66,
    "length": 1,
    "text": "// Passo 10.9: Redireciona para o Painel",
    "context": "            // Conforme CDU-13 Passo 10\n            await aceitarCadastroMapeamento(page, 'Ok pela Coordena√ß√£o');\n\n            // Passo 10.9: Redireciona para o Painel\n            await expect(page).toHaveURL(/\\/painel/);\n            await fazerLogout(page);\n        });"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Conforme CDU-13 Passo 9 (Devolu√ß√£o)",
    "context": "            await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n            await navegarParaAtividadesVisualizacao(page);\n\n            // Conforme CDU-13 Passo 9 (Devolu√ß√£o)\n            await devolverCadastroMapeamento(page, 'Dados incompletos para a Secretaria');\n\n            // Passo 9.11: Redireciona para o Painel"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 79,
    "length": 1,
    "text": "// Passo 9.11: Redireciona para o Painel",
    "context": "            // Conforme CDU-13 Passo 9 (Devolu√ß√£o)\n            await devolverCadastroMapeamento(page, 'Dados incompletos para a Secretaria');\n\n            // Passo 9.11: Redireciona para o Painel\n            await expect(page).toHaveURL(/\\/painel/);\n            await fazerLogout(page);\n        });"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 88,
    "length": 1,
    "text": "// Verificar situa√ß√£o (continua disponibilizado, pois n√£o chegou na unidade dona)",
    "context": "            await login(page, USUARIOS.GESTOR_COORD_21.titulo, USUARIOS.GESTOR_COORD_21.senha);\n            await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n\n            // Verificar situa√ß√£o (continua disponibilizado, pois n√£o chegou na unidade dona)\n            await expect(page.getByTestId('subprocesso-header__txt-situacao')).toHaveText(/Cadastro disponibilizado/i);\n\n            await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Passo 9.8: Chegou na unidade do subprocesso, muda para 'Cadastro em andamento'",
    "context": "            await login(page, USUARIOS.CHEFE_SECAO_211.titulo, USUARIOS.CHEFE_SECAO_211.senha);\n            await acessarSubprocessoChefeDireto(page, descProcesso, UNIDADE_ALVO);\n\n            // Passo 9.8: Chegou na unidade do subprocesso, muda para 'Cadastro em andamento'\n            await expect(page.getByTestId('subprocesso-header__txt-situacao')).toHaveText(/Cadastro em andamento/i);\n\n            // Verificar hist√≥rico (Passo 7)"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// Verificar hist√≥rico (Passo 7)",
    "context": "            // Passo 9.8: Chegou na unidade do subprocesso, muda para 'Cadastro em andamento'\n            await expect(page.getByTestId('subprocesso-header__txt-situacao')).toHaveText(/Cadastro em andamento/i);\n\n            // Verificar hist√≥rico (Passo 7)\n            await navegarParaAtividades(page);\n            const modal = await abrirHistoricoAnalise(page);\n            await expect(modal.getByTestId('cell-resultado-0')).toHaveText(/Devolu[c√ß][a√£]o/i);"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Disponibilizar novamente para permitir aceite final",
    "context": "            await expect(modal.getByTestId('cell-observacao-0')).toHaveText('Corrigir conforme Secretaria');\n            await fecharHistoricoAnalise(page);\n\n            // Disponibilizar novamente para permitir aceite final\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n            await fazerLogout(page);"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 117,
    "length": 1,
    "text": "// Coordena√ß√£o aceita",
    "context": "        });\n\n        await test.step('7. ACEITE FINAL -> ADMIN homologa', async () => {\n            // Coordena√ß√£o aceita\n            await login(page, USUARIOS.GESTOR_COORD_21.titulo, USUARIOS.GESTOR_COORD_21.senha);\n            await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n            await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Secretaria aceita (move para ADMIN)",
    "context": "            await aceitarCadastroMapeamento(page, 'Ok final 1');\n            await fazerLogout(page);\n\n            // Secretaria aceita (move para ADMIN)\n            await loginComPerfil(page, USUARIOS.CHEFE_SECRETARIA_2.titulo, USUARIOS.CHEFE_SECRETARIA_2.senha, 'GESTOR - SECRETARIA_2');\n            await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n            await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 131,
    "length": 1,
    "text": "// ADMIN homologa (Passo 11)",
    "context": "            await aceitarCadastroMapeamento(page, 'Ok final 2');\n            await fazerLogout(page);\n\n            // ADMIN homologa (Passo 11)\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n            await acessarSubprocessoAdmin(page, descProcesso, UNIDADE_ALVO);\n            await navegarParaSubprocesso(page, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 137,
    "length": 1,
    "text": "// Clicar Homologar (conforme perfil ADMIN)",
    "context": "            await navegarParaSubprocesso(page, UNIDADE_ALVO);\n            await navegarParaAtividadesVisualizacao(page);\n\n            // Clicar Homologar (conforme perfil ADMIN)\n            await page.getByTestId('btn-acao-analisar-principal').click();\n            await page.getByRole('dialog').getByRole('button', {name: 'Confirmar'}).click();\n"
  },
  {
    "file": "e2e/cdu-13.spec.ts",
    "type": "line",
    "line": 141,
    "length": 1,
    "text": "// Passo 11.7: Redireciona para Detalhes do Subprocesso",
    "context": "            await page.getByTestId('btn-acao-analisar-principal').click();\n            await page.getByRole('dialog').getByRole('button', {name: 'Confirmar'}).click();\n\n            // Passo 11.7: Redireciona para Detalhes do Subprocesso\n            await expect(page).toHaveURL(new RegExp(String.raw`/processo/\\d+/${UNIDADE_ALVO}$`));\n            await expect(page.getByText(/Homologa[√ßcl]√£o efetivada/i).first()).toBeVisible();\n            await expect(page.getByTestId('subprocesso-header__txt-situacao')).toHaveText(/Cadastro homologado/i);"
  },
  {
    "file": "e2e/cdu-14.spec.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Chefe disponibiliza",
    "context": "            });\n            await fazerLogout(page);\n\n            // Chefe disponibiliza\n            await login(page, USUARIOS.CHEFE_SECAO_211.titulo, USUARIOS.CHEFE_SECAO_211.senha);\n            await acessarSubprocessoChefeDireto(page, descMapeamento, UNIDADE_ALVO);\n            await navegarParaAtividades(page);"
  },
  {
    "file": "e2e/cdu-14.spec.ts",
    "type": "line",
    "line": 58,
    "length": 1,
    "text": "// Aceites e Homologa√ß√£o",
    "context": "            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n            await fazerLogout(page);\n\n            // Aceites e Homologa√ß√£o\n            await login(page, USUARIOS.GESTOR_COORD_21.titulo, USUARIOS.GESTOR_COORD_21.senha);\n            await acessarSubprocessoGestor(page, descMapeamento, UNIDADE_ALVO);\n            await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-14.spec.ts",
    "type": "line",
    "line": 77,
    "length": 1,
    "text": "// Criar Compet√™ncia e Disponibilizar Mapa",
    "context": "            await navegarParaAtividadesVisualizacao(page);\n            await homologarCadastroMapeamento(page);\n\n            // Criar Compet√™ncia e Disponibilizar Mapa\n            await navegarParaMapa(page);\n            await expect(page.getByText(/Carregando/i)).toBeHidden();\n"
  },
  {
    "file": "e2e/cdu-14.spec.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// Garantir que atividades homologadas apare√ßam na lista de sele√ß√£o (esperar componente estabilizar)",
    "context": "            await navegarParaMapa(page);\n            await expect(page.getByText(/Carregando/i)).toBeHidden();\n\n            // Garantir que atividades homologadas apare√ßam na lista de sele√ß√£o (esperar componente estabilizar)\n            await page.waitForResponse(resp => resp.url().includes('/atividades-elegiveis') || resp.url().includes('/mapa'));\n\n            await criarCompetencia(page, `Comp Map ${timestamp}`, [`Atividade Map ${timestamp}`]);"
  },
  {
    "file": "e2e/cdu-14.spec.ts",
    "type": "line",
    "line": 88,
    "length": 1,
    "text": "// Chefe valida e Hierarquia Aceita at√© ADMIN homologar",
    "context": "            await disponibilizarMapa(page, '2030-12-31');\n            await fazerLogout(page);\n\n            // Chefe valida e Hierarquia Aceita at√© ADMIN homologar\n            await login(page, USUARIOS.CHEFE_SECAO_211.titulo, USUARIOS.CHEFE_SECAO_211.senha);\n            await acessarSubprocessoChefeDireto(page, descMapeamento, UNIDADE_ALVO);\n            await navegarParaMapa(page);"
  },
  {
    "file": "e2e/cdu-14.spec.ts",
    "type": "line",
    "line": 116,
    "length": 1,
    "text": "// Finalizar processo",
    "context": "            await page.getByTestId('btn-mapa-homologar-aceite').click();\n            await page.getByTestId('btn-aceite-mapa-confirmar').click();\n\n            // Finalizar processo\n            await page.goto('/painel');\n            await page.getByTestId('tbl-processos').locator('tr').filter({has: page.getByText(descMapeamento)}).click();\n            await page.getByTestId('btn-processo-finalizar').click();"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// 1. Admin cria e inicia processo",
    "context": "    const CONHECIMENTO_2 = `Conhecimento 2 ${timestamp}`;\n\n    test('Preparacao: Criar processo e homologar cadastro de atividades', async ({page, autenticadoComoAdmin}) => {\n        // 1. Admin cria e inicia processo\n        await criarProcesso(page, {\n            descricao: descProcesso,\n            tipo: 'MAPEAMENTO',"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 59,
    "length": 1,
    "text": "// 2. Chefe adiciona atividades e conhecimentos",
    "context": "        await page.getByTestId('btn-iniciar-processo-confirmar').click();\n        await expect(page.getByText('Processo iniciado')).toBeVisible();\n\n        // 2. Chefe adiciona atividades e conhecimentos\n        await login(page, USUARIOS.CHEFE_SECAO_211.titulo, USUARIOS.CHEFE_SECAO_211.senha);\n        await acessarSubprocessoChefeDireto(page, descProcesso);\n        await navegarParaAtividades(page);"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 70,
    "length": 1,
    "text": "// 3. Gestores aceitam",
    "context": "        await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n        await page.getByTestId('btn-confirmar-disponibilizacao').click();\n\n        // 3. Gestores aceitam\n        await login(page, USUARIOS.GESTOR_COORD_21.titulo, USUARIOS.GESTOR_COORD_21.senha);\n        await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// 4. Admin homologa",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page);\n\n        // 4. Admin homologa\n        await login(page, USUARIO_ADMIN, SENHA_ADMIN);\n        await acessarSubprocessoAdmin(page, descProcesso, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 91,
    "length": 1,
    "text": "// CT-00 e CT-01: Acessar Edi√ß√£o e verificar elementos",
    "context": "    });\n\n    test('Cen√°rios CDU-15: Fluxo completo de manuten√ß√£o do mapa pelo ADMIN', async ({page, autenticadoComoAdmin}) => {\n        // CT-00 e CT-01: Acessar Edi√ß√£o e verificar elementos\n        await acessarSubprocessoAdmin(page, descProcesso, UNIDADE_ALVO);\n        await navegarParaMapa(page);\n"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// CT-02: Criar Compet√™ncia",
    "context": "        await expect(page.getByTestId('btn-abrir-criar-competencia').or(page.getByTestId('btn-abrir-criar-competencia-empty'))).toBeVisible();\n        await expect(page.getByTestId('btn-cad-mapa-disponibilizar')).toBeDisabled();\n\n        // CT-02: Criar Compet√™ncia\n        const compDesc = `Compet√™ncia 1 ${timestamp}`;\n        await criarCompetencia(page, compDesc, [ATIVIDADE_1]);\n        await verificarSituacaoSubprocesso(page, 'Mapa criado');"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// CT-03: Editar Compet√™ncia",
    "context": "        await verificarSituacaoSubprocesso(page, 'Mapa criado');\n        await expect(page.getByTestId('btn-cad-mapa-disponibilizar')).toBeEnabled();\n\n        // CT-03: Editar Compet√™ncia\n        const newDesc = `Compet√™ncia 1 Editada ${timestamp}`;\n        await editarCompetencia(page, compDesc, newDesc, [ATIVIDADE_2]);\n        await verificarCompetenciaNoMapa(page, newDesc, [ATIVIDADE_1, ATIVIDADE_2]);"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// CT-05: Validar Cancelamento da Exclus√£o",
    "context": "        await editarCompetencia(page, compDesc, newDesc, [ATIVIDADE_2]);\n        await verificarCompetenciaNoMapa(page, newDesc, [ATIVIDADE_1, ATIVIDADE_2]);\n\n        // CT-05: Validar Cancelamento da Exclus√£o\n        await excluirCompetenciaCancelando(page, newDesc);\n        await expect(page.getByText(newDesc).first()).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 114,
    "length": 1,
    "text": "// CT-04: Excluir Compet√™ncia com Confirma√ß√£o",
    "context": "        await excluirCompetenciaCancelando(page, newDesc);\n        await expect(page.getByText(newDesc).first()).toBeVisible();\n\n        // CT-04: Excluir Compet√™ncia com Confirma√ß√£o\n        await excluirCompetenciaConfirmando(page, newDesc);\n        await expect(page.getByTestId('btn-cad-mapa-disponibilizar')).toBeDisabled();\n"
  },
  {
    "file": "e2e/cdu-15.spec.ts",
    "type": "line",
    "line": 118,
    "length": 1,
    "text": "// CT-06: Navegar para Disponibiliza√ß√£o",
    "context": "        await excluirCompetenciaConfirmando(page, newDesc);\n        await expect(page.getByTestId('btn-cad-mapa-disponibilizar')).toBeDisabled();\n\n        // CT-06: Navegar para Disponibiliza√ß√£o\n        const compFinal = `Compet√™ncia Final ${timestamp}`;\n        await criarCompetencia(page, compFinal, [ATIVIDADE_1, ATIVIDADE_2]);\n        await disponibilizarMapa(page);"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 31,
    "length": 1,
    "text": "// Atividades e compet√™ncias para os testes",
    "context": "    let processoMapeamentoId: number;\n    let processoRevisaoId: number;\n\n    // Atividades e compet√™ncias para os testes\n    const atividadeBase1 = `Atividade Base 1 ${timestamp}`;\n    const atividadeBase2 = `Atividade Base 2 ${timestamp}`;\n    const atividadeBase3 = `Atividade Base 3 ${timestamp}`;"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 40,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO - Criar mapa vigente (processo de mapeamento completo)\n// ========================================================================",
    "context": "    const competencia3 = `Compet√™ncia 3 ${timestamp}`;\n    const atividadeNovaRevisao = `Atividade Nova Revis√£o ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO - Criar mapa vigente (processo de mapeamento completo)\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo de mapeamento', async ({\n                                                                                page,"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 94,
    "length": 1,
    "text": "// Gestor COORD_21",
    "context": "\n    test('Preparacao 3: Gestores aceitam cadastro', async ({page, autenticadoComoGestorCoord21}) => {\n        console.log('-> Gestores (COORD e SEC) aceitando cadastro...');\n        // Gestor COORD_21\n        await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page);"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Gestor SECRETARIA_2",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page);\n\n        // Gestor SECRETARIA_2\n        await loginComPerfil(page, USUARIOS.CHEFE_SECRETARIA_2.titulo, USUARIOS.CHEFE_SECRETARIA_2.senha, 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Homologa√ß√£o do cadastro",
    "context": "                                                                                                     page,\n                                                                                                     autenticadoComoAdmin\n                                                                                                 }) => {\n        // Homologa√ß√£o do cadastro\n        await acessarSubprocessoAdmin(page, descProcessoMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);\n        await page.getByTestId('btn-acao-analisar-principal').click();"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 117,
    "length": 1,
    "text": "// Cria√ß√£o do mapa",
    "context": "        await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n        await expect(page).toHaveURL(/\\/processo\\/\\d+\\/\\w+$/);\n\n        // Cria√ß√£o do mapa\n        await navegarParaMapa(page);\n        await criarCompetencia(page, competencia1, [atividadeBase1]);\n        await criarCompetencia(page, competencia2, [atividadeBase2]);"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// Gestor COORD_21",
    "context": "    });\n\n    test('Preparacao 6: Gestores aceitam mapa', async ({page, autenticadoComoGestorCoord21}) => {\n        // Gestor COORD_21\n        await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n        await navegarParaMapa(page);\n        await page.getByTestId('btn-mapa-homologar-aceite').click();"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 147,
    "length": 1,
    "text": "// Gestor SECRETARIA_2",
    "context": "        await page.getByTestId('btn-aceite-mapa-confirmar').click();\n        await verificarPaginaPainel(page);\n\n        // Gestor SECRETARIA_2\n        await loginComPerfil(page, USUARIOS.CHEFE_SECRETARIA_2.titulo, USUARIOS.CHEFE_SECRETARIA_2.senha, 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcessoMapeamento, UNIDADE_ALVO);\n        await navegarParaMapa(page);"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 161,
    "length": 1,
    "text": "// Homologa√ß√£o e finaliza√ß√£o do Mapeamento",
    "context": "                                                                                    autenticadoComoAdmin,\n                                                                                    cleanupAutomatico\n                                                                                }) => {\n        // Homologa√ß√£o e finaliza√ß√£o do Mapeamento\n        await acessarSubprocessoAdmin(page, descProcessoMapeamento, UNIDADE_ALVO);\n        await navegarParaMapa(page);\n        await page.getByTestId('btn-mapa-homologar-aceite').click();"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 173,
    "length": 1,
    "text": "// Cria√ß√£o e in√≠cio da Revis√£o",
    "context": "        await page.getByTestId('btn-finalizar-processo-confirmar').click();\n        await verificarPaginaPainel(page);\n\n        // Cria√ß√£o e in√≠cio da Revis√£o\n        await criarProcesso(page, {\n            descricao: descProcessoRevisao,\n            tipo: 'REVISAO',"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 216,
    "length": 1,
    "text": "// Gestor COORD_21",
    "context": "    });\n\n    test('Preparacao 9: Gestores e Admin aceitam revis√£o', async ({page, autenticadoComoGestorCoord21}) => {\n        // Gestor COORD_21\n        await acessarSubprocessoGestor(page, descProcessoRevisao, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);\n        await aceitarRevisao(page);"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 221,
    "length": 1,
    "text": "// Gestor SECRETARIA_2",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarRevisao(page);\n\n        // Gestor SECRETARIA_2\n        await loginComPerfil(page, USUARIOS.CHEFE_SECRETARIA_2.titulo, USUARIOS.CHEFE_SECRETARIA_2.senha, 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcessoRevisao, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 227,
    "length": 1,
    "text": "// Admin homologa",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarRevisao(page);\n\n        // Admin homologa\n        await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n        await acessarSubprocessoAdmin(page, descProcessoRevisao, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 238,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS - CDU-16\n// ========================================================================",
    "context": "            .toHaveText(/Revis[a√£]o d[oe] cadastro homologada/i);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS - CDU-16\n    // ========================================================================\n\n    test('Cen√°rios CDU-16: ADMIN ajusta mapa e visualiza impactos', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1: Navega√ß√£o para tela de edi√ß√£o do mapa"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 243,
    "length": 1,
    "text": "// Cenario 1: Navega√ß√£o para tela de edi√ß√£o do mapa",
    "context": "    // ========================================================================\n\n    test('Cen√°rios CDU-16: ADMIN ajusta mapa e visualiza impactos', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1: Navega√ß√£o para tela de edi√ß√£o do mapa\n        await test.step('Cen√°rio 1: Navega√ß√£o para o Mapa', async () => {\n            await acessarSubprocessoAdmin(page, descProcessoRevisao, UNIDADE_ALVO);\n            await navegarParaMapa(page);"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 255,
    "length": 1,
    "text": "// Cenario 2: Visualiza√ß√£o de impactos no mapa",
    "context": "            await expect(page.getByText(competencia2)).toBeVisible();\n        });\n\n        // Cenario 2: Visualiza√ß√£o de impactos no mapa\n        await test.step('Cen√°rio 2: Visualiza√ß√£o de Impactos', async () => {\n            await page.getByTestId('cad-mapa__btn-impactos-mapa').click();\n            await expect(page.getByTestId('modal-impacto-body')).toBeVisible();"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 271,
    "length": 1,
    "text": "// Cenario 3: Abrir modal para editar compet√™ncia",
    "context": "            await expect(modal).toBeHidden();\n        });\n\n        // Cenario 3: Abrir modal para editar compet√™ncia\n        await test.step('Cen√°rio 3: Edi√ß√£o de Compet√™ncia', async () => {\n            const card = page.locator('.competencia-card', {has: page.getByText(competencia1, {exact: true})});\n            await card.hover();"
  },
  {
    "file": "e2e/cdu-16.spec.ts",
    "type": "line",
    "line": 285,
    "length": 1,
    "text": "// Cenario 4: Associar atividade n√£o vinculada a nova compet√™ncia",
    "context": "            await expect(modalCria).toBeHidden();\n        });\n\n        // Cenario 4: Associar atividade n√£o vinculada a nova compet√™ncia\n        await test.step('Cen√°rio 4: Associa√ß√£o de Nova Compet√™ncia', async () => {\n            const novaCompetencia = `Compet√™ncia Nova Ajuste ${timestamp}`;\n            await criarCompetencia(page, novaCompetencia, [atividadeNovaRevisao]);"
  },
  {
    "file": "e2e/cdu-17.spec.ts",
    "type": "line",
    "line": 21,
    "length": 1,
    "text": "// Atividades e compet√™ncias para os testes",
    "context": "    const descProcesso = `Mapeamento CDU-17 ${timestamp}`;\n    let processoId = 0;\n\n    // Atividades e compet√™ncias para os testes\n    const atividade1 = `Atividade 1 ${timestamp}`;\n    const atividade2 = `Atividade 2 ${timestamp}`;\n    const atividade3 = `Atividade 3 ${timestamp}`;"
  },
  {
    "file": "e2e/cdu-17.spec.ts",
    "type": "line",
    "line": 28,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO - Criar mapa pronto para disponibiliza√ß√£o\n// ========================================================================",
    "context": "    const competencia1 = `Compet√™ncia 1 ${timestamp}`;\n    const competencia2 = `Compet√™ncia 2 ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO - Criar mapa pronto para disponibiliza√ß√£o\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo de mapeamento', async ({\n                                                                                page,"
  },
  {
    "file": "e2e/cdu-17.spec.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// Gestor COORD_21",
    "context": "    });\n\n    test('Preparacao 3: Gestores aceitam cadastro', async ({page, autenticadoComoGestorCoord21}) => {\n        // Gestor COORD_21\n        await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page);"
  },
  {
    "file": "e2e/cdu-17.spec.ts",
    "type": "line",
    "line": 86,
    "length": 1,
    "text": "// Gestor SECRETARIA_2",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page);\n\n        // Gestor SECRETARIA_2\n        await loginComPerfil(page, USUARIOS.CHEFE_SECRETARIA_2.titulo, USUARIOS.CHEFE_SECRETARIA_2.senha, 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-17.spec.ts",
    "type": "line",
    "line": 111,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS - CDU-17\n// ========================================================================",
    "context": "        await expect(page.getByTestId('btn-cad-mapa-disponibilizar')).toBeVisible();\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS - CDU-17\n    // ========================================================================\n\n    test('Cen√°rios CDU-17: Fluxo completo de disponibiliza√ß√£o do mapa pelo ADMIN', async ({\n                                                                                              page,"
  },
  {
    "file": "e2e/cdu-17.spec.ts",
    "type": "line",
    "line": 119,
    "length": 1,
    "text": "// Cenario 1: Navega√ß√£o",
    "context": "                                                                                              page,\n                                                                                              autenticadoComoAdmin\n                                                                                          }) => {\n        // Cenario 1: Navega√ß√£o\n        await expect(page.getByTestId('tbl-processos').getByText(descProcesso).first()).toBeVisible();\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n        await navegarParaSubprocesso(page, 'SECAO_211');"
  },
  {
    "file": "e2e/cdu-17.spec.ts",
    "type": "line",
    "line": 128,
    "length": 1,
    "text": "// Cenario 2: Abrir modal",
    "context": "        await expect(page.getByText('Mapa de compet√™ncias t√©cnicas')).toBeVisible();\n        await expect(page.getByTestId('btn-cad-mapa-disponibilizar')).toBeVisible();\n\n        // Cenario 2: Abrir modal\n        await page.getByTestId('btn-cad-mapa-disponibilizar').click();\n        await expect(page.getByTestId('mdl-disponibilizar-mapa')).toBeVisible();\n        await expect(page.getByText('Disponibiliza√ß√£o do mapa')).toBeVisible();"
  },
  {
    "file": "e2e/cdu-17.spec.ts",
    "type": "line",
    "line": 133,
    "length": 1,
    "text": "// Cenario 3: Cancelar",
    "context": "        await expect(page.getByTestId('mdl-disponibilizar-mapa')).toBeVisible();\n        await expect(page.getByText('Disponibiliza√ß√£o do mapa')).toBeVisible();\n\n        // Cenario 3: Cancelar\n        await page.getByTestId('btn-disponibilizar-mapa-cancelar').click();\n        await expect(page.getByTestId('mdl-disponibilizar-mapa')).toBeHidden();\n        await expect(page.getByText('Mapa de compet√™ncias t√©cnicas')).toBeVisible();"
  },
  {
    "file": "e2e/cdu-17.spec.ts",
    "type": "line",
    "line": 138,
    "length": 1,
    "text": "// Cenario 4: Disponibilizar com sucesso",
    "context": "        await expect(page.getByTestId('mdl-disponibilizar-mapa')).toBeHidden();\n        await expect(page.getByText('Mapa de compet√™ncias t√©cnicas')).toBeVisible();\n\n        // Cenario 4: Disponibilizar com sucesso\n        await disponibilizarMapa(page, '2030-12-31');\n        await verificarPaginaPainel(page);\n        await expect(page.getByText(/Mapa disponibilizado/i).first()).toBeVisible();"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 20,
    "length": 1,
    "text": "// J√° autenticado via fixture",
    "context": "\n    test('Cen√°rio 1: ADMIN visualiza mapa via detalhes do processo', async ({page, autenticadoComoAdmin}) => {\n        await test.step('1. Login como ADMIN', async () => {\n            // J√° autenticado via fixture\n        });\n\n        await test.step('2. Navegar para processo finalizado com mapa', async () => {"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Clicar no processo 99 que tem mapa homologado",
    "context": "        });\n\n        await test.step('2. Navegar para processo finalizado com mapa', async () => {\n            // Clicar no processo 99 que tem mapa homologado\n            await page.getByTestId('tbl-processos').getByRole('row', {name: 'Processo 99'}).click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+$/);\n        });"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 34,
    "length": 1,
    "text": "// Verificar navega√ß√£o para detalhes do subprocesso",
    "context": "            await expect(linhaUnidade).toBeVisible();\n            await linhaUnidade.click();\n\n            // Verificar navega√ß√£o para detalhes do subprocesso\n            await expect(page).toHaveURL(/\\/processo\\/\\d+\\/ASSESSORIA_\\d+$/);\n        });\n"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 40,
    "length": 1,
    "text": "// Verificar que card de mapa est√° dispon√≠vel e acess√≠vel",
    "context": "\n\n        await test.step('4. Acessar mapa de compet√™ncias via card', async () => {\n            // Verificar que card de mapa est√° dispon√≠vel e acess√≠vel\n            await navegarParaMapa(page);\n        });\n"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 45,
    "length": 1,
    "text": "// 5.1 T√≠tulo \"Mapa de compet√™ncias t√©cnicas\"",
    "context": "        });\n\n        await test.step('5. Verificar visualiza√ß√£o do mapa (CDU-18)', async () => {\n            // 5.1 T√≠tulo \"Mapa de compet√™ncias t√©cnicas\"\n            await expect(page.getByText('Mapa de compet√™ncias t√©cnicas')).toBeVisible();\n\n            // 5.2 Identifica√ß√£o da unidade (sigla e nome)"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// 5.2 Identifica√ß√£o da unidade (sigla e nome)",
    "context": "            // 5.1 T√≠tulo \"Mapa de compet√™ncias t√©cnicas\"\n            await expect(page.getByText('Mapa de compet√™ncias t√©cnicas')).toBeVisible();\n\n            // 5.2 Identifica√ß√£o da unidade (sigla e nome)\n            await expect(page.getByText(/ASSESSORIA_\\d+\\s*-\\s*Assessoria/i)).toBeVisible();\n\n            // 5.3 Compet√™ncia do seed"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 51,
    "length": 1,
    "text": "// 5.3 Compet√™ncia do seed",
    "context": "            // 5.2 Identifica√ß√£o da unidade (sigla e nome)\n            await expect(page.getByText(/ASSESSORIA_\\d+\\s*-\\s*Assessoria/i)).toBeVisible();\n\n            // 5.3 Compet√™ncia do seed\n            await expect(page.getByText('Compet√™ncia T√©cnica Seed 99')).toBeVisible();\n\n            // 5.4 Atividades da compet√™ncia"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 54,
    "length": 1,
    "text": "// 5.4 Atividades da compet√™ncia",
    "context": "            // 5.3 Compet√™ncia do seed\n            await expect(page.getByText('Compet√™ncia T√©cnica Seed 99')).toBeVisible();\n\n            // 5.4 Atividades da compet√™ncia\n            await expect(page.getByText('Atividade Seed 1')).toBeVisible();\n            await expect(page.getByText('Atividade Seed 2')).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 58,
    "length": 1,
    "text": "// 5.5 Conhecimentos das atividades",
    "context": "            await expect(page.getByText('Atividade Seed 1')).toBeVisible();\n            await expect(page.getByText('Atividade Seed 2')).toBeVisible();\n\n            // 5.5 Conhecimentos das atividades\n            await expect(page.getByText('Conhecimento Seed 1.1')).toBeVisible();\n            await expect(page.getByText('Conhecimento Seed 2.1')).toBeVisible();\n        });"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 66,
    "length": 1,
    "text": "// J√° autenticado via fixture",
    "context": "\n    test('Cen√°rio 2: CHEFE visualiza mapa da pr√≥pria unidade', async ({page, autenticadoComoChefeAssessoria12}) => {\n        await test.step('1. Login como CHEFE_ASSESSORIA_12', async () => {\n            // J√° autenticado via fixture\n        });\n\n        await test.step('2. Navegar para processo via painel', async () => {"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 70,
    "length": 1,
    "text": "// CHEFE v√™ processo no painel e clica",
    "context": "        });\n\n        await test.step('2. Navegar para processo via painel', async () => {\n            // CHEFE v√™ processo no painel e clica\n            await page.getByTestId('tbl-processos').getByRole('row', {name: 'Processo 99'}).click();\n\n            // CHEFE vai direto para detalhes do subprocesso da sua unidade"
  },
  {
    "file": "e2e/cdu-18.spec.ts",
    "type": "line",
    "line": 73,
    "length": 1,
    "text": "// CHEFE vai direto para detalhes do subprocesso da sua unidade",
    "context": "            // CHEFE v√™ processo no painel e clica\n            await page.getByTestId('tbl-processos').getByRole('row', {name: 'Processo 99'}).click();\n\n            // CHEFE vai direto para detalhes do subprocesso da sua unidade\n            await expect(page).toHaveURL(/\\/processo\\/\\d+\\/ASSESSORIA_12$/);\n        });\n"
  },
  {
    "file": "e2e/cdu-19.spec.ts",
    "type": "line",
    "line": 21,
    "length": 1,
    "text": "// Atividades e compet√™ncias para os testes",
    "context": "    const descProcesso = `Mapeamento CDU-19 ${timestamp}`;\n    let processoId = 0;\n\n    // Atividades e compet√™ncias para os testes\n    const atividade1 = `Atividade 1 ${timestamp}`;\n    const atividade2 = `Atividade 2 ${timestamp}`;\n    const competencia1 = `Compet√™ncia 1 ${timestamp}`;"
  },
  {
    "file": "e2e/cdu-19.spec.ts",
    "type": "line",
    "line": 27,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO - Criar mapa disponibilizado para CHEFE validar\n// ========================================================================",
    "context": "    const competencia1 = `Compet√™ncia 1 ${timestamp}`;\n    const competencia2 = `Compet√™ncia 2 ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO - Criar mapa disponibilizado para CHEFE validar\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo de mapeamento', async ({\n                                                                                page,"
  },
  {
    "file": "e2e/cdu-19.spec.ts",
    "type": "line",
    "line": 77,
    "length": 1,
    "text": "// Gestor COORD_22",
    "context": "    });\n\n    test('Preparacao 3: Gestores aceitam cadastro', async ({page, autenticadoComoGestorCoord22}) => {\n        // Gestor COORD_22\n        await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page);"
  },
  {
    "file": "e2e/cdu-19.spec.ts",
    "type": "line",
    "line": 82,
    "length": 1,
    "text": "// Gestor SECRETARIA_2",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page);\n\n        // Gestor SECRETARIA_2\n        await loginComPerfil(page, USUARIOS.CHEFE_SECRETARIA_2.titulo, USUARIOS.CHEFE_SECRETARIA_2.senha, 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcesso, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-19.spec.ts",
    "type": "line",
    "line": 108,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS - CDU-19\n// ========================================================================",
    "context": "        await expect(page.getByText(/Mapa disponibilizado/i)).toBeVisible();\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS - CDU-19\n    // ========================================================================\n\n    test('Cen√°rios CDU-19: Fluxo completo de valida√ß√£o do mapa pelo CHEFE', async ({\n                                                                                       page,"
  },
  {
    "file": "e2e/cdu-19.spec.ts",
    "type": "line",
    "line": 116,
    "length": 1,
    "text": "// Cenario 1: Navega√ß√£o para visualiza√ß√£o do mapa",
    "context": "                                                                                       page,\n                                                                                       autenticadoComoChefeSecao221\n                                                                                   }) => {\n        // Cenario 1: Navega√ß√£o para visualiza√ß√£o do mapa\n        await expect(page.getByTestId('tbl-processos').getByText(descProcesso).first()).toBeVisible();\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n"
  },
  {
    "file": "e2e/cdu-19.spec.ts",
    "type": "line",
    "line": 127,
    "length": 1,
    "text": "// Cenario 2: Cancelar valida√ß√£o",
    "context": "        await expect(page.getByTestId('btn-mapa-sugestoes')).toBeVisible();\n        await expect(page.getByTestId('btn-mapa-validar')).toBeVisible();\n\n        // Cenario 2: Cancelar valida√ß√£o\n        await page.getByTestId('btn-mapa-validar').click();\n        const modal = page.getByRole('dialog');\n        await expect(modal).toBeVisible();"
  },
  {
    "file": "e2e/cdu-19.spec.ts",
    "type": "line",
    "line": 137,
    "length": 1,
    "text": "// Cenario 3: Validar com sucesso",
    "context": "        await expect(page.getByText('Mapa de compet√™ncias t√©cnicas')).toBeVisible();\n        await expect(page.getByTestId('btn-mapa-validar')).toBeVisible();\n\n        // Cenario 3: Validar com sucesso\n        await page.getByTestId('btn-mapa-validar').click();\n        await expect(modal).toBeVisible();\n        await page.getByTestId('btn-validar-mapa-confirmar').click();"
  },
  {
    "file": "e2e/cdu-20.spec.ts",
    "type": "line",
    "line": 73,
    "length": 1,
    "text": "// ADMIN clica na linha do processo no painel primeiro",
    "context": "\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // ADMIN clica na linha do processo no painel primeiro\n            await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n\n            await navegarParaSubprocesso(page, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/cdu-20.spec.ts",
    "type": "line",
    "line": 112,
    "length": 1,
    "text": "// Cancela devolu√ß√£o (passo CDU)",
    "context": "            await expect(page.getByTestId('btn-mapa-historico-gestor')).toBeVisible();\n            await expect(page.getByTestId('btn-mapa-devolver')).toBeVisible();\n\n            // Cancela devolu√ß√£o (passo CDU)\n            await page.getByTestId('btn-mapa-devolver').click();\n            await page.getByTestId('btn-devolucao-mapa-cancelar').click();\n"
  },
  {
    "file": "e2e/cdu-20.spec.ts",
    "type": "line",
    "line": 116,
    "length": 1,
    "text": "// Aceita",
    "context": "            await page.getByTestId('btn-mapa-devolver').click();\n            await page.getByTestId('btn-devolucao-mapa-cancelar').click();\n\n            // Aceita\n            await page.getByTestId('btn-mapa-homologar-aceite').click();\n            await page.getByTestId('btn-aceite-mapa-confirmar').click();\n            await expect(page).toHaveURL(/\\/painel/);"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 27,
    "length": 1,
    "text": "// Atividades e compet√™ncias para os testes",
    "context": "    const descProcesso = `Mapeamento CDU-21 ${timestamp}`;\n    let processoId: number;\n\n    // Atividades e compet√™ncias para os testes\n    const atividade1 = `Atividade 1 ${timestamp}`;\n    const atividade2 = `Atividade 2 ${timestamp}`;\n    const competencia1 = `Compet√™ncia 1 ${timestamp}`;"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 33,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO - Criar mapa homologado para ADMIN finalizar processo\n// ========================================================================",
    "context": "    const competencia1 = `Compet√™ncia 1 ${timestamp}`;\n    const competencia2 = `Compet√™ncia 2 ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO - Criar mapa homologado para ADMIN finalizar processo\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo de mapeamento', async ({\n                                                                                page,"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 182,
    "length": 1,
    "text": "// Verificar que mapa foi homologado",
    "context": "\n        await verificarPaginaPainel(page);\n\n        // Verificar que mapa foi homologado\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n        await navegarParaSubprocesso(page, 'SECAO_221');\n        await expect(page.getByTestId('subprocesso-header__txt-situacao'))"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 189,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS - CDU-21\n// ========================================================================",
    "context": "            .toHaveText(/Mapa homologado/i);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS - CDU-21\n    // ========================================================================\n\n    test('Cenario 1: ADMIN navega para detalhes do processo', async ({page, autenticadoComoAdmin}) => {\n        // CDU-21: Passos 1-2"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 194,
    "length": 1,
    "text": "// CDU-21: Passos 1-2",
    "context": "    // ========================================================================\n\n    test('Cenario 1: ADMIN navega para detalhes do processo', async ({page, autenticadoComoAdmin}) => {\n        // CDU-21: Passos 1-2\n\n\n        // Passo 1: ADMIN clica no processo"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 197,
    "length": 1,
    "text": "// Passo 1: ADMIN clica no processo",
    "context": "        // CDU-21: Passos 1-2\n\n\n        // Passo 1: ADMIN clica no processo\n        await expect(page.getByTestId('tbl-processos').getByText(descProcesso).first()).toBeVisible();\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 201,
    "length": 1,
    "text": "// Passo 2: Sistema exibe tela Detalhes do processo",
    "context": "        await expect(page.getByTestId('tbl-processos').getByText(descProcesso).first()).toBeVisible();\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n\n        // Passo 2: Sistema exibe tela Detalhes do processo\n        await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n\n        // Bot√£o Finalizar vis√≠vel"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 204,
    "length": 1,
    "text": "// Bot√£o Finalizar vis√≠vel",
    "context": "        // Passo 2: Sistema exibe tela Detalhes do processo\n        await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n\n        // Bot√£o Finalizar vis√≠vel\n        await expect(page.getByTestId('btn-processo-finalizar')).toBeVisible();\n    });\n"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 209,
    "length": 1,
    "text": "// CDU-21: Passo 6.1",
    "context": "    });\n\n    test('Cenario 2: ADMIN cancela finaliza√ß√£o - permanece na tela', async ({page, autenticadoComoAdmin}) => {\n        // CDU-21: Passo 6.1\n\n\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 214,
    "length": 1,
    "text": "// Passo 3: Clicar em Finalizar processo",
    "context": "\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n\n        // Passo 3: Clicar em Finalizar processo\n        await page.getByTestId('btn-processo-finalizar').click();\n\n        // Passo 6: Modal de confirma√ß√£o"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 217,
    "length": 1,
    "text": "// Passo 6: Modal de confirma√ß√£o",
    "context": "        // Passo 3: Clicar em Finalizar processo\n        await page.getByTestId('btn-processo-finalizar').click();\n\n        // Passo 6: Modal de confirma√ß√£o\n        const modal = page.getByRole('dialog');\n        await expect(modal).toBeVisible();\n        await expect(modal.getByText(/Confirma a finaliza√ß√£o/i)).toBeVisible();"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 222,
    "length": 1,
    "text": "// Passo 6.1: Cancelar",
    "context": "        await expect(modal).toBeVisible();\n        await expect(modal.getByText(/Confirma a finaliza√ß√£o/i)).toBeVisible();\n\n        // Passo 6.1: Cancelar\n        await page.getByTestId('btn-finalizar-processo-cancelar').click();\n\n        // Permanece na tela de detalhes do processo"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 225,
    "length": 1,
    "text": "// Permanece na tela de detalhes do processo",
    "context": "        // Passo 6.1: Cancelar\n        await page.getByTestId('btn-finalizar-processo-cancelar').click();\n\n        // Permanece na tela de detalhes do processo\n        await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n        await expect(page.getByTestId('btn-processo-finalizar')).toBeVisible();\n    });"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 231,
    "length": 1,
    "text": "// CDU-21: Passos 7-10",
    "context": "    });\n\n    test('Cenario 3: ADMIN finaliza processo com sucesso', async ({page, autenticadoComoAdmin}) => {\n        // CDU-21: Passos 7-10\n\n\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 236,
    "length": 1,
    "text": "// Passo 3: Clicar em Finalizar processo",
    "context": "\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n\n        // Passo 3: Clicar em Finalizar processo\n        await page.getByTestId('btn-processo-finalizar').click();\n\n        // Passo 6: Modal de confirma√ß√£o"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 239,
    "length": 1,
    "text": "// Passo 6: Modal de confirma√ß√£o",
    "context": "        // Passo 3: Clicar em Finalizar processo\n        await page.getByTestId('btn-processo-finalizar').click();\n\n        // Passo 6: Modal de confirma√ß√£o\n        const modal = page.getByRole('dialog');\n        await expect(modal).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 243,
    "length": 1,
    "text": "// Passo 7: ADMIN escolhe Confirmar",
    "context": "        const modal = page.getByRole('dialog');\n        await expect(modal).toBeVisible();\n\n        // Passo 7: ADMIN escolhe Confirmar\n        await page.getByTestId('btn-finalizar-processo-confirmar').click();\n\n        // Passo 10: Redireciona para Painel com mensagem de sucesso"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 246,
    "length": 1,
    "text": "// Passo 10: Redireciona para Painel com mensagem de sucesso",
    "context": "        // Passo 7: ADMIN escolhe Confirmar\n        await page.getByTestId('btn-finalizar-processo-confirmar').click();\n\n        // Passo 10: Redireciona para Painel com mensagem de sucesso\n        await verificarPaginaPainel(page);\n        await expect(page.getByText(/Processo finalizado/i)).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 250,
    "length": 2,
    "text": "// Verificar que processo n√£o aparece mais no painel ativo (foi finalizado)\n// (Processo finalizado n√£o aparece na lista de processos ativos)",
    "context": "        await verificarPaginaPainel(page);\n        await expect(page.getByText(/Processo finalizado/i)).toBeVisible();\n\n        // Verificar que processo n√£o aparece mais no painel ativo (foi finalizado)\n        // (Processo finalizado n√£o aparece na lista de processos ativos)\n    });\n\n    test('Cenario 4: Verificar aus√™ncia de bot√µes em processo finalizado', async ({page, autenticadoComoAdmin}) => {"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 255,
    "length": 1,
    "text": "// Issue #1220: Garantir que bot√µes de a√ß√£o n√£o aparecem para processos finalizados",
    "context": "    });\n\n    test('Cenario 4: Verificar aus√™ncia de bot√µes em processo finalizado', async ({page, autenticadoComoAdmin}) => {\n        // Issue #1220: Garantir que bot√µes de a√ß√£o n√£o aparecem para processos finalizados\n\n        await page.goto(`/processo/${processoId}`);\n"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 269,
    "length": 1,
    "text": "// 4. Entrar em um subprocesso e verificar bot√µes do cabe√ßalho",
    "context": "        await expect(page.getByTestId('btn-acao-bloco-aceitar')).not.toBeVisible();\n        await expect(page.getByTestId('btn-acao-bloco-homologar')).not.toBeVisible();\n\n        // 4. Entrar em um subprocesso e verificar bot√µes do cabe√ßalho\n        await navegarParaSubprocesso(page, 'SECAO_221');\n        await expect(page.getByTestId('btn-enviar-lembrete')).not.toBeVisible();\n        await expect(page.getByTestId('btn-reabrir-cadastro')).not.toBeVisible();"
  },
  {
    "file": "e2e/cdu-21.spec.ts",
    "type": "line",
    "line": 278,
    "length": 1,
    "text": "// Deve aparecer o de visualiza√ß√£o",
    "context": "\n\n        await expect(page.getByTestId('card-subprocesso-atividades')).not.toBeVisible();\n        // Deve aparecer o de visualiza√ß√£o\n        await expect(page.getByTestId('card-subprocesso-atividades-vis')).toBeVisible();\n    });\n});"
  },
  {
    "file": "e2e/cdu-22.spec.ts",
    "type": "line",
    "line": 32,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO\n// ========================================================================",
    "context": "\n    const atividade1 = `Atividade Bloco ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo de mapeamento', async ({\n                                                                                page,"
  },
  {
    "file": "e2e/cdu-22.spec.ts",
    "type": "line",
    "line": 81,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS\n// ========================================================================",
    "context": "        await verificarPaginaPainel(page);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS\n    // ========================================================================\n\n    test('Cenario 1: GESTOR abre modal e cancela aceite em bloco', async ({page, autenticadoComoGestorCoord22}) => {\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();"
  },
  {
    "file": "e2e/cdu-23.spec.ts",
    "type": "line",
    "line": 40,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO\n// ========================================================================",
    "context": "\n    const atividade1 = `Atividade Homol ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n"
  },
  {
    "file": "e2e/cdu-23.spec.ts",
    "type": "line",
    "line": 96,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS\n// ========================================================================",
    "context": "        await aceitarCadastroMapeamento(page);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS\n    // ========================================================================\n\n    test('Cenario 1: ADMIN abre modal e cancela homologa√ß√£o em bloco', async ({page, autenticadoComoAdmin}) => {\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();"
  },
  {
    "file": "e2e/cdu-24.spec.ts",
    "type": "line",
    "line": 41,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO - Criar processo com mapa criado\n// ========================================================================",
    "context": "    const atividade1 = `Atividade Mapa ${timestamp}`;\n    const competencia1 = `Compet√™ncia Mapa ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO - Criar processo com mapa criado\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n"
  },
  {
    "file": "e2e/cdu-24.spec.ts",
    "type": "line",
    "line": 108,
    "length": 1,
    "text": "// Criar compet√™ncias",
    "context": "\n        await expect(page).toHaveURL(/\\/processo\\/\\d+\\/\\w+$/);\n\n        // Criar compet√™ncias\n        await navegarParaMapa(page);\n        await criarCompetencia(page, competencia1, [atividade1]);\n"
  },
  {
    "file": "e2e/cdu-24.spec.ts",
    "type": "line",
    "line": 112,
    "length": 1,
    "text": "// Verificar que mapa foi criado (situa√ß√£o 'Mapa criado')",
    "context": "        await navegarParaMapa(page);\n        await criarCompetencia(page, competencia1, [atividade1]);\n\n        // Verificar que mapa foi criado (situa√ß√£o 'Mapa criado')\n        await page.goto('/painel');\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n        await navegarParaSubprocesso(page, UNIDADE_1);"
  },
  {
    "file": "e2e/cdu-24.spec.ts",
    "type": "line",
    "line": 120,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS - CDU-24\n// ========================================================================",
    "context": "            .toHaveText(/Mapa criado/i);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS - CDU-24\n    // ========================================================================\n\n    test('Cenario 1: ADMIN visualiza bot√£o Disponibilizar Mapas em Bloco', async ({page, autenticadoComoAdmin}) => {\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();"
  },
  {
    "file": "e2e/cdu-25.spec.ts",
    "type": "line",
    "line": 48,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO\n// ========================================================================",
    "context": "    const atividade1 = `Atividade Val ${timestamp}`;\n    const competencia1 = `Compet√™ncia Val ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n"
  },
  {
    "file": "e2e/cdu-25.spec.ts",
    "type": "line",
    "line": 135,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS\n// ========================================================================",
    "context": "        await verificarPaginaPainel(page);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS\n    // ========================================================================\n\n    test('Cenario 1: GESTOR acessa processo com mapa validado', async ({page}) => {\n        await login(page, USUARIOS.GESTOR_COORD_21.titulo, USUARIOS.GESTOR_COORD_21.senha);"
  },
  {
    "file": "e2e/cdu-26.spec.ts",
    "type": "line",
    "line": 47,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO\n// ========================================================================",
    "context": "    const atividade1 = `Atividade Homol ${timestamp}`;\n    const competencia1 = `Compet√™ncia Homol ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n"
  },
  {
    "file": "e2e/cdu-26.spec.ts",
    "type": "line",
    "line": 156,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS\n// ========================================================================",
    "context": "        await verificarPaginaPainel(page);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS\n    // ========================================================================\n\n    test('Cenario 1: ADMIN visualiza bot√£o Homologar Mapa em Bloco', async ({page, autenticadoComoAdmin}) => {\n"
  },
  {
    "file": "e2e/cdu-27.spec.ts",
    "type": "line",
    "line": 27,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO\n// ========================================================================",
    "context": "    const descProcesso = `Mapeamento CDU-27 ${timestamp}`;\n    let processoId: number;\n\n    // ========================================================================\n    // PREPARA√á√ÉO\n    // ========================================================================\n\n    test('Preparacao: Admin cria e inicia processo', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n"
  },
  {
    "file": "e2e/cdu-27.spec.ts",
    "type": "line",
    "line": 54,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS\n// ========================================================================",
    "context": "        await verificarPaginaPainel(page);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS\n    // ========================================================================\n\n    test('Cenario 1: ADMIN navega para detalhes do subprocesso', async ({page, autenticadoComoAdmin}) => {\n        // CDU-27: Passos 1-2"
  },
  {
    "file": "e2e/cdu-27.spec.ts",
    "type": "line",
    "line": 59,
    "length": 1,
    "text": "// CDU-27: Passos 1-2",
    "context": "    // ========================================================================\n\n    test('Cenario 1: ADMIN navega para detalhes do subprocesso', async ({page, autenticadoComoAdmin}) => {\n        // CDU-27: Passos 1-2\n\n\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();"
  },
  {
    "file": "e2e/cdu-27.spec.ts",
    "type": "line",
    "line": 65,
    "length": 1,
    "text": "// Verificar que est√° na p√°gina do subprocesso",
    "context": "        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n        await navegarParaSubprocesso(page, UNIDADE_1);\n\n        // Verificar que est√° na p√°gina do subprocesso\n        await expect(page.getByTestId('subprocesso-header__txt-situacao')).toBeVisible();\n    });\n"
  },
  {
    "file": "e2e/cdu-29.spec.ts",
    "type": "line",
    "line": 16,
    "length": 3,
    "text": "// ========================================================================\n// CEN√ÅRIO 1: Navega√ß√£o para p√°gina de hist√≥rico\n// ========================================================================",
    "context": " */\ntest.describe.serial('CDU-29 - Consultar hist√≥rico de processos', () => {\n\n    // ========================================================================\n    // CEN√ÅRIO 1: Navega√ß√£o para p√°gina de hist√≥rico\n    // ========================================================================\n\n    test('Cenario 1: ADMIN navega para p√°gina de hist√≥rico', async ({page, autenticadoComoAdmin}) => {\n        // CDU-29: Passos 1-2"
  },
  {
    "file": "e2e/cdu-29.spec.ts",
    "type": "line",
    "line": 21,
    "length": 1,
    "text": "// CDU-29: Passos 1-2",
    "context": "    // ========================================================================\n\n    test('Cenario 1: ADMIN navega para p√°gina de hist√≥rico', async ({page, autenticadoComoAdmin}) => {\n        // CDU-29: Passos 1-2\n\n\n        // Passo 1: Clicar em Hist√≥rico na navbar"
  },
  {
    "file": "e2e/cdu-29.spec.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Passo 1: Clicar em Hist√≥rico na navbar",
    "context": "        // CDU-29: Passos 1-2\n\n\n        // Passo 1: Clicar em Hist√≥rico na navbar\n        await page.getByRole('link', {name: /Hist√≥rico/i}).click();\n\n        // Passo 2: Sistema apresenta tela de hist√≥rico"
  },
  {
    "file": "e2e/cdu-29.spec.ts",
    "type": "line",
    "line": 27,
    "length": 1,
    "text": "// Passo 2: Sistema apresenta tela de hist√≥rico",
    "context": "        // Passo 1: Clicar em Hist√≥rico na navbar\n        await page.getByRole('link', {name: /Hist√≥rico/i}).click();\n\n        // Passo 2: Sistema apresenta tela de hist√≥rico\n        await expect(page).toHaveURL(/\\/historico/);\n        await expect(page.getByRole('heading', {name: /Hist√≥rico/i})).toBeVisible();\n    });"
  },
  {
    "file": "e2e/cdu-29.spec.ts",
    "type": "line",
    "line": 35,
    "length": 1,
    "text": "// Navegar para hist√≥rico",
    "context": "    test('Cenario 2: GESTOR pode acessar hist√≥rico', async ({page, autenticadoComoGestor}) => {\n\n\n        // Navegar para hist√≥rico\n        await page.getByRole('link', {name: /Hist√≥rico/i}).click();\n\n        await expect(page).toHaveURL(/\\/historico/);"
  },
  {
    "file": "e2e/cdu-29.spec.ts",
    "type": "line",
    "line": 45,
    "length": 1,
    "text": "// Navegar para hist√≥rico",
    "context": "    test('Cenario 3: CHEFE pode acessar hist√≥rico', async ({page, autenticadoComoChefeSecao121}) => {\n\n\n        // Navegar para hist√≥rico\n        await page.getByRole('link', {name: /Hist√≥rico/i}).click();\n\n        await expect(page).toHaveURL(/\\/historico/);"
  },
  {
    "file": "e2e/cdu-29.spec.ts",
    "type": "line",
    "line": 52,
    "length": 3,
    "text": "// ========================================================================\n// CEN√ÅRIO 4: Verificar estrutura da tabela de processos finalizados\n// ========================================================================",
    "context": "        await expect(page.getByRole('heading', {name: /Hist√≥rico/i})).toBeVisible();\n    });\n\n    // ========================================================================\n    // CEN√ÅRIO 4: Verificar estrutura da tabela de processos finalizados\n    // ========================================================================\n\n    test('Cenario 4: Tabela apresenta colunas corretas', async ({page, autenticadoComoAdmin}) => {\n        // CDU-29: Passo 2 - Verificar colunas da tabela"
  },
  {
    "file": "e2e/cdu-29.spec.ts",
    "type": "line",
    "line": 57,
    "length": 1,
    "text": "// CDU-29: Passo 2 - Verificar colunas da tabela",
    "context": "    // ========================================================================\n\n    test('Cenario 4: Tabela apresenta colunas corretas', async ({page, autenticadoComoAdmin}) => {\n        // CDU-29: Passo 2 - Verificar colunas da tabela\n\n\n        await page.getByRole('link', {name: /Hist√≥rico/i}).click();"
  },
  {
    "file": "e2e/cdu-29.spec.ts",
    "type": "line",
    "line": 63,
    "length": 2,
    "text": "// Verificar que a tabela ou lista est√° presente\n// Colunas esperadas: Processo, Tipo, Finalizado em, Unidades participantes",
    "context": "        await page.getByRole('link', {name: /Hist√≥rico/i}).click();\n        await expect(page).toHaveURL(/\\/historico/);\n\n        // Verificar que a tabela ou lista est√° presente\n        // Colunas esperadas: Processo, Tipo, Finalizado em, Unidades participantes\n        const tabela = page.locator('table');\n        if (await tabela.count() > 0) {\n            const headers = tabela.locator('th');"
  },
  {
    "file": "e2e/cdu-30.spec.ts",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// Cenario 1: Navega√ß√£o para p√°gina de configura√ß√µes",
    "context": "test.describe.serial('CDU-30 - Manter Administradores', () => {\n\n    test('Cen√°rios CDU-30: ADMIN acessa e visualiza lista de administradores', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1: Navega√ß√£o para p√°gina de configura√ß√µes\n        await page.getByTestId('btn-configuracoes').click();\n        await expect(page).toHaveURL(/\\/configuracoes/);\n"
  },
  {
    "file": "e2e/cdu-30.spec.ts",
    "type": "line",
    "line": 18,
    "length": 1,
    "text": "// Cenario 2: P√°gina cont√©m se√ß√£o de administradores",
    "context": "        await page.getByTestId('btn-configuracoes').click();\n        await expect(page).toHaveURL(/\\/configuracoes/);\n\n        // Cenario 2: P√°gina cont√©m se√ß√£o de administradores\n        await expect(page.getByRole('heading', {name: /Administradores/i})).toBeVisible();\n\n        // Cenario 3: Lista de administradores √© exibida com dados e bot√£o de adi√ß√£o"
  },
  {
    "file": "e2e/cdu-30.spec.ts",
    "type": "line",
    "line": 21,
    "length": 1,
    "text": "// Cenario 3: Lista de administradores √© exibida com dados e bot√£o de adi√ß√£o",
    "context": "        // Cenario 2: P√°gina cont√©m se√ß√£o de administradores\n        await expect(page.getByRole('heading', {name: /Administradores/i})).toBeVisible();\n\n        // Cenario 3: Lista de administradores √© exibida com dados e bot√£o de adi√ß√£o\n        const tabela = page.locator('main table');\n        await expect(tabela).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-30.spec.ts",
    "type": "line",
    "line": 25,
    "length": 1,
    "text": "// Verificar que tabela tem dados (pelo menos o pr√≥prio admin)",
    "context": "        const tabela = page.locator('main table');\n        await expect(tabela).toBeVisible();\n\n        // Verificar que tabela tem dados (pelo menos o pr√≥prio admin)\n        const linhas = tabela.locator('tbody tr');\n        await expect(linhas.count()).not.toBe(0);\n"
  },
  {
    "file": "e2e/cdu-30.spec.ts",
    "type": "line",
    "line": 29,
    "length": 1,
    "text": "// Verificar bot√£o de adicionar administrador",
    "context": "        const linhas = tabela.locator('tbody tr');\n        await expect(linhas.count()).not.toBe(0);\n\n        // Verificar bot√£o de adicionar administrador\n        const btnAdicionar = page.getByRole('button', {name: /Adicionar|Novo/i});\n        await expect(btnAdicionar).toBeVisible();\n        await expect(btnAdicionar).toBeEnabled();"
  },
  {
    "file": "e2e/cdu-31.spec.ts",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// Cenario 1: Navega√ß√£o para configura√ß√µes",
    "context": "test.describe.serial('CDU-31 - Configurar sistema', () => {\n\n    test('Cen√°rios CDU-31: ADMIN navega e altera configura√ß√µes do sistema', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1: Navega√ß√£o para configura√ß√µes\n        await page.getByTestId('btn-configuracoes').click();\n        await expect(page).toHaveURL(/\\/configuracoes/);\n        await expect(page.getByRole('heading', {name: 'Configura√ß√µes', exact: true})).toBeVisible();"
  },
  {
    "file": "e2e/cdu-31.spec.ts",
    "type": "line",
    "line": 19,
    "length": 1,
    "text": "// Cenario 2: Visualizar configura√ß√µes edit√°veis",
    "context": "        await expect(page).toHaveURL(/\\/configuracoes/);\n        await expect(page.getByRole('heading', {name: 'Configura√ß√µes', exact: true})).toBeVisible();\n\n        // Cenario 2: Visualizar configura√ß√µes edit√°veis\n        const formInputs = page.locator('input[type=\"number\"], input[type=\"text\"]');\n        await expect(formInputs.first()).toBeVisible();\n        await expect(page.getByRole('button', {name: /Salvar/i})).toBeVisible();"
  },
  {
    "file": "e2e/cdu-31.spec.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Cenario 3: Salvar configura√ß√µes",
    "context": "        await expect(formInputs.first()).toBeVisible();\n        await expect(page.getByRole('button', {name: /Salvar/i})).toBeVisible();\n\n        // Cenario 3: Salvar configura√ß√µes\n        const primeiroInput = page.locator('input[type=\"number\"]').first();\n        if (await primeiroInput.count() > 0) {\n            await primeiroInput.clear();"
  },
  {
    "file": "e2e/cdu-32.spec.ts",
    "type": "line",
    "line": 34,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO\n// ========================================================================",
    "context": "\n    const atividade1 = `Atividade Reabrir ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n        await criarProcesso(page, {"
  },
  {
    "file": "e2e/cdu-32.spec.ts",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Aceite COORD_22",
    "context": "                                                                                   page,\n                                                                                   autenticadoComoGestorCoord22\n                                                                               }) => {\n        // Aceite COORD_22\n        await acessarSubprocessoGestor(page, descProcesso, UNIDADE_1);\n        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page, 'Aceite intermedi√°rio COORD_22');"
  },
  {
    "file": "e2e/cdu-32.spec.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// Aceite SECRETARIA_2",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page, 'Aceite intermedi√°rio COORD_22');\n\n        // Aceite SECRETARIA_2\n        await loginComPerfil(page, USUARIOS.CHEFE_SECRETARIA_2.titulo, USUARIOS.CHEFE_SECRETARIA_2.senha, 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descProcesso, UNIDADE_1);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-32.spec.ts",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// ADMIN homologa",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page, 'Aceite intermedi√°rio SECRETARIA_2');\n\n        // ADMIN homologa\n        await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n        await navegarParaSubprocesso(page, UNIDADE_1);"
  },
  {
    "file": "e2e/cdu-32.spec.ts",
    "type": "line",
    "line": 95,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS\n// ========================================================================",
    "context": "        await homologarCadastroMapeamento(page);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS\n    // ========================================================================\n\n    test('Cen√°rios CDU-32: ADMIN reabre cadastro', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1 & 2: Navega√ß√£o e visualiza√ß√£o do bot√£o"
  },
  {
    "file": "e2e/cdu-32.spec.ts",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Cenario 1 & 2: Navega√ß√£o e visualiza√ß√£o do bot√£o",
    "context": "    // ========================================================================\n\n    test('Cen√°rios CDU-32: ADMIN reabre cadastro', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1 & 2: Navega√ß√£o e visualiza√ß√£o do bot√£o\n        await page.getByTestId('tbl-processos').getByText(descProcesso).first().click();\n        await navegarParaSubprocesso(page, UNIDADE_1);\n"
  },
  {
    "file": "e2e/cdu-32.spec.ts",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Cenario 3: Abrir modal e cancelar",
    "context": "        await expect(btnReabrir).toBeVisible();\n        await expect(btnReabrir).toBeEnabled();\n\n        // Cenario 3: Abrir modal e cancelar\n        await btnReabrir.click();\n        const modal = page.getByRole('dialog');\n        await expect(modal).toBeVisible();"
  },
  {
    "file": "e2e/cdu-32.spec.ts",
    "type": "line",
    "line": 118,
    "length": 1,
    "text": "// Cenario 4: Bot√£o confirmar desabilitado sem justificativa",
    "context": "        await modal.getByRole('button', {name: /Cancelar/i}).click();\n        await expect(modal).toBeHidden();\n\n        // Cenario 4: Bot√£o confirmar desabilitado sem justificativa\n        await btnReabrir.click();\n        await expect(page.getByTestId('btn-confirmar-reabrir')).toBeDisabled();\n        await page.getByTestId('inp-justificativa-reabrir').fill('Justificativa de teste');"
  },
  {
    "file": "e2e/cdu-32.spec.ts",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Cenario 5: Confirmar reabertura",
    "context": "        await page.getByTestId('inp-justificativa-reabrir').fill('Justificativa de teste');\n        await expect(page.getByTestId('btn-confirmar-reabrir')).toBeEnabled();\n\n        // Cenario 5: Confirmar reabertura\n        await page.getByTestId('btn-confirmar-reabrir').click();\n\n        await expect(page.getByText(/Cadastro reaberto/i).first()).toBeVisible();"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 35,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO 0 - CRIAR MAPA VIGENTE\n// ========================================================================",
    "context": "    const descMapeamento = `Mapeamento Pre-CDU-33 ${timestamp}`;\n    const descRevisao = `Revis√£o CDU-33 ${timestamp}`;\n\n    // ========================================================================\n    // PREPARA√á√ÉO 0 - CRIAR MAPA VIGENTE\n    // ========================================================================\n\n    test('Preparacao 0: Criar e finalizar Mapeamento', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n        test.setTimeout(90000);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 57,
    "length": 1,
    "text": "// 2. Chefe (SECAO_212) disponibiliza cadastro",
    "context": "        await page.getByTestId('btn-processo-iniciar').click();\n        await page.getByTestId('btn-iniciar-processo-confirmar').click();\n\n        // 2. Chefe (SECAO_212) disponibiliza cadastro\n        await login(page, USUARIOS.CHEFE_SECAO_212.titulo, USUARIOS.CHEFE_SECAO_212.senha);\n        await acessarSubprocessoChefeDireto(page, descMapeamento);\n        await navegarParaAtividades(page);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 66,
    "length": 1,
    "text": "// 3. Gestores aceitam cadastro",
    "context": "        await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n        await page.getByTestId('btn-confirmar-disponibilizacao').click();\n\n        // 3. Gestores aceitam cadastro\n        await login(page, USUARIOS.GESTOR_COORD_21.titulo, USUARIOS.GESTOR_COORD_21.senha);\n        await acessarSubprocessoGestor(page, descMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 77,
    "length": 1,
    "text": "// 4. Admin homologa cadastro e disponibiliza mapa",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarCadastroMapeamento(page);\n\n        // 4. Admin homologa cadastro e disponibiliza mapa\n        await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n        await acessarSubprocessoChefeDireto(page, descMapeamento, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// 5. Chefe valida mapa",
    "context": "        await criarCompetencia(page, `Comp Map ${timestamp}`, [`Ativ Map ${timestamp}`]);\n        await disponibilizarMapa(page, '2030-12-31');\n\n        // 5. Chefe valida mapa\n        await login(page, USUARIOS.CHEFE_SECAO_212.titulo, USUARIOS.CHEFE_SECAO_212.senha);\n        await acessarSubprocessoChefeDireto(page, descMapeamento);\n        await navegarParaMapa(page);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 94,
    "length": 1,
    "text": "// 6. Gestores aceitam mapa",
    "context": "        await page.getByTestId('btn-mapa-validar').click();\n        await page.getByTestId('btn-validar-mapa-confirmar').click();\n\n        // 6. Gestores aceitam mapa\n        await login(page, USUARIOS.GESTOR_COORD_21.titulo, USUARIOS.GESTOR_COORD_21.senha);\n        await acessarSubprocessoGestor(page, descMapeamento, UNIDADE_ALVO);\n        await navegarParaMapa(page);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 107,
    "length": 1,
    "text": "// 7. Admin homologa mapa e finaliza processo",
    "context": "        await page.getByTestId('btn-mapa-homologar-aceite').click();\n        await page.getByTestId('btn-aceite-mapa-confirmar').click();\n\n        // 7. Admin homologa mapa e finaliza processo\n        await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n        await acessarSubprocessoChefeDireto(page, descMapeamento, UNIDADE_ALVO);\n        await navegarParaMapa(page);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 120,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO REVIS√ÉO\n// ========================================================================",
    "context": "        await page.getByTestId('btn-finalizar-processo-confirmar').click();\n    });\n\n    // ========================================================================\n    // PREPARA√á√ÉO REVIS√ÉO\n    // ========================================================================\n\n    test('Preparacao 1: Admin cria e inicia processo de REVISAO', async ({\n                                                                             page,"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 163,
    "length": 1,
    "text": "// Gestor COORD_21",
    "context": "    });\n\n    test('Preparacao 3: Gestores e ADMIN aceitam revis√£o', async ({page, autenticadoComoGestorCoord21}) => {\n        // Gestor COORD_21\n        await acessarSubprocessoGestor(page, descRevisao, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);\n        await aceitarRevisao(page);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 168,
    "length": 1,
    "text": "// Gestor SECRETARIA_2",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarRevisao(page);\n\n        // Gestor SECRETARIA_2\n        await loginComPerfil(page, USUARIOS.CHEFE_SECRETARIA_2.titulo, USUARIOS.CHEFE_SECRETARIA_2.senha, 'GESTOR - SECRETARIA_2');\n        await acessarSubprocessoGestor(page, descRevisao, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 174,
    "length": 1,
    "text": "// ADMIN homologa",
    "context": "        await navegarParaAtividadesVisualizacao(page);\n        await aceitarRevisao(page);\n\n        // ADMIN homologa\n        await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n        await acessarSubprocessoChefeDireto(page, descRevisao, UNIDADE_ALVO);\n        await navegarParaAtividadesVisualizacao(page);"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 184,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS\n// ========================================================================",
    "context": "            .toHaveText(/Revis√£o do cadastro homologada/i);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS\n    // ========================================================================\n\n    test('Cen√°rios CDU-33: ADMIN reabre revis√£o de cadastro', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1 & 2: Navega√ß√£o e visualiza√ß√£o do bot√£o"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 189,
    "length": 1,
    "text": "// Cenario 1 & 2: Navega√ß√£o e visualiza√ß√£o do bot√£o",
    "context": "    // ========================================================================\n\n    test('Cen√°rios CDU-33: ADMIN reabre revis√£o de cadastro', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1 & 2: Navega√ß√£o e visualiza√ß√£o do bot√£o\n        await acessarSubprocessoChefeDireto(page, descRevisao, UNIDADE_ALVO);\n\n        const btnReabrir = page.getByTestId('btn-reabrir-revisao');"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 196,
    "length": 1,
    "text": "// Cenario 3: Abrir modal",
    "context": "        await expect(btnReabrir).toBeVisible();\n        await expect(btnReabrir).toBeEnabled();\n\n        // Cenario 3: Abrir modal\n        await btnReabrir.click();\n\n        const modal = page.getByRole('dialog');"
  },
  {
    "file": "e2e/cdu-33.spec.ts",
    "type": "line",
    "line": 203,
    "length": 1,
    "text": "// Cenario 4: Confirmar reabertura",
    "context": "        await expect(modal).toBeVisible();\n        await expect(modal.getByRole('heading', {name: /Reabrir Revis√£o/i})).toBeVisible();\n\n        // Cenario 4: Confirmar reabertura\n        await page.getByTestId('inp-justificativa-reabrir').fill('Ajuste necess√°rio');\n        await page.getByTestId('btn-confirmar-reabrir').click();\n"
  },
  {
    "file": "e2e/cdu-34.spec.ts",
    "type": "line",
    "line": 26,
    "length": 3,
    "text": "// ========================================================================\n// PREPARA√á√ÉO\n// ========================================================================",
    "context": "    const descProcesso = `Mapeamento CDU-34 ${timestamp}`;\n    let processoId: number;\n\n    // ========================================================================\n    // PREPARA√á√ÉO\n    // ========================================================================\n\n    test('Preparacao: Admin cria e inicia processo', async ({page, autenticadoComoAdmin, cleanupAutomatico}) => {\n        await criarProcesso(page, {"
  },
  {
    "file": "e2e/cdu-34.spec.ts",
    "type": "line",
    "line": 50,
    "length": 3,
    "text": "// ========================================================================\n// TESTES PRINCIPAIS\n// ========================================================================",
    "context": "        await verificarPaginaPainel(page);\n    });\n\n    // ========================================================================\n    // TESTES PRINCIPAIS\n    // ========================================================================\n\n    test('Cenario principal: ADMIN envia lembrete e sistema registra hist√≥rico/alerta', async ({\n                                                                                                   page,"
  },
  {
    "file": "e2e/cdu-35.spec.ts",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// Cenario 1: Navega√ß√£o para p√°gina de relat√≥rios",
    "context": "test.describe.serial('CDU-35 - Gerar relat√≥rio de andamento', () => {\n\n    test('Cen√°rios CDU-35: ADMIN navega e gera relat√≥rios de andamento', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1: Navega√ß√£o para p√°gina de relat√≥rios\n        await page.getByRole('link', {name: /Relat√≥rios/i}).click();\n        await expect(page).toHaveURL(/\\/relatorios/);\n        await expect(page.getByRole('heading', {name: /Relat√≥rios/i})).toBeVisible();"
  },
  {
    "file": "e2e/cdu-35.spec.ts",
    "type": "line",
    "line": 19,
    "length": 1,
    "text": "// Cenario 6: Filtros est√£o dispon√≠veis",
    "context": "        await expect(page).toHaveURL(/\\/relatorios/);\n        await expect(page.getByRole('heading', {name: /Relat√≥rios/i})).toBeVisible();\n\n        // Cenario 6: Filtros est√£o dispon√≠veis\n        await expect(page.getByLabel('Filtrar por Tipo')).toBeVisible();\n        await expect(page.getByLabel('Data In√≠cio')).toBeVisible();\n        await expect(page.getByLabel('Data Fim')).toBeVisible();"
  },
  {
    "file": "e2e/cdu-35.spec.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Cenario 2: Exibir card de relat√≥rio de andamento",
    "context": "        await expect(page.getByLabel('Data In√≠cio')).toBeVisible();\n        await expect(page.getByLabel('Data Fim')).toBeVisible();\n\n        // Cenario 2: Exibir card de relat√≥rio de andamento\n        await expect(page.getByTestId('card-relatorio-andamento')).toBeVisible();\n\n        // Cenario 3: Abrir modal de Andamento Geral"
  },
  {
    "file": "e2e/cdu-35.spec.ts",
    "type": "line",
    "line": 27,
    "length": 1,
    "text": "// Cenario 3: Abrir modal de Andamento Geral",
    "context": "        // Cenario 2: Exibir card de relat√≥rio de andamento\n        await expect(page.getByTestId('card-relatorio-andamento')).toBeVisible();\n\n        // Cenario 3: Abrir modal de Andamento Geral\n        await page.getByTestId('card-relatorio-andamento').click();\n        const modal = page.getByRole('dialog');\n        await expect(modal).toBeVisible();"
  },
  {
    "file": "e2e/cdu-35.spec.ts",
    "type": "line",
    "line": 33,
    "length": 1,
    "text": "// Cenario 4: Modal cont√©m tabela de dados",
    "context": "        await expect(modal).toBeVisible();\n        await expect(modal.getByRole('heading', {name: /Andamento Geral/i})).toBeVisible();\n\n        // Cenario 4: Modal cont√©m tabela de dados\n        const tabela = modal.locator('table');\n        await expect(tabela).toBeVisible();\n"
  },
  {
    "file": "e2e/cdu-35.spec.ts",
    "type": "line",
    "line": 37,
    "length": 1,
    "text": "// Cenario 5: Bot√£o de exporta√ß√£o est√° dispon√≠vel",
    "context": "        const tabela = modal.locator('table');\n        await expect(tabela).toBeVisible();\n\n        // Cenario 5: Bot√£o de exporta√ß√£o est√° dispon√≠vel\n        await expect(page.getByRole('button', {name: /Exportar CSV/i})).toBeVisible();\n    });\n});"
  },
  {
    "file": "e2e/cdu-36.spec.ts",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// Cenario 1: Navega√ß√£o para p√°gina de relat√≥rios",
    "context": "test.describe.serial('CDU-36 - Gerar relat√≥rio de mapas', () => {\n\n    test('Cen√°rios CDU-36: ADMIN navega e gera relat√≥rios de mapas', async ({page, autenticadoComoAdmin}) => {\n        // Cenario 1: Navega√ß√£o para p√°gina de relat√≥rios\n        await page.getByRole('link', {name: /Relat√≥rios/i}).click();\n        await expect(page).toHaveURL(/\\/relatorios/);\n        await expect(page.getByRole('heading', {name: /Relat√≥rios/i})).toBeVisible();"
  },
  {
    "file": "e2e/cdu-36.spec.ts",
    "type": "line",
    "line": 19,
    "length": 1,
    "text": "// Cenario 2: Exibir card de relat√≥rio de mapas",
    "context": "        await expect(page).toHaveURL(/\\/relatorios/);\n        await expect(page.getByRole('heading', {name: /Relat√≥rios/i})).toBeVisible();\n\n        // Cenario 2: Exibir card de relat√≥rio de mapas\n        await expect(page.getByTestId('card-relatorio-mapas')).toBeVisible();\n\n        // Cenario 3: Abrir modal de Mapas Vigentes"
  },
  {
    "file": "e2e/cdu-36.spec.ts",
    "type": "line",
    "line": 22,
    "length": 1,
    "text": "// Cenario 3: Abrir modal de Mapas Vigentes",
    "context": "        // Cenario 2: Exibir card de relat√≥rio de mapas\n        await expect(page.getByTestId('card-relatorio-mapas')).toBeVisible();\n\n        // Cenario 3: Abrir modal de Mapas Vigentes\n        await page.getByTestId('card-relatorio-mapas').click();\n        const modal = page.getByRole('dialog');\n        await expect(modal).toBeVisible();"
  },
  {
    "file": "e2e/cdu-36.spec.ts",
    "type": "line",
    "line": 28,
    "length": 1,
    "text": "// Cenario 4: Bot√£o de exporta√ß√£o est√° dispon√≠vel",
    "context": "        await expect(modal).toBeVisible();\n        await expect(modal.getByRole('heading', {name: /Mapas Vigentes/i})).toBeVisible();\n\n        // Cenario 4: Bot√£o de exporta√ß√£o est√° dispon√≠vel\n        await expect(page.getByRole('button', {name: /Exportar CSV/i})).toBeVisible();\n    });\n});"
  },
  {
    "file": "e2e/fixtures/base.ts",
    "type": "line",
    "line": 2,
    "length": 1,
    "text": "// Use the project's centralized logger for consistent formatting",
    "context": "import {test as base} from '@playwright/test';\n// Use the project's centralized logger for consistent formatting\nimport logger from '../../frontend/src/utils/logger.js';\n\nexport const test = base.extend({"
  },
  {
    "file": "e2e/fixtures/base.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Listener para logs do console",
    "context": "\nexport const test = base.extend({\n    page: async ({page}, use) => {\n        // Listener para logs do console\n        page.on('console', async msg => {\n            const text = msg.text();\n            // Filtrar logs de conex√£o do Vite para reduzir ru√≠do"
  },
  {
    "file": "e2e/fixtures/base.ts",
    "type": "line",
    "line": 10,
    "length": 1,
    "text": "// Filtrar logs de conex√£o do Vite para reduzir ru√≠do",
    "context": "        // Listener para logs do console\n        page.on('console', async msg => {\n            const text = msg.text();\n            // Filtrar logs de conex√£o do Vite para reduzir ru√≠do\n            if (text.includes('[vite] connecting...') || text.includes('[vite] connected.')) {\n                return;\n            }"
  },
  {
    "file": "e2e/fixtures/base.ts",
    "type": "line",
    "line": 17,
    "length": 1,
    "text": "// Tenta expandir argumentos se forem objetos (ex: AxiosError)",
    "context": "\n            const type = String(msg.type());\n\n            // Tenta expandir argumentos se forem objetos (ex: AxiosError)\n            let expandedArgs: string;\n            try {\n                const args = await Promise.all(msg.args().map(arg => arg.jsonValue().catch(() => null)));"
  },
  {
    "file": "e2e/fixtures/base.ts",
    "type": "line",
    "line": 23,
    "length": 1,
    "text": "// Se for um erro do Axios, tenta extrair detalhes √∫teis",
    "context": "                const args = await Promise.all(msg.args().map(arg => arg.jsonValue().catch(() => null)));\n                expandedArgs = args.map(a => {\n                    if (a && typeof a === 'object') {\n                        // Se for um erro do Axios, tenta extrair detalhes √∫teis\n                        if (a.code === 'ERR_BAD_REQUEST' || a.isAxiosError || (a.config && a.response)) {\n                            return JSON.stringify({\n                                message: a.message,"
  },
  {
    "file": "e2e/fixtures/base.ts",
    "type": "line",
    "line": 41,
    "length": 1,
    "text": "// Map Playwright console types to logger methods",
    "context": "                expandedArgs = text; // Fallback\n            }\n\n            // Map Playwright console types to logger methods\n            if (type === 'error') {\n                logger.error(`[BROWSER ${type.toUpperCase()}] ${expandedArgs || text}`);\n            } else if (type === 'warning' || type === 'warn') {"
  },
  {
    "file": "e2e/fixtures/base.ts",
    "type": "line",
    "line": 51,
    "length": 1,
    "text": "// Listener para erros n√£o tratados da p√°gina",
    "context": "            }\n        });\n\n        // Listener para erros n√£o tratados da p√°gina\n        page.on('pageerror', error => {\n            logger.error(`[BROWSER UNCAUGHT ERROR] ${error && error.stack ? error.stack : error}`);\n        });"
  },
  {
    "file": "e2e/fixtures/base.ts",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Listener para falhas de rede (4xx, 5xx)",
    "context": "            logger.error(`[BROWSER UNCAUGHT ERROR] ${error && error.stack ? error.stack : error}`);\n        });\n\n        // Listener para falhas de rede (4xx, 5xx)\n        page.on('response', async response => {\n            if (response.status() >= 400) {\n                let body: string;"
  },
  {
    "file": "e2e/fixtures/complete-fixtures.ts",
    "type": "line",
    "line": 30,
    "length": 1,
    "text": "// Extend para adicionar cleanup autom√°tico",
    "context": "\nconst arquivosResetados = new Set<string>();\n\n// Extend para adicionar cleanup autom√°tico\nconst test = base.extend<{\n    cleanupAutomatico: ReturnType<typeof useProcessoCleanup>;\n    resetPorArquivo: void;"
  },
  {
    "file": "e2e/fixtures/complete-fixtures.ts",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Cleanup autom√°tico configurado para cada teste",
    "context": "        }\n        await use();\n    }, {auto: true}],\n    // Cleanup autom√°tico configurado para cada teste\n    cleanupAutomatico: async ({request}, use) => {\n        const cleanup = useProcessoCleanup();\n"
  },
  {
    "file": "e2e/fixtures/complete-fixtures.ts",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// Use",
    "context": "    cleanupAutomatico: async ({request}, use) => {\n        const cleanup = useProcessoCleanup();\n\n        // Use\n        await use(cleanup);\n\n        // Limpar ap√≥s o teste"
  },
  {
    "file": "e2e/fixtures/complete-fixtures.ts",
    "type": "line",
    "line": 49,
    "length": 1,
    "text": "// Limpar ap√≥s o teste",
    "context": "        // Use\n        await use(cleanup);\n\n        // Limpar ap√≥s o teste\n        await cleanup.limpar(request);\n    }\n});"
  },
  {
    "file": "e2e/fixtures/database-fixtures.ts",
    "type": "line",
    "line": 27,
    "length": 1,
    "text": "// Hook para reset de database (uma vez por arquivo)",
    "context": "\nlet lastResetFile: string | undefined;\n\n// Hook para reset de database (uma vez por arquivo)\ntest.beforeEach(async ({request}, testInfo) => {\n    if (lastResetFile !== testInfo.file) {\n        await resetDatabase(request);"
  },
  {
    "file": "e2e/fixtures/index.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Re-exportar todas as fixtures",
    "context": " * ```\n */\n\n// Re-exportar todas as fixtures\nexport {test as authTest, expect} from './auth-fixtures.js';\nexport {test as databaseTest} from './database-fixtures.js';\nexport {test as processoTest, criarMultiplosProcessos} from './processo-fixtures.js';"
  },
  {
    "file": "e2e/fixtures/index.ts",
    "type": "line",
    "line": 54,
    "length": 1,
    "text": "// Re-exportar tipos √∫teis",
    "context": "export {test as processoTest, criarMultiplosProcessos} from './processo-fixtures.js';\nexport {test as completeTest} from './complete-fixtures.js';\n\n// Re-exportar tipos √∫teis\nexport type {ProcessoContext} from './processo-fixtures.js';\n\n// Re-exportar fixtures base"
  },
  {
    "file": "e2e/fixtures/index.ts",
    "type": "line",
    "line": 57,
    "length": 1,
    "text": "// Re-exportar fixtures base",
    "context": "// Re-exportar tipos √∫teis\nexport type {ProcessoContext} from './processo-fixtures.js';\n\n// Re-exportar fixtures base\nexport * from './base.js';\nexport * from './fixtures-processos.js';\n"
  },
  {
    "file": "e2e/fixtures/processo-fixtures.ts",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// Setup: criar processo padr√£o",
    "context": " */\nexport const test = base.extend<ProcessoContext>({\n    processoFixture: async ({page, autenticadoComoAdmin}, use, testInfo) => {\n        // Setup: criar processo padr√£o\n        const descricao = `Fixture ${testInfo.title} - ${Date.now()}`;\n\n        await page.getByTestId('btn-painel-criar-processo').click();"
  },
  {
    "file": "e2e/fixtures/processo-fixtures.ts",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// Capturar c√≥digo do processo",
    "context": "            expandir: ['SECRETARIA_1']\n        });\n\n        // Capturar c√≥digo do processo\n        await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n        await page.waitForURL(/processo\\/cadastro\\?codProcesso=\\d+/);\n        const url = new URL(page.url());"
  },
  {
    "file": "e2e/fixtures/processo-fixtures.ts",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Use fixture",
    "context": "\n        await page.goto('/painel');\n\n        // Use fixture\n        await use({codigo, descricao});\n\n        // Cleanup autom√°tico via endpoint E2E"
  },
  {
    "file": "e2e/fixtures/processo-fixtures.ts",
    "type": "line",
    "line": 70,
    "length": 1,
    "text": "// Cleanup autom√°tico via endpoint E2E",
    "context": "        // Use fixture\n        await use({codigo, descricao});\n\n        // Cleanup autom√°tico via endpoint E2E\n        try {\n            const response = await page.request.post(`/e2e/processo/${codigo}/limpar`);\n            if (!response.ok()) {"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 4,
    "length": 1,
    "text": "// Re-exportar para manter compatibilidade com imports existentes",
    "context": "import {expect, type Page} from '@playwright/test';\nimport {verificarPaginaPainel} from './helpers-navegacao.js';\n\n// Re-exportar para manter compatibilidade com imports existentes\n\n\n/**"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 11,
    "length": 3,
    "text": "// ============================================================================\n// Fun√ß√µes de Navega√ß√£o\n// ============================================================================",
    "context": " * Helpers para an√°lise de cadastro de atividades (CDU-13 e CDU-14)\n */\n\n// ============================================================================\n// Fun√ß√µes de Navega√ß√£o\n// ============================================================================\n\n/**\n * Acessa subprocesso como GESTOR (via lista de unidades)"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 39,
    "length": 1,
    "text": "// Fallback original para casos sem sigla ou falha na extra√ß√£o",
    "context": "        }\n    }\n\n    // Fallback original para casos sem sigla ou falha na extra√ß√£o\n    const headingUnidades = page.getByRole('heading', {name: /Unidades participantes/i});\n    if (await headingUnidades.isVisible().catch(() => false)) {\n        const tabela = page.getByTestId('tbl-tree');"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 62,
    "length": 1,
    "text": "// Garantir que estamos no painel e que carregou",
    "context": " * Acessa subprocesso como CHEFE (vai direto ao subprocesso)\n */\nexport async function acessarSubprocessoChefeDireto(page: Page, descricaoProcesso: string, siglaUnidade: string = '') {\n    // Garantir que estamos no painel e que carregou\n    await expect(page).toHaveURL(/\\/painel$/);\n\n    // Aguardar o processo aparecer na tabela antes de clicar"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 65,
    "length": 1,
    "text": "// Aguardar o processo aparecer na tabela antes de clicar",
    "context": "    // Garantir que estamos no painel e que carregou\n    await expect(page).toHaveURL(/\\/painel$/);\n\n    // Aguardar o processo aparecer na tabela antes de clicar\n    const linhaProcesso = page.getByTestId('tbl-processos').locator('tr', {has: page.getByText(descricaoProcesso)});\n    await expect(linhaProcesso).toBeVisible();\n"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 69,
    "length": 1,
    "text": "// Clicar na linha da tabela que cont√©m o processo",
    "context": "    const linhaProcesso = page.getByTestId('tbl-processos').locator('tr', {has: page.getByText(descricaoProcesso)});\n    await expect(linhaProcesso).toBeVisible();\n\n    // Clicar na linha da tabela que cont√©m o processo\n    await linhaProcesso.click();\n\n    // Aguardar navega√ß√£o para uma p√°gina de processo"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 72,
    "length": 1,
    "text": "// Aguardar navega√ß√£o para uma p√°gina de processo",
    "context": "    // Clicar na linha da tabela que cont√©m o processo\n    await linhaProcesso.click();\n\n    // Aguardar navega√ß√£o para uma p√°gina de processo\n    await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n\n    // Navega√ß√£o robusta: extrair ID e navegar explicitamente se necess√°rio"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 75,
    "length": 1,
    "text": "// Navega√ß√£o robusta: extrair ID e navegar explicitamente se necess√°rio",
    "context": "    // Aguardar navega√ß√£o para uma p√°gina de processo\n    await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n\n    // Navega√ß√£o robusta: extrair ID e navegar explicitamente se necess√°rio\n    if (siglaUnidade) {\n        const match = /\\/processo\\/(\\d+)/.exec(page.url());\n        if (match) {"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// Se ainda n√£o estiver na URL correta, for√ßar navega√ß√£o",
    "context": "        if (match) {\n            const processoId = match[1];\n            const targetUrl = `/processo/${processoId}/${siglaUnidade}`;\n            // Se ainda n√£o estiver na URL correta, for√ßar navega√ß√£o\n            if (!page.url().endsWith(`/${siglaUnidade}`)) {\n                await page.goto(targetUrl);\n            }"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 109,
    "length": 1,
    "text": "// Navega√ß√£o robusta: extrair ID e navegar explicitamente",
    "context": "    const headingUnidades = page.getByRole('heading', {name: /Unidades participantes/i});\n    await expect(headingUnidades).toBeVisible();\n\n    // Navega√ß√£o robusta: extrair ID e navegar explicitamente\n    if (siglaUnidade) {\n        const match = /\\/processo\\/(\\d+)/.exec(page.url());\n        if (match) {"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 118,
    "length": 1,
    "text": "// Fallback se n√£o conseguir extrair ID (improv√°vel)",
    "context": "            await page.goto(targetUrl);\n            await expect(page).toHaveURL(new RegExp(String.raw`/processo/\\d+/${siglaUnidade}$`));\n        } else {\n            // Fallback se n√£o conseguir extrair ID (improv√°vel)\n            const row = page.locator('tr').filter({hasText: new RegExp(String.raw`^\\s*${siglaUnidade}(?:\\s+-\\s+|\\b)`, 'i')}).first();\n            await expect(row).toBeVisible();\n            await row.click({force: true});"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 129,
    "length": 3,
    "text": "// ============================================================================\n// Fun√ß√µes de Hist√≥rico de An√°lise\n// ============================================================================",
    "context": "    }\n}\n\n// ============================================================================\n// Fun√ß√µes de Hist√≥rico de An√°lise\n// ============================================================================\n\n/**\n * Abre modal de hist√≥rico de an√°lise (tela de edi√ß√£o - CadAtividades)"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 137,
    "length": 1,
    "text": "// Dropdown \"Mais a√ß√µes\" deve ser aberto primeiro",
    "context": " * Abre modal de hist√≥rico de an√°lise (tela de edi√ß√£o - CadAtividades)\n */\nexport async function abrirHistoricoAnalise(page: Page) {\n    // Dropdown \"Mais a√ß√µes\" deve ser aberto primeiro\n    await page.getByTestId('btn-mais-acoes').click();\n    // Aguardar o item do menu estar vis√≠vel\n    const itemHistorico = page.getByTestId('btn-cad-atividades-historico');"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 139,
    "length": 1,
    "text": "// Aguardar o item do menu estar vis√≠vel",
    "context": "export async function abrirHistoricoAnalise(page: Page) {\n    // Dropdown \"Mais a√ß√µes\" deve ser aberto primeiro\n    await page.getByTestId('btn-mais-acoes').click();\n    // Aguardar o item do menu estar vis√≠vel\n    const itemHistorico = page.getByTestId('btn-cad-atividades-historico');\n    await expect(itemHistorico).toBeVisible();\n    await itemHistorico.click();"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 167,
    "length": 3,
    "text": "// ============================================================================\n// Fun√ß√µes de Devolu√ß√£o\n// ============================================================================",
    "context": "    await expect(page.locator('.modal-content').filter({hasText: 'Hist√≥rico de An√°lise'})).toBeHidden();\n}\n\n// ============================================================================\n// Fun√ß√µes de Devolu√ß√£o\n// ============================================================================\n\n/**\n * Fun√ß√£o gen√©rica para devolu√ß√£o de cadastro/revis√£o"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 208,
    "length": 1,
    "text": "// Verificar modal de devolu√ß√£o",
    "context": "export async function cancelarDevolucao(page: Page) {\n    await page.getByTestId('btn-acao-devolver').click();\n\n    // Verificar modal de devolu√ß√£o\n    await expect(page.getByRole('dialog')).toBeVisible();\n\n    await page.getByRole('button', {name: 'Cancelar'}).click();"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 213,
    "length": 1,
    "text": "// Verificar que modal fechou",
    "context": "\n    await page.getByRole('button', {name: 'Cancelar'}).click();\n\n    // Verificar que modal fechou\n    await expect(page.getByRole('dialog')).toBeHidden();\n}\n"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 217,
    "length": 3,
    "text": "// ============================================================================\n// Fun√ß√µes de Aceite (GESTOR)\n// ============================================================================",
    "context": "    await expect(page.getByRole('dialog')).toBeHidden();\n}\n\n// ============================================================================\n// Fun√ß√µes de Aceite (GESTOR)\n// ============================================================================\n\n/**\n * Fun√ß√£o gen√©rica para aceite de cadastro/revis√£o (GESTOR)"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 251,
    "length": 3,
    "text": "// ============================================================================\n// Fun√ß√µes de Homologa√ß√£o (ADMIN)\n// ============================================================================",
    "context": "    await realizarAceite(page, /Revis√£o aceita/i, observacao);\n}\n\n// ============================================================================\n// Fun√ß√µes de Homologa√ß√£o (ADMIN)\n// ============================================================================\n\n/**\n * Homologa cadastro (ADMIN) - Mapeamento"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 261,
    "length": 1,
    "text": "// Modal: \"Homologa√ß√£o do cadastro de atividades e conhecimentos\"",
    "context": "export async function homologarCadastroMapeamento(page: Page) {\n    await page.getByTestId('btn-acao-analisar-principal').click();\n\n    // Modal: \"Homologa√ß√£o do cadastro de atividades e conhecimentos\"\n    await expect(page.getByRole('dialog')).toBeVisible();\n    await expect(page.getByText(/Confirma a homologa√ß√£o do cadastro de atividades e conhecimentos/i)).toBeVisible();\n"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 270,
    "length": 1,
    "text": "// Sistema redireciona para Detalhes do subprocesso ap√≥s homologa√ß√£o (CDU-13 passo 11.7)",
    "context": "    await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n    await expect(page.getByText(/Cadastro homologado/i).first()).toBeVisible();\n\n    // Sistema redireciona para Detalhes do subprocesso ap√≥s homologa√ß√£o (CDU-13 passo 11.7)\n    await expect(page).toHaveURL(/\\/processo\\/\\d+\\/\\w+$/);\n}\n"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 277,
    "length": 1,
    "text": "// Aguardar modal aparecer",
    "context": "export async function homologarCadastroRevisaoComImpacto(page: Page) {\n    await page.getByTestId('btn-acao-analisar-principal').click();\n\n    // Aguardar modal aparecer\n    await expect(page.getByRole('dialog')).toBeVisible();\n\n    // Caminho COM impactos (CDU-14 passo 12.3)"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 280,
    "length": 1,
    "text": "// Caminho COM impactos (CDU-14 passo 12.3)",
    "context": "    // Aguardar modal aparecer\n    await expect(page.getByRole('dialog')).toBeVisible();\n\n    // Caminho COM impactos (CDU-14 passo 12.3)\n    await expect(page.getByText(/Confirma a homologa√ß√£o do cadastro de atividades e conhecimentos/i)).toBeVisible();\n\n    await page.getByTestId('inp-aceite-cadastro-obs').fill('Homologado sem ressalvas');"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 288,
    "length": 1,
    "text": "// Verifica redirecionamento para tela de detalhes do subprocesso",
    "context": "    await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n    await expect(page.getByText(/Revis√£o d[oe] cadastro homologada/i).first()).toBeVisible();\n\n    // Verifica redirecionamento para tela de detalhes do subprocesso\n    await expect(page).toHaveURL(/\\/processo\\/\\d+\\/\\w+$/);\n\n    // Verificar situa√ß√£o ap√≥s homologa√ß√£o"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 291,
    "length": 1,
    "text": "// Verificar situa√ß√£o ap√≥s homologa√ß√£o",
    "context": "    // Verifica redirecionamento para tela de detalhes do subprocesso\n    await expect(page).toHaveURL(/\\/processo\\/\\d+\\/\\w+$/);\n\n    // Verificar situa√ß√£o ap√≥s homologa√ß√£o\n    await expect(page.getByTestId('subprocesso-header__txt-situacao'))\n        .toHaveText(/Revis√£o d[oe] cadastro homologada/i);\n}"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 302,
    "length": 1,
    "text": "// Verificar modal de homologa√ß√£o",
    "context": "export async function cancelarHomologacao(page: Page) {\n    await page.getByTestId('btn-acao-analisar-principal').click();\n\n    // Verificar modal de homologa√ß√£o\n    await expect(page.getByRole('dialog')).toBeVisible();\n\n    await page.getByRole('button', {name: 'Cancelar'}).click();"
  },
  {
    "file": "e2e/helpers/helpers-analise.ts",
    "type": "line",
    "line": 307,
    "length": 1,
    "text": "// Verificar que modal fechou",
    "context": "\n    await page.getByRole('button', {name: 'Cancelar'}).click();\n\n    // Verificar que modal fechou\n    await expect(page.getByRole('dialog')).toBeHidden();\n}\n"
  },
  {
    "file": "e2e/helpers/helpers-atividades.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Tenta aguardar um pouco se n√£o estiver no contexto, para evitar avisos falsos em navega√ß√µes lentas",
    "context": "    const cardEdicao = page.getByTestId('card-subprocesso-atividades');\n    const cardVisualizacao = page.getByTestId('card-subprocesso-atividades-vis');\n\n    // Tenta aguardar um pouco se n√£o estiver no contexto, para evitar avisos falsos em navega√ß√µes lentas\n    try {\n        await expect(cardEdicao.or(cardVisualizacao).first()).toBeVisible({timeout: 2000});\n        return;"
  },
  {
    "file": "e2e/helpers/helpers-atividades.ts",
    "type": "line",
    "line": 12,
    "length": 1,
    "text": "// Se ap√≥s 2s n√£o estiver vis√≠vel, verifica a URL",
    "context": "        await expect(cardEdicao.or(cardVisualizacao).first()).toBeVisible({timeout: 2000});\n        return;\n    } catch {\n        // Se ap√≥s 2s n√£o estiver vis√≠vel, verifica a URL\n        if (!/\\/processo\\/\\d+\\/[A-Z0-9_]+$/.test(page.url())) {\n            console.warn(`[Aviso] navegarParaAtividades chamado fora de um contexto de subprocesso: ${page.url()}`);\n        }"
  },
  {
    "file": "e2e/helpers/helpers-atividades.ts",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// Confirmar no modal",
    "context": "    await row.hover();\n    await card.getByTestId('btn-remover-atividade').click({force: true});\n\n    // Confirmar no modal\n    await page.getByTestId('btn-modal-confirmacao-confirmar').click();\n\n    await expect(page.getByText(descricao)).toBeHidden();"
  },
  {
    "file": "e2e/helpers/helpers-atividades.ts",
    "type": "line",
    "line": 114,
    "length": 1,
    "text": "// Confirmar no modal",
    "context": "    await linhaConhecimento.hover();\n    await linhaConhecimento.getByTestId('btn-remover-conhecimento').click({force: true});\n\n    // Confirmar no modal\n    await page.getByTestId('btn-modal-confirmacao-confirmar').click();\n\n    await expect(card.getByText(conhecimento)).toBeHidden();"
  },
  {
    "file": "e2e/helpers/helpers-atividades.ts",
    "type": "line",
    "line": 123,
    "length": 1,
    "text": "// Garantir que o modal apare√ßa e o bot√£o de confirma√ß√£o esteja pronto",
    "context": "export async function disponibilizarCadastro(page: Page) {\n    await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n\n    // Garantir que o modal apare√ßa e o bot√£o de confirma√ß√£o esteja pronto\n    const btnConfirmar = page.getByTestId('btn-confirmar-disponibilizacao');\n    await expect(btnConfirmar).toBeVisible();\n    await btnConfirmar.click();"
  },
  {
    "file": "e2e/helpers/helpers-atividades.ts",
    "type": "line",
    "line": 138,
    "length": 1,
    "text": "// Fechar clicando novamente ou fora",
    "context": "    await expect(btnMaisAcoes).toBeVisible();\n    await btnMaisAcoes.click();\n    await expect(page.getByTestId('cad-atividades__btn-impactos-mapa-edicao')).toBeVisible();\n    // Fechar clicando novamente ou fora\n    await btnMaisAcoes.click();\n}\n"
  },
  {
    "file": "e2e/helpers/helpers-atividades.ts",
    "type": "line",
    "line": 155,
    "length": 1,
    "text": "// Clicar novamente para fechar",
    "context": "    if (await btnMaisAcoes.isVisible()) {\n        await btnMaisAcoes.click();\n        await expect(btnImpacto).toBeHidden();\n        // Clicar novamente para fechar\n        await btnMaisAcoes.click();\n    } else {\n        await expect(btnImpacto).toBeHidden();"
  },
  {
    "file": "e2e/helpers/helpers-mapas.ts",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// Wait for either button to be visible",
    "context": "    const btnEmpty = page.getByTestId('btn-abrir-criar-competencia-empty');\n    const btnNormal = page.getByTestId('btn-abrir-criar-competencia');\n\n    // Wait for either button to be visible\n    await expect(btnEmpty.or(btnNormal)).toBeVisible();\n\n    if (await btnEmpty.isVisible()) {"
  },
  {
    "file": "e2e/helpers/helpers-mapas.ts",
    "type": "line",
    "line": 70,
    "length": 1,
    "text": "// Verify creation",
    "context": "    await page.getByTestId('btn-criar-competencia-salvar').click();\n    await expect(modal).toBeHidden();\n\n    // Verify creation\n    await verificarCompetenciaNoMapa(page, descricao, atividades);\n}\n"
  },
  {
    "file": "e2e/helpers/helpers-mapas.ts",
    "type": "line",
    "line": 78,
    "length": 1,
    "text": "// Hover on the card to trigger CSS hover state (buttons use card-level hover now)",
    "context": "    const card = page.locator('.competencia-card', {has: page.getByText(descricaoAtual, {exact: true})});\n    const editButton = card.getByTestId('btn-editar-competencia');\n\n    // Hover on the card to trigger CSS hover state (buttons use card-level hover now)\n    await card.hover();\n    // Wait for button to become visible (CSS transition)\n    await expect(editButton).toBeVisible();"
  },
  {
    "file": "e2e/helpers/helpers-mapas.ts",
    "type": "line",
    "line": 80,
    "length": 1,
    "text": "// Wait for button to become visible (CSS transition)",
    "context": "\n    // Hover on the card to trigger CSS hover state (buttons use card-level hover now)\n    await card.hover();\n    // Wait for button to become visible (CSS transition)\n    await expect(editButton).toBeVisible();\n    await editButton.click();\n"
  },
  {
    "file": "e2e/helpers/helpers-mapas.ts",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// Verify current description",
    "context": "    const modal = page.getByTestId('mdl-criar-competencia');\n    await expect(modal).toBeVisible();\n\n    // Verify current description\n    await expect(page.getByTestId('inp-criar-competencia-descricao')).toHaveValue(descricaoAtual);\n\n    await page.getByTestId('inp-criar-competencia-descricao').fill(novaDescricao);"
  },
  {
    "file": "e2e/helpers/helpers-mapas.ts",
    "type": "line",
    "line": 94,
    "length": 1,
    "text": "// Click on the label containing the activity text to toggle the checkbox",
    "context": "\n    if (removerAtividades) {\n        for (const atividade of removerAtividades) {\n            // Click on the label containing the activity text to toggle the checkbox\n            await modal.locator('label').filter({hasText: atividade}).click();\n        }\n    }"
  },
  {
    "file": "e2e/helpers/helpers-mapas.ts",
    "type": "line",
    "line": 101,
    "length": 1,
    "text": "// Click on the label containing the activity text to toggle the checkbox",
    "context": "\n    if (novasAtividades) {\n        for (const atividade of novasAtividades) {\n            // Click on the label containing the activity text to toggle the checkbox\n            await modal.locator('label').filter({hasText: atividade}).click();\n        }\n    }"
  },
  {
    "file": "e2e/helpers/helpers-navegacao.ts",
    "type": "line",
    "line": 10,
    "length": 3,
    "text": "// ============================================================================\n// Fun√ß√µes de Logout\n// ============================================================================",
    "context": " * em m√∫ltiplos arquivos de teste.\n */\n\n// ============================================================================\n// Fun√ß√µes de Logout\n// ============================================================================\n\n/**\n * Limpa notifica√ß√µes (toasts e alertas) da tela."
  },
  {
    "file": "e2e/helpers/helpers-navegacao.ts",
    "type": "line",
    "line": 23,
    "length": 1,
    "text": "// Tentar clicar no bot√£o de fechar se estiver vis√≠vel",
    "context": "    const notificacao = page.locator('.toast, [data-testid=\"global-alert\"]');\n\n    if (await notificacao.count() > 0) {\n        // Tentar clicar no bot√£o de fechar se estiver vis√≠vel\n        const btnFechar = notificacao.locator('.btn-close').first();\n        if (await btnFechar.isVisible()) {\n            await btnFechar.click();"
  },
  {
    "file": "e2e/helpers/helpers-navegacao.ts",
    "type": "line",
    "line": 33,
    "length": 1,
    "text": "// Ignorar se n√£o sumir no tempo previsto",
    "context": "    }\n\n    await notificacao.waitFor({state: 'hidden'}).catch(() => {\n        // Ignorar se n√£o sumir no tempo previsto\n    });\n}\n"
  },
  {
    "file": "e2e/helpers/helpers-navegacao.ts",
    "type": "line",
    "line": 57,
    "length": 3,
    "text": "// ============================================================================\n// Fun√ß√µes de Verifica√ß√£o de P√°gina\n// ============================================================================",
    "context": "    await expect(page).toHaveURL(/\\/login/);\n}\n\n// ============================================================================\n// Fun√ß√µes de Verifica√ß√£o de P√°gina\n// ============================================================================\n\n/**\n * Verifica que est√° na p√°gina do painel principal."
  },
  {
    "file": "e2e/helpers/helpers-navegacao.ts",
    "type": "line",
    "line": 68,
    "length": 3,
    "text": "// ============================================================================\n// Fun√ß√µes de Navega√ß√£o\n// ============================================================================",
    "context": "    await expect(page).toHaveURL(/\\/painel/);\n}\n\n// ============================================================================\n// Fun√ß√µes de Navega√ß√£o\n// ============================================================================\n\n/**\n * Navega para um subprocesso clicando na c√©lula da unidade na tabela TreeTable."
  },
  {
    "file": "e2e/helpers/helpers-navegacao.ts",
    "type": "line",
    "line": 85,
    "length": 1,
    "text": "// Se j√° estivermos na URL do subprocesso, n√£o precisamos navegar",
    "context": "): Promise<void> {\n    const urlSubprocesso = new RegExp(String.raw`/processo/\\d+/${siglaUnidade}$`);\n\n    // Se j√° estivermos na URL do subprocesso, n√£o precisamos navegar\n    if (urlSubprocesso.test(page.url())) {\n        return;\n    }"
  },
  {
    "file": "e2e/helpers/helpers-navegacao.ts",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// Aguardar o cabe√ßalho do processo (v-if=\"processo\") para garantir carregamento inicial",
    "context": "        return;\n    }\n\n    // Aguardar o cabe√ßalho do processo (v-if=\"processo\") para garantir carregamento inicial\n    await expect(page.getByText('Carregando detalhes do processo...').first()).toBeHidden();\n\n    // Se ainda n√£o estivermos na URL, verificamos se o redirecionamento est√° em curso"
  },
  {
    "file": "e2e/helpers/helpers-navegacao.ts",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// Se ainda n√£o estivermos na URL, verificamos se o redirecionamento est√° em curso",
    "context": "    // Aguardar o cabe√ßalho do processo (v-if=\"processo\") para garantir carregamento inicial\n    await expect(page.getByText('Carregando detalhes do processo...').first()).toBeHidden();\n\n    // Se ainda n√£o estivermos na URL, verificamos se o redirecionamento est√° em curso\n    try {\n        await page.waitForURL(urlSubprocesso, {timeout: 1000});\n        return;"
  },
  {
    "file": "e2e/helpers/helpers-navegacao.ts",
    "type": "line",
    "line": 98,
    "length": 1,
    "text": "// Se n√£o redirecionou em 1s, prossegue com clique manual",
    "context": "        await page.waitForURL(urlSubprocesso, {timeout: 1000});\n        return;\n    } catch (e) {\n        // Se n√£o redirecionou em 1s, prossegue com clique manual\n    }\n\n    await expect(page.getByTestId('processo-info')).toBeVisible();"
  },
  {
    "file": "e2e/helpers/helpers-processos.ts",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// segue para validar estado final ap√≥s a janela de espera",
    "context": "        await expect(checkbox).toBeVisible();\n        if (!await checkbox.isEnabled()) {\n            await expect(checkbox).toBeEnabled({timeout: 5000}).catch(() => {\n                // segue para validar estado final ap√≥s a janela de espera\n            });\n        }\n        // S√≥ marca se n√£o estiver marcado (pode j√° estar marcado se o pai foi selecionado)"
  },
  {
    "file": "e2e/helpers/helpers-processos.ts",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// S√≥ marca se n√£o estiver marcado (pode j√° estar marcado se o pai foi selecionado)",
    "context": "                // segue para validar estado final ap√≥s a janela de espera\n            });\n        }\n        // S√≥ marca se n√£o estiver marcado (pode j√° estar marcado se o pai foi selecionado)\n        if (!await checkbox.isChecked()) {\n            if (!await checkbox.isEnabled()) {\n                throw new Error(`Unidade ${u} n√£o est√° selecion√°vel para cria√ß√£o do processo.`);"
  },
  {
    "file": "e2e/helpers/helpers-processos.ts",
    "type": "line",
    "line": 98,
    "length": 1,
    "text": "// Aguardar carregamento dos detalhes",
    "context": "    tipo: string,\n    situacao: 'Criado' | 'Em andamento' | 'Finalizado'\n}) {\n    // Aguardar carregamento dos detalhes\n    await expect(page.getByText('Carregando detalhes do processo...').first()).toBeHidden();\n\n    // Verificar descri√ß√£o usando o test-id existente"
  },
  {
    "file": "e2e/helpers/helpers-processos.ts",
    "type": "line",
    "line": 101,
    "length": 1,
    "text": "// Verificar descri√ß√£o usando o test-id existente",
    "context": "    // Aguardar carregamento dos detalhes\n    await expect(page.getByText('Carregando detalhes do processo...').first()).toBeHidden();\n\n    // Verificar descri√ß√£o usando o test-id existente\n    await expect(page.getByTestId('processo-info')).toHaveText(dados.descricao);\n\n    // Verificar tipo e situa√ß√£o usando getByText"
  },
  {
    "file": "e2e/helpers/helpers-processos.ts",
    "type": "line",
    "line": 104,
    "length": 1,
    "text": "// Verificar tipo e situa√ß√£o usando getByText",
    "context": "    // Verificar descri√ß√£o usando o test-id existente\n    await expect(page.getByTestId('processo-info')).toHaveText(dados.descricao);\n\n    // Verificar tipo e situa√ß√£o usando getByText\n    await expect(page.getByText(`Tipo: ${dados.tipo}`)).toBeVisible();\n    await expect(page.getByText(`Situa√ß√£o: ${dados.situacao}`)).toBeVisible();\n}"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 8,
    "length": 1,
    "text": "// Recreate __dirname for ES modules",
    "context": "import {fileURLToPath} from 'node:url';\nimport {SMTPServer} from 'smtp-server';\n\n// Recreate __dirname for ES modules\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 22,
    "length": 1,
    "text": "// Criar/limpar arquivo de log ao iniciar",
    "context": "let frontendProcess;\nlet smtpServer;\n\n// Criar/limpar arquivo de log ao iniciar\nconst LOG_FILE = path.resolve(__dirname, 'server.log');\n\n// Local lightweight logger for this lifecycle script."
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 25,
    "length": 2,
    "text": "// Local lightweight logger for this lifecycle script.\n// Writes to console and appends to LOG_FILE.",
    "context": "// Criar/limpar arquivo de log ao iniciar\nconst LOG_FILE = path.resolve(__dirname, 'server.log');\n\n// Local lightweight logger for this lifecycle script.\n// Writes to console and appends to LOG_FILE.\nconst lifecycleLogger = {\n    info: (msg) => {\n        try {"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// If LOG_FILE creation fails, fallback to console",
    "context": "try {\n    fs.writeFileSync(LOG_FILE, '');\n} catch (e) {\n    // If LOG_FILE creation fails, fallback to console\n    console.error('N√£o foi poss√≠vel criar o arquivo de log:', e && e.message ? e.message : e);\n}\n"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Suprimir o DeprecationWarning DEP0190 - √© necess√°rio usar shell: true no Windows para .bat/.cmd",
    "context": "    console.error('N√£o foi poss√≠vel criar o arquivo de log:', e && e.message ? e.message : e);\n}\n\n// Suprimir o DeprecationWarning DEP0190 - √© necess√°rio usar shell: true no Windows para .bat/.cmd\nprocess.removeAllListeners('warning');\nprocess.on('warning', (warning) => {\n    if (warning.name === 'DeprecationWarning' && warning.code === 'DEP0190') return;"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 75,
    "length": 1,
    "text": "// Warnings do Lombok",
    "context": "});\n\nconst LOG_FILTERS = [\n    // Warnings do Lombok\n    /WARNING:/,\n\n    // Gradle"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 78,
    "length": 1,
    "text": "// Gradle",
    "context": "    // Warnings do Lombok\n    /WARNING:/,\n\n    // Gradle\n    /^> Task :/,\n    /logStarted/,\n    /UP-TO-DATE/,"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 86,
    "length": 1,
    "text": "// Spring Boot - Inicializa√ß√£o",
    "context": "    /Reusing configuration cache/,\n    /Starting/,\n\n    // Spring Boot - Inicializa√ß√£o\n    /The following.*profile.*is active/,\n    /Initializing Spring/,\n    /Initializing Spring embedded WebApplicationContext/,"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 95,
    "length": 1,
    "text": "// Vite - Inicializa√ß√£o",
    "context": "    /Tomcat started on port/,\n    /Tomcat initialized with port/,\n\n    // Vite - Inicializa√ß√£o\n    /^> sgc@.*dev$/,\n    /^> vite$/,\n    /VITE v.* ready in/,"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 106,
    "length": 1,
    "text": "// Logs de servi√ßos mockados",
    "context": "    /\\[vite\\] {2}connected/,\n    /debug:/,\n\n    // Logs de servi√ßos mockados\n    /NotificacaoEmailServiceMock.*ATIVADO/,\n    /E-mails ser√£o mockados/,\n"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Linhas vazias",
    "context": "    /NotificacaoEmailServiceMock.*ATIVADO/,\n    /E-mails ser√£o mockados/,\n\n    // Linhas vazias\n    /^\\s*$/\n];\n"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 129,
    "length": 1,
    "text": "// Use lifecycleLogger to keep console + file in sync",
    "context": "    lines.forEach(line => {\n        const trimmed = line.trim();\n        if (trimmed && !shouldFilterLog(line)) {\n            // Use lifecycleLogger to keep console + file in sync\n            lifecycleLogger.info(`[${prefix}] ${line}`);\n        }\n    });"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 138,
    "length": 1,
    "text": "// Ensure gradlew is executable (Unix only)",
    "context": "const isWindows = process.platform === 'win32';\n\nfunction startBackend() {\n    // Ensure gradlew is executable (Unix only)\n    if (!isWindows) {\n        fs.chmodSync(path.join(BACKEND_DIR, 'gradlew'), '755');\n    }"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 196,
    "length": 2,
    "text": "// log('SMTP', `E-mail recebido de ${session.envelope.mailFrom.address} para ${session.envelope.rcptTo.map(r => r.address).join(', ')}`);\n// Se precisar do corpo do e-mail para debug futuro, pode logar 'buffer' aqui",
    "context": "                buffer += chunk;\n            });\n            stream.on('end', () => {\n                // log('SMTP', `E-mail recebido de ${session.envelope.mailFrom.address} para ${session.envelope.rcptTo.map(r => r.address).join(', ')}`);\n                // Se precisar do corpo do e-mail para debug futuro, pode logar 'buffer' aqui\n                callback();\n            });\n        }"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 226,
    "length": 1,
    "text": "// Encerrar apenas processos iniciados, preservando Gradle Daemons",
    "context": "}\n\nfunction cleanup() {\n    // Encerrar apenas processos iniciados, preservando Gradle Daemons\n    stopProcess(backendProcess, isWindows);\n    stopProcess(frontendProcess, isWindows);\n    if (smtpServer) {"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 234,
    "length": 1,
    "text": "// Handle exit signals",
    "context": "    }\n}\n\n// Handle exit signals\nprocess.on('SIGINT', () => {\n    cleanup();\n    process.exit();"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 252,
    "length": 2,
    "text": "// Uso de http intencional para health check local (localhost).\n// O ambiente de desenvolvimento local n√£o utiliza HTTPS por padr√£o.",
    "context": "function checkBackendHealth() {\n    return new Promise((resolve) => {\n        const check = () => {\n            // Uso de http intencional para health check local (localhost).\n            // O ambiente de desenvolvimento local n√£o utiliza HTTPS por padr√£o.\n            const req = http.get(`http://localhost:${BACKEND_PORT}/`, (res) => {\n                if (res.statusCode >= 200 && res.statusCode < 500) resolve(); else setTimeout(check, 1000);\n            });"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 267,
    "length": 1,
    "text": "// Uso de http intencional para health check local (localhost).",
    "context": "function checkFrontendHealth() {\n    return new Promise((resolve) => {\n        const check = () => {\n            // Uso de http intencional para health check local (localhost).\n            const req = http.get(`http://localhost:${FRONTEND_PORT}`, (res) => {\n                if (res.statusCode >= 200 && res.statusCode < 400) resolve(); else setTimeout(check, 1000);\n            });"
  },
  {
    "file": "e2e/lifecycle.js",
    "type": "line",
    "line": 290,
    "length": 1,
    "text": "// Keep alive",
    "context": "    process.exit(1);\n}\n\n// Keep alive\nsetInterval(() => {\n}, 1000);"
  },
  {
    "file": "e2e/setup/fixtures.ts",
    "type": "line",
    "line": 2,
    "length": 2,
    "text": "// Import the project's logger so E2E logs go through the same formatting\n// Note: import uses .js extension because tests run with Node's ESM resolution (nodenext)",
    "context": "import {test as base} from '@playwright/test';\n// Import the project's logger so E2E logs go through the same formatting\n// Note: import uses .js extension because tests run with Node's ESM resolution (nodenext)\nimport logger from '../../frontend/src/utils/logger.js';\n\n// Extend base test to automatically log console messages"
  },
  {
    "file": "e2e/setup/fixtures.ts",
    "type": "line",
    "line": 6,
    "length": 1,
    "text": "// Extend base test to automatically log console messages",
    "context": "// Note: import uses .js extension because tests run with Node's ESM resolution (nodenext)\nimport logger from '../../frontend/src/utils/logger.js';\n\n// Extend base test to automatically log console messages\nexport const test = base.extend({\n    page: async ({page}, use) => {\n        // Listen to all console events from the browser and forward to project logger"
  },
  {
    "file": "e2e/setup/fixtures.ts",
    "type": "line",
    "line": 9,
    "length": 1,
    "text": "// Listen to all console events from the browser and forward to project logger",
    "context": "// Extend base test to automatically log console messages\nexport const test = base.extend({\n    page: async ({page}, use) => {\n        // Listen to all console events from the browser and forward to project logger\n        page.on('console', msg => {\n            // Coerce to string to avoid strict Playwright ConsoleMessageType union mismatches\n            const type = String(msg.type());"
  },
  {
    "file": "e2e/setup/fixtures.ts",
    "type": "line",
    "line": 11,
    "length": 1,
    "text": "// Coerce to string to avoid strict Playwright ConsoleMessageType union mismatches",
    "context": "    page: async ({page}, use) => {\n        // Listen to all console events from the browser and forward to project logger\n        page.on('console', msg => {\n            // Coerce to string to avoid strict Playwright ConsoleMessageType union mismatches\n            const type = String(msg.type());\n            const text = msg.text();\n"
  },
  {
    "file": "e2e/setup/fixtures.ts",
    "type": "line",
    "line": 15,
    "length": 1,
    "text": "// Only forward common types to reduce noise",
    "context": "            const type = String(msg.type());\n            const text = msg.text();\n\n            // Only forward common types to reduce noise\n            if (!['log', 'error', 'warning', 'warn', 'info'].includes(type)) {\n                return;\n            }"
  },
  {
    "file": "e2e/setup/fixtures.ts",
    "type": "line",
    "line": 29,
    "length": 1,
    "text": "// Listen to page errors",
    "context": "            }\n        });\n\n        // Listen to page errors\n        page.on('pageerror', error => {\n            logger.error(`[Browser PAGE ERROR] ${error.message}`);\n        });"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Tela de login inicial",
    "context": "    test.describe('01 - Autentica√ß√£o', () => {\n        test('Captura telas de login', async ({page}) => {\n            await page.goto('/login');\n            // Tela de login inicial\n            await page.getByTestId('inp-login-usuario').click();\n\n            // Erro de credenciais inv√°lidas"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 47,
    "length": 1,
    "text": "// Erro de credenciais inv√°lidas",
    "context": "            // Tela de login inicial\n            await page.getByTestId('inp-login-usuario').click();\n\n            // Erro de credenciais inv√°lidas\n            await page.getByTestId('inp-login-usuario').fill(USUARIOS.INVALIDO.titulo);\n            await page.getByTestId('inp-login-senha').fill(USUARIOS.INVALIDO.senha);\n            await page.getByTestId('btn-login-entrar').click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Limpar e fazer login com m√∫ltiplos perfis",
    "context": "            await page.getByTestId('btn-login-entrar').click();\n            await page.waitForTimeout(500);\n\n            // Limpar e fazer login com m√∫ltiplos perfis\n            await page.getByTestId('inp-login-usuario').fill(USUARIOS.ADMIN_2_PERFIS.titulo);\n            await page.getByTestId('inp-login-senha').fill(USUARIOS.ADMIN_2_PERFIS.senha);\n            await page.getByTestId('btn-login-entrar').click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 59,
    "length": 2,
    "text": "// Login com perfil selecionado\n// Reiniciar a p√°gina para garantir estado limpo para a fun√ß√£o helper",
    "context": "            await page.getByTestId('btn-login-entrar').click();\n            await page.waitForTimeout(500);\n\n            // Login com perfil selecionado\n            // Reiniciar a p√°gina para garantir estado limpo para a fun√ß√£o helper\n            await loginComPerfil(page, USUARIOS.ADMIN_2_PERFIS.titulo, USUARIOS.ADMIN_2_PERFIS.senha, USUARIOS.ADMIN_2_PERFIS.perfil);\n        });\n    });"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 69,
    "length": 1,
    "text": "// Painel inicial vazio",
    "context": "        test('Captura painel ADMIN', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Painel inicial vazio\n\n            // Criar um processo para popular o painel\n            const descricaoProcesso = `Processo Captura ${Date.now()}`;"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Criar um processo para popular o painel",
    "context": "\n            // Painel inicial vazio\n\n            // Criar um processo para popular o painel\n            const descricaoProcesso = `Processo Captura ${Date.now()}`;\n            await page.getByTestId('btn-painel-criar-processo').click();\n            await expect(page).toHaveURL(/\\/processo\\/cadastro/);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Preenchendo formul√°rio",
    "context": "            await page.getByTestId('btn-painel-criar-processo').click();\n            await expect(page).toHaveURL(/\\/processo\\/cadastro/);\n\n            // Preenchendo formul√°rio\n            await page.getByTestId('inp-processo-descricao').fill(descricaoProcesso);\n            await page.getByTestId('sel-processo-tipo').selectOption('MAPEAMENTO');\n            const dataLimite = new Date();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 83,
    "length": 1,
    "text": "// Expandir √°rvore de unidades",
    "context": "            dataLimite.setDate(dataLimite.getDate() + 30);\n            await page.getByTestId('inp-processo-data-limite').fill(dataLimite.toISOString().split('T')[0]);\n\n            // Expandir √°rvore de unidades\n            await expect(page.getByText('Carregando unidades...')).toBeHidden();\n            await page.getByTestId('btn-arvore-expand-SECRETARIA_1').click();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 88,
    "length": 1,
    "text": "// Expandir COORD_11 para acessar SECAO_111",
    "context": "            await page.getByTestId('btn-arvore-expand-SECRETARIA_1').click();\n            await page.waitForTimeout(300);\n\n            // Expandir COORD_11 para acessar SECAO_111\n            await page.waitForTimeout(300);\n            await page.getByTestId('btn-arvore-expand-COORD_11').click();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// Selecionar m√∫ltiplas unidades",
    "context": "            await page.getByTestId('btn-arvore-expand-COORD_11').click();\n            await page.waitForTimeout(300);\n\n            // Selecionar m√∫ltiplas unidades\n            await page.getByTestId('chk-arvore-unidade-ASSESSORIA_11').click();\n            await page.getByTestId('chk-arvore-unidade-ASSESSORIA_12').click();\n            await page.getByTestId('chk-arvore-unidade-SECAO_111').click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 98,
    "length": 1,
    "text": "// Salvar processo",
    "context": "            await page.getByTestId('chk-arvore-unidade-ASSESSORIA_12').click();\n            await page.getByTestId('chk-arvore-unidade-SECAO_111').click();\n\n            // Salvar processo\n            await page.getByTestId('btn-processo-salvar').click();\n            await expect(page).toHaveURL(/\\/painel/);\n            await expect(page.getByTestId('tbl-processos')).toBeVisible();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 104,
    "length": 1,
    "text": "// Capturar ID para cleanup",
    "context": "            await expect(page.getByTestId('tbl-processos')).toBeVisible();\n            await expect(page.getByTestId('tbl-processos').getByText(descricaoProcesso).first()).toBeVisible();\n\n            // Capturar ID para cleanup\n            await page.getByTestId('tbl-processos').getByText(descricaoProcesso).first().click();\n            await expect(page).toHaveURL(/codProcesso=\\d+/);\n            const processoId = await extrairProcessoId(page);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 111,
    "length": 1,
    "text": "// Painel com processo criado",
    "context": "            if (processoId > 0) cleanup.registrar(processoId);\n            await page.goto('/painel');\n\n            // Painel com processo criado\n\n            // Hover em linha da tabela\n            await page.getByText(descricaoProcesso).hover();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 113,
    "length": 1,
    "text": "// Hover em linha da tabela",
    "context": "\n            // Painel com processo criado\n\n            // Hover em linha da tabela\n            await page.getByText(descricaoProcesso).hover();\n        });\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 118,
    "length": 1,
    "text": "// Criar processo para o Gestor primeiro como ADMIN",
    "context": "        });\n\n        test('Captura painel GESTOR', async ({page}) => {\n            // Criar processo para o Gestor primeiro como ADMIN\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n            const desc = `Processo Gestor ${Date.now()}`;\n            await criarProcesso(page, {"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 137,
    "length": 1,
    "text": "// Criar processo para o Chefe primeiro como ADMIN",
    "context": "        });\n\n        test('Captura painel CHEFE', async ({page}) => {\n            // Criar processo para o Chefe primeiro como ADMIN\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n            const desc = `Processo Chefe ${Date.now()}`;\n            await criarProcesso(page, {"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 169,
    "length": 1,
    "text": "// Capturar ID para cleanup",
    "context": "                expandir: ['SECRETARIA_1']\n            });\n\n            // Capturar ID para cleanup\n            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 174,
    "length": 1,
    "text": "// Tela de edi√ß√£o de processo",
    "context": "            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);\n\n            // Tela de edi√ß√£o de processo\n\n            // Modal de iniciar processo\n            await page.getByTestId('btn-processo-iniciar').click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 176,
    "length": 1,
    "text": "// Modal de iniciar processo",
    "context": "\n            // Tela de edi√ß√£o de processo\n\n            // Modal de iniciar processo\n            await page.getByTestId('btn-processo-iniciar').click();\n            await page.waitForTimeout(300);\n            await page.getByTestId('btn-iniciar-processo-confirmar').click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 182,
    "length": 1,
    "text": "// Acessar detalhes do processo iniciado",
    "context": "            await page.getByTestId('btn-iniciar-processo-confirmar').click();\n            await expect(page).toHaveURL(/\\/painel/);\n\n            // Acessar detalhes do processo iniciado\n            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 186,
    "length": 1,
    "text": "// Modal de finalizar processo",
    "context": "            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n\n            // Modal de finalizar processo\n            await page.getByTestId('btn-processo-finalizar').click();\n            await page.waitForTimeout(300);\n            await page.getByRole('button', {name: 'Cancelar'}).click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 198,
    "length": 1,
    "text": "// Capturar estado inicial com bot√µes desativados (formul√°rio vazio)",
    "context": "            await page.getByTestId('btn-painel-criar-processo').click();\n            await expect(page).toHaveURL(/\\/processo\\/cadastro/);\n\n            // Capturar estado inicial com bot√µes desativados (formul√°rio vazio)\n            await page.waitForTimeout(300);\n\n            // Preencher apenas descri√ß√£o (bot√µes ainda desativados)"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 201,
    "length": 1,
    "text": "// Preencher apenas descri√ß√£o (bot√µes ainda desativados)",
    "context": "            // Capturar estado inicial com bot√µes desativados (formul√°rio vazio)\n            await page.waitForTimeout(300);\n\n            // Preencher apenas descri√ß√£o (bot√µes ainda desativados)\n            await page.getByTestId('inp-processo-descricao').fill('Teste Valida√ß√£o');\n            await page.waitForTimeout(300);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 205,
    "length": 1,
    "text": "// Selecionar tipo de processo (necess√°rio para carregar √°rvore de unidades)",
    "context": "            await page.getByTestId('inp-processo-descricao').fill('Teste Valida√ß√£o');\n            await page.waitForTimeout(300);\n\n            // Selecionar tipo de processo (necess√°rio para carregar √°rvore de unidades)\n            await page.getByTestId('sel-processo-tipo').selectOption('MAPEAMENTO');\n\n            // Preencher data limite (bot√µes ainda desativados - falta unidade)"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 208,
    "length": 1,
    "text": "// Preencher data limite (bot√µes ainda desativados - falta unidade)",
    "context": "            // Selecionar tipo de processo (necess√°rio para carregar √°rvore de unidades)\n            await page.getByTestId('sel-processo-tipo').selectOption('MAPEAMENTO');\n\n            // Preencher data limite (bot√µes ainda desativados - falta unidade)\n            const dataLimite = new Date();\n            dataLimite.setDate(dataLimite.getDate() + 30);\n            await page.getByTestId('inp-processo-data-limite').fill(dataLimite.toISOString().split('T')[0]);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 214,
    "length": 1,
    "text": "// Expandir e selecionar unidade (agora bot√µes devem estar ativados)",
    "context": "            await page.getByTestId('inp-processo-data-limite').fill(dataLimite.toISOString().split('T')[0]);\n            await page.waitForTimeout(300);\n\n            // Expandir e selecionar unidade (agora bot√µes devem estar ativados)\n            await expect(page.getByText('Carregando unidades...')).toBeHidden();\n            await page.getByTestId('btn-arvore-expand-SECRETARIA_1').click();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 228,
    "length": 1,
    "text": "// Admin cria processo",
    "context": "            const descricao = `Proc Atividades ${Date.now()}`;\n            const UNIDADE_ALVO = 'SECAO_211';\n\n            // Admin cria processo\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            await criarProcesso(page, {"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 248,
    "length": 1,
    "text": "// Logout e login como Chefe",
    "context": "            await page.getByTestId('btn-iniciar-processo-confirmar').click();\n            await expect(page).toHaveURL(/\\/painel/);\n\n            // Logout e login como Chefe\n            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.CHEFE_SECAO_211.titulo, USUARIOS.CHEFE_SECAO_211.senha);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 252,
    "length": 1,
    "text": "// Acessar subprocesso",
    "context": "            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.CHEFE_SECAO_211.titulo, USUARIOS.CHEFE_SECAO_211.senha);\n\n            // Acessar subprocesso\n            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await navegarParaSubprocesso(page, UNIDADE_ALVO);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 256,
    "length": 1,
    "text": "// Entrar em atividades",
    "context": "            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await navegarParaSubprocesso(page, UNIDADE_ALVO);\n\n            // Entrar em atividades\n            await navegarParaAtividades(page);\n\n            // Adicionar atividade"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 259,
    "length": 1,
    "text": "// Adicionar atividade",
    "context": "            // Entrar em atividades\n            await navegarParaAtividades(page);\n\n            // Adicionar atividade\n            const atividadeDesc = `Atividade Teste ${Date.now()}`;\n            await page.getByTestId('inp-nova-atividade').fill(atividadeDesc);\n            await page.getByTestId('btn-adicionar-atividade').click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 265,
    "length": 1,
    "text": "// Adicionar conhecimentos",
    "context": "            await page.getByTestId('btn-adicionar-atividade').click();\n            await expect(page.getByText(atividadeDesc, {exact: true})).toBeVisible();\n\n            // Adicionar conhecimentos\n            const card = page.locator('.atividade-card', {has: page.getByText(atividadeDesc)});\n            await card.getByTestId('inp-novo-conhecimento').fill('Java');\n            await adicionarConhecimento(page, atividadeDesc, 'Java');"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 272,
    "length": 1,
    "text": "// Hover na atividade para ver a√ß√µes",
    "context": "            await adicionarConhecimento(page, atividadeDesc, 'Spring Boot');\n            await adicionarConhecimento(page, atividadeDesc, 'Oracle');\n\n            // Hover na atividade para ver a√ß√µes\n            await card.locator('.atividade-hover-row').hover();\n            await page.waitForTimeout(300);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 276,
    "length": 1,
    "text": "// Tentar disponibilizar sem data",
    "context": "            await card.locator('.atividade-hover-row').hover();\n            await page.waitForTimeout(300);\n\n            // Tentar disponibilizar sem data\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(300);\n            await page.getByTestId('btn-confirmar-disponibilizacao').click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 315,
    "length": 1,
    "text": "// Capturar tela inicial vazia com label \"Conhecimentos *\"",
    "context": "            await navegarParaSubprocesso(page, UNIDADE_ALVO);\n            await navegarParaAtividades(page);\n\n            // Capturar tela inicial vazia com label \"Conhecimentos *\"\n\n            // Adicionar primeira atividade SEM conhecimento\n            const atividade1 = `Atividade Sem Conhecimento 1 ${Date.now()}`;"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 317,
    "length": 1,
    "text": "// Adicionar primeira atividade SEM conhecimento",
    "context": "\n            // Capturar tela inicial vazia com label \"Conhecimentos *\"\n\n            // Adicionar primeira atividade SEM conhecimento\n            const atividade1 = `Atividade Sem Conhecimento 1 ${Date.now()}`;\n            await adicionarAtividade(page, atividade1);\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 322,
    "length": 1,
    "text": "// Adicionar segunda atividade SEM conhecimento",
    "context": "            await adicionarAtividade(page, atividade1);\n            await page.waitForTimeout(300);\n\n            // Adicionar segunda atividade SEM conhecimento\n            const atividade2 = `Atividade Sem Conhecimento 2 ${Date.now()}`;\n            await adicionarAtividade(page, atividade2);\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 327,
    "length": 1,
    "text": "// Adicionar terceira atividade COM conhecimento (para contraste)",
    "context": "            await adicionarAtividade(page, atividade2);\n            await page.waitForTimeout(300);\n\n            // Adicionar terceira atividade COM conhecimento (para contraste)\n            const atividade3 = `Atividade Com Conhecimento ${Date.now()}`;\n            await adicionarAtividade(page, atividade3);\n            await adicionarConhecimento(page, atividade3, 'Java');"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 333,
    "length": 1,
    "text": "// Tentar disponibilizar - deve mostrar valida√ß√£o inline",
    "context": "            await adicionarConhecimento(page, atividade3, 'Java');\n            await page.waitForTimeout(300);\n\n            // Tentar disponibilizar - deve mostrar valida√ß√£o inline\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500); // Aguardar scroll autom√°tico\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 337,
    "length": 1,
    "text": "// Capturar primeira atividade com erro inline (scroll autom√°tico j√° levou at√© ela)",
    "context": "            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500); // Aguardar scroll autom√°tico\n\n            // Capturar primeira atividade com erro inline (scroll autom√°tico j√° levou at√© ela)\n\n            // Scroll para segunda atividade com erro\n            const card2 = page.locator('.atividade-card', {has: page.getByText(atividade2)});"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 339,
    "length": 1,
    "text": "// Scroll para segunda atividade com erro",
    "context": "\n            // Capturar primeira atividade com erro inline (scroll autom√°tico j√° levou at√© ela)\n\n            // Scroll para segunda atividade com erro\n            const card2 = page.locator('.atividade-card', {has: page.getByText(atividade2)});\n            await card2.scrollIntoViewIfNeeded();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 344,
    "length": 1,
    "text": "// Capturar zoom na mensagem de erro inline",
    "context": "            await card2.scrollIntoViewIfNeeded();\n            await page.waitForTimeout(300);\n\n            // Capturar zoom na mensagem de erro inline\n            const primeiroCard = page.locator('.atividade-card', {has: page.getByText(atividade1)});\n            await primeiroCard.scrollIntoViewIfNeeded();\n            await page.waitForTimeout(300);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 349,
    "length": 1,
    "text": "// Capturar apenas o card com erro para detalhe",
    "context": "            await primeiroCard.scrollIntoViewIfNeeded();\n            await page.waitForTimeout(300);\n\n            // Capturar apenas o card com erro para detalhe\n\n            // Corrigir primeira atividade adicionando conhecimento\n            await adicionarConhecimento(page, atividade1, 'Python');"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 351,
    "length": 1,
    "text": "// Corrigir primeira atividade adicionando conhecimento",
    "context": "\n            // Capturar apenas o card com erro para detalhe\n\n            // Corrigir primeira atividade adicionando conhecimento\n            await adicionarConhecimento(page, atividade1, 'Python');\n            await page.waitForTimeout(500);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 355,
    "length": 1,
    "text": "// Tentar disponibilizar novamente - ainda deve ter erro na atividade 2",
    "context": "            await adicionarConhecimento(page, atividade1, 'Python');\n            await page.waitForTimeout(500);\n\n            // Tentar disponibilizar novamente - ainda deve ter erro na atividade 2\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 359,
    "length": 1,
    "text": "// Corrigir segunda atividade",
    "context": "            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500);\n\n            // Corrigir segunda atividade\n            await adicionarConhecimento(page, atividade2, 'JavaScript');\n            await page.waitForTimeout(500);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 363,
    "length": 1,
    "text": "// Tentar disponibilizar - agora deve funcionar",
    "context": "            await adicionarConhecimento(page, atividade2, 'JavaScript');\n            await page.waitForTimeout(500);\n\n            // Tentar disponibilizar - agora deve funcionar\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 367,
    "length": 1,
    "text": "// Modal de confirma√ß√£o deve aparecer",
    "context": "            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.waitForTimeout(500);\n\n            // Modal de confirma√ß√£o deve aparecer\n            const modalConfirmacao = page.locator('.modal-content').filter({hasText: 'Disponibiliza√ß√£o do cadastro'});\n\n            // Garantir que a modal est√° vis√≠vel antes de capturar"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 370,
    "length": 1,
    "text": "// Garantir que a modal est√° vis√≠vel antes de capturar",
    "context": "            // Modal de confirma√ß√£o deve aparecer\n            const modalConfirmacao = page.locator('.modal-content').filter({hasText: 'Disponibiliza√ß√£o do cadastro'});\n\n            // Garantir que a modal est√° vis√≠vel antes de capturar\n            await expect(modalConfirmacao).toBeVisible();\n        });\n    });"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 390,
    "length": 1,
    "text": "// Setup: criar processo e disponibilizar atividades",
    "context": "            const descricao = `Proc Mapa ${Date.now()}`;\n            const UNIDADE_ALVO = 'SECAO_121';\n\n            // Setup: criar processo e disponibilizar atividades\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            await criarProcesso(page, {"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 415,
    "length": 1,
    "text": "// Adicionar atividades",
    "context": "            await acessarSubprocessoChefeDireto(page, descricao, 'SECAO_121');\n            await navegarParaAtividades(page);\n\n            // Adicionar atividades\n            await adicionarAtividade(page, 'Desenvolvimento Web');\n            await adicionarConhecimento(page, 'Desenvolvimento Web', 'Vue.js');\n            await adicionarConhecimento(page, 'Desenvolvimento Web', 'TypeScript');"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 424,
    "length": 1,
    "text": "// Disponibilizar (como chefe)",
    "context": "            await adicionarConhecimento(page, 'Desenvolvimento Backend', 'Java');\n            await adicionarConhecimento(page, 'Desenvolvimento Backend', 'Spring Boot');\n\n            // Disponibilizar (como chefe)\n            await page.getByTestId('btn-cad-atividades-disponibilizar').click();\n            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n            await page.waitForTimeout(500);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 429,
    "length": 1,
    "text": "// 1. GESTOR COORD_12 - Primeiro Aceite",
    "context": "            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n            await page.waitForTimeout(500);\n\n            // 1. GESTOR COORD_12 - Primeiro Aceite\n            await page.getByTestId('btn-logout').click({force: true});\n            await login(page, USUARIOS.GESTOR_COORD_12.titulo, USUARIOS.GESTOR_COORD_12.senha);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 440,
    "length": 1,
    "text": "// 2. GESTOR SECRETARIA_1 - Segundo Aceite",
    "context": "            await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n            await expect(page.getByText(/Cadastro aceito/i).first()).toBeVisible();\n\n            // 2. GESTOR SECRETARIA_1 - Segundo Aceite\n            await page.getByTestId('btn-logout').click({force: true});\n            await loginComPerfil(page, USUARIOS.GESTOR_SECRETARIA_1.titulo, USUARIOS.GESTOR_SECRETARIA_1.senha, USUARIOS.GESTOR_SECRETARIA_1.perfil);\n            await acessarSubprocessoGestor(page, descricao, UNIDADE_ALVO);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 450,
    "length": 1,
    "text": "// 3. ADMIN - Homologa√ß√£o Final",
    "context": "            await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n            await expect(page.getByText(/Cadastro aceito/i).first()).toBeVisible();\n\n            // 3. ADMIN - Homologa√ß√£o Final\n            await page.getByTestId('btn-logout').click({force: true});\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 454,
    "length": 1,
    "text": "// Navegar para o subprocesso (admin v√™ tabela de unidades)",
    "context": "            await page.getByTestId('btn-logout').click({force: true});\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Navegar para o subprocesso (admin v√™ tabela de unidades)\n            await acessarSubprocessoAdmin(page, descricao, UNIDADE_ALVO);\n\n            // Entrar no cadastro de atividades (visualiza√ß√£o)"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 457,
    "length": 1,
    "text": "// Entrar no cadastro de atividades (visualiza√ß√£o)",
    "context": "            // Navegar para o subprocesso (admin v√™ tabela de unidades)\n            await acessarSubprocessoAdmin(page, descricao, UNIDADE_ALVO);\n\n            // Entrar no cadastro de atividades (visualiza√ß√£o)\n            await navegarParaAtividadesVisualizacao(page);\n\n            // Homologar cadastro"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 460,
    "length": 1,
    "text": "// Homologar cadastro",
    "context": "            // Entrar no cadastro de atividades (visualiza√ß√£o)\n            await navegarParaAtividadesVisualizacao(page);\n\n            // Homologar cadastro\n            await page.getByTestId('btn-acao-analisar-principal').click();\n            await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n            await page.waitForTimeout(100);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 465,
    "length": 2,
    "text": "// Agora o Mapa deve estar habilitado para edi√ß√£o pelo Admin\n// Navegar para mapa",
    "context": "            await page.getByTestId('btn-aceite-cadastro-confirmar').click();\n            await page.waitForTimeout(100);\n\n            // Agora o Mapa deve estar habilitado para edi√ß√£o pelo Admin\n            // Navegar para mapa\n            await navegarParaMapa(page);\n\n            // Criar compet√™ncia"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 469,
    "length": 1,
    "text": "// Criar compet√™ncia",
    "context": "            // Navegar para mapa\n            await navegarParaMapa(page);\n\n            // Criar compet√™ncia\n            await abrirModalCriarCompetencia(page);\n            await page.waitForTimeout(100);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 476,
    "length": 1,
    "text": "// Selecionar atividades",
    "context": "            const competenciaDesc = 'Desenvolvimento de Software';\n            await page.getByTestId('inp-criar-competencia-descricao').fill(competenciaDesc);\n\n            // Selecionar atividades\n            const modal = page.getByTestId('mdl-criar-competencia');\n            await modal.locator('label').filter({hasText: 'Desenvolvimento Web'}).click();\n            await modal.locator('label').filter({hasText: 'Desenvolvimento Backend'}).click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 485,
    "length": 1,
    "text": "// Hover na compet√™ncia",
    "context": "            await expect(modal).toBeHidden();\n            await page.waitForTimeout(100);\n\n            // Hover na compet√™ncia\n            const card = page.locator('.competencia-card', {has: page.getByText(competenciaDesc)});\n            await card.hover();\n            await page.waitForTimeout(100);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 490,
    "length": 1,
    "text": "// Disponibilizar mapa",
    "context": "            await card.hover();\n            await page.waitForTimeout(100);\n\n            // Disponibilizar mapa\n            await page.getByTestId('btn-cad-mapa-disponibilizar').click();\n            await page.waitForTimeout(100);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 509,
    "length": 1,
    "text": "// Menu principal",
    "context": "        test('Captura elementos de navega√ß√£o', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Menu principal\n\n            // Configura√ß√µes (se admin)\n            await page.getByTestId('btn-configuracoes').click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 511,
    "length": 1,
    "text": "// Configura√ß√µes (se admin)",
    "context": "\n            // Menu principal\n\n            // Configura√ß√µes (se admin)\n            await page.getByTestId('btn-configuracoes').click();\n            await page.waitForTimeout(300);\n            await page.goto('/painel');"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 516,
    "length": 1,
    "text": "// Se√ß√£o Unidades (para ADMIN)",
    "context": "            await page.waitForTimeout(300);\n            await page.goto('/painel');\n\n            // Se√ß√£o Unidades (para ADMIN)\n            await page.getByText('Unidades').first().click();\n            await page.waitForTimeout(100);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 520,
    "length": 1,
    "text": "// Se√ß√£o Relat√≥rios",
    "context": "            await page.getByText('Unidades').first().click();\n            await page.waitForTimeout(100);\n\n            // Se√ß√£o Relat√≥rios\n            await page.getByText('Relat√≥rios').click();\n            await page.waitForTimeout(100);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 524,
    "length": 1,
    "text": "// Se√ß√£o Hist√≥rico",
    "context": "            await page.getByText('Relat√≥rios').click();\n            await page.waitForTimeout(100);\n\n            // Se√ß√£o Hist√≥rico\n            await page.getByText('Hist√≥rico').click();\n            await page.waitForTimeout(100);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 528,
    "length": 1,
    "text": "// Rodap√©",
    "context": "            await page.getByText('Hist√≥rico').click();\n            await page.waitForTimeout(100);\n\n            // Rodap√©\n            await page.evaluate(() => window.scrollTo(0, document.body.scrollHeight));\n            await page.waitForTimeout(100);\n        });"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 538,
    "length": 1,
    "text": "// Processo CRIADO",
    "context": "        test('Captura diferentes estados de processo', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Processo CRIADO\n            const processosCriado = `Proc CRIADO ${Date.now()}`;\n            await criarProcesso(page, {\n                descricao: processosCriado,"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 554,
    "length": 1,
    "text": "// Processo EM_ANDAMENTO",
    "context": "            if (processoId1 > 0) cleanup.registrar(processoId1);\n            await page.goto('/painel');\n\n            // Processo EM_ANDAMENTO\n            const processosAndamento = `Proc ANDAMENTO ${Date.now()}`;\n            await criarProcesso(page, {\n                descricao: processosAndamento,"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 572,
    "length": 1,
    "text": "// Desktop padr√£o (1920x1080)",
    "context": "        test('Captura em diferentes resolu√ß√µes', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Desktop padr√£o (1920x1080)\n            await page.setViewportSize({width: 1920, height: 1080});\n\n            // Desktop m√©dio (1366x768)"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 575,
    "length": 1,
    "text": "// Desktop m√©dio (1366x768)",
    "context": "            // Desktop padr√£o (1920x1080)\n            await page.setViewportSize({width: 1920, height: 1080});\n\n            // Desktop m√©dio (1366x768)\n            await page.setViewportSize({width: 1366, height: 768});\n\n            // Tablet (768x1024)"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 578,
    "length": 1,
    "text": "// Tablet (768x1024)",
    "context": "            // Desktop m√©dio (1366x768)\n            await page.setViewportSize({width: 1366, height: 768});\n\n            // Tablet (768x1024)\n            await page.setViewportSize({width: 768, height: 1024});\n\n            // Mobile (375x667)"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 581,
    "length": 1,
    "text": "// Mobile (375x667)",
    "context": "            // Tablet (768x1024)\n            await page.setViewportSize({width: 768, height: 1024});\n\n            // Mobile (375x667)\n            await page.setViewportSize({width: 375, height: 667});\n        });\n    });"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 586,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 09 - OPERA√á√ïES EM BLOCO (CDUs 22-26)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 09 - OPERA√á√ïES EM BLOCO (CDUs 22-26)\n    // ========================================================================\n    test.describe('09 - Opera√ß√µes em Bloco', () => {\n        test('Captura fluxo de aceitar cadastros em bloco', async ({page}) => {\n            // Prepara cen√°rio: criar processo com unidades subordinadas e disponibilizar cadastros"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 591,
    "length": 1,
    "text": "// Prepara cen√°rio: criar processo com unidades subordinadas e disponibilizar cadastros",
    "context": "    // ========================================================================\n    test.describe('09 - Opera√ß√µes em Bloco', () => {\n        test('Captura fluxo de aceitar cadastros em bloco', async ({page}) => {\n            // Prepara cen√°rio: criar processo com unidades subordinadas e disponibilizar cadastros\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            const descricao = `Processo Bloco ${Date.now()}`;"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 595,
    "length": 2,
    "text": "// Criar com m√∫ltiplas unidades para que GESTOR veja tela de \"Unidades participantes\"\n// COORD_11 tem SECAO_111, SECAO_112, SECAO_113 e √© gerido por GESTOR_COORD",
    "context": "            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            const descricao = `Processo Bloco ${Date.now()}`;\n            // Criar com m√∫ltiplas unidades para que GESTOR veja tela de \"Unidades participantes\"\n            // COORD_11 tem SECAO_111, SECAO_112, SECAO_113 e √© gerido por GESTOR_COORD\n            await criarProcesso(page, {\n                descricao,\n                tipo: 'MAPEAMENTO',"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 606,
    "length": 1,
    "text": "// Login como Chefe da SECAO_111 para disponibilizar cadastro",
    "context": "                iniciar: true\n            });\n\n            // Login como Chefe da SECAO_111 para disponibilizar cadastro\n            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.CHEFE_SECAO_111.titulo, USUARIOS.CHEFE_SECAO_111.senha);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 614,
    "length": 1,
    "text": "// Capturar ID para cleanup (ap√≥s navegar para o subprocesso)",
    "context": "            await navegarParaSubprocesso(page, 'SECAO_111');\n            await expect(page).toHaveURL(/processo\\/\\d+/);\n\n            // Capturar ID para cleanup (ap√≥s navegar para o subprocesso)\n            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);\n            await navegarParaAtividades(page);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 625,
    "length": 1,
    "text": "// Login como Gestor da COORD_11 para ver bot√£o de aceitar em bloco",
    "context": "            await page.getByTestId('btn-confirmar-disponibilizacao').click();\n            await page.waitForTimeout(500);\n\n            // Login como Gestor da COORD_11 para ver bot√£o de aceitar em bloco\n            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.GESTOR_COORD.titulo, USUARIOS.GESTOR_COORD.senha);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 632,
    "length": 1,
    "text": "// Capturar bot√£o de aceitar em bloco (se vis√≠vel)",
    "context": "            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n\n            // Capturar bot√£o de aceitar em bloco (se vis√≠vel)\n            const btnAceitarBloco = page.getByRole('button', {name: /Aceitar.*Bloco/i});\n            if (await btnAceitarBloco.isVisible().catch(() => false)) {\n                await btnAceitarBloco.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 640,
    "length": 1,
    "text": "// Login como Admin para homologar em bloco",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // Login como Admin para homologar em bloco\n            await page.getByTestId('btn-logout').click();\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 647,
    "length": 1,
    "text": "// Capturar bot√£o de homologar cadastro em bloco (CDU-23)",
    "context": "            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page.getByRole('heading', {name: /Unidades participantes/i})).toBeVisible();\n\n            // Capturar bot√£o de homologar cadastro em bloco (CDU-23)\n            const btnHomologarBloco = page.getByRole('button', {name: /Homologar.*Bloco/i});\n            if (await btnHomologarBloco.isVisible().catch(() => false)) {\n                await btnHomologarBloco.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 655,
    "length": 1,
    "text": "// Capturar bot√£o de disponibilizar mapas em bloco (CDU-24)",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // Capturar bot√£o de disponibilizar mapas em bloco (CDU-24)\n            const btnDisponibilizarMapaBloco = page.getByRole('button', {name: /Disponibilizar.*mapa.*Bloco/i});\n            if (await btnDisponibilizarMapaBloco.isVisible().catch(() => false)) {\n                await btnDisponibilizarMapaBloco.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 663,
    "length": 1,
    "text": "// Capturar bot√µes de aceitar/homologar mapa em bloco (CDU-25 e CDU-26 - se vis√≠veis)",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // Capturar bot√µes de aceitar/homologar mapa em bloco (CDU-25 e CDU-26 - se vis√≠veis)\n            const btnAceitarMapaBloco = page.getByRole('button', {name: /Aceitar.*mapa.*Bloco/i});\n            if (await btnAceitarMapaBloco.isVisible().catch(() => false)) {\n                await btnAceitarMapaBloco.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 680,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 10 - GEST√ÉO DE SUBPROCESSOS (CDUs 27, 32-34)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 10 - GEST√ÉO DE SUBPROCESSOS (CDUs 27, 32-34)\n    // ========================================================================\n    test.describe('10 - Gest√£o de Subprocessos', () => {\n        test('Captura modais de gest√£o de subprocesso', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 697,
    "length": 1,
    "text": "// Navegar para a p√°gina de detalhes do processo (estamos em /painel ap√≥s criar)",
    "context": "                iniciar: true\n            });\n\n            // Navegar para a p√°gina de detalhes do processo (estamos em /painel ap√≥s criar)\n            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 701,
    "length": 1,
    "text": "// Registrar para cleanup",
    "context": "            await page.getByTestId('tbl-processos').getByText(descricao).first().click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+/);\n\n            // Registrar para cleanup\n            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 705,
    "length": 1,
    "text": "// Acessar subprocesso",
    "context": "            const processoId = await extrairProcessoId(page);\n            if (processoId > 0) cleanup.registrar(processoId);\n\n            // Acessar subprocesso\n            await page.getByRole('row', {name: /SECAO_121/i}).click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+\\/SECAO_121/);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 709,
    "length": 1,
    "text": "// Modal de alterar data limite (CDU-27)",
    "context": "            await page.getByRole('row', {name: /SECAO_121/i}).click();\n            await expect(page).toHaveURL(/\\/processo\\/\\d+\\/SECAO_121/);\n\n            // Modal de alterar data limite (CDU-27)\n            const btnAlterarData = page.getByRole('button', {name: /Alterar.*data.*limite/i});\n            if (await btnAlterarData.isVisible().catch(() => false)) {\n                await btnAlterarData.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 717,
    "length": 1,
    "text": "// Modal de reabrir cadastro (CDU-32)",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // Modal de reabrir cadastro (CDU-32)\n            const btnReabrirCadastro = page.getByRole('button', {name: /Reabrir.*cadastro/i});\n            if (await btnReabrirCadastro.isVisible().catch(() => false)) {\n                await btnReabrirCadastro.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 725,
    "length": 1,
    "text": "// CDU-34: Bot√£o de enviar lembrete (a√ß√£o direta, sem modal)",
    "context": "                await page.getByRole('button', {name: /Cancelar/i}).click();\n            }\n\n            // CDU-34: Bot√£o de enviar lembrete (a√ß√£o direta, sem modal)\n            const btnEnviarLembrete = page.getByRole('button', {name: /Enviar.*lembrete/i});\n            if (await btnEnviarLembrete.isVisible().catch(() => false)) {\n                // Apenas capturar o bot√£o vis√≠vel, n√£o clicar pois executa a√ß√£o direta"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 728,
    "length": 1,
    "text": "// Apenas capturar o bot√£o vis√≠vel, n√£o clicar pois executa a√ß√£o direta",
    "context": "            // CDU-34: Bot√£o de enviar lembrete (a√ß√£o direta, sem modal)\n            const btnEnviarLembrete = page.getByRole('button', {name: /Enviar.*lembrete/i});\n            if (await btnEnviarLembrete.isVisible().catch(() => false)) {\n                // Apenas capturar o bot√£o vis√≠vel, n√£o clicar pois executa a√ß√£o direta\n            }\n        });\n    });"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 733,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 11 - GEST√ÉO DE UNIDADES E ATRIBUI√á√ïES (CDU-28)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 11 - GEST√ÉO DE UNIDADES E ATRIBUI√á√ïES (CDU-28)\n    // ========================================================================\n    test.describe('11 - Gest√£o de Unidades', () => {\n        test('Captura p√°gina de unidades e atribui√ß√£o tempor√°ria', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 740,
    "length": 1,
    "text": "// Navegar para p√°gina de unidades",
    "context": "        test('Captura p√°gina de unidades e atribui√ß√£o tempor√°ria', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Navegar para p√°gina de unidades\n            const linkUnidades = page.getByRole('link', {name: /Unidades/i});\n            if (await linkUnidades.isVisible().catch(() => false)) {\n                await linkUnidades.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 746,
    "length": 1,
    "text": "// Expandir √°rvore para ver unidades",
    "context": "                await linkUnidades.click();\n                await page.waitForTimeout(500);\n\n                // Expandir √°rvore para ver unidades\n                const btnExpand = page.getByTestId('btn-arvore-expand-SECRETARIA_1');\n                if (await btnExpand.isVisible().catch(() => false)) {\n                    await btnExpand.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 753,
    "length": 1,
    "text": "// Clicar em uma unidade para ver detalhes",
    "context": "                    await page.waitForTimeout(300);\n                }\n\n                // Clicar em uma unidade para ver detalhes\n                const unidade = page.getByText('SECAO_121').first();\n                if (await unidade.isVisible().catch(() => false)) {\n                    await unidade.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 759,
    "length": 1,
    "text": "// Modal de criar atribui√ß√£o tempor√°ria (CDU-28)",
    "context": "                    await unidade.click();\n                    await page.waitForTimeout(500);\n\n                    // Modal de criar atribui√ß√£o tempor√°ria (CDU-28)\n                    const btnCriarAtribuicao = page.getByRole('button', {name: /Criar atribui√ß√£o|Nova atribui√ß√£o/i});\n                    if (await btnCriarAtribuicao.isVisible().catch(() => false)) {\n                        await btnCriarAtribuicao.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 771,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 12 - HIST√ìRICO DE PROCESSOS (CDU-29)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 12 - HIST√ìRICO DE PROCESSOS (CDU-29)\n    // ========================================================================\n    test.describe('12 - Hist√≥rico', () => {\n        test('Captura se√ß√£o de hist√≥rico', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 778,
    "length": 1,
    "text": "// Acessar se√ß√£o de hist√≥rico",
    "context": "        test('Captura se√ß√£o de hist√≥rico', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Acessar se√ß√£o de hist√≥rico\n            const linkHistorico = page.getByRole('link', {name: /Hist√≥rico/i});\n            if (await linkHistorico.isVisible().catch(() => false)) {\n                await linkHistorico.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 784,
    "length": 1,
    "text": "// Tabela de processos finalizados",
    "context": "                await linkHistorico.click();\n                await page.waitForTimeout(500);\n\n                // Tabela de processos finalizados\n                const tabela = page.locator('table');\n                if (await tabela.isVisible().catch(() => false)) {\n                }"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 792,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 13 - CONFIGURA√á√ïES E ADMINISTRADORES (CDUs 30-31)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 13 - CONFIGURA√á√ïES E ADMINISTRADORES (CDUs 30-31)\n    // ========================================================================\n    test.describe('13 - Configura√ß√µes', () => {\n        test('Captura p√°gina de configura√ß√µes e administradores', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 799,
    "length": 1,
    "text": "// Acessar configura√ß√µes",
    "context": "        test('Captura p√°gina de configura√ß√µes e administradores', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Acessar configura√ß√µes\n            await page.getByTestId('btn-configuracoes').click();\n            await page.waitForTimeout(500);\n"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 803,
    "length": 1,
    "text": "// Se√ß√£o de configura√ß√µes do sistema (CDU-31)",
    "context": "            await page.getByTestId('btn-configuracoes').click();\n            await page.waitForTimeout(500);\n\n            // Se√ß√£o de configura√ß√µes do sistema (CDU-31)\n            const inputDiasInativacao = page.getByTestId('inp-config-dias-inativacao');\n            if (await inputDiasInativacao.isVisible().catch(() => false)) {\n            }"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 808,
    "length": 1,
    "text": "// Se√ß√£o de administradores (CDU-30)",
    "context": "            if (await inputDiasInativacao.isVisible().catch(() => false)) {\n            }\n\n            // Se√ß√£o de administradores (CDU-30)\n            const secaoAdmins = page.getByText(/Administradores/i);\n            if (await secaoAdmins.isVisible().catch(() => false)) {\n                await secaoAdmins.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 814,
    "length": 1,
    "text": "// Bot√£o de adicionar administrador",
    "context": "                await secaoAdmins.click();\n                await page.waitForTimeout(300);\n\n                // Bot√£o de adicionar administrador\n                const btnAdicionar = page.getByRole('button', {name: /Adicionar|Novo/i});\n                if (await btnAdicionar.isVisible().catch(() => false)) {\n                    await btnAdicionar.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 825,
    "length": 3,
    "text": "// ========================================================================\n// SE√á√ÉO 14 - RELAT√ìRIOS (CDUs 35-36)\n// ========================================================================",
    "context": "        });\n    });\n\n    // ========================================================================\n    // SE√á√ÉO 14 - RELAT√ìRIOS (CDUs 35-36)\n    // ========================================================================\n    test.describe('14 - Relat√≥rios', () => {\n        test('Captura p√°gina e modais de relat√≥rios', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 832,
    "length": 1,
    "text": "// Acessar relat√≥rios",
    "context": "        test('Captura p√°gina e modais de relat√≥rios', async ({page}) => {\n            await login(page, USUARIOS.ADMIN_1_PERFIL.titulo, USUARIOS.ADMIN_1_PERFIL.senha);\n\n            // Acessar relat√≥rios\n            const linkRelatorios = page.getByRole('link', {name: /Relat√≥rios/i});\n            if (await linkRelatorios.isVisible().catch(() => false)) {\n                await linkRelatorios.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 838,
    "length": 1,
    "text": "// Card de relat√≥rio de andamento (CDU-35)",
    "context": "                await linkRelatorios.click();\n                await page.waitForTimeout(500);\n\n                // Card de relat√≥rio de andamento (CDU-35)\n                const cardAndamento = page.getByTestId('card-relatorio-andamento');\n                if (await cardAndamento.isVisible().catch(() => false)) {\n                    await cardAndamento.click();"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 847,
    "length": 1,
    "text": "// Verificar filtros",
    "context": "                    if (await modalRelatorio.isVisible().catch(() => false)) {\n                    }\n\n                    // Verificar filtros\n                    const filtroTipo = page.getByTestId('sel-filtro-tipo');\n                    if (await filtroTipo.isVisible().catch(() => false)) {\n                    }"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 852,
    "length": 1,
    "text": "// Verificar bot√£o de exporta√ß√£o",
    "context": "                    if (await filtroTipo.isVisible().catch(() => false)) {\n                    }\n\n                    // Verificar bot√£o de exporta√ß√£o\n                    const btnExportar = page.getByRole('button', {name: /Exportar|PDF|CSV/i});\n                    if (await btnExportar.isVisible().catch(() => false)) {\n                    }"
  },
  {
    "file": "e2e/smoke.spec.ts",
    "type": "line",
    "line": 862,
    "length": 1,
    "text": "// Card de relat√≥rio de mapas (CDU-36)",
    "context": "                    await page.waitForTimeout(300);\n                }\n\n                // Card de relat√≥rio de mapas (CDU-36)\n                const cardMapas = page.getByTestId('card-relatorio-mapas');\n                if (await cardMapas.isVisible().catch(() => false)) {\n                    await cardMapas.click();"
  },
  {
    "file": "etc/scripts/gerar_arvore_linhas.js",
    "type": "line",
    "line": 165,
    "length": 1,
    "text": "// Padr√µes para identificar arquivos/diret√≥rios de teste",
    "context": "    return options;\n}\n\n// Padr√µes para identificar arquivos/diret√≥rios de teste\nconst testPatterns = [\n    /\\.spec\\.(js|ts|vue)$/,\n    /\\.test\\.(js|ts|vue)$/,"
  },
  {
    "file": "etc/scripts/gerar_arvore_linhas.js",
    "type": "line",
    "line": 176,
    "length": 1,
    "text": "// Normaliza para barras para correspond√™ncia de padr√£o",
    "context": "];\n\nfunction isTestFile(filePath) {\n    // Normaliza para barras para correspond√™ncia de padr√£o\n    const normalizedPath = filePath.replaceAll('\\\\', '/');\n    return testPatterns.some(pattern => pattern.test(normalizedPath));\n}"
  },
  {
    "file": "etc/scripts/gerar_arvore_linhas.js",
    "type": "line",
    "line": 181,
    "length": 1,
    "text": "// Execu√ß√£o",
    "context": "    return testPatterns.some(pattern => pattern.test(normalizedPath));\n}\n\n// Execu√ß√£o\nconst options = parseArgs();\n\nconsole.log(\"Gerando √°rvore de contagem de linhas...\\n\");"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 6,
    "length": 1,
    "text": "// Configura√ß√£o dos testes",
    "context": "import path from 'node:path';\nimport os from 'node:os';\n\n// Configura√ß√£o dos testes\nconst steps = [\n    {\n        name: 'Backend - Testes Unit√°rios',"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// Remove cores ANSI",
    "context": "const reportFile = 'relatorio-testes.md';\n\nfunction cleanLog(output) {\n    // Remove cores ANSI\n    let text = output.replace(/\\u001b\\[.*?m/g, '');\n\n    // Filtros de linhas indesejadas"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// Filtros de linhas indesejadas",
    "context": "    // Remove cores ANSI\n    let text = output.replace(/\\u001b\\[.*?m/g, '');\n\n    // Filtros de linhas indesejadas\n    const filters = [\n        /Not implemented: HTMLCanvasElement/,\n        /^> Task :.* UP-TO-DATE/,"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Filtro espec√≠fico para os pontos do vitest/jest",
    "context": "    lines = lines.filter(line => {\n        const trimmed = line.trim();\n        if (filters.some(f => f.test(trimmed))) return false;\n        // Filtro espec√≠fico para os pontos do vitest/jest\n        return !/^[.¬∑]+$/.test(trimmed);\n\n    });"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// Simple regex to find attributes in <testsuite>",
    "context": "\n    files.forEach(file => {\n        const content = fs.readFileSync(path.join(step.reportDir, file), 'utf-8');\n        // Simple regex to find attributes in <testsuite>\n        const testsMatch = content.match(/tests=\"(\\d+)\"/);\n        const failuresMatch = content.match(/failures=\"(\\d+)\"/);\n        const skippedMatch = content.match(/skipped=\"(\\d+)\"/);"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 115,
    "length": 1,
    "text": "// Pattern: Tests  1101 passed (1101)",
    "context": "function parseVitestStats(output) {\n    let stats = {passed: 0, failed: 0, skipped: 0, total: 0};\n\n    // Pattern: Tests  1101 passed (1101)\n    const passedMatch = output.match(/Tests\\s+(\\d+)\\s+passed\\s+\\((\\d+)\\)/);\n    if (passedMatch) {\n        stats.passed = parseInt(passedMatch[1], 10);"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 123,
    "length": 2,
    "text": "// Pattern: Tests  X passed | Y failed | Z skipped | W total\n// Note: Vitest output might vary, capturing generic numbers",
    "context": "        return stats;\n    }\n\n    // Pattern: Tests  X passed | Y failed | Z skipped | W total\n    // Note: Vitest output might vary, capturing generic numbers\n    const testsLine = output.match(/Tests\\s+(.*)/);\n    if (testsLine) {\n        const line = testsLine[1];"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 149,
    "length": 2,
    "text": "// Matches lines like: \"  12 passed (20s)\" or \"  10 failed\"\n// Playwright prints summaries at the end usually",
    "context": "function parsePlaywrightStats(output) {\n    let stats = {passed: 0, failed: 0, skipped: 0, total: 0};\n\n    // Matches lines like: \"  12 passed (20s)\" or \"  10 failed\"\n    // Playwright prints summaries at the end usually\n\n    const passedMatch = output.match(/(\\d+)\\s+passed/);\n    if (passedMatch) stats.passed = parseInt(passedMatch[1], 10);"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 190,
    "length": 1,
    "text": "// No Windows, npm/npx s√£o .cmd",
    "context": "\n        const cmd = process.platform === 'win32' ? `${step.command}` : step.command;\n\n        // No Windows, npm/npx s√£o .cmd\n        let finalCmd = cmd;\n        if (process.platform === 'win32' && (cmd === 'npm' || cmd === 'npx')) {\n            finalCmd = `${cmd}.cmd`;"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 221,
    "length": 1,
    "text": "// Collect stats",
    "context": "            const status = code === 0 ? '‚úÖ Sucesso' : '‚ùå Falha';\n            console.log(`\\nüèÅ Finalizado: ${step.name} (${status}) - ${duration}s`);\n\n            // Collect stats\n            const stats = getStats(step, output);\n\n            resolve({"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 257,
    "length": 1,
    "text": "// Status Table",
    "context": "\n    md += `## Resumo Executivo\\n\\n`;\n\n    // Status Table\n    md += `| Teste | Status | Dura√ß√£o (s) |\\n`;\n    md += `| :--- | :---: | :---: |\\n`;\n"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 268,
    "length": 1,
    "text": "// Statistics Table",
    "context": "    });\n    md += `\\n`;\n\n    // Statistics Table\n    md += `### Estat√≠sticas Detalhadas\\n\\n`;\n    md += `| Teste | Total | Passou | Falhou | Ignorado |\\n`;\n    md += `| :--- | :---: | :---: | :---: | :---: |\\n`;"
  },
  {
    "file": "etc/scripts/qualidade.js",
    "type": "line",
    "line": 296,
    "length": 1,
    "text": "// Limita o log para n√£o quebrar o markdown se for gigante",
    "context": "\n        let cleanOutput = cleanLog(r.output);\n\n        // Limita o log para n√£o quebrar o markdown se for gigante\n        if (cleanOutput.length > 50000) {\n            cleanOutput = `... (Log truncado - mostrando √∫ltimos 50k caracteres) ...\\n${cleanOutput.slice(-50000)}`;\n        }"
  },
  {
    "file": "frontend/.storybook/main.ts",
    "type": "block",
    "line": 4,
    "length": 1,
    "text": "/*.mdx\", \"../src/**/",
    "context": "import type {StorybookConfig} from \"@storybook/vue3-vite\";\n\nconst config: StorybookConfig = {\n    stories: [\"../src/**/*.mdx\", \"../src/**/*.stories.@(js|jsx|mjs|ts|tsx)\"],\n    addons: [\n        \"@storybook/addon-links\",\n        \"@storybook/addon-docs\""
  },
  {
    "file": "frontend/eslint.config.js",
    "type": "block",
    "line": 27,
    "length": 1,
    "text": "/*.test.ts\", \"**/",
    "context": "        },\n    }, // 2b. Allow console in test files\n    {\n        files: [\"**/*.test.ts\", \"**/*.spec.ts\", \"**/__tests__/**\"],\n        rules: {\n            \"no-console\": \"off\",\n        },"
  },
  {
    "file": "frontend/eslint.config.js",
    "type": "block",
    "line": 34,
    "length": 1,
    "text": "/*.ts\", \"**/",
    "context": "    }, // 3. ESLint's recommended rules\n    pluginJs.configs.recommended, // 4. TypeScript-specific configuration\n    ...tseslint.configs.recommended, {\n        files: [\"**/*.ts\", \"**/*.tsx\", \"**/*.vue\"],\n        languageOptions: {\n            parser: tseslint.parser,\n            parserOptions: {"
  },
  {
    "file": "frontend/eslint.config.js",
    "type": "block",
    "line": 34,
    "length": 22,
    "text": "/*.vue\"],\n        languageOptions: {\n            parser: tseslint.parser,\n            parserOptions: {\n                project: [\"./tsconfig.json\"],\n                tsconfigRootDir: import.meta.dirname,\n                extraFileExtensions: [\".vue\"],\n            },\n        },\n        rules: {\n            \"@typescript-eslint/no-explicit-any\": \"off\",\n            \"@typescript-eslint/no-unused-vars\": [\n                \"warn\",\n                {\n                    argsIgnorePattern: \"^_+$\",\n                    varsIgnorePattern: \"^_+$\",\n                },\n            ],\n        },\n    }, // 5. Vue-specific configuration\n    ...pluginVue.configs[\"flat/recommended\"], ...pluginVueA11y.configs[\"flat/recommended\"], {\n        files: [\"**/",
    "context": "    }, // 3. ESLint's recommended rules\n    pluginJs.configs.recommended, // 4. TypeScript-specific configuration\n    ...tseslint.configs.recommended, {\n        files: [\"**/*.ts\", \"**/*.tsx\", \"**/*.vue\"],\n        languageOptions: {\n            parser: tseslint.parser,\n            parserOptions: {\n                project: [\"./tsconfig.json\"],\n                tsconfigRootDir: import.meta.dirname,\n                extraFileExtensions: [\".vue\"],\n            },\n        },\n        rules: {\n            \"@typescript-eslint/no-explicit-any\": \"off\",\n            \"@typescript-eslint/no-unused-vars\": [\n                \"warn\",\n                {\n                    argsIgnorePattern: \"^_+$\",\n                    varsIgnorePattern: \"^_+$\",\n                },\n            ],\n        },\n    }, // 5. Vue-specific configuration\n    ...pluginVue.configs[\"flat/recommended\"], ...pluginVueA11y.configs[\"flat/recommended\"], {\n        files: [\"**/*.vue\"],\n        languageOptions: {\n            parser: vueParser,\n            parserOptions: {"
  },
  {
    "file": "frontend/eslint.config.js",
    "type": "line",
    "line": 1,
    "length": 1,
    "text": "// For more info, see https://github.com/storybookjs/eslint-plugin-storybook#configuration-flat-config-format",
    "context": "// For more info, see https://github.com/storybookjs/eslint-plugin-storybook#configuration-flat-config-format\nimport storybook from \"eslint-plugin-storybook\";\n\n// eslint.config.js"
  },
  {
    "file": "frontend/eslint.config.js",
    "type": "line",
    "line": 4,
    "length": 1,
    "text": "// eslint.config.js",
    "context": "// For more info, see https://github.com/storybookjs/eslint-plugin-storybook#configuration-flat-config-format\nimport storybook from \"eslint-plugin-storybook\";\n\n// eslint.config.js\nimport globals from \"globals\";\nimport pluginJs from \"@eslint/js\";\nimport tseslint from \"typescript-eslint\";"
  },
  {
    "file": "frontend/eslint.config.js",
    "type": "line",
    "line": 90,
    "length": 2,
    "text": "// Prevent console.* in production code (use logger instead)\n// Allows console.error for critical errors that should always be visible",
    "context": "    }, // 6. Custom overrides\n    {\n        rules: {\n            // Prevent console.* in production code (use logger instead)\n            // Allows console.error for critical errors that should always be visible\n            \"no-console\": [\"error\", {allow: [\"error\"]}],\n        },\n    }, // 7. Prettier integration"
  },
  {
    "file": "frontend/etc/scripts/verificar-acessibilidade.js",
    "type": "block",
    "line": 1,
    "length": 1,
    "text": "/* eslint-disable */",
    "context": "/* eslint-disable */\nimport {spawn} from 'node:child_process';\nimport fs from 'node:fs';\nimport path from 'node:path';"
  },
  {
    "file": "frontend/etc/scripts/verificar-acessibilidade.js",
    "type": "line",
    "line": 68,
    "length": 1,
    "text": "// Fallback search in cache directory",
    "context": "                console.log(`Found valid Playwright Chrome at: ${chromePath}`);\n            } else {\n                console.warn(`Playwright reported Chrome at ${candidatePath}, but it does not exist.`);\n                // Fallback search in cache directory\n\n                const homeDir = process.env.HOME || process.env.USERPROFILE;\n                const playwrightCache = path.join(homeDir, '.cache', 'ms-playwright');"
  },
  {
    "file": "frontend/etc/scripts/verificar-acessibilidade.js",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Look for chromium-* folders",
    "context": "                if (fs.existsSync(playwrightCache)) {\n                    console.log(`Searching in ${playwrightCache}...`);\n                    const entries = fs.readdirSync(playwrightCache);\n                    // Look for chromium-* folders\n                    const chromiumDirs = entries.filter(e => e.startsWith('chromium-')).sort().reverse(); // Use latest version found\n\n                    for (const dir of chromiumDirs) {"
  },
  {
    "file": "frontend/etc/scripts/verificar-acessibilidade.js",
    "type": "line",
    "line": 80,
    "length": 2,
    "text": "// Common paths: chrome-linux/chrome or chrome-linux64/chrome or chrome-win/chrome.exe etc.\n// Based on ls output: chromium-1187/chrome-linux/chrome",
    "context": "                    const chromiumDirs = entries.filter(e => e.startsWith('chromium-')).sort().reverse(); // Use latest version found\n\n                    for (const dir of chromiumDirs) {\n                        // Common paths: chrome-linux/chrome or chrome-linux64/chrome or chrome-win/chrome.exe etc.\n                        // Based on ls output: chromium-1187/chrome-linux/chrome\n                        const potentialPath = path.join(playwrightCache, dir, 'chrome-linux', 'chrome');\n                        if (fs.existsSync(potentialPath)) {\n                            chromePath = potentialPath;"
  },
  {
    "file": "frontend/src/__tests__/App.spec.ts",
    "type": "line",
    "line": 1,
    "length": 1,
    "text": "// Mock de package.json",
    "context": "// Mock de package.json\nvi.mock(\"../package.json\", () => ({default: {version: \"1.0.0-test\"}}));\n\nimport {beforeEach, describe, expect, it, vi} from \"vitest\";"
  },
  {
    "file": "frontend/src/__tests__/App.spec.ts",
    "type": "line",
    "line": 12,
    "length": 1,
    "text": "// Mock de components",
    "context": "import {useFeedbackStore} from \"@/stores/feedback\";\nimport {useToast} from \"bootstrap-vue-next\";\n\n// Mock de components\nvi.mock(\"@/components/layout/BarraNavegacao.vue\", () => ({default: {template: '<div data-testid=\"barra-navegacao\"></div>'}}));\nvi.mock(\"@/components/layout/MainNavbar.vue\", () => ({default: {template: '<div data-testid=\"main-navbar\"></div>'}}));\nvi.mock(\"bootstrap-vue-next\", async () => {"
  },
  {
    "file": "frontend/src/__tests__/App.spec.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Mock do router",
    "context": "    };\n});\n\n// Mock do router\nvi.mock(\"vue-router\", () => ({\n    useRoute: vi.fn(),\n    RouterView: {template: '<div data-testid=\"router-view\"></div>'}"
  },
  {
    "file": "frontend/src/__tests__/App.spec.ts",
    "type": "line",
    "line": 30,
    "length": 1,
    "text": "// Mock do sessionStorage",
    "context": "    RouterView: {template: '<div data-testid=\"router-view\"></div>'}\n}));\n\n// Mock do sessionStorage\nconst sessionStorageMock = (() => {\n    let store: Record<string, string> = {};\n    return {"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 6,
    "length": 1,
    "text": "// Hoist mock instance so it's shared between module and test",
    "context": "import router from \"@/router\";\nimport {useFeedbackStore} from \"@/stores/feedback\";\n\n// Hoist mock instance so it's shared between module and test\nconst {mockInstance} = vi.hoisted(() => {\n    return {\n        mockInstance: {"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 23,
    "length": 1,
    "text": "// Mock router",
    "context": "    };\n});\n\n// Mock router\nvi.mock(\"@/router\", () => ({\n    default: {\n        push: vi.fn().mockResolvedValue(undefined),"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 33,
    "length": 1,
    "text": "// Mock logger",
    "context": "    },\n}));\n\n// Mock logger\nvi.mock(\"@/utils\", () => {\n    return {\n        logger: {"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Mock axios",
    "context": "    }\n});\n\n// Mock axios\nvi.mock(\"axios\", () => {\n    return {\n        default: {"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 59,
    "length": 1,
    "text": "// Import axios-setup AFTER mocking its dependencies",
    "context": "    let responseErrorInterceptor: (error: any) => any;\n\n    beforeAll(async () => {\n        // Import axios-setup AFTER mocking its dependencies\n        const {setRouter} = await import(\"../axios-setup\"); // Use dynamic import\n        setRouter(router as any);\n"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Access interceptors from the hoisted mock instance",
    "context": "        const {setRouter} = await import(\"../axios-setup\"); // Use dynamic import\n        setRouter(router as any);\n\n        // Access interceptors from the hoisted mock instance\n        const requestUseCalls = mockInstance.interceptors.request.use.mock.calls;\n        const responseUseCalls = mockInstance.interceptors.response.use.mock.calls;\n"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 72,
    "length": 1,
    "text": "// responseUseCalls[0][0] is success handler (identity)",
    "context": "            requestErrorInterceptor = requestUseCalls[0][1];\n        }\n        if (responseUseCalls.length > 0) {\n            // responseUseCalls[0][0] is success handler (identity)\n            responseErrorInterceptor = responseUseCalls[0][1];\n        }\n    }, 30000); // Increased timeout to 30s"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 138,
    "length": 1,
    "text": "// Title changed to \"Erro Inesperado\" in apiError.ts",
    "context": "            stack: 'stack'\n        };\n        await expect(responseErrorInterceptor(error)).rejects.toEqual(error);\n        // Title changed to \"Erro Inesperado\" in apiError.ts\n        expect(feedbackStore.show).toHaveBeenCalledWith(\"Erro Inesperado\", expect.stringContaining(\"Server Error\"), \"danger\", 60000);\n    });\n"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 164,
    "length": 1,
    "text": "// isAxiosError: true, and no response, but request exists",
    "context": "        const feedbackStore = useFeedbackStore();\n        vi.spyOn(feedbackStore, \"show\");\n\n        // isAxiosError: true, and no response, but request exists\n        const error = {isAxiosError: true, request: {}, message: \"Network Error\"};\n        await expect(responseErrorInterceptor(error)).rejects.toEqual(error);\n        expect(feedbackStore.show).toHaveBeenCalledWith("
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 186,
    "length": 1,
    "text": "// Simular erro ao chamar show",
    "context": "\n    it(\"interceptor de erro de resposta deve tratar erros da store graciosamente\", async () => {\n        const feedbackStore = useFeedbackStore();\n        // Simular erro ao chamar show\n        vi.spyOn(feedbackStore, \"show\").mockImplementation(() => {\n            throw new Error(\"Store error\");\n        });"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 193,
    "length": 1,
    "text": "// O interceptor deve rejeitar o erro mesmo quando feedbackStore.show falha",
    "context": "\n        const error = new Error(\"Generic failure\");\n\n        // O interceptor deve rejeitar o erro mesmo quando feedbackStore.show falha\n        await expect(responseErrorInterceptor(error)).rejects.toEqual(error);\n\n        // Verificar que tentou exibir o erro (e falhou)"
  },
  {
    "file": "frontend/src/__tests__/axios-setup.spec.ts",
    "type": "line",
    "line": 196,
    "length": 1,
    "text": "// Verificar que tentou exibir o erro (e falhou)",
    "context": "        // O interceptor deve rejeitar o erro mesmo quando feedbackStore.show falha\n        await expect(responseErrorInterceptor(error)).rejects.toEqual(error);\n\n        // Verificar que tentou exibir o erro (e falhou)\n        expect(feedbackStore.show).toHaveBeenCalledWith(\"Erro Inesperado\", expect.stringContaining(\"Generic failure\"), \"danger\", 60000);\n    });\n});"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 6,
    "length": 1,
    "text": "// Mock UnidadeTreeNode since it is a child component",
    "context": "import ArvoreUnidades from '@/components/unidade/ArvoreUnidades.vue';\nimport {Unidade} from '@/types/tipos';\n\n// Mock UnidadeTreeNode since it is a child component\nconst UnidadeTreeNodeStub = {\n    template: '<div><slot></slot></div>',\n    props: ['unidade', 'isChecked', 'isExpanded', 'isHabilitado', 'get-estado-selecao', 'on-toggle', 'on-toggle-expand']"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 83,
    "length": 1,
    "text": "// Se ocultar raiz, deve renderizar os filhos diretos da raiz",
    "context": "            }\n        });\n\n        // Se ocultar raiz, deve renderizar os filhos diretos da raiz\n        const children = wrapper.findAllComponents(UnidadeTreeNodeStub);\n        // Esperamos 2 filhos (CHILD1 e CHILD2) pois ROOT foi ocultado\n        expect(children.length).toBe(2);"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 85,
    "length": 1,
    "text": "// Esperamos 2 filhos (CHILD1 e CHILD2) pois ROOT foi ocultado",
    "context": "\n        // Se ocultar raiz, deve renderizar os filhos diretos da raiz\n        const children = wrapper.findAllComponents(UnidadeTreeNodeStub);\n        // Esperamos 2 filhos (CHILD1 e CHILD2) pois ROOT foi ocultado\n        expect(children.length).toBe(2);\n    });\n"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// Esperamos 1 raiz (ROOT)",
    "context": "        });\n\n        const children = wrapper.findAllComponents(UnidadeTreeNodeStub);\n        // Esperamos 1 raiz (ROOT)\n        expect(children.length).toBe(1);\n    });\n"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Acesso indireto via props passadas para o stub",
    "context": "            }\n        });\n\n        // Acesso indireto via props passadas para o stub\n        const rootNode = wrapper.findComponent(UnidadeTreeNodeStub);\n        expect(rootNode.props('isExpanded')(mockUnidades[0])).toBe(true);\n    });"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 147,
    "length": 1,
    "text": "// Inicialmente expandido (pelo teste anterior), toggle deve fechar",
    "context": "        const rootNode = wrapper.findComponent(UnidadeTreeNodeStub);\n        const toggleExpand = rootNode.props('onToggleExpand');\n\n        // Inicialmente expandido (pelo teste anterior), toggle deve fechar\n        await toggleExpand(mockUnidades[0]);\n        expect(rootNode.props('isExpanded')(mockUnidades[0])).toBe(false);\n"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 151,
    "length": 1,
    "text": "// Toggle novamente deve abrir",
    "context": "        await toggleExpand(mockUnidades[0]);\n        expect(rootNode.props('isExpanded')(mockUnidades[0])).toBe(false);\n\n        // Toggle novamente deve abrir\n        await toggleExpand(mockUnidades[0]);\n        expect(rootNode.props('isExpanded')(mockUnidades[0])).toBe(true);\n    });"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 196,
    "length": 1,
    "text": "// ROOT n√£o √© eleg√≠vel, mas tem filhas eleg√≠veis -> Habilitado",
    "context": "        const rootNode = wrapper.findComponent(UnidadeTreeNodeStub);\n        const isHabilitado = rootNode.props('isHabilitado');\n\n        // ROOT n√£o √© eleg√≠vel, mas tem filhas eleg√≠veis -> Habilitado\n        expect(isHabilitado(mockUnidades[0])).toBe(true);\n\n        // CHILD1 √© eleg√≠vel -> Habilitado"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 199,
    "length": 1,
    "text": "// CHILD1 √© eleg√≠vel -> Habilitado",
    "context": "        // ROOT n√£o √© eleg√≠vel, mas tem filhas eleg√≠veis -> Habilitado\n        expect(isHabilitado(mockUnidades[0])).toBe(true);\n\n        // CHILD1 √© eleg√≠vel -> Habilitado\n        expect(isHabilitado(mockUnidades[0].filhas![0])).toBe(true);\n    });\n"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 221,
    "length": 1,
    "text": "// ROOT tem 2 filhas eleg√≠veis, s√≥ 1 selecionada -> Indeterminado",
    "context": "        const rootNode = wrapper.findComponent(UnidadeTreeNodeStub);\n        const getEstadoSelecao = rootNode.props('getEstadoSelecao');\n\n        // ROOT tem 2 filhas eleg√≠veis, s√≥ 1 selecionada -> Indeterminado\n        expect(getEstadoSelecao(mockUnidades[0])).toBe('indeterminate');\n    });\n"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 243,
    "length": 1,
    "text": "// Selecionar CHILD1",
    "context": "        const rootNode = wrapper.findComponent(UnidadeTreeNodeStub);\n        const toggle = rootNode.props('onToggle');\n\n        // Selecionar CHILD1\n        await toggle(mockUnidades[0].filhas![0], true);\n\n        // Deve emitir update:modelValue com [2]"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 246,
    "length": 1,
    "text": "// Deve emitir update:modelValue com [2]",
    "context": "        // Selecionar CHILD1\n        await toggle(mockUnidades[0].filhas![0], true);\n\n        // Deve emitir update:modelValue com [2]\n        expect(wrapper.emitted('update:modelValue')).toBeTruthy();\n        expect(wrapper.emitted('update:modelValue')![0]).toEqual([[2]]);\n    });"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 269,
    "length": 1,
    "text": "// Deselecionar CHILD1",
    "context": "        const rootNode = wrapper.findComponent(UnidadeTreeNodeStub);\n        const toggle = rootNode.props('onToggle');\n\n        // Deselecionar CHILD1\n        await toggle(mockUnidades[0].filhas![0], false);\n\n        expect(wrapper.emitted('update:modelValue')).toBeTruthy();"
  },
  {
    "file": "frontend/src/__tests__/components/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 294,
    "length": 3,
    "text": "// Selecionar ROOT (que deve selecionar CHILD1, CHILD2 e GRANDCHILD pois s√£o eleg√≠veis)\n// ROOT n√£o √© eleg√≠vel, ent√£o n√£o entra.\n// CHILD1 (2), CHILD2 (3), GRANDCHILD (4) entram.",
    "context": "        const rootNode = wrapper.findComponent(UnidadeTreeNodeStub);\n        const toggle = rootNode.props('onToggle');\n\n        // Selecionar ROOT (que deve selecionar CHILD1, CHILD2 e GRANDCHILD pois s√£o eleg√≠veis)\n        // ROOT n√£o √© eleg√≠vel, ent√£o n√£o entra.\n        // CHILD1 (2), CHILD2 (3), GRANDCHILD (4) entram.\n        await toggle(mockUnidades[0], true);\n\n        const emitted = wrapper.emitted('update:modelValue')![0][0] as number[];"
  },
  {
    "file": "frontend/src/__tests__/components/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 9,
    "length": 1,
    "text": "// Mocks",
    "context": "import {createTestingPinia} from '@pinia/testing';\nimport {Perfil} from '@/types/tipos';\n\n// Mocks\nvi.mock('vue-router', async (importOriginal) => {\n    const actual = await importOriginal<typeof import('vue-router')>();\n    return {"
  },
  {
    "file": "frontend/src/__tests__/components/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 121,
    "length": 1,
    "text": "// Home -> UNIDADE (Subprocesso skipped)",
    "context": "                perfil: {perfilSelecionado: Perfil.CHEFE}\n            });\n            const items = wrapper.findAllComponents(BBreadcrumbItemStub);\n            // Home -> UNIDADE (Subprocesso skipped)\n            expect(items.length).toBe(2);\n            expect(items[1].text()).toBe('UNIDADE');\n        });"
  },
  {
    "file": "frontend/src/__tests__/components/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 133,
    "length": 1,
    "text": "// Home -> Detalhes do processo -> UNIDADE -> Mapa de compet√™ncias",
    "context": "                perfil: {perfilSelecionado: Perfil.GESTOR}\n            });\n            const items = wrapper.findAllComponents(BBreadcrumbItemStub);\n            // Home -> Detalhes do processo -> UNIDADE -> Mapa de compet√™ncias\n            expect(items.length).toBe(4);\n            expect(items[1].text()).toBe('Detalhes do processo');\n            expect(items[2].text()).toBe('UNIDADE');"
  },
  {
    "file": "frontend/src/__tests__/components/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 148,
    "length": 1,
    "text": "// Home -> MINHA_UNIDADE -> Minha unidade (T√≠tulo da pagina)",
    "context": "                unidades: {unidade: {codigo: 10, sigla: 'MINHA_UNIDADE'}}\n            });\n            const items = wrapper.findAllComponents(BBreadcrumbItemStub);\n            // Home -> MINHA_UNIDADE -> Minha unidade (T√≠tulo da pagina)\n            expect(items.length).toBe(3);\n            expect(items[1].text()).toBe('MINHA_UNIDADE');\n            expect(items[2].text()).toBe('Minha unidade');"
  },
  {
    "file": "frontend/src/__tests__/components/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 162,
    "length": 1,
    "text": "// Home -> ADMIN -> Unidades",
    "context": "                unidades: {unidade: {codigo: 1, sigla: 'ADMIN'}}\n            });\n            const items = wrapper.findAllComponents(BBreadcrumbItemStub);\n            // Home -> ADMIN -> Unidades\n            expect(items.length).toBe(3);\n            expect(items[1].text()).toBe('ADMIN');\n            expect(items[2].text()).toBe('Unidades');"
  },
  {
    "file": "frontend/src/__tests__/components/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 176,
    "length": 1,
    "text": "// Home -> Unidade 99 -> Minha unidade",
    "context": "                unidades: {unidade: null}\n            });\n            const items = wrapper.findAllComponents(BBreadcrumbItemStub);\n            // Home -> Unidade 99 -> Minha unidade\n            expect(items[1].text()).toBe('Unidade 99');\n        });\n"
  },
  {
    "file": "frontend/src/__tests__/components/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 228,
    "length": 1,
    "text": "// Home -> TESTE -> Mapa de compet√™ncias",
    "context": "                unidades: {unidade: {codigo: 10, sigla: 'TESTE'}}\n            });\n            const items = wrapper.findAllComponents(BBreadcrumbItemStub);\n            // Home -> TESTE -> Mapa de compet√™ncias\n            expect(items[2].text()).toBe('Mapa de compet√™ncias');\n        });\n    });"
  },
  {
    "file": "frontend/src/__tests__/router.spec.ts",
    "type": "line",
    "line": 6,
    "length": 1,
    "text": "// Mock the views to avoid loading real components",
    "context": "import router from \"../router\";\nimport {usePerfilStore} from \"@/stores/perfil\";\n\n// Mock the views to avoid loading real components\nvi.mock(\"../views/LoginView.vue\", () => ({\n    default: {template: \"<div>Login</div>\"},\n}));"
  },
  {
    "file": "frontend/src/__tests__/router.spec.ts",
    "type": "line",
    "line": 65,
    "length": 1,
    "text": "// Reset router to initial state if possible, or just push to root",
    "context": "describe(\"Router\", () => {\n    beforeEach(async () => {\n        setActivePinia(createPinia());\n        // Reset router to initial state if possible, or just push to root\n        await router.push(\"/\");\n    });\n"
  },
  {
    "file": "frontend/src/__tests__/router.spec.ts",
    "type": "line",
    "line": 111,
    "length": 1,
    "text": "// Test props function",
    "context": "        expect(route.params.codProcesso).toBe(\"123\");\n        expect(route.params.siglaUnidade).toBe(\"DTI\");\n\n        // Test props function\n        const matched = route.matched.find((m) => m.name === \"Subprocesso\");\n        expect(matched).toBeDefined();\n        if (matched && typeof matched.props.default === \"function\") {"
  },
  {
    "file": "frontend/src/__tests__/router.spec.ts",
    "type": "line",
    "line": 122,
    "length": 1,
    "text": "// Test breadcrumb function",
    "context": "            });\n        }\n\n        // Test breadcrumb function\n        const breadcrumb = route.meta.breadcrumb;\n        if (typeof breadcrumb === \"function\") {\n            expect(breadcrumb(route)).toBe(\"DTI\");"
  },
  {
    "file": "frontend/src/__tests__/utils/logger.spec.ts",
    "type": "line",
    "line": 4,
    "length": 1,
    "text": "// Unmock the logger to test the real implementation",
    "context": "import {describe, expect, it, vi} from \"vitest\";\nimport logger, {getLogLevel} from \"@/utils/logger\";\n\n// Unmock the logger to test the real implementation\nvi.unmock(\"@/utils/logger\");\n\ndescribe(\"utils/logger.ts\", () => {"
  },
  {
    "file": "frontend/src/__tests__/utils/logger.spec.ts",
    "type": "line",
    "line": 35,
    "length": 1,
    "text": "// Como estamos rodando em test, deve ser 1",
    "context": "        });\n\n        it(\"deve usar import.meta.env.MODE como padr√£o\", () => {\n            // Como estamos rodando em test, deve ser 1\n            expect(getLogLevel()).toBe(1);\n        });\n    });"
  },
  {
    "file": "frontend/src/__tests__/views/ConfiguracoesView.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "import Configuracoes from '@/views/ConfiguracoesView.vue'\nimport {useConfiguracoesStore} from '@/stores/configuracoes'\n\n// Mock dependencies\nconst {mockApiClient} = vi.hoisted(() => {\n    return {\n        mockApiClient: {"
  },
  {
    "file": "frontend/src/__tests__/views/ConfiguracoesView.spec.ts",
    "type": "line",
    "line": 64,
    "length": 1,
    "text": "// Verifica se a a√ß√£o foi chamada durante onMounted",
    "context": "        const store = useConfiguracoesStore()\n        await wrapper.vm.$nextTick()\n\n        // Verifica se a a√ß√£o foi chamada durante onMounted\n        expect(store.carregarConfiguracoes).toHaveBeenCalled()\n        expect(wrapper.text()).toContain('Configura√ß√µes do Sistema')\n    })"
  },
  {
    "file": "frontend/src/__tests__/views/ConfiguracoesView.spec.ts",
    "type": "line",
    "line": 92,
    "length": 1,
    "text": "// Aguardar que onMounted processe e atualize o formul√°rio",
    "context": "            }\n        })\n\n        // Aguardar que onMounted processe e atualize o formul√°rio\n        await wrapper.vm.$nextTick()\n        await new Promise(resolve => setTimeout(resolve, 10))\n"
  },
  {
    "file": "frontend/src/__tests__/views/HistoricoView.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mock router",
    "context": "import {createTestingPinia} from \"@pinia/testing\";\nimport {setupComponentTest} from \"@/test-utils/componentTestHelpers\";\n\n// Mock router\nconst {mockPush} = vi.hoisted(() => {\n    return {\n        mockPush: vi.fn(),"
  },
  {
    "file": "frontend/src/__tests__/views/HistoricoView.spec.ts",
    "type": "line",
    "line": 28,
    "length": 6,
    "text": "// Setup components mocks to avoid rendering issues\n// BContainer, BRow, BCol, BCard, BButton are from bootstrap-vue-next\n// Given the errors were \"Cannot call vm on an empty VueWrapper\", it usually means\n// we tried to find a component that wasn't rendered or wasn't found.\n// The previous test code was trying to find 'TabelaProcessos', but the View code uses a manual table inside BCard.\n// So the test was completely out of sync with the implementation.",
    "context": "    createMemoryHistory: vi.fn(),\n}));\n\n// Setup components mocks to avoid rendering issues\n// BContainer, BRow, BCol, BCard, BButton are from bootstrap-vue-next\n// Given the errors were \"Cannot call vm on an empty VueWrapper\", it usually means\n// we tried to find a component that wasn't rendered or wasn't found.\n// The previous test code was trying to find 'TabelaProcessos', but the View code uses a manual table inside BCard.\n// So the test was completely out of sync with the implementation.\n\ndescribe(\"HistoricoView.vue\", () => {\n    const context = setupComponentTest();"
  },
  {
    "file": "frontend/src/__tests__/views/HistoricoView.spec.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// The component uses the store, so the data should be rendered from initial state",
    "context": "        context.wrapper = mount(HistoricoView, mountOptions());\n        await flushPromises();\n\n        // The component uses the store, so the data should be rendered from initial state\n        expect(context.wrapper.findAll('tbody tr').length).toBe(2);\n    });\n"
  },
  {
    "file": "frontend/src/__tests__/views/HistoricoView.spec.ts",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// We have 2 processes mocked in initial state.",
    "context": "        await flushPromises();\n\n        const rows = context.wrapper.findAll('tbody tr');\n        // We have 2 processes mocked in initial state.\n        expect(rows.length).toBe(2);\n        expect(rows[0].text()).toContain(\"Proc B\");\n        expect(rows[1].text()).toContain(\"Proc A\");"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 10,
    "length": 1,
    "text": "// Mocks",
    "context": "import {useRouter} from \"vue-router\";\nimport {Perfil} from \"@/types/tipos\";\n\n// Mocks\nvi.mock(\"vue-router\", () => ({\n    useRouter: vi.fn(),\n    createRouter: vi.fn(() => ({"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Stubs for bootstrap components to simplify testing",
    "context": "                    stubActions: false, // We want to call actions to test logic inside them or mock them explicitly\n                }),\n            ],\n            // Stubs for bootstrap components to simplify testing\n            stubs: {\n                BCard: {template: \"<div><slot /></div>\"},\n                BForm: {template: '<form @submit.prevent><slot /></form>'},"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// Simple input stubs that support v-model",
    "context": "            stubs: {\n                BCard: {template: \"<div><slot /></div>\"},\n                BForm: {template: '<form @submit.prevent><slot /></form>'},\n                // Simple input stubs that support v-model\n                BFormInput: {\n                    props: ['modelValue'],\n                    emits: ['update:modelValue'],"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 73,
    "length": 1,
    "text": "// Passo 2 deve estar oculto",
    "context": "        expect(wrapper.find('[data-testid=\"inp-login-usuario\"]').exists()).toBe(true);\n        expect(wrapper.find('[data-testid=\"inp-login-senha\"]').exists()).toBe(true);\n        expect(wrapper.find('[data-testid=\"btn-login-entrar\"]').exists()).toBe(true);\n        // Passo 2 deve estar oculto\n        expect(wrapper.find('[data-testid=\"sec-login-perfil\"]').exists()).toBe(false);\n    });\n"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// Limpar campos (j√° que no DEV mode v√™m preenchidos)",
    "context": "        const wrapper = mount(LoginView, mountOptions());\n        const feedbackStore = useFeedbackStore();\n\n        // Limpar campos (j√° que no DEV mode v√™m preenchidos)\n        await wrapper.find('[data-testid=\"inp-login-usuario\"]').setValue(\"\");\n        await wrapper.find('[data-testid=\"inp-login-senha\"]').setValue(\"\");\n"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// Mock do loginCompleto retornando sucesso",
    "context": "        const wrapper = mount(LoginView, mountOptions());\n        const perfilStore = usePerfilStore();\n\n        // Mock do loginCompleto retornando sucesso\n        perfilStore.loginCompleto = vi.fn().mockResolvedValue(true);\n        // Mock de um √∫nico perfil\n        perfilStore.perfisUnidades = [MOCK_PERFIS[0]];"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// Mock de um √∫nico perfil",
    "context": "\n        // Mock do loginCompleto retornando sucesso\n        perfilStore.loginCompleto = vi.fn().mockResolvedValue(true);\n        // Mock de um √∫nico perfil\n        perfilStore.perfisUnidades = [MOCK_PERFIS[0]];\n\n        await wrapper.find('[data-testid=\"inp-login-usuario\"]').setValue(\"123\");"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 147,
    "length": 1,
    "text": "// Verifica se mudou o passo (aparece o select)",
    "context": "        await wrapper.find('form').trigger('submit');\n\n        expect(routerPushMock).not.toHaveBeenCalled();\n        // Verifica se mudou o passo (aparece o select)\n        expect(wrapper.find('[data-testid=\"sec-login-perfil\"]').exists()).toBe(true);\n    });\n"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 160,
    "length": 1,
    "text": "// Passo 1",
    "context": "        perfilStore.selecionarPerfilUnidade = vi.fn().mockResolvedValue(true);\n        perfilStore.perfisUnidades = MOCK_PERFIS;\n\n        // Passo 1\n        await wrapper.find('[data-testid=\"inp-login-usuario\"]').setValue(\"123\");\n        await wrapper.find('[data-testid=\"inp-login-senha\"]').setValue(\"pass\");\n        await wrapper.find('form').trigger('submit');"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 165,
    "length": 1,
    "text": "// Passo 2",
    "context": "        await wrapper.find('[data-testid=\"inp-login-senha\"]').setValue(\"pass\");\n        await wrapper.find('form').trigger('submit');\n\n        // Passo 2\n        expect(wrapper.find('[data-testid=\"sec-login-perfil\"]').exists()).toBe(true);\n\n"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 169,
    "length": 1,
    "text": "// Trigger submit novamente para confirmar sele√ß√£o",
    "context": "        expect(wrapper.find('[data-testid=\"sec-login-perfil\"]').exists()).toBe(true);\n\n\n        // Trigger submit novamente para confirmar sele√ß√£o\n        await wrapper.find('form').trigger('submit');\n\n        expect(perfilStore.selecionarPerfilUnidade).toHaveBeenCalledWith(\"123\", MOCK_PERFIS[0]);"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 181,
    "length": 1,
    "text": "// Simula erro na chamada do store",
    "context": "        const perfilStore = usePerfilStore();\n        const feedbackStore = useFeedbackStore();\n\n        // Simula erro na chamada do store\n        perfilStore.loginCompleto = vi.fn().mockRejectedValue(new Error(\"Erro de rede\"));\n\n        // Precisamos mockar console.error para n√£o poluir o output do teste"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 184,
    "length": 1,
    "text": "// Precisamos mockar console.error para n√£o poluir o output do teste",
    "context": "        // Simula erro na chamada do store\n        perfilStore.loginCompleto = vi.fn().mockRejectedValue(new Error(\"Erro de rede\"));\n\n        // Precisamos mockar console.error para n√£o poluir o output do teste\n        const consoleSpy = vi.spyOn(console, 'error').mockImplementation(() => {\n        });\n"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 192,
    "length": 1,
    "text": "// Aguarda a promise rejeitada ser processada",
    "context": "        await wrapper.find('[data-testid=\"inp-login-senha\"]').setValue(\"pass\");\n        await wrapper.find('form').trigger('submit');\n\n        // Aguarda a promise rejeitada ser processada\n        await new Promise(resolve => setTimeout(resolve, 0));\n\n        expect(feedbackStore.show).toHaveBeenCalledWith("
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 231,
    "length": 1,
    "text": "// Precisamos mockar console.error para n√£o poluir o output do teste",
    "context": "        perfilStore.selecionarPerfilUnidade = vi.fn().mockRejectedValue(new Error(\"Erro ao selecionar\"));\n        perfilStore.perfisUnidades = MOCK_PERFIS;\n\n        // Precisamos mockar console.error para n√£o poluir o output do teste\n        const consoleSpy = vi.spyOn(console, 'error').mockImplementation(() => {\n        });\n"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 235,
    "length": 1,
    "text": "// Passo 1",
    "context": "        const consoleSpy = vi.spyOn(console, 'error').mockImplementation(() => {\n        });\n\n        // Passo 1\n        await wrapper.find('[data-testid=\"inp-login-usuario\"]').setValue(\"123\");\n        await wrapper.find('[data-testid=\"inp-login-senha\"]').setValue(\"pass\");\n        await wrapper.find('form').trigger('submit');"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 240,
    "length": 1,
    "text": "// Passo 2 - Tentar selecionar",
    "context": "        await wrapper.find('[data-testid=\"inp-login-senha\"]').setValue(\"pass\");\n        await wrapper.find('form').trigger('submit');\n\n        // Passo 2 - Tentar selecionar\n        await wrapper.find('form').trigger('submit');\n\n        // Aguarda a promise rejeitada ser processada"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 243,
    "length": 1,
    "text": "// Aguarda a promise rejeitada ser processada",
    "context": "        // Passo 2 - Tentar selecionar\n        await wrapper.find('form').trigger('submit');\n\n        // Aguarda a promise rejeitada ser processada\n        await new Promise(resolve => setTimeout(resolve, 0));\n\n        expect(feedbackStore.show).toHaveBeenCalledWith("
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 262,
    "length": 1,
    "text": "// Passo 1",
    "context": "        perfilStore.loginCompleto = vi.fn().mockResolvedValue(true);\n        perfilStore.perfisUnidades = MOCK_PERFIS;\n\n        // Passo 1\n        await wrapper.find('[data-testid=\"inp-login-usuario\"]').setValue(\"123\");\n        await wrapper.find('[data-testid=\"inp-login-senha\"]').setValue(\"pass\");\n        await wrapper.find('form').trigger('submit');"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 268,
    "length": 1,
    "text": "// Verifica se mudou para o passo 2",
    "context": "        await wrapper.find('form').trigger('submit');\n\n\n        // Verifica se mudou para o passo 2\n        expect(wrapper.find('[data-testid=\"sec-login-perfil\"]').exists()).toBe(true);\n\n        // Encontra o select pelo componente para emitir o evento"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 271,
    "length": 1,
    "text": "// Encontra o select pelo componente para emitir o evento",
    "context": "        // Verifica se mudou para o passo 2\n        expect(wrapper.find('[data-testid=\"sec-login-perfil\"]').exists()).toBe(true);\n\n        // Encontra o select pelo componente para emitir o evento\n        const select = wrapper.findComponent({name: 'BFormSelect'});\n        if (select.exists()) {\n            await select.vm.$emit('update:modelValue', null);"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 294,
    "length": 1,
    "text": "// Disparar evento nativo com mock do getModifierState",
    "context": "        const inputWrapper = wrapper.find('[data-testid=\"inp-login-senha\"]');\n        expect(inputWrapper.exists()).toBe(true);\n\n        // Disparar evento nativo com mock do getModifierState\n        const eventOn = new KeyboardEvent(\"keydown\", {bubbles: true});\n        Object.defineProperty(eventOn, \"getModifierState\", {\n            value: (key: string) => key === \"CapsLock\","
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 305,
    "length": 1,
    "text": "// Simula evento keyup com caps lock desativado",
    "context": "        expect(wrapper.find('[data-testid=\"alert-caps-lock\"]').exists()).toBe(true);\n        expect(wrapper.find('[data-testid=\"alert-caps-lock\"]').text()).toContain(\"Caps Lock ativado\");\n\n        // Simula evento keyup com caps lock desativado\n        const eventOff = new KeyboardEvent(\"keyup\", {bubbles: true});\n        Object.defineProperty(eventOff, \"getModifierState\", {\n            value: () => false,"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 322,
    "length": 3,
    "text": "// Encontra o bot√£o de toggle. Como est√° dentro de um slot e BInputGroup n√£o est√° stubbed,\n// precisamos garantir que conseguimos encontr√°-lo.\n// O bot√£o tem aria-label 'Mostrar senha' inicialmente.",
    "context": "        const inputSenha = wrapper.find('[data-testid=\"inp-login-senha\"]');\n        expect(inputSenha.attributes(\"type\")).toBe(\"password\"); // Default\n\n        // Encontra o bot√£o de toggle. Como est√° dentro de um slot e BInputGroup n√£o est√° stubbed,\n        // precisamos garantir que conseguimos encontr√°-lo.\n        // O bot√£o tem aria-label 'Mostrar senha' inicialmente.\n        const toggleBtn = wrapper.find('[aria-label=\"Mostrar senha\"]');\n        expect(toggleBtn.exists()).toBe(true);\n"
  },
  {
    "file": "frontend/src/__tests__/views/LoginView.spec.ts",
    "type": "line",
    "line": 330,
    "length": 1,
    "text": "// Verifica se mudou o tipo do input",
    "context": "\n        await toggleBtn.trigger(\"click\");\n\n        // Verifica se mudou o tipo do input\n        expect(wrapper.find('[data-testid=\"inp-login-senha\"]').attributes(\"type\")).toBe(\"text\");\n        expect(wrapper.find('[aria-label=\"Ocultar senha\"]').exists()).toBe(true);\n"
  },
  {
    "file": "frontend/src/__tests__/views/PainelView.spec.ts",
    "type": "line",
    "line": 9,
    "length": 1,
    "text": "// Mock router",
    "context": "import {useAlertasStore} from \"@/stores/alertas\";\nimport {useRouter} from \"vue-router\";\n\n// Mock router\nvi.mock(\"vue-router\", () => ({\n    useRouter: vi.fn(),\n    createRouter: vi.fn(() => ({"
  },
  {
    "file": "frontend/src/__tests__/views/PainelView.spec.ts",
    "type": "line",
    "line": 121,
    "length": 1,
    "text": "// Admin",
    "context": "    });\n\n    it(\"deve mostrar bot√£o de criar processo apenas para admin\", async () => {\n        // Admin\n        const wrapperAdmin = mount(PainelView, mountOptions({\n            perfil: {perfis: [\"ADMIN\"]}\n        }));"
  },
  {
    "file": "frontend/src/__tests__/views/PainelView.spec.ts",
    "type": "line",
    "line": 127,
    "length": 1,
    "text": "// Not Admin",
    "context": "        }));\n        expect(wrapperAdmin.find('[data-testid=\"btn-painel-criar-processo\"]').exists()).toBe(true);\n\n        // Not Admin\n        const wrapperUser = mount(PainelView, mountOptions({\n            perfil: {perfis: [\"USER\"]}\n        }));"
  },
  {
    "file": "frontend/src/__tests__/views/PainelView.spec.ts",
    "type": "line",
    "line": 165,
    "length": 1,
    "text": "// Aguarda onMounted/onActivated",
    "context": "        const wrapper = mount(PainelView, mountOptions());\n        const alertasStore = useAlertasStore();\n\n        // Aguarda onMounted/onActivated\n        await wrapper.vm.$nextTick();\n        await flushPromises();\n"
  },
  {
    "file": "frontend/src/__tests__/views/PainelViewCoverage.spec.ts",
    "type": "line",
    "line": 9,
    "length": 1,
    "text": "// Mock router",
    "context": "import {useAlertasStore} from '@/stores/alertas';\nimport {useRouter} from 'vue-router';\n\n// Mock router\nvi.mock(\"vue-router\", () => ({\n    useRouter: vi.fn(),\n    createRouter: vi.fn(() => ({"
  },
  {
    "file": "frontend/src/__tests__/views/PainelViewCoverage.spec.ts",
    "type": "line",
    "line": 73,
    "length": 1,
    "text": "// Wait for onMounted",
    "context": "        const processosStore = useProcessosStore(pinia);\n        const alertasStore = useAlertasStore(pinia);\n\n        // Wait for onMounted\n        await wrapper.vm.$nextTick();\n\n        expect(processosStore.buscarProcessosPainel).toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/__tests__/views/PainelViewCoverage.spec.ts",
    "type": "line",
    "line": 103,
    "length": 1,
    "text": "// Call the method directly to trigger the branch",
    "context": "\n        const alertasStore = useAlertasStore(pinia);\n\n        // Call the method directly to trigger the branch\n        await (wrapper.vm as any).ordenarAlertasPor('processo');\n\n        expect(alertasStore.buscarAlertas).not.toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/__tests__/views/PainelViewCoverage.spec.ts",
    "type": "line",
    "line": 131,
    "length": 1,
    "text": "// Initial default: descricao ASC (implied by refs initialization in component)",
    "context": "        });\n        const processosStore = useProcessosStore(pinia);\n\n        // Initial default: descricao ASC (implied by refs initialization in component)\n\n        // 1. Sort by same field (descricao) -> should toggle to DESC\n        await (wrapper.vm as any).ordenarPor('descricao');"
  },
  {
    "file": "frontend/src/__tests__/views/PainelViewCoverage.spec.ts",
    "type": "line",
    "line": 133,
    "length": 1,
    "text": "// 1. Sort by same field (descricao) -> should toggle to DESC",
    "context": "\n        // Initial default: descricao ASC (implied by refs initialization in component)\n\n        // 1. Sort by same field (descricao) -> should toggle to DESC\n        await (wrapper.vm as any).ordenarPor('descricao');\n\n        expect(processosStore.buscarProcessosPainel).toHaveBeenLastCalledWith("
  },
  {
    "file": "frontend/src/__tests__/views/PainelViewCoverage.spec.ts",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// 2. Sort by different field (tipo) -> should reset to ASC",
    "context": "            'GESTOR', 1, 0, 10, 'descricao', 'desc'\n        );\n\n        // 2. Sort by different field (tipo) -> should reset to ASC\n        await (wrapper.vm as any).ordenarPor('tipo');\n        expect(processosStore.buscarProcessosPainel).toHaveBeenLastCalledWith(\n            'GESTOR', 1, 0, 10, 'tipo', 'asc'"
  },
  {
    "file": "frontend/src/axios-setup.ts",
    "type": "line",
    "line": 27,
    "length": 1,
    "text": "// Caso especial: 401 - redirecionar para login",
    "context": "    const feedbackStore = useFeedbackStore();\n    const normalized = normalizeError(error);\n\n    // Caso especial: 401 - redirecionar para login\n    if (normalized.kind === 'unauthorized') {\n        const currentPath = routerInstance?.currentRoute?.value?.path;\n        if (currentPath !== '/login') {"
  },
  {
    "file": "frontend/src/axios-setup.ts",
    "type": "line",
    "line": 41,
    "length": 1,
    "text": "// Decidir se mostra toast global baseado no kind",
    "context": "        return Promise.reject(error);\n    }\n\n    // Decidir se mostra toast global baseado no kind\n    if (shouldNotifyGlobally(normalized)) {\n        try {\n            notifyError(normalized);"
  },
  {
    "file": "frontend/src/axios-setup.ts",
    "type": "line",
    "line": 50,
    "length": 1,
    "text": "// Sempre rejeitar para permitir tratamento local",
    "context": "        }\n    }\n\n    // Sempre rejeitar para permitir tratamento local\n    return Promise.reject(error);\n};\n"
  },
  {
    "file": "frontend/src/components/__tests__/AceitarMapaModal.spec.ts",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Textarea n√£o deve existir para admin",
    "context": "        expect(corpoModal.text()).toContain(\n            \"Confirma a homologa√ß√£o do mapa de compet√™ncias?\",\n        );\n        // Textarea n√£o deve existir para admin\n        expect(\n            wrapper.find('[data-testid=\"observacao-aceite-textarea\"]').exists(),\n        ).toBe(false);"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mock data",
    "context": "import type {Unidade} from \"@/types/tipos\";\n\ndescribe(\"ArvoreUnidades.vue\", () => {\n    // Mock data\n    const mockUnidades: Unidade[] = [\n        {\n            codigo: 1,"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 77,
    "length": 1,
    "text": "// Toggle expand via prop function",
    "context": "        const wrapper = createWrapper();\n        const root = wrapper.findComponent({name: \"UnidadeTreeNode\"});\n\n        // Toggle expand via prop function\n        await root.props(\"onToggleExpand\")(mockUnidades[0]);\n        // Should be false now (it started true)\n        expect(root.props(\"isExpanded\")(mockUnidades[0])).toBe(false);"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 79,
    "length": 1,
    "text": "// Should be false now (it started true)",
    "context": "\n        // Toggle expand via prop function\n        await root.props(\"onToggleExpand\")(mockUnidades[0]);\n        // Should be false now (it started true)\n        expect(root.props(\"isExpanded\")(mockUnidades[0])).toBe(false);\n\n        // Toggle again"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 82,
    "length": 1,
    "text": "// Toggle again",
    "context": "        // Should be false now (it started true)\n        expect(root.props(\"isExpanded\")(mockUnidades[0])).toBe(false);\n\n        // Toggle again\n        await root.props(\"onToggleExpand\")(mockUnidades[0]);\n        expect(root.props(\"isExpanded\")(mockUnidades[0])).toBe(true);\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 91,
    "length": 1,
    "text": "// 10 is checked",
    "context": "        const wrapper = createWrapper({modelValue: [10]});\n        const root = wrapper.findComponent({name: \"UnidadeTreeNode\"});\n\n        // 10 is checked\n        expect(root.props(\"isChecked\")(10)).toBe(true);\n        // 20 is not\n        expect(root.props(\"isChecked\")(20)).toBe(false);"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// 20 is not",
    "context": "\n        // 10 is checked\n        expect(root.props(\"isChecked\")(10)).toBe(true);\n        // 20 is not\n        expect(root.props(\"isChecked\")(20)).toBe(false);\n    });\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 102,
    "length": 1,
    "text": "// Emitted value should contain 10 and 21 (elegible ones)",
    "context": "\n        await wrapper.find('button[aria-label=\"Selecionar todas as unidades eleg√≠veis\"]').trigger(\"click\");\n\n        // Emitted value should contain 10 and 21 (elegible ones)\n        const emitted = wrapper.emitted(\"update:modelValue\");\n        expect(emitted).toBeTruthy();\n        const selection = emitted![0][0] as number[];"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 126,
    "length": 1,
    "text": "// Select node 20 (which should select descendants 21)",
    "context": "        const wrapper = createWrapper({modelValue: [], modoSelecao: true});\n        const root = wrapper.findComponent({name: \"UnidadeTreeNode\"});\n\n        // Select node 20 (which should select descendants 21)\n        const node20 = mockUnidades[0].filhas![1];\n        await root.props(\"onToggle\")(node20, true);\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 193,
    "length": 1,
    "text": "// Select the other child",
    "context": "        const wrapper = createWrapper({unidades: unidadesTeste, modelValue: [101]});\n        const root = wrapper.findComponent({name: \"UnidadeTreeNode\"});\n\n        // Select the other child\n        const child2 = unidadesTeste[0].filhas![1];\n        await root.props(\"onToggle\")(child2, true);\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 200,
    "length": 1,
    "text": "// Should contain children and parent (since parent is eligible and all children selected)",
    "context": "        const emitted = wrapper.emitted(\"update:modelValue\");\n        const lastEmission = emitted![emitted!.length - 1][0] as number[];\n\n        // Should contain children and parent (since parent is eligible and all children selected)\n        expect(lastEmission).toContain(101);\n        expect(lastEmission).toContain(102);\n        expect(lastEmission).toContain(100);"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 221,
    "length": 1,
    "text": "// Start with parent selected (and child)",
    "context": "            }\n        ];\n\n        // Start with parent selected (and child)\n        const wrapper = createWrapper({unidades: unidadesTeste, modelValue: [200, 201]});\n        const root = wrapper.findComponent({name: \"UnidadeTreeNode\"});\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 225,
    "length": 1,
    "text": "// Deselect child",
    "context": "        const wrapper = createWrapper({unidades: unidadesTeste, modelValue: [200, 201]});\n        const root = wrapper.findComponent({name: \"UnidadeTreeNode\"});\n\n        // Deselect child\n        const child = unidadesTeste[0].filhas![0];\n        await root.props(\"onToggle\")(child, false);\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 232,
    "length": 1,
    "text": "// Child should be gone",
    "context": "        const emitted = wrapper.emitted(\"update:modelValue\");\n        const lastEmission = emitted![emitted!.length - 1][0] as number[];\n\n        // Child should be gone\n        expect(lastEmission).not.toContain(201);\n        expect(lastEmission).toContain(200);\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 271,
    "length": 1,
    "text": "// filhas undefined",
    "context": "                sigla: \"SOLITARIA\",\n                nome: \"Solitaria\",\n                isElegivel: true,\n                // filhas undefined\n                tipo: \"OPERACIONAL\"\n            }\n        ];"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 307,
    "length": 1,
    "text": "// toggle should do nothing",
    "context": "        expect(root.props(\"isHabilitado\")(mockUnidades[0].filhas![0])).toBe(false);\n        expect(root.props(\"getEstadoSelecao\")(mockUnidades[0].filhas![0])).toBe(false);\n\n        // toggle should do nothing\n        await root.props(\"onToggle\")(mockUnidades[0].filhas![0], true);\n        expect(wrapper.emitted(\"update:modelValue\")).toBeFalsy();\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 340,
    "length": 1,
    "text": "// INTEROPERACIONAL self selected but no children selected -> should return true",
    "context": "            }\n        ];\n\n        // INTEROPERACIONAL self selected but no children selected -> should return true\n        const wrapper = createWrapper({unidades: unidadesTeste, modelValue: [500]});\n        const root = wrapper.findComponent({name: \"UnidadeTreeNode\"});\n        expect(root.props(\"getEstadoSelecao\")(unidadesTeste[0])).toBe(true);"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 345,
    "length": 1,
    "text": "// INTEROPERACIONAL not selected but some children selected -> indeterminate",
    "context": "        const root = wrapper.findComponent({name: \"UnidadeTreeNode\"});\n        expect(root.props(\"getEstadoSelecao\")(unidadesTeste[0])).toBe(true);\n\n        // INTEROPERACIONAL not selected but some children selected -> indeterminate\n        const wrapper2 = createWrapper({unidades: unidadesTeste, modelValue: [501]});\n        const root2 = wrapper2.findComponent({name: \"UnidadeTreeNode\"});\n        expect(root2.props(\"getEstadoSelecao\")(unidadesTeste[0])).toBe(\"indeterminate\");"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.spec.ts",
    "type": "line",
    "line": 442,
    "length": 1,
    "text": "// Self selected AND some children selected -> true",
    "context": "        }];\n        const wrapper = createWrapper({unidades: units, modelValue: [1000, 1001]});\n        const root = wrapper.findComponent({name: \"UnidadeTreeNode\"});\n        // Self selected AND some children selected -> true\n        expect(root.props(\"getEstadoSelecao\")(units[0])).toBe(true);\n    });\n});"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 117,
    "length": 5,
    "text": "// SECRETARIA_1 tem 4 filhas: ASSESSORIA_11, ASSESSORIA_12, COORD_11, COORD_12\n// Apenas 2 est√£o marcadas (ASSESSORIA_11 e ASSESSORIA_12)\n// COORD_11 est√° desmarcada (nenhuma filha selecionada)\n// COORD_12 est√° desmarcada (sem filhas)\n// Resultado: SECRETARIA_1 deve estar INDETERMINADA",
    "context": "            const vm = wrapper.vm as any;\n            const secretaria = criarUnidades()[0];\n\n            // SECRETARIA_1 tem 4 filhas: ASSESSORIA_11, ASSESSORIA_12, COORD_11, COORD_12\n            // Apenas 2 est√£o marcadas (ASSESSORIA_11 e ASSESSORIA_12)\n            // COORD_11 est√° desmarcada (nenhuma filha selecionada)\n            // COORD_12 est√° desmarcada (sem filhas)\n            // Resultado: SECRETARIA_1 deve estar INDETERMINADA\n            expect(vm.getEstadoSelecao(secretaria)).toBe('indeterminate');\n        });\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 201,
    "length": 1,
    "text": "// Simula desmarcar SECRETARIA_1",
    "context": "            const vm = wrapper.vm as any;\n            const secretaria = criarUnidades()[0];\n\n            // Simula desmarcar SECRETARIA_1\n            vm.toggle(secretaria, false);\n            await nextTick();\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 207,
    "length": 1,
    "text": "// Nenhuma unidade deve estar selecionada",
    "context": "\n            const novoModelValue = wrapper.emitted('update:modelValue')?.[0]?.[0] as number[];\n\n            // Nenhuma unidade deve estar selecionada\n            expect(novoModelValue).toEqual([]);\n        });\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 224,
    "length": 1,
    "text": "// Antes de desmarcar",
    "context": "            const secretaria = criarUnidades()[0];\n            const coord12 = criarUnidades()[0].filhas![3];\n\n            // Antes de desmarcar\n            expect(vm.getEstadoSelecao(coord12)).toBe(false);\n\n            // Desmarcar SECRETARIA_1"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 227,
    "length": 1,
    "text": "// Desmarcar SECRETARIA_1",
    "context": "            // Antes de desmarcar\n            expect(vm.getEstadoSelecao(coord12)).toBe(false);\n\n            // Desmarcar SECRETARIA_1\n            vm.toggle(secretaria, false);\n\n            // COORD_12 deve continuar desmarcada"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 230,
    "length": 1,
    "text": "// COORD_12 deve continuar desmarcada",
    "context": "            // Desmarcar SECRETARIA_1\n            vm.toggle(secretaria, false);\n\n            // COORD_12 deve continuar desmarcada\n            expect(vm.getEstadoSelecao(coord12)).toBe(false);\n        });\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 248,
    "length": 1,
    "text": "// COORD_11 n√£o √© eleg√≠vel (INTERMEDIARIA)",
    "context": "            const vm = wrapper.vm;\n            const coord11 = criarUnidades()[0].filhas![2];\n\n            // COORD_11 n√£o √© eleg√≠vel (INTERMEDIARIA)\n            expect(coord11.isElegivel).toBe(false);\n\n            // Mas deve estar habilitada (tem filhas eleg√≠veis)"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 251,
    "length": 1,
    "text": "// Mas deve estar habilitada (tem filhas eleg√≠veis)",
    "context": "            // COORD_11 n√£o √© eleg√≠vel (INTERMEDIARIA)\n            expect(coord11.isElegivel).toBe(false);\n\n            // Mas deve estar habilitada (tem filhas eleg√≠veis)\n            expect(vm.isHabilitado(coord11)).toBe(true);\n        });\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 323,
    "length": 1,
    "text": "// COORD_11 (c√≥digo 13) n√£o deve estar no modelValue",
    "context": "\n            const modelValue = wrapper.props('modelValue');\n\n            // COORD_11 (c√≥digo 13) n√£o deve estar no modelValue\n            expect(modelValue).not.toContain(13);\n\n            // Apenas as filhas (OPERACIONAL) devem estar"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 326,
    "length": 1,
    "text": "// Apenas as filhas (OPERACIONAL) devem estar",
    "context": "            // COORD_11 (c√≥digo 13) n√£o deve estar no modelValue\n            expect(modelValue).not.toContain(13);\n\n            // Apenas as filhas (OPERACIONAL) devem estar\n            expect(modelValue).toContain(131);\n            expect(modelValue).toContain(132);\n            expect(modelValue).toContain(133);"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 344,
    "length": 1,
    "text": "// Selecionar COORD_11",
    "context": "            const vm = wrapper.vm;\n            const coord11 = criarUnidades()[0].filhas![2];\n\n            // Selecionar COORD_11\n            vm.toggle(coord11, true);\n            await nextTick();\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 350,
    "length": 1,
    "text": "// COORD_11 n√£o deve estar",
    "context": "\n            const novoModelValue = wrapper.emitted('update:modelValue')?.[0]?.[0] as number[];\n\n            // COORD_11 n√£o deve estar\n            expect(novoModelValue).not.toContain(13);\n\n            // Filhas devem estar"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidades.visual.spec.ts",
    "type": "line",
    "line": 353,
    "length": 1,
    "text": "// Filhas devem estar",
    "context": "            // COORD_11 n√£o deve estar\n            expect(novoModelValue).not.toContain(13);\n\n            // Filhas devem estar\n            expect(novoModelValue).toContain(131);\n            expect(novoModelValue).toContain(132);\n            expect(novoModelValue).toContain(133);"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesCoverage.spec.ts",
    "type": "line",
    "line": 20,
    "length": 1,
    "text": "// Initial state",
    "context": "            }\n        });\n\n        // Initial state\n        expect((wrapper.vm as any).expandedUnits.size).toBe(0);\n\n        // Update prop"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesCoverage.spec.ts",
    "type": "line",
    "line": 23,
    "length": 1,
    "text": "// Update prop",
    "context": "        // Initial state\n        expect((wrapper.vm as any).expandedUnits.size).toBe(0);\n\n        // Update prop\n        await wrapper.setProps({\n            unidades: [{codigo: 1, sigla: \"A\", nome: \"A\", filhas: []}]\n        });"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesCoverage.spec.ts",
    "type": "line",
    "line": 28,
    "length": 1,
    "text": "// Watcher should run",
    "context": "            unidades: [{codigo: 1, sigla: \"A\", nome: \"A\", filhas: []}]\n        });\n\n        // Watcher should run\n        expect((wrapper.vm as any).expandedUnits.has(1)).toBe(true);\n    });\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesCoverage.spec.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Update modelValue prop",
    "context": "\n        expect((wrapper.vm as any).unidadesSelecionadasLocal).toEqual([]);\n\n        // Update modelValue prop\n        await wrapper.setProps({modelValue: [1]});\n\n        // Watcher should run"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesCoverage.spec.ts",
    "type": "line",
    "line": 51,
    "length": 1,
    "text": "// Watcher should run",
    "context": "        // Update modelValue prop\n        await wrapper.setProps({modelValue: [1]});\n\n        // Watcher should run\n        expect((wrapper.vm as any).unidadesSelecionadasLocal).toEqual([1]);\n    });\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesCoverage.spec.ts",
    "type": "line",
    "line": 69,
    "length": 1,
    "text": "// Update modelValue with same values (different reference)",
    "context": "            }\n        });\n\n        // Update modelValue with same values (different reference)\n        await wrapper.setProps({modelValue: [1]});\n\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesCoverage.spec.ts",
    "type": "line",
    "line": 75,
    "length": 2,
    "text": "// The test above hit the true case.\n// This test hits the false case.",
    "context": "\n\n\n        // The test above hit the true case.\n        // This test hits the false case.\n    });\n});\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Helper to generate a tree of units with unique IDs",
    "context": "import ArvoreUnidades from '../unidade/ArvoreUnidades.vue';\nimport type {Unidade} from '@/types/tipos';\n\n// Helper to generate a tree of units with unique IDs\nconst generateTree = (depth: number, breadth: number, startId = 1): Unidade[] => {\n    if (depth === 0) return [];\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 29,
    "length": 1,
    "text": "// Flatten tree to list",
    "context": "    return units;\n};\n\n// Flatten tree to list\nconst flatten = (nodes: Unidade[]): Unidade[] => {\n    const list: Unidade[] = [];\n    nodes.forEach(n => {"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// We generate a fixed structure but vary the interactions",
    "context": "describe('ArvoreUnidades Property-Based Tests', () => {\n\n    it('should satisfy Monotonicity: Selecting a parent selects all eligible children', () => {\n        // We generate a fixed structure but vary the interactions\n        const tree = generateTree(3, 2, 0);\n        const allNodes = flatten(tree);\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 57,
    "length": 1,
    "text": "// Reset selection",
    "context": "\n        fc.assert(\n            fc.property(fc.nat({max: allNodes.length - 1}), (nodeIndex) => {\n                // Reset selection\n                vm.deselecionarTodas();\n\n                const targetNode = allNodes[nodeIndex];"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 97,
    "length": 1,
    "text": "// Reset",
    "context": "\n        fc.assert(\n            fc.property(fc.array(fc.nat({max: allNodes.length - 1})), (indicesToSelect) => {\n                // Reset\n                vm.deselecionarTodas();\n\n                // Select random nodes"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Select random nodes",
    "context": "                // Reset\n                vm.deselecionarTodas();\n\n                // Select random nodes\n                indicesToSelect.forEach(idx => {\n                    const node = allNodes[idx];\n                    vm.toggle(node, true);"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 106,
    "length": 1,
    "text": "// Verify Invariant for all parents",
    "context": "                    vm.toggle(node, true);\n                });\n\n                // Verify Invariant for all parents\n                allNodes.forEach(node => {\n                    if (node.filhas && node.filhas.length > 0) {\n                        const allEligibleChildren = flatten(node.filhas).filter(n => n.isElegivel);"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// Generate base structure",
    "context": "    });\n\n    it('should satisfy Eligibility Invariant: Only eligible units can be selected', () => {\n        // Generate base structure\n        const treeStructure = generateTree(3, 2, 0); // ~14 nodes\n        const allNodesStructure = flatten(treeStructure);\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 136,
    "length": 1,
    "text": "// We need as many random properties as nodes",
    "context": "        const treeStructure = generateTree(3, 2, 0); // ~14 nodes\n        const allNodesStructure = flatten(treeStructure);\n\n        // We need as many random properties as nodes\n        const numNodes = allNodesStructure.length;\n\n        fc.assert("
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 147,
    "length": 1,
    "text": "// Clone tree structure to avoid mutation across runs",
    "context": "                }), {minLength: numNodes, maxLength: numNodes}),\n                fc.array(fc.nat({max: numNodes - 1})), // User interactions (toggles)\n                (randomProps, indicesToToggle) => {\n                    // Clone tree structure to avoid mutation across runs\n                    const tree = structuredClone(treeStructure);\n                    const allNodes = flatten(tree);\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 151,
    "length": 1,
    "text": "// Apply random properties",
    "context": "                    const tree = structuredClone(treeStructure);\n                    const allNodes = flatten(tree);\n\n                    // Apply random properties\n                    allNodes.forEach((node, i) => {\n                        const props = randomProps[i];\n                        node.tipo = props.tipo as any;"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 157,
    "length": 1,
    "text": "// Enforce domain rule: INTERMEDIARIA is never eligible",
    "context": "                        node.tipo = props.tipo as any;\n                        node.isElegivel = props.isElegivel;\n\n                        // Enforce domain rule: INTERMEDIARIA is never eligible\n                        if (node.tipo === 'INTERMEDIARIA') {\n                            node.isElegivel = false;\n                        }"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 171,
    "length": 1,
    "text": "// Perform interactions",
    "context": "                    });\n                    const vm = wrapper.vm as any;\n\n                    // Perform interactions\n                    indicesToToggle.forEach(idx => {\n                        const node = allNodes[idx];\n                        // Toggle state (simulate check/uncheck)"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 174,
    "length": 1,
    "text": "// Toggle state (simulate check/uncheck)",
    "context": "                    // Perform interactions\n                    indicesToToggle.forEach(idx => {\n                        const node = allNodes[idx];\n                        // Toggle state (simulate check/uncheck)\n                        const isSelected = vm.isChecked(node.codigo);\n                        vm.toggle(node, !isSelected);\n                    });"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 179,
    "length": 1,
    "text": "// Assert Invariant: All selected units must be eligible",
    "context": "                        vm.toggle(node, !isSelected);\n                    });\n\n                    // Assert Invariant: All selected units must be eligible\n                    const selectedNodes = allNodes.filter(n => vm.isChecked(n.codigo));\n\n                    selectedNodes.forEach(node => {"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 184,
    "length": 1,
    "text": "// Implicitly checks INTERMEDIARIA is not selected because we forced isElegivel=false for them.",
    "context": "\n                    selectedNodes.forEach(node => {\n                        expect(node.isElegivel).toBe(true);\n                        // Implicitly checks INTERMEDIARIA is not selected because we forced isElegivel=false for them.\n                        expect(node.tipo).not.toBe('INTERMEDIARIA');\n                    });\n                }"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 195,
    "length": 1,
    "text": "// Generate tree",
    "context": "    it('should satisfy Idempotence: Selecting an already selected unit (or tree) should result in the same state', () => {\n        fc.assert(\n            fc.property(fc.nat({max: 100}), (seed) => { // Using seed to generate deterministic tree\n                // Generate tree\n                const tree = generateTree(3, 2, seed);\n                const allNodes = flatten(tree);\n                if (allNodes.length === 0) return;"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 208,
    "length": 1,
    "text": "// Pick a random node",
    "context": "                });\n                const vm = wrapper.vm as any;\n\n                // Pick a random node\n                const nodeIndex = seed % allNodes.length;\n                const node = allNodes[nodeIndex];\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 212,
    "length": 1,
    "text": "// Select it once",
    "context": "                const nodeIndex = seed % allNodes.length;\n                const node = allNodes[nodeIndex];\n\n                // Select it once\n                vm.toggle(node, true);\n                const stateAfterFirst = [...vm.modelValue].sort((a: number, b: number) => a - b);\n"
  },
  {
    "file": "frontend/src/components/__tests__/ArvoreUnidadesPbt.spec.ts",
    "type": "line",
    "line": 216,
    "length": 1,
    "text": "// Select it again",
    "context": "                vm.toggle(node, true);\n                const stateAfterFirst = [...vm.modelValue].sort((a: number, b: number) => a - b);\n\n                // Select it again\n                vm.toggle(node, true);\n                const stateAfterSecond = [...vm.modelValue].sort((a: number, b: number) => a - b);\n"
  },
  {
    "file": "frontend/src/components/__tests__/AtividadeItem.spec.ts",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Check if input appeared (meaning we are in edit mode)",
    "context": "\n        await context.wrapper.find('[data-testid=\"btn-editar-atividade\"]').trigger('click');\n\n        // Check if input appeared (meaning we are in edit mode)\n        const input = context.wrapper.find('[data-testid=\"inp-editar-atividade\"]');\n        expect(input.exists()).toBe(true);\n"
  },
  {
    "file": "frontend/src/components/__tests__/AtividadeItem.spec.ts",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Trigger submit on the form directly",
    "context": "        expect(input.exists()).toBe(true);\n        await input.setValue('Novo Conhecimento');\n\n        // Trigger submit on the form directly\n        await context.wrapper.find('[data-testid=\"form-novo-conhecimento\"]').trigger('submit');\n\n        expect(context.wrapper!.emitted('adicionar-conhecimento')).toBeTruthy();"
  },
  {
    "file": "frontend/src/components/__tests__/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 9,
    "length": 1,
    "text": "// Mock vue-router",
    "context": "import BarraNavegacao from \"../layout/BarraNavegacao.vue\";\nimport {getCommonMountOptions, setupComponentTest} from \"@/test-utils/componentTestHelpers\";\n\n// Mock vue-router\nconst mockRouter = {\n    back: vi.fn(),\n};"
  },
  {
    "file": "frontend/src/components/__tests__/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Helper to create mock routes",
    "context": "    createMemoryHistory: vi.fn(),\n}));\n\n// Helper to create mock routes\nconst createMockRoute = (path: string, matched: any[], routeName = \"\", params: Record<string, string> = {}) => ({\n    path,\n    matched,"
  },
  {
    "file": "frontend/src/components/__tests__/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 139,
    "length": 1,
    "text": "// Sem unidade carregada no store, mostra \"Unidade X\"",
    "context": "            const items = wrapper.findAllComponents(BBreadcrumbItem);\n            expect(items).toHaveLength(3); // Home + sigla/codigo + \"Unidades\"\n            expect(items[0].find('[data-testid=\"btn-nav-home\"]').exists()).toBe(true);\n            // Sem unidade carregada no store, mostra \"Unidade X\"\n            expect(items[1].text()).toBe(\"Unidade 1\");\n            // ADMIN v√™ \"Unidades\" em vez de \"Minha unidade\"\n            expect(items[2].text()).toBe(\"Unidades\");"
  },
  {
    "file": "frontend/src/components/__tests__/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 141,
    "length": 1,
    "text": "// ADMIN v√™ \"Unidades\" em vez de \"Minha unidade\"",
    "context": "            expect(items[0].find('[data-testid=\"btn-nav-home\"]').exists()).toBe(true);\n            // Sem unidade carregada no store, mostra \"Unidade X\"\n            expect(items[1].text()).toBe(\"Unidade 1\");\n            // ADMIN v√™ \"Unidades\" em vez de \"Minha unidade\"\n            expect(items[2].text()).toBe(\"Unidades\");\n        });\n"
  },
  {
    "file": "frontend/src/components/__tests__/BarraNavegacao.spec.ts",
    "type": "line",
    "line": 157,
    "length": 1,
    "text": "// N√£o-ADMIN v√™ \"Minha unidade\"",
    "context": "            expect(items).toHaveLength(3); // Home + sigla/codigo + \"Minha unidade\"\n            expect(items[0].find('[data-testid=\"btn-nav-home\"]').exists()).toBe(true);\n            expect(items[1].text()).toBe(\"Unidade 456\");\n            // N√£o-ADMIN v√™ \"Minha unidade\"\n            expect(items[2].text()).toBe(\"Minha unidade\");\n        });\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/CompetenciaCard.spec.ts",
    "type": "line",
    "line": 6,
    "length": 1,
    "text": "// Stubs para componentes do Bootstrap Vue Next",
    "context": "import CompetenciaCard from \"@/components/mapa/CompetenciaCard.vue\";\nimport type {Atividade, Competencia} from \"@/types/tipos\";\n\n// Stubs para componentes do Bootstrap Vue Next\nconst stubs = {\n    BCard: {\n        template: '<div class=\"card\"><slot /></div>',"
  },
  {
    "file": "frontend/src/components/__tests__/CompetenciaCard.spec.ts",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// Encontra os bot√µes de remover atividade (existem 2)",
    "context": "            global: {stubs, directives: {\"b-tooltip\": {}}},\n        });\n\n        // Encontra os bot√µes de remover atividade (existem 2)\n        const botoes = wrapper.findAll('[data-testid=\"btn-remover-atividade-associada\"]');\n        await botoes[0].trigger(\"click\"); // Clica no primeiro (Atividade 101)\n"
  },
  {
    "file": "frontend/src/components/__tests__/CompetenciaCard.spec.ts",
    "type": "line",
    "line": 122,
    "length": 1,
    "text": "// Atividade 2 (index 1) tem conhecimentos",
    "context": "            global: {stubs, directives: {\"b-tooltip\": {}}},\n        });\n\n        // Atividade 2 (index 1) tem conhecimentos\n        const badges = wrapper.findAll('[data-testid=\"cad-mapa__txt-badge-conhecimentos-1\"]');\n        expect(badges.length).toBe(1); // S√≥ Atividade 2 tem\n        expect(badges[0].text()).toBe(\"1\");"
  },
  {
    "file": "frontend/src/components/__tests__/CompetenciaCardCoverage.spec.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Try to access internal method if possible",
    "context": "            }\n        });\n\n        // Try to access internal method if possible\n        if ((wrapper.vm as any).getConhecimentosTooltip) {\n            const result = (wrapper.vm as any).getConhecimentosTooltip(999);\n            expect(result).toBe('Nenhum conhecimento cadastrado');"
  },
  {
    "file": "frontend/src/components/__tests__/CriarCompetenciaModal.spec.ts",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Using setValue(true) to simulate checking the checkbox",
    "context": "\n        const descricao = \"Compet√™ncia de teste\";\n        await wrapper.findComponent(BFormTextarea).setValue(descricao);\n        // Using setValue(true) to simulate checking the checkbox\n        await wrapper.find('input[type=\"checkbox\"]').setValue(true);\n        await flushPromises();\n        await wrapper.find('[data-testid=\"btn-criar-competencia-salvar\"]').trigger(\"click\");"
  },
  {
    "file": "frontend/src/components/__tests__/DisponibilizarMapaModal.spec.ts",
    "type": "line",
    "line": 161,
    "length": 1,
    "text": "// Hide",
    "context": "        const obsTextarea = wrapper.find('[data-testid=\"inp-disponibilizar-mapa-obs\"]');\n        await obsTextarea.setValue(\"Obs\");\n\n        // Hide\n        await wrapper.setProps({mostrar: false});\n\n        // Show again"
  },
  {
    "file": "frontend/src/components/__tests__/DisponibilizarMapaModal.spec.ts",
    "type": "line",
    "line": 164,
    "length": 1,
    "text": "// Show again",
    "context": "        // Hide\n        await wrapper.setProps({mostrar: false});\n\n        // Show again\n        await wrapper.setProps({mostrar: true});\n\n        expect(wrapper.findComponent(BFormInput).props().modelValue).toBe(\"\");"
  },
  {
    "file": "frontend/src/components/__tests__/DisponibilizarMapaModal.spec.ts",
    "type": "line",
    "line": 169,
    "length": 1,
    "text": "// Re-find the element to ensure we have the latest state",
    "context": "\n        expect(wrapper.findComponent(BFormInput).props().modelValue).toBe(\"\");\n\n        // Re-find the element to ensure we have the latest state\n        const updatedObsTextarea = wrapper.find('[data-testid=\"inp-disponibilizar-mapa-obs\"]');\n        expect((updatedObsTextarea.element as HTMLTextAreaElement).value).toBe(\"\");\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/ImpactoMapaModal.spec.ts",
    "type": "line",
    "line": 133,
    "length": 1,
    "text": "// Compet√™ncia C tem m√∫ltiplos tipos",
    "context": "        expect(wrapper.text()).toContain(\"Atividade Alterada\"); // Formata√ß√£o do tipo\n\n        expect(wrapper.text()).toContain(\"Compet√™ncia C\");\n        // Compet√™ncia C tem m√∫ltiplos tipos\n        expect(wrapper.text()).toContain(\"Atividade Removida, Atividade Alterada\");\n    });\n"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 11,
    "length": 1,
    "text": "// Helper type for the component instance",
    "context": "import {createMockProcessoResumo} from \"@/test-utils/mockFactories\";\nimport {useAtividadesStore} from \"@/stores/atividades\";\n\n// Helper type for the component instance\ntype ImportarAtividadesModalVM = InstanceType<typeof ImportarAtividadesModal>;\n\nconst mockProcessos = ["
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Mock getter that was converted from computed property",
    "context": "        });\n        wrapper = context.wrapper as VueWrapper<ImportarAtividadesModalVM>;\n\n        // Mock getter that was converted from computed property\n        const atividadesStore = useAtividadesStore();\n        atividadesStore.obterAtividadesPorSubprocesso = vi.fn((codigo: number) => {\n            return mapAtividades.get(codigo) || [];"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 83,
    "length": 1,
    "text": "// Simulate user selecting a process and unit",
    "context": "        const importButton = wrapper.find('[data-testid=\"btn-importar\"]');\n        expect((importButton.element as HTMLButtonElement).disabled).toBe(true);\n\n        // Simulate user selecting a process and unit\n        const selects = wrapper.findAllComponents(BFormSelect as any);\n        await selects[0].setValue(\"1\");\n        await flushPromises();"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// Find and check the checkbox for the activity",
    "context": "        await selects[1].setValue(\"10\");\n        await flushPromises();\n\n        // Find and check the checkbox for the activity\n        await (wrapper.find('input[type=\"checkbox\"]') as any).setChecked(true);\n\n        // Now, the button should be enabled"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// Now, the button should be enabled",
    "context": "        // Find and check the checkbox for the activity\n        await (wrapper.find('input[type=\"checkbox\"]') as any).setChecked(true);\n\n        // Now, the button should be enabled\n        expect((importButton.element as HTMLButtonElement).disabled).toBe(false);\n\n        // Simulate the import click"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 96,
    "length": 1,
    "text": "// Simulate the import click",
    "context": "        // Now, the button should be enabled\n        expect((importButton.element as HTMLButtonElement).disabled).toBe(false);\n\n        // Simulate the import click\n        mockExecute.mockResolvedValue(true);\n        await importButton.trigger(\"click\");\n"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Verify the API call and emitted events",
    "context": "        mockExecute.mockResolvedValue(true);\n        await importButton.trigger(\"click\");\n\n        // Verify the API call and emitted events\n        expect(mockExecute).toHaveBeenCalledWith(\n            999,\n            mockProcessoDetalhe.unidades[0].codSubprocesso,"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 111,
    "length": 1,
    "text": "// Simulate selecting something first",
    "context": "    });\n\n    it(\"deve resetar o modal quando a prop 'mostrar' mudar para true\", async () => {\n        // Simulate selecting something first\n        const selects = wrapper.findAllComponents(BFormSelect as any);\n        await selects[0].setValue(\"1\");\n        await flushPromises();"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 119,
    "length": 1,
    "text": "// Check if reset",
    "context": "        await wrapper.setProps({mostrar: false});\n        await wrapper.setProps({mostrar: true});\n\n        // Check if reset\n        expect((wrapper.vm as any).processoSelecionadoId).toBeNull();\n    });\n"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModal.spec.ts",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Setup selection",
    "context": "    });\n\n    it(\"deve lidar com erro na importa√ß√£o\", async () => {\n        // Setup selection\n        const selects = wrapper.findAllComponents(BFormSelect as any);\n        await selects[0].setValue(\"1\");\n        await flushPromises();"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModalCoverage.spec.ts",
    "type": "line",
    "line": 39,
    "length": 1,
    "text": "// No unit selected",
    "context": "\n        const vm = context.wrapper.vm as any;\n\n        // No unit selected\n        vm.unidadeSelecionadaId = null;\n        await vm.importar();\n        expect(vm.erroImportacao).toBeNull();"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModalCoverage.spec.ts",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Unit selected but no activities selected",
    "context": "        await vm.importar();\n        expect(vm.erroImportacao).toBeNull();\n\n        // Unit selected but no activities selected\n        vm.unidadeSelecionada = {codUnidade: 10, codSubprocesso: 100};\n        vm.atividadesSelecionadas = [];\n        await vm.importar();"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModalCoverage.spec.ts",
    "type": "line",
    "line": 89,
    "length": 1,
    "text": "// Even if not in list, it might try to find it",
    "context": "\n        vm.unidadeSelecionadaId = 10;\n        await flushPromises();\n        // Even if not in list, it might try to find it\n        vm.unidadeSelecionadaId = null;\n        await flushPromises();\n        expect(vm.unidadeSelecionada).toBeNull();"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModalCoverage.spec.ts",
    "type": "line",
    "line": 134,
    "length": 1,
    "text": "// Trigger processoSelecionadoId watch via select",
    "context": "\n        const vm = wrapper.vm as any;\n\n        // Trigger processoSelecionadoId watch via select\n        const selects = wrapper.findAll('select');\n        await selects[0].setValue(1);\n        await flushPromises();"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModalCoverage.spec.ts",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// Trigger unidadeSelecionadaId watch via select",
    "context": "        await flushPromises();\n        expect(vm.processoSelecionado).toEqual(mockProcesso);\n\n        // Trigger unidadeSelecionadaId watch via select\n        await selects[1].setValue(10);\n        await flushPromises();\n        expect(vm.unidadeSelecionada).toEqual(mockUnidade);"
  },
  {
    "file": "frontend/src/components/__tests__/ImportarAtividadesModalCoverage.spec.ts",
    "type": "line",
    "line": 145,
    "length": 1,
    "text": "// Select activity via checkbox",
    "context": "        await flushPromises();\n        expect(vm.unidadeSelecionada).toEqual(mockUnidade);\n\n        // Select activity via checkbox\n        const checkbox = wrapper.find('input[type=\"checkbox\"]');\n        await checkbox.setValue(true);\n        await flushPromises();"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbar.spec.ts",
    "type": "line",
    "line": 8,
    "length": 1,
    "text": "// Mock usePerfil",
    "context": "import NavBar from \"../layout/MainNavbar.vue\";\nimport {usePerfil} from \"@/composables/usePerfil\";\n\n// Mock usePerfil\nvi.mock(\"@/composables/usePerfil\");\n\nconst {mockPush} = vi.hoisted(() => ({"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbar.spec.ts",
    "type": "line",
    "line": 15,
    "length": 1,
    "text": "// Mock vue-router to control push and satisfy imports",
    "context": "    mockPush: vi.fn()\n}));\n\n// Mock vue-router to control push and satisfy imports\nvi.mock(\"vue-router\", () => ({\n    useRoute: vi.fn(),\n    useRouter: () => ({"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbar.spec.ts",
    "type": "line",
    "line": 32,
    "length": 1,
    "text": "// Setup cleanup",
    "context": "}));\n\ndescribe(\"MainNavbar.vue\", () => {\n    // Setup cleanup\n    const ctx = setupComponentTest();\n\n    beforeEach(() => {"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbar.spec.ts",
    "type": "line",
    "line": 38,
    "length": 1,
    "text": "// Default mock for usePerfil",
    "context": "    beforeEach(() => {\n        vi.clearAllMocks();\n\n        // Default mock for usePerfil\n        vi.mocked(usePerfil).mockReturnValue({\n            servidorLogado: ref({nome: \"Usuario Teste\"}),\n            perfilSelecionado: ref(\"GESTOR\"),"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbar.spec.ts",
    "type": "line",
    "line": 64,
    "length": 1,
    "text": "// ADMIN v√™ \"Unidades\" apontando para a lista/√°rvore de unidades",
    "context": "        ctx.wrapper = mount(NavBar, options);\n\n        checkLink(\"Painel\", \"/painel\");\n        // ADMIN v√™ \"Unidades\" apontando para a lista/√°rvore de unidades\n        checkLink(\"Unidades\", \"/unidades\");\n        checkLink(\"Relat√≥rios\", \"/relatorios\");\n        checkLink(\"Hist√≥rico\", \"/historico\");"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbar.spec.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// GESTOR v√™ \"Minha unidade\" apontando para sua unidade",
    "context": "        ctx.wrapper = mount(NavBar, options);\n\n\n        // GESTOR v√™ \"Minha unidade\" apontando para sua unidade\n        checkLink(\"Minha unidade\", \"/unidade/456\");\n    });\n"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbar.spec.ts",
    "type": "line",
    "line": 152,
    "length": 1,
    "text": "// Try finding 'a' tag inside if BNavItem renders it",
    "context": "\n        const logoutNavItem = ctx.wrapper.find('[data-testid=\"btn-logout\"]');\n\n        // Try finding 'a' tag inside if BNavItem renders it\n        const anchor = logoutNavItem.find(\"a\");\n        if (anchor.exists()) {\n            await anchor.trigger(\"click\");"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbarCoverage.spec.ts",
    "type": "line",
    "line": 8,
    "length": 1,
    "text": "// Mock usePerfil",
    "context": "import {ref} from \"vue\";\nimport {createTestingPinia} from \"@pinia/testing\";\n\n// Mock usePerfil\nvi.mock(\"@/composables/usePerfil\");\n\n// Mock vue-router"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbarCoverage.spec.ts",
    "type": "line",
    "line": 11,
    "length": 1,
    "text": "// Mock vue-router",
    "context": "// Mock usePerfil\nvi.mock(\"@/composables/usePerfil\");\n\n// Mock vue-router\nconst mocks = vi.hoisted(() => ({\n    push: vi.fn()\n}));"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbarCoverage.spec.ts",
    "type": "line",
    "line": 32,
    "length": 1,
    "text": "// Setup default mock for usePerfil",
    "context": "}));\n\ndescribe(\"MainNavbar.vue Coverage\", () => {\n    // Setup default mock for usePerfil\n    vi.mocked(usePerfil).mockReturnValue({\n        perfilSelecionado: ref(\"GESTOR\"),\n        unidadeSelecionada: ref(\"Unidade Teste\"),"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbarCoverage.spec.ts",
    "type": "line",
    "line": 40,
    "length": 1,
    "text": "// Mount component",
    "context": "    } as any);\n\n    it(\"deve atualizar isMobile ao redimensionar a janela\", async () => {\n        // Mount component\n        const wrapper = mount(MainNavbar, {\n            global: {\n                plugins: [createTestingPinia({stubActions: false})],"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbarCoverage.spec.ts",
    "type": "line",
    "line": 60,
    "length": 1,
    "text": "// Resize to mobile",
    "context": "\n        expect((wrapper.vm as any).isMobile).toBe(false);\n\n        // Resize to mobile\n        window.innerWidth = 500;\n        window.dispatchEvent(new Event('resize'));\n"
  },
  {
    "file": "frontend/src/components/__tests__/MainNavbarCoverage.spec.ts",
    "type": "line",
    "line": 66,
    "length": 1,
    "text": "// Resize back to desktop",
    "context": "\n        expect((wrapper.vm as any).isMobile).toBe(true);\n\n        // Resize back to desktop\n        window.innerWidth = 1200;\n        window.dispatchEvent(new Event('resize'));\n"
  },
  {
    "file": "frontend/src/components/__tests__/ModalAcaoBloco.spec.ts",
    "type": "line",
    "line": 5,
    "length": 1,
    "text": "// Mock Bootstrap Modal with hoisted variables",
    "context": "import {mount} from \"@vue/test-utils\";\nimport ModalAcaoBloco from \"../processo/ModalAcaoBloco.vue\";\n\n// Mock Bootstrap Modal with hoisted variables\nconst {mockShow, mockHide} = vi.hoisted(() => ({\n    mockShow: vi.fn(),\n    mockHide: vi.fn(),"
  },
  {
    "file": "frontend/src/components/__tests__/ModalAcaoBloco.spec.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Wait for onMounted",
    "context": "\n    it(\"deve inicializar e abrir o modal\", async () => {\n        const wrapper = createWrapper();\n        // Wait for onMounted\n        await wrapper.vm.$nextTick();\n\n        (wrapper.vm as any).abrir();"
  },
  {
    "file": "frontend/src/components/__tests__/ModalAcaoBloco.spec.ts",
    "type": "line",
    "line": 60,
    "length": 1,
    "text": "// Checking DOM:",
    "context": "        const checkboxTodos = wrapper.find('thead input[type=\"checkbox\"]');\n\n        await checkboxTodos.setValue(true);\n        // Checking DOM:\n        const checkboxes = wrapper.findAll('tbody input[type=\"checkbox\"]');\n        expect((checkboxes[0].element as HTMLInputElement).checked).toBe(true);\n        expect((checkboxes[1].element as HTMLInputElement).checked).toBe(true);"
  },
  {
    "file": "frontend/src/components/__tests__/ModalAcaoBloco.spec.ts",
    "type": "line",
    "line": 94,
    "length": 1,
    "text": "// Try confirming without date",
    "context": "            mostrarDataLimite: true\n        });\n\n        // Try confirming without date\n        await wrapper.find('.btn-primary').trigger('click');\n        expect(wrapper.emitted('confirmar')).toBeFalsy();\n        expect(wrapper.text()).toContain(\"A data limite √© obrigat√≥ria\");"
  },
  {
    "file": "frontend/src/components/__tests__/ModalAcaoBloco.spec.ts",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Set date",
    "context": "        expect(wrapper.emitted('confirmar')).toBeFalsy();\n        expect(wrapper.text()).toContain(\"A data limite √© obrigat√≥ria\");\n\n        // Set date\n        await wrapper.find('#dataLimiteBloco').setValue('2024-12-31');\n        await wrapper.find('.btn-primary').trigger('click');\n"
  },
  {
    "file": "frontend/src/components/__tests__/ModalAcaoBloco.spec.ts",
    "type": "line",
    "line": 112,
    "length": 1,
    "text": "// Simulate open state with error and processing",
    "context": "\n    it(\"deve fechar o modal e limpar estado\", () => {\n        const wrapper = createWrapper();\n        // Simulate open state with error and processing\n        (wrapper.vm as any).setProcessando(true);\n        (wrapper.vm as any).setErro(\"Erro\");\n"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Click action",
    "context": "        expect(wrapper.find('[data-testid=\"card-subprocesso-atividades\"]').exists()).toBe(true);\n        expect(wrapper.find('[data-testid=\"card-subprocesso-mapa-edicao\"]').exists()).toBe(true);\n\n        // Click action\n        await wrapper.find('[data-testid=\"card-subprocesso-atividades\"]').trigger('click');\n        expect(pushMock).toHaveBeenCalledWith({\n            name: 'SubprocessoCadastro',"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Keydown Enter action",
    "context": "            params: {codProcesso: 1, siglaUnidade: 'TESTE'}\n        });\n\n        // Keydown Enter action\n        pushMock.mockClear();\n        await wrapper.find('[data-testid=\"card-subprocesso-atividades\"]').trigger('keydown', {key: 'Enter'});\n        expect(pushMock).toHaveBeenCalledWith({"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Keydown Space action",
    "context": "            params: {codProcesso: 1, siglaUnidade: 'TESTE'}\n        });\n\n        // Keydown Space action\n        pushMock.mockClear();\n        await wrapper.find('[data-testid=\"card-subprocesso-atividades\"]').trigger('keydown', {key: ' '});\n        expect(pushMock).toHaveBeenCalledWith({"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 79,
    "length": 2,
    "text": "// Mapa Card Actions\n// Click",
    "context": "            params: {codProcesso: 1, siglaUnidade: 'TESTE'}\n        });\n\n        // Mapa Card Actions\n        // Click\n        pushMock.mockClear();\n        await wrapper.find('[data-testid=\"card-subprocesso-mapa-edicao\"]').trigger('click');\n        expect(pushMock).toHaveBeenCalledWith({"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 88,
    "length": 1,
    "text": "// Enter",
    "context": "            params: {codProcesso: 1, siglaUnidade: 'TESTE'}\n        });\n\n        // Enter\n        pushMock.mockClear();\n        await wrapper.find('[data-testid=\"card-subprocesso-mapa-edicao\"]').trigger('keydown', {key: 'Enter'});\n        expect(pushMock).toHaveBeenCalledWith({"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 96,
    "length": 1,
    "text": "// Space",
    "context": "            params: {codProcesso: 1, siglaUnidade: 'TESTE'}\n        });\n\n        // Space\n        pushMock.mockClear();\n        await wrapper.find('[data-testid=\"card-subprocesso-mapa-edicao\"]').trigger('keydown', {key: ' '});\n        expect(pushMock).toHaveBeenCalledWith({"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Atividades Vis Actions",
    "context": "\n        expect(wrapper.find('[data-testid=\"card-subprocesso-atividades-vis\"]').exists()).toBe(true);\n\n        // Atividades Vis Actions\n        await wrapper.find('[data-testid=\"card-subprocesso-atividades-vis\"]').trigger('click');\n        expect(pushMock).toHaveBeenCalledWith({\n            name: 'SubprocessoVisCadastro',"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 131,
    "length": 1,
    "text": "// Mapa vis Actions",
    "context": "            params: {codProcesso: 1, siglaUnidade: 'TESTE'}\n        });\n\n        // Mapa vis Actions\n        pushMock.mockClear();\n        await wrapper.find('[data-testid=\"card-subprocesso-mapa-visualizacao\"]').trigger('click');\n        expect(pushMock).toHaveBeenCalledWith({"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 160,
    "length": 1,
    "text": "// Diagnostico Card Actions",
    "context": "            codSubprocesso: 100\n        }, {podeVisualizarDiagnostico: true});\n\n        // Diagnostico Card Actions\n        await wrapper.find('[data-testid=\"card-subprocesso-diagnostico\"]').trigger('click');\n        expect(pushMock).toHaveBeenCalledWith({\n            name: 'AutoavaliacaoDiagnostico',"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 181,
    "length": 1,
    "text": "// Ocupacoes Card Actions",
    "context": "            params: {codSubprocesso: 100, siglaUnidade: 'TESTE'}\n        });\n\n        // Ocupacoes Card Actions\n        pushMock.mockClear();\n        await wrapper.find('[data-testid=\"card-subprocesso-ocupacoes\"]').trigger('click');\n        expect(pushMock).toHaveBeenCalledWith({"
  },
  {
    "file": "frontend/src/components/__tests__/SubprocessoCards.spec.ts",
    "type": "line",
    "line": 203,
    "length": 1,
    "text": "// Monitoramento Card Actions",
    "context": "            params: {codSubprocesso: 100, siglaUnidade: 'TESTE'}\n        });\n\n        // Monitoramento Card Actions\n        pushMock.mockClear();\n        await wrapper.find('[data-testid=\"card-subprocesso-monitoramento\"]').trigger('click');\n        expect(pushMock).toHaveBeenCalledWith({"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaAlertas.spec.ts",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// N√£o stubbando BTable permite renderiza√ß√£o real dos slots",
    "context": "    it(\"deve renderizar o texto 'N√£o lido' para alertas n√£o lidos (acessibilidade)\", () => {\n        const wrapper = mount(TabelaAlertas, {\n            props: {alertas: mockAlertas},\n            // N√£o stubbando BTable permite renderiza√ß√£o real dos slots\n            global: {\n                // stubs: { BTable: false }\n            }"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaAlertas.spec.ts",
    "type": "line",
    "line": 58,
    "length": 1,
    "text": "// stubs: { BTable: false }",
    "context": "            props: {alertas: mockAlertas},\n            // N√£o stubbando BTable permite renderiza√ß√£o real dos slots\n            global: {\n                // stubs: { BTable: false }\n            }\n        });\n"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaAlertas.spec.ts",
    "type": "line",
    "line": 62,
    "length": 1,
    "text": "// Verifica se o texto visualmente oculto est√° presente e associado ao alerta n√£o lido",
    "context": "            }\n        });\n\n        // Verifica se o texto visualmente oculto est√° presente e associado ao alerta n√£o lido\n        const unreadAlertRow = wrapper.findAll('tr')[1]; // Primeira linha de dados (ap√≥s header)\n        expect(unreadAlertRow.text()).toContain('N√£o lido:');\n        expect(unreadAlertRow.find('.visually-hidden').text()).toBe('N√£o lido:');"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaAlertas.spec.ts",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Verifica se o alerta lido n√£o tem o texto",
    "context": "        expect(unreadAlertRow.text()).toContain('N√£o lido:');\n        expect(unreadAlertRow.find('.visually-hidden').text()).toBe('N√£o lido:');\n\n        // Verifica se o alerta lido n√£o tem o texto\n        const readAlertRow = wrapper.findAll('tr')[2]; // Segunda linha de dados\n        expect(readAlertRow.text()).not.toContain('N√£o lido:');\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaMovimentacoes.spec.ts",
    "type": "line",
    "line": 8,
    "length": 1,
    "text": "// Mock do utils para formatDateTimeBR",
    "context": "import {BTable as _BTable} from \"bootstrap-vue-next\";\nimport {setupComponentTest} from \"@/test-utils/componentTestHelpers\";\n\n// Mock do utils para formatDateTimeBR\nvi.mock(\"@/utils\", () => ({\n    formatDateTimeBR: (date: string) => `Formatted ${date}`,\n}));"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaMovimentacoes.spec.ts",
    "type": "line",
    "line": 70,
    "length": 2,
    "text": "// When stubbing BTable, we need to manually render the slot content\n// because mount won't render slots inside a stub automatically unless configured",
    "context": "        const wrapper = mount(TabelaMovimentacoes, {\n            props: {movimentacoes: []},\n            global: {\n                // When stubbing BTable, we need to manually render the slot content\n                // because mount won't render slots inside a stub automatically unless configured\n                stubs: {\n                    BTable: {\n                        props: ['items', 'showEmpty'],"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaMovimentacoes.spec.ts",
    "type": "line",
    "line": 107,
    "length": 2,
    "text": "// Usar mount sem stub do BTable para renderizar slots pode ser pesado.\n// Alternativa: Stub funcional que renderiza os slots.",
    "context": "    });\n\n    it(\"deve renderizar conte√∫do dos slots corretamente (formata√ß√£o de data e sigla)\", () => {\n        // Usar mount sem stub do BTable para renderizar slots pode ser pesado.\n        // Alternativa: Stub funcional que renderiza os slots.\n        const wrapper = mount(TabelaMovimentacoes, {\n            props: {movimentacoes: mockMovimentacoes},\n            global: {"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaMovimentacoes.spec.ts",
    "type": "line",
    "line": 175,
    "length": 1,
    "text": "// Verifica se renderizou dois hifens (um para origem, um para destino)",
    "context": "            }\n        });\n\n        // Verifica se renderizou dois hifens (um para origem, um para destino)\n        const cells = wrapper.findAll('td');\n        expect(cells[0].text()).toBe(\"-\");\n        expect(cells[1].text()).toBe(\"-\");"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaProcessos.spec.ts",
    "type": "line",
    "line": 9,
    "length": 1,
    "text": "// Mock de dados de processo",
    "context": "import EmptyState from \"../comum/EmptyState.vue\";\nimport {getCommonMountOptions, setupComponentTest} from \"@/test-utils/componentTestHelpers\";\n\n// Mock de dados de processo\nconst mockProcessos: ProcessoResumo[] = [\n    {\n        codigo: 1,"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaProcessos.spec.ts",
    "type": "line",
    "line": 41,
    "length": 1,
    "text": "// Do not stub BTable so we can check headers rendered by it",
    "context": "    const context = setupComponentTest();\n\n    it(\"deve renderizar a tabela e os cabe√ßalhos corretamente\", async () => {\n        // Do not stub BTable so we can check headers rendered by it\n        context.wrapper = mount(TabelaProcessos, {\n            ...getCommonMountOptions(),\n            props: {"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaProcessos.spec.ts",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// Here we stub BTable to easily trigger sort-changed",
    "context": "    });\n\n    it(\"deve emitir o evento ordenar ao receber o evento sort-changed\", async () => {\n        // Here we stub BTable to easily trigger sort-changed\n        context.wrapper = mount(TabelaProcessos, {\n            ...getCommonMountOptions({}, {\n                BTable: {"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaProcessos.spec.ts",
    "type": "line",
    "line": 280,
    "length": 1,
    "text": "// Need real BTable to check headers",
    "context": "\n    describe(\"Modo Compacto\", () => {\n        it(\"deve exibir o r√≥tulo reduzido 'Unidades' quando compacto √© true\", async () => {\n            // Need real BTable to check headers\n            context.wrapper = mount(TabelaProcessos, {\n                ...getCommonMountOptions(),\n                props: {"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaProcessosCoverage.spec.ts",
    "type": "line",
    "line": 22,
    "length": 1,
    "text": "// Stub BTable to render a row with the bound event handler",
    "context": "    ];\n\n    it('handles Space key on row to select process', async () => {\n        // Stub BTable to render a row with the bound event handler\n        const BTableStub = {\n            props: ['items', 'tbodyTrAttr'],\n            template: `"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaProcessosCoverage.spec.ts",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Trigger space key",
    "context": "        });\n\n        const row = wrapper.find('tr');\n        // Trigger space key\n        await row.trigger('keydown', {key: ' '});\n\n        expect(wrapper.emitted('selecionarProcesso')).toBeTruthy();"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaProcessosCoverage.spec.ts",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// Check class results",
    "context": "            }\n        });\n\n        // Check class results\n        const nullItemClassDiv = wrapper.find('[data-testid=\"null-item-class\"]');\n        expect(nullItemClassDiv.classes().length).toBe(0); // Should be empty\n"
  },
  {
    "file": "frontend/src/components/__tests__/TabelaProcessosCoverage.spec.ts",
    "type": "line",
    "line": 97,
    "length": 1,
    "text": "// Check attr results",
    "context": "        const wrongTypeClassDiv = wrapper.find('[data-testid=\"wrong-type-class\"]');\n        expect(wrongTypeClassDiv.classes().length).toBe(0); // Should be empty\n\n        // Check attr results\n        const nullItemAttrDiv = wrapper.find('[data-testid=\"null-item-attr\"]');\n        expect(nullItemAttrDiv.attributes('tabindex')).toBeUndefined();\n"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 8,
    "length": 1,
    "text": "// Mock do componente TreeRow",
    "context": "import EmptyState from \"@/components/comum/EmptyState.vue\";\nimport {setupComponentTest} from \"@/test-utils/componentTestHelpers\";\n\n// Mock do componente TreeRow\nconst mockTreeRow = {template: \"<tr><td>Mocked TreeRowItem</td></tr>\"};\n\ndescribe(\"TreeTable.vue\", () => {"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 79,
    "length": 4,
    "text": "// When expanded=true, we render all items including children\n// Item 1 (expanded) -> SubItem 1.1, SubItem 1.2\n// Item 2 (expanded but no children)\n// Total: 1 + 2 + 1 = 4 rows",
    "context": "\n        await wrapper.vm.$nextTick();\n\n        // When expanded=true, we render all items including children\n        // Item 1 (expanded) -> SubItem 1.1, SubItem 1.2\n        // Item 2 (expanded but no children)\n        // Total: 1 + 2 + 1 = 4 rows\n        const trElements = wrapper.findAll(\"tbody tr\");\n        expect(trElements.length).toBeGreaterThan(0);\n"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 86,
    "length": 1,
    "text": "// Verify we can find the components",
    "context": "        const trElements = wrapper.findAll(\"tbody tr\");\n        expect(trElements.length).toBeGreaterThan(0);\n\n        // Verify we can find the components\n        const treeRows = wrapper.findAllComponents(TreeRowItem);\n        expect(treeRows.length).toBeGreaterThan(0);\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 120,
    "length": 1,
    "text": "// Initially collapsed, only top-level item should render",
    "context": "        });\n        await wrapper.vm.$nextTick();\n\n        // Initially collapsed, only top-level item should render\n        let treeRows = wrapper.findAllComponents(TreeRowItem);\n        const initialCount = treeRows.length;\n"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Click expand all button",
    "context": "        let treeRows = wrapper.findAllComponents(TreeRowItem);\n        const initialCount = treeRows.length;\n\n        // Click expand all button\n        await wrapper.find(\"button.btn-outline-primary\").trigger(\"click\");\n        await wrapper.vm.$nextTick();\n"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 128,
    "length": 1,
    "text": "// Verify that more items are now rendered (children are expanded)",
    "context": "        await wrapper.find(\"button.btn-outline-primary\").trigger(\"click\");\n        await wrapper.vm.$nextTick();\n\n        // Verify that more items are now rendered (children are expanded)\n        treeRows = wrapper.findAllComponents(TreeRowItem);\n        expect(treeRows.length).toBeGreaterThan(initialCount);\n"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// Verify that the item is expanded",
    "context": "        treeRows = wrapper.findAllComponents(TreeRowItem);\n        expect(treeRows.length).toBeGreaterThan(initialCount);\n\n        // Verify that the item is expanded\n        const expandedItem = (wrapper.vm as any).internalData[0];\n        expect(expandedItem.expanded).toBe(true);\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 154,
    "length": 1,
    "text": "// Encontrar o bot√£o de colapsar e clicar nele",
    "context": "            },\n        });\n\n        // Encontrar o bot√£o de colapsar e clicar nele\n        const collapseButton = wrapper.find(\"button.btn-outline-secondary\");\n        await collapseButton.trigger(\"click\");\n        await wrapper.vm.$nextTick();"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 159,
    "length": 1,
    "text": "// Verificar se a propriedade `expanded` foi definida como false no item",
    "context": "        await collapseButton.trigger(\"click\");\n        await wrapper.vm.$nextTick();\n\n        // Verificar se a propriedade `expanded` foi definida como false no item\n        const internalData = (wrapper.vm as any).internalData;\n        expect(internalData[0].expanded).toBe(false);\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 187,
    "length": 1,
    "text": "// Testar encontrar item de n√≠vel superior",
    "context": "            global: {stubs: {TreeRowItem: mockTreeRow}},\n        });\n\n        // Testar encontrar item de n√≠vel superior\n\n        const vm = wrapper.vm as any;\n        const foundItem = vm.findItemByCodigo(dataWithNestedChildren, 1);"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 194,
    "length": 1,
    "text": "// Testar encontrar item aninhado",
    "context": "        expect(foundItem).toBeTruthy();\n        expect(foundItem?.nome).toBe(\"Item 1\");\n\n        // Testar encontrar item aninhado\n        const foundNestedItem = vm.findItemByCodigo(dataWithNestedChildren, 111);\n        expect(foundNestedItem).toBeTruthy();\n        expect(foundNestedItem?.nome).toBe(\"SubSubItem 1.1.1\");"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 231,
    "length": 1,
    "text": "// Verificar estado inicial do internalData",
    "context": "\n        const vm = wrapper.vm as any;\n\n        // Verificar estado inicial do internalData\n        expect(vm.internalData[0].expanded).toBe(false);\n\n        // Alternar para expandido"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 234,
    "length": 1,
    "text": "// Alternar para expandido",
    "context": "        // Verificar estado inicial do internalData\n        expect(vm.internalData[0].expanded).toBe(false);\n\n        // Alternar para expandido\n        vm.toggleExpand(1);\n        expect(vm.internalData[0].expanded).toBe(true);\n"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 238,
    "length": 1,
    "text": "// Alternar para colapsado",
    "context": "        vm.toggleExpand(1);\n        expect(vm.internalData[0].expanded).toBe(true);\n\n        // Alternar para colapsado\n        vm.toggleExpand(1);\n        expect(vm.internalData[0].expanded).toBe(false);\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 252,
    "length": 1,
    "text": "// Tentar alternar item inexistente",
    "context": "\n        const vm = wrapper.vm as any;\n\n        // Tentar alternar item inexistente\n        vm.toggleExpand(999);\n\n        // Verificar que n√£o quebrou e manteve estado"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 255,
    "length": 1,
    "text": "// Verificar que n√£o quebrou e manteve estado",
    "context": "        // Tentar alternar item inexistente\n        vm.toggleExpand(999);\n\n        // Verificar que n√£o quebrou e manteve estado\n        expect(mockData[0].expanded).toBe(false);\n    });\n"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 265,
    "length": 1,
    "text": "// Verifica se EmptyState est√° presente",
    "context": "            global: {stubs: {TreeRowItem: mockTreeRow}},\n        });\n\n        // Verifica se EmptyState est√° presente\n        const emptyState = wrapper.findComponent(EmptyState);\n        expect(emptyState.exists()).toBe(true);\n        expect(emptyState.props('title')).toBe(\"Nenhum registro encontrado\");"
  },
  {
    "file": "frontend/src/components/__tests__/TreeTable.spec.ts",
    "type": "line",
    "line": 270,
    "length": 1,
    "text": "// Verifica se TreeRowItem N√ÉO est√° presente",
    "context": "        expect(emptyState.exists()).toBe(true);\n        expect(emptyState.props('title')).toBe(\"Nenhum registro encontrado\");\n\n        // Verifica se TreeRowItem N√ÉO est√° presente\n        expect(wrapper.findComponent(TreeRowItem).exists()).toBe(false);\n    });\n"
  },
  {
    "file": "frontend/src/components/__tests__/UnidadeTreeNode.spec.ts",
    "type": "line",
    "line": 191,
    "length": 1,
    "text": "// Check prop on stub",
    "context": "            ...mountOptions\n        });\n\n        // Check prop on stub\n        expect(wrapper.findComponent(BFormCheckboxStub).props('disabled')).toBe(true);\n        expect(wrapper.find('.unidade-label').classes()).toContain('text-muted');\n    });"
  },
  {
    "file": "frontend/src/components/__tests__/UnidadeTreeNodeCoverage.spec.ts",
    "type": "line",
    "line": 64,
    "length": 1,
    "text": "// Vue 3 style binding might normalize styles, so we check for presence",
    "context": "        });\n\n        const label = wrapper.find('.unidade-label');\n        // Vue 3 style binding might normalize styles, so we check for presence\n        expect(label.attributes('style')).toContain('cursor: help');\n    });\n"
  },
  {
    "file": "frontend/src/components/__tests__/UnidadeTreeNodeCoverage.spec.ts",
    "type": "line",
    "line": 78,
    "length": 1,
    "text": "// When style is empty, it might be undefined or empty string",
    "context": "        });\n\n        const label = wrapper.find('.unidade-label');\n        // When style is empty, it might be undefined or empty string\n        const style = label.attributes('style');\n        if (style) {\n            expect(style).not.toContain('cursor: help');"
  },
  {
    "file": "frontend/src/components/comum/InlineEditor.stories.ts",
    "type": "line",
    "line": 41,
    "length": 1,
    "text": "// Verifica estado inicial",
    "context": "    `,\n    }),\n    play: async () => {\n        // Verifica estado inicial\n        await expect.element(page.getByText('Texto para editar')).toBeVisible();\n\n        // Inicia edi√ß√£o"
  },
  {
    "file": "frontend/src/components/comum/InlineEditor.stories.ts",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Inicia edi√ß√£o",
    "context": "        // Verifica estado inicial\n        await expect.element(page.getByText('Texto para editar')).toBeVisible();\n\n        // Inicia edi√ß√£o\n        const editBtn = page.getByRole('button', {name: /editar/i});\n        await userEvent.click(editBtn);\n"
  },
  {
    "file": "frontend/src/components/comum/InlineEditor.stories.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Verifica se o input apareceu",
    "context": "        const editBtn = page.getByRole('button', {name: /editar/i});\n        await userEvent.click(editBtn);\n\n        // Verifica se o input apareceu\n        const input = page.getByRole('textbox');\n        await expect.element(input).toHaveValue('Texto para editar');\n    },"
  },
  {
    "file": "frontend/src/components/comum/LoadingButton.stories.ts",
    "type": "line",
    "line": 29,
    "length": 1,
    "text": "// Simula clique",
    "context": "    play: async () => {\n        const button = page.getByRole('button');\n\n        // Simula clique\n        await userEvent.click(button);\n    },\n};"
  },
  {
    "file": "frontend/src/components/comum/LoadingButton.stories.ts",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// Verifica se o texto de carregamento est√° vis√≠vel",
    "context": "    play: async () => {\n        const button = page.getByRole('button');\n\n        // Verifica se o texto de carregamento est√° vis√≠vel\n        await expect.element(button).toHaveTextContent('Carregando...');\n        await expect.element(button).toBeDisabled();\n    },"
  },
  {
    "file": "frontend/src/components/configuracoes/__tests__/AdministradoresSection.spec.ts",
    "type": "line",
    "line": 107,
    "length": 1,
    "text": "// Trigger confirm without setting value",
    "context": "        const notificacoes = useNotificacoesStore();\n        await flushPromises();\n\n        // Trigger confirm without setting value\n        await (wrapper.vm as any).adicionarAdmin();\n        expect(notificacoes.show).toHaveBeenCalledWith(\"Erro\", expect.stringContaining(\"v√°lido\"), \"warning\");\n"
  },
  {
    "file": "frontend/src/components/layout/BarraNavegacao.stories.ts",
    "type": "line",
    "line": 23,
    "length": 1,
    "text": "// Mocking route and router",
    "context": "    render: () => ({\n        components: {BarraNavegacao},\n        setup() {\n            // Mocking route and router\n            return {};\n        },\n        template: '<BarraNavegacao />',"
  },
  {
    "file": "frontend/src/components/layout/MainNavbar.stories.ts",
    "type": "line",
    "line": 25,
    "length": 1,
    "text": "// Mocking Pinia and Router",
    "context": "    render: () => ({\n        components: {MainNavbar},\n        setup() {\n            // Mocking Pinia and Router\n            const pinia = createTestingPinia({\n                createSpy: vi.fn,\n                initialState: {"
  },
  {
    "file": "frontend/src/components/relatorios/__tests__/ModalAndamentoGeral.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "import * as csvUtils from '@/utils/csv';\nimport {SituacaoProcesso, TipoProcesso} from '@/types/tipos';\n\n// Mock dependencies\nvi.mock('@/utils/csv', () => ({\n    gerarCSV: vi.fn(),\n    downloadCSV: vi.fn(),"
  },
  {
    "file": "frontend/src/components/relatorios/__tests__/ModalDiagnosticosGaps.spec.ts",
    "type": "line",
    "line": 6,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "import ModalDiagnosticosGaps from '../ModalDiagnosticosGaps.vue';\nimport * as csvUtils from '@/utils/csv';\n\n// Mock dependencies\nvi.mock('@/utils/csv', () => ({\n    gerarCSV: vi.fn(),\n    downloadCSV: vi.fn(),"
  },
  {
    "file": "frontend/src/components/relatorios/__tests__/ModalDiagnosticosGaps.spec.ts",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// Finalizado -> bg-success",
    "context": "        const wrapper = mount(ModalDiagnosticosGaps, mountOptions);\n        const badges = wrapper.findAll('.badge');\n\n        // Finalizado -> bg-success\n        expect(badges[0].classes()).toContain('bg-success');\n        // Em an√°lise -> bg-warning\n        expect(badges[1].classes()).toContain('bg-warning');"
  },
  {
    "file": "frontend/src/components/relatorios/__tests__/ModalDiagnosticosGaps.spec.ts",
    "type": "line",
    "line": 95,
    "length": 1,
    "text": "// Em an√°lise -> bg-warning",
    "context": "\n        // Finalizado -> bg-success\n        expect(badges[0].classes()).toContain('bg-success');\n        // Em an√°lise -> bg-warning\n        expect(badges[1].classes()).toContain('bg-warning');\n        // Pendente -> bg-danger\n        expect(badges[2].classes()).toContain('bg-danger');"
  },
  {
    "file": "frontend/src/components/relatorios/__tests__/ModalDiagnosticosGaps.spec.ts",
    "type": "line",
    "line": 97,
    "length": 1,
    "text": "// Pendente -> bg-danger",
    "context": "        expect(badges[0].classes()).toContain('bg-success');\n        // Em an√°lise -> bg-warning\n        expect(badges[1].classes()).toContain('bg-warning');\n        // Pendente -> bg-danger\n        expect(badges[2].classes()).toContain('bg-danger');\n        // Default -> bg-secondary\n        expect(badges[3].classes()).toContain('bg-secondary');"
  },
  {
    "file": "frontend/src/components/relatorios/__tests__/ModalDiagnosticosGaps.spec.ts",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Default -> bg-secondary",
    "context": "        expect(badges[1].classes()).toContain('bg-warning');\n        // Pendente -> bg-danger\n        expect(badges[2].classes()).toContain('bg-danger');\n        // Default -> bg-secondary\n        expect(badges[3].classes()).toContain('bg-secondary');\n    });\n"
  },
  {
    "file": "frontend/src/components/relatorios/__tests__/ModalDiagnosticosGaps.spec.ts",
    "type": "line",
    "line": 105,
    "length": 1,
    "text": "// 15/10/2023 for first item",
    "context": "\n    it('formats date correctly', () => {\n        const wrapper = mount(ModalDiagnosticosGaps, mountOptions);\n        // 15/10/2023 for first item\n        expect(wrapper.text()).toContain('15/10/2023');\n    });\n"
  },
  {
    "file": "frontend/src/components/relatorios/__tests__/ModalMapasVigentes.spec.ts",
    "type": "line",
    "line": 6,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "import ModalMapasVigentes from '../ModalMapasVigentes.vue';\nimport * as csvUtils from '@/utils/csv';\n\n// Mock dependencies\nvi.mock('@/utils/csv', () => ({\n    gerarCSV: vi.fn(),\n    downloadCSV: vi.fn(),"
  },
  {
    "file": "frontend/src/components/unidade/ArvoreUnidades.stories.ts",
    "type": "line",
    "line": 83,
    "length": 1,
    "text": "// Verifica se a √°rvore foi renderizada",
    "context": "    `,\n    }),\n    play: async () => {\n        // Verifica se a √°rvore foi renderizada\n        const item = page.getByText('Presid√™ncia');\n        await expect.element(item).toBeVisible();\n    },"
  },
  {
    "file": "frontend/src/composables/__tests__/useApi.spec.ts",
    "type": "line",
    "line": 38,
    "length": 1,
    "text": "// Ignora erro esperado",
    "context": "        try {\n            await execute();\n        } catch {\n            // Ignora erro esperado\n        }\n\n        expect(error.value).toBe(\"error\");"
  },
  {
    "file": "frontend/src/composables/__tests__/useApi.spec.ts",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Ignora erro esperado",
    "context": "        try {\n            await execute();\n        } catch {\n            // Ignora erro esperado\n        }\n\n        expect(error.value).toBe(\"error\");"
  },
  {
    "file": "frontend/src/composables/__tests__/useErrorHandler.spec.ts",
    "type": "line",
    "line": 28,
    "length": 1,
    "text": "// Verificar que erro foi limpo",
    "context": "        };\n\n        await withErrorHandling(async () => {\n            // Verificar que erro foi limpo\n            expect(lastError.value).toBeNull();\n            return 'sucesso';\n        });"
  },
  {
    "file": "frontend/src/composables/__tests__/usePerfil.spec.ts",
    "type": "line",
    "line": 121,
    "length": 2,
    "text": "// A l√≥gica do computed 'unidadeSelecionada' usa flattenUnidades internamente.\n// Se encontrar o ID 3 (NETO), deve retornar \"NETO\".",
    "context": "        } as any);\n\n        const {unidadeSelecionada} = usePerfil();\n        // A l√≥gica do computed 'unidadeSelecionada' usa flattenUnidades internamente.\n        // Se encontrar o ID 3 (NETO), deve retornar \"NETO\".\n        expect(unidadeSelecionada.value).toBe(\"NETO\");\n    });\n});"
  },
  {
    "file": "frontend/src/composables/useAcesso.ts",
    "type": "line",
    "line": 11,
    "length": 1,
    "text": "// Helper to unwrap refs",
    "context": " * This hook simplifies access to those rules in Vue components.\n */\nexport function useAcesso(subprocessoRef: Ref<SubprocessoDetalhe | null> | SubprocessoDetalhe) {\n    // Helper to unwrap refs\n    const getSubprocesso = () => unref(subprocessoRef);\n\n    // Direct mapping of permissions from the backend"
  },
  {
    "file": "frontend/src/composables/useAcesso.ts",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// Direct mapping of permissions from the backend",
    "context": "    // Helper to unwrap refs\n    const getSubprocesso = () => unref(subprocessoRef);\n\n    // Direct mapping of permissions from the backend\n    const podeEditarCadastro = computed(() => getSubprocesso()?.permissoes?.podeEditarCadastro ?? false);\n    const podeDisponibilizarCadastro = computed(() => getSubprocesso()?.permissoes?.podeDisponibilizarCadastro ?? false);\n    const podeDevolverCadastro = computed(() => getSubprocesso()?.permissoes?.podeDevolverCadastro ?? false);"
  },
  {
    "file": "frontend/src/composables/useLoadingManager.ts",
    "type": "line",
    "line": 49,
    "length": 1,
    "text": "// Cria refs para cada estado de loading",
    "context": " * ```\n */\nexport function useLoadingManager(names: string[]): LoadingManager {\n    // Cria refs para cada estado de loading\n    const states: Record<string, Ref<boolean>> = {};\n    names.forEach(name => {\n        states[name] = ref(false);"
  },
  {
    "file": "frontend/src/composables/useLocalStorage.ts",
    "type": "line",
    "line": 11,
    "length": 1,
    "text": "// Fun√ß√£o para ler do localStorage",
    "context": " * @returns Ref sincronizado com localStorage\n */\nexport function useLocalStorage<T>(key: string, defaultValue: T): Ref<T> {\n    // Fun√ß√£o para ler do localStorage\n    const readValue = (): T => {\n        const item = localStorage.getItem(key);\n        if (item === null) {"
  },
  {
    "file": "frontend/src/composables/useLocalStorage.ts",
    "type": "line",
    "line": 21,
    "length": 1,
    "text": "// Se falhar o parse (ex: dado legado n√£o-JSON), retorna o item como-est√° se T for string",
    "context": "        try {\n            return JSON.parse(item) as T;\n        } catch {\n            // Se falhar o parse (ex: dado legado n√£o-JSON), retorna o item como-est√° se T for string\n            return item as unknown as T;\n        }\n    };"
  },
  {
    "file": "frontend/src/composables/useLocalStorage.ts",
    "type": "line",
    "line": 26,
    "length": 1,
    "text": "// Cria ref com valor inicial do localStorage",
    "context": "        }\n    };\n\n    // Cria ref com valor inicial do localStorage\n    const storedValue = ref(readValue()) as Ref<T>;\n\n    // Observa mudan√ßas e sincroniza com localStorage"
  },
  {
    "file": "frontend/src/composables/useLocalStorage.ts",
    "type": "line",
    "line": 29,
    "length": 1,
    "text": "// Observa mudan√ßas e sincroniza com localStorage",
    "context": "    // Cria ref com valor inicial do localStorage\n    const storedValue = ref(readValue()) as Ref<T>;\n\n    // Observa mudan√ßas e sincroniza com localStorage\n    watch(storedValue, (newValue) => {\n        if (newValue === null || newValue === undefined) {\n            localStorage.removeItem(key);"
  },
  {
    "file": "frontend/src/composables/useModalManager.ts",
    "type": "line",
    "line": 50,
    "length": 1,
    "text": "// Cria refs para cada modal",
    "context": " * ```\n */\nexport function useModalManager(modalNames: string[]): ModalManager {\n    // Cria refs para cada modal\n    const modals: Record<string, Ref<ModalState>> = {};\n    modalNames.forEach(name => {\n        modals[name] = ref<ModalState>({isOpen: false});"
  },
  {
    "file": "frontend/src/composables/usePerfil.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Fun√ß√£o auxiliar para achatar a hierarquia de unidades",
    "context": "import {useUsuariosStore} from \"@/stores/usuarios\";\nimport {type Unidade} from \"@/types/tipos\";\n\n// Fun√ß√£o auxiliar para achatar a hierarquia de unidades\nfunction flattenUnidades(unidades: Unidade[]): Unidade[] {\n    let flat: Unidade[] = [];\n    unidades.forEach((u: Unidade) => {"
  },
  {
    "file": "frontend/src/composables/useProcessoForm.ts",
    "type": "line",
    "line": 72,
    "length": 1,
    "text": "// State",
    "context": "    }\n\n    return {\n        // State\n        descricao,\n        tipo,\n        dataLimite,"
  },
  {
    "file": "frontend/src/composables/useProcessoForm.ts",
    "type": "line",
    "line": 79,
    "length": 1,
    "text": "// Computed",
    "context": "        unidadesSelecionadas,\n        fieldErrors,\n\n        // Computed\n        isFormInvalid,\n\n        // Actions"
  },
  {
    "file": "frontend/src/composables/useProcessoForm.ts",
    "type": "line",
    "line": 82,
    "length": 1,
    "text": "// Actions",
    "context": "        // Computed\n        isFormInvalid,\n\n        // Actions\n        setFromNormalizedError,\n        clearErrors,\n        hasErrors,"
  },
  {
    "file": "frontend/src/constants/situacoes.ts",
    "type": "line",
    "line": 5,
    "length": 1,
    "text": "// Situa√ß√µes de subprocesso",
    "context": " * Constantes para situa√ß√µes de processos e mapas no SGC\n */\n\n// Situa√ß√µes de subprocesso\nexport const SITUACOES_SUBPROCESSO = {\n    AGUARDANDO: \"Aguardando\",\n    EM_ANDAMENTO: \"Em andamento\","
  },
  {
    "file": "frontend/src/constants/situacoes.ts",
    "type": "line",
    "line": 33,
    "length": 1,
    "text": "// Situa√ß√µes de mapa",
    "context": "    NAO_INICIADO: \"N√£o iniciado\",\n} as const;\n\n// Situa√ß√µes de mapa\nexport const SITUACOES_MAPA = {\n    VIGENTE: \"vigente\",\n    DISPONIBILIZADO: \"disponibilizado\","
  },
  {
    "file": "frontend/src/constants/situacoes.ts",
    "type": "line",
    "line": 41,
    "length": 1,
    "text": "// Labels para exibi√ß√£o",
    "context": "    DISPONIVEL_VALIDACAO: \"disponivel_validacao\",\n} as const;\n\n// Labels para exibi√ß√£o\nexport const LABELS_SITUACAO = {\n    [SITUACOES_SUBPROCESSO.CADASTRO_DISPONIBILIZADO]: \"Cadastro disponibilizado\",\n    [SITUACOES_SUBPROCESSO.MAPA_VALIDADO]: \"Mapa validado\","
  },
  {
    "file": "frontend/src/constants/situacoes.ts",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// Classes CSS para badges de situa√ß√£o",
    "context": "    NAO_DISPONIBILIZADO: \"N√£o disponibilizado\",\n} as const;\n\n// Classes CSS para badges de situa√ß√£o\nexport const CLASSES_BADGE_SITUACAO = {\n    [SITUACOES_SUBPROCESSO.AGUARDANDO]: \"bg-warning text-dark\",\n    [SITUACOES_SUBPROCESSO.EM_ANDAMENTO]: \"bg-warning text-dark\","
  },
  {
    "file": "frontend/src/constants/situacoes.ts",
    "type": "line",
    "line": 74,
    "length": 1,
    "text": "// Mapas (estados do mapa)",
    "context": "    [SITUACOES_SUBPROCESSO.REVISAO_CADASTRO_ACEITA]: \"bg-success\",\n    [SITUACOES_SUBPROCESSO.MAPA_AJUSTADO]: \"bg-info\",\n    [SITUACOES_SUBPROCESSO.MAPA_CRIADO]: \"bg-info\",\n    // Mapas (estados do mapa)\n    [SITUACOES_MAPA.VIGENTE]: \"bg-success\",\n    [SITUACOES_MAPA.DISPONIBILIZADO]: \"bg-warning text-dark\",\n    [SITUACOES_MAPA.EM_ANDAMENTO]: \"bg-warning text-dark\","
  },
  {
    "file": "frontend/src/env.d.ts",
    "type": "line",
    "line": 1,
    "length": 1,
    "text": "// noinspection JSUnusedGlobalSymbols",
    "context": "// noinspection JSUnusedGlobalSymbols\n\ndeclare module \"*.vue\" {\n    import type {DefineComponent} from \"vue\";"
  },
  {
    "file": "frontend/src/main.ts",
    "type": "line",
    "line": 1,
    "length": 1,
    "text": "// noinspection JSUnusedGlobalSymbols",
    "context": "// noinspection JSUnusedGlobalSymbols\n\nimport {createBootstrap, vBTooltip} from \"bootstrap-vue-next\"; // Importar createBootstrap e vBTooltip\nimport {createPinia} from \"pinia\";"
  },
  {
    "file": "frontend/src/router/__tests__/index.spec.ts",
    "type": "line",
    "line": 6,
    "length": 1,
    "text": "// Mock das rotas para evitar problemas de importa√ß√£o nos testes unit√°rios do index",
    "context": "import {createPinia, setActivePinia} from \"pinia\";\nimport {usePerfilStore} from \"@/stores/perfil\";\n\n// Mock das rotas para evitar problemas de importa√ß√£o nos testes unit√°rios do index\nvi.mock(\"../main.routes\", () => ({default: []}));\nvi.mock(\"../processo.routes\", () => ({default: []}));\nvi.mock(\"../unidade.routes\", () => ({default: []}));"
  },
  {
    "file": "frontend/src/router/__tests__/index.spec.ts",
    "type": "line",
    "line": 15,
    "length": 2,
    "text": "// Resetar o router √© complicado pois √© uma inst√¢ncia global,\n// mas adicionar rotas de teste ajuda a isolar.",
    "context": "describe(\"router/index.ts\", () => {\n    beforeEach(() => {\n        setActivePinia(createPinia());\n        // Resetar o router √© complicado pois √© uma inst√¢ncia global,\n        // mas adicionar rotas de teste ajuda a isolar.\n    });\n\n    it(\"deve criar uma inst√¢ncia do router\", () => {"
  },
  {
    "file": "frontend/src/router/__tests__/index.spec.ts",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// Ignorar erros de navega√ß√£o cancelada",
    "context": "        try {\n            await router.push(\"/rota-protegida\");\n        } catch {\n            // Ignorar erros de navega√ß√£o cancelada\n        }\n\n        // O router deve ter redirecionado para /login"
  },
  {
    "file": "frontend/src/router/__tests__/index.spec.ts",
    "type": "line",
    "line": 46,
    "length": 3,
    "text": "// O router deve ter redirecionado para /login\n// Nota: Como o router √© global, ele pode manter estado.\n// O teste ideal seria recriar o router, mas isso exige refatorar o src/router/index.ts para exportar uma fun√ß√£o de cria√ß√£o.",
    "context": "            // Ignorar erros de navega√ß√£o cancelada\n        }\n\n        // O router deve ter redirecionado para /login\n        // Nota: Como o router √© global, ele pode manter estado.\n        // O teste ideal seria recriar o router, mas isso exige refatorar o src/router/index.ts para exportar uma fun√ß√£o de cria√ß√£o.\n        expect(router.currentRoute.value.path).toBe(\"/login\");\n    });\n"
  },
  {
    "file": "frontend/src/router/__tests__/index.spec.ts",
    "type": "line",
    "line": 78,
    "length": 1,
    "text": "// Esperar a navega√ß√£o completar",
    "context": "        });\n\n        await router.push(\"/titulo\");\n        // Esperar a navega√ß√£o completar\n        await router.isReady();\n\n        expect(document.title).toBe(\"Meu T√≠tulo - SGC\");"
  },
  {
    "file": "frontend/src/router/__tests__/processo.routes.spec.ts",
    "type": "line",
    "line": 78,
    "length": 1,
    "text": "// @ts-expect-error - testing internal property",
    "context": "\n    it('deve carregar componentes sob demanda (lazy load)', async () => {\n        const cadProcesso = processoRoutes.find(r => r.name === 'CadProcesso');\n        // @ts-expect-error - testing internal property\n        const component = await cadProcesso?.component();\n        expect(component.default).toBeDefined();\n    }, 30000);"
  },
  {
    "file": "frontend/src/router/__tests__/router.spec.ts",
    "type": "line",
    "line": 8,
    "length": 1,
    "text": "// Mock views to avoid loading real components",
    "context": "import processoRoutes from '../processo.routes';\nimport unidadeRoutes from '../unidade.routes';\n\n// Mock views to avoid loading real components\nvi.mock('@/views/processo/ProcessoCadastroView.vue', () => ({default: {name: 'ProcessoCadastroView'}}));\nvi.mock('@/views/processo/ProcessoDetalheView.vue', () => ({default: {name: 'ProcessoDetalheView'}}));\nvi.mock('@/views/processo/SubprocessoDetalheView.vue', () => ({default: {name: 'SubprocessoDetalheView'}}));"
  },
  {
    "file": "frontend/src/router/__tests__/router.spec.ts",
    "type": "line",
    "line": 21,
    "length": 1,
    "text": "// Mock Unidade views just in case they are transitively imported",
    "context": "vi.mock('@/views/HistoricoView.vue', () => ({default: {name: 'HistoricoView'}}));\nvi.mock('@/views/RelatoriosView.vue', () => ({default: {name: 'RelatoriosView'}}));\nvi.mock('@/views/ConfiguracoesView.vue', () => ({default: {name: 'ConfiguracoesView'}}));\n// Mock Unidade views just in case they are transitively imported\nvi.mock(\"@/views/unidade/UnidadesView.vue\", () => ({default: {name: 'UnidadesView'}}));\nvi.mock(\"@/views/unidade/UnidadeDetalheView.vue\", () => ({default: {name: 'UnidadeDetalheView'}}));\nvi.mock(\"@/views/unidade/AtribuicaoTemporariaView.vue\", () => ({default: {name: 'AtribuicaoTemporariaView'}}));"
  },
  {
    "file": "frontend/src/router/__tests__/router.spec.ts",
    "type": "line",
    "line": 46,
    "length": 1,
    "text": "// Setup Store Mock",
    "context": "    beforeEach(() => {\n        vi.clearAllMocks();\n\n        // Setup Store Mock\n        perfilStoreMock = {\n            usuarioCodigo: null,\n            perfisUnidades: [],"
  },
  {
    "file": "frontend/src/router/__tests__/router.spec.ts",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Create fresh router with mock routes first to avoid loading real components",
    "context": "        };\n        (usePerfilStore as any).mockReturnValue(perfilStoreMock);\n\n        // Create fresh router with mock routes first to avoid loading real components\n        router = createRouter({\n            history: createMemoryHistory(),\n            routes: ["
  },
  {
    "file": "frontend/src/router/__tests__/router.spec.ts",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Copying logic from router/index.ts for testing",
    "context": "            ],\n        });\n\n        // Copying logic from router/index.ts for testing\n        router.beforeEach((to: any) => {\n            const perfilStore = usePerfilStore();\n            const isAuthenticated = perfilStore.usuarioCodigo;"
  },
  {
    "file": "frontend/src/router/__tests__/router.spec.ts",
    "type": "line",
    "line": 156,
    "length": 1,
    "text": "// Mapa route uses query param for codProcesso and params for codUnidade",
    "context": "    it('Unidade routes props transformation', () => {\n        const mapaRoute = unidadeRoutes.find(r => r.name === 'Mapa');\n        const propsFn = mapaRoute?.props as (...args: any[]) => any;\n        // Mapa route uses query param for codProcesso and params for codUnidade\n        expect(propsFn({params: {codUnidade: '10'}, query: {codProcesso: '99'}}))\n            .toEqual({codUnidade: 10, codProcesso: 99});\n"
  },
  {
    "file": "frontend/src/router/__tests__/unidade.routes.spec.ts",
    "type": "line",
    "line": 5,
    "length": 1,
    "text": "// Mock views to avoid loading real components which might have dependencies causing timeouts",
    "context": "import unidadeRoutes from \"../unidade.routes\";\nimport type {RouteLocationNormalized} from \"vue-router\";\n\n// Mock views to avoid loading real components which might have dependencies causing timeouts\nvi.mock(\"@/views/unidade/UnidadesView.vue\", () => ({default: {name: 'UnidadesView'}}));\nvi.mock(\"@/views/unidade/UnidadeDetalheView.vue\", () => ({default: {name: 'UnidadeDetalheView'}}));\nvi.mock(\"@/views/processo/MapaCadastroView.vue\", () => ({default: {name: 'MapaCadastroView'}}));"
  },
  {
    "file": "frontend/src/router/__tests__/unidade.routes.spec.ts",
    "type": "line",
    "line": 52,
    "length": 1,
    "text": "// Testar breadcrumb com valor nulo",
    "context": "            expect.fail(\"meta.breadcrumb deve ser uma fun√ß√£o\");\n        }\n\n        // Testar breadcrumb com valor nulo\n        const mockRouteNull = {\n            params: {}\n        } as unknown as RouteLocationNormalized;"
  },
  {
    "file": "frontend/src/services/__tests__/painelService.spec.ts",
    "type": "line",
    "line": 5,
    "length": 6,
    "text": "// Mock do axios no n√≠vel do arquivo ainda √© necess√°rio se a implementa√ß√£o importa diretamente\n// Mas como setupServiceTest mocka o modulo, e aqui mockamos tamb√©m, pode haver conflito?\n// Se test-utils/serviceTestHelpers.ts faz vi.mock(\"@/axios-setup\"), e este arquivo tamb√©m faz...\n// O √∫ltimo a ser executado vence? Ou conflitam?\n// A recomenda√ß√£o √© centralizar. Se eu uso setupServiceTest, deveria confiar nele.\n// Mas ele exporta mockApi.",
    "context": "import {setupServiceTest, testErrorHandling} from \"@/test-utils/serviceTestHelpers\";\nimport * as service from \"../painelService\";\n\n// Mock do axios no n√≠vel do arquivo ainda √© necess√°rio se a implementa√ß√£o importa diretamente\n// Mas como setupServiceTest mocka o modulo, e aqui mockamos tamb√©m, pode haver conflito?\n// Se test-utils/serviceTestHelpers.ts faz vi.mock(\"@/axios-setup\"), e este arquivo tamb√©m faz...\n// O √∫ltimo a ser executado vence? Ou conflitam?\n// A recomenda√ß√£o √© centralizar. Se eu uso setupServiceTest, deveria confiar nele.\n// Mas ele exporta mockApi.\n\nvi.mock(\"@/mappers/processos\", () => ({\n    mapProcessoResumoDtoToFrontend: vi.fn((dto) => ({...dto, mapped: true})),"
  },
  {
    "file": "frontend/src/services/__tests__/painelService.spec.ts",
    "type": "line",
    "line": 20,
    "length": 1,
    "text": "// Usando helper centralizado",
    "context": "}));\n\ndescribe(\"painelService\", () => {\n    // Usando helper centralizado\n    const {mockApi} = setupServiceTest();\n\n    describe(\"listarProcessos\", () => {"
  },
  {
    "file": "frontend/src/services/processoService.ts",
    "type": "line",
    "line": 13,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Mappers Internos (formerly in /mappers/processos.ts)\n// ------------------------------------------------------------------------------------------------",
    "context": "import type {ProcessoDetalheDto, UnidadeParticipanteDto} from \"@/types/dtos\";\nimport apiClient from \"../axios-setup\";\n\n// ------------------------------------------------------------------------------------------------\n// Mappers Internos (formerly in /mappers/processos.ts)\n// ------------------------------------------------------------------------------------------------\n\nexport function mapUnidadeParticipanteDtoToFrontend(\n    dto: UnidadeParticipanteDto,"
  },
  {
    "file": "frontend/src/services/processoService.ts",
    "type": "line",
    "line": 42,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Processo Services\n// ------------------------------------------------------------------------------------------------",
    "context": "    } as Processo;\n}\n\n// ------------------------------------------------------------------------------------------------\n// Processo Services\n// ------------------------------------------------------------------------------------------------\n\nexport async function criarProcesso(\n    request: CriarProcessoRequest,"
  },
  {
    "file": "frontend/src/services/processoService.ts",
    "type": "line",
    "line": 182,
    "length": 1,
    "text": "// CDU-32: Reabrir cadastro",
    "context": "    return response.data;\n}\n\n// CDU-32: Reabrir cadastro\nexport async function reabrirCadastro(\n    codSubprocesso: number,\n    justificativa: string,"
  },
  {
    "file": "frontend/src/services/processoService.ts",
    "type": "line",
    "line": 190,
    "length": 1,
    "text": "// CDU-33: Reabrir revis√£o de cadastro",
    "context": "    await apiClient.post(`/subprocessos/${codSubprocesso}/reabrir-cadastro`, {justificativa});\n}\n\n// CDU-33: Reabrir revis√£o de cadastro\nexport async function reabrirRevisaoCadastro(\n    codSubprocesso: number,\n    justificativa: string,"
  },
  {
    "file": "frontend/src/services/processoService.ts",
    "type": "line",
    "line": 198,
    "length": 1,
    "text": "// CDU-34: Enviar lembrete de prazo",
    "context": "    await apiClient.post(`/subprocessos/${codSubprocesso}/reabrir-revisao-cadastro`, {justificativa});\n}\n\n// CDU-34: Enviar lembrete de prazo\nexport async function enviarLembrete(\n    codProcesso: number,\n    unidadeCodigo: number,"
  },
  {
    "file": "frontend/src/services/subprocessoService.ts",
    "type": "line",
    "line": 21,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Subprocesso Services\n// ------------------------------------------------------------------------------------------------",
    "context": "    codSubprocessoOrigem: number;\n}\n\n// ------------------------------------------------------------------------------------------------\n// Subprocesso Services\n// ------------------------------------------------------------------------------------------------\n\nexport async function importarAtividades(\n    codSubprocessoDestino: number,"
  },
  {
    "file": "frontend/src/services/subprocessoService.ts",
    "type": "line",
    "line": 85,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Mapa / Competencias\n// ------------------------------------------------------------------------------------------------",
    "context": "    return response.data;\n}\n\n// ------------------------------------------------------------------------------------------------\n// Mapa / Competencias\n// ------------------------------------------------------------------------------------------------\n\nexport async function obterMapaVisualizacao(\n    codSubprocesso: number,"
  },
  {
    "file": "frontend/src/services/subprocessoService.ts",
    "type": "line",
    "line": 102,
    "length": 1,
    "text": "// Mapeamento manual para garantir compatibilidade com a interface do frontend",
    "context": "    const response = await apiClient.get<any>(`/subprocessos/${codSubprocesso}/impactos-mapa`);\n    const data = response.data;\n\n    // Mapeamento manual para garantir compatibilidade com a interface do frontend\n    return {\n        temImpactos: data.temImpactos,\n        atividadesInseridas: data.inseridas || [],"
  },
  {
    "file": "frontend/src/services/subprocessoService.ts",
    "type": "line",
    "line": 207,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Acoes em Bloco\n// ------------------------------------------------------------------------------------------------",
    "context": "    return response.data as MapaCompleto;\n}\n\n// ------------------------------------------------------------------------------------------------\n// Acoes em Bloco\n// ------------------------------------------------------------------------------------------------\n\nexport async function aceitarCadastroEmBloco(\n    codSubprocesso: number,"
  },
  {
    "file": "frontend/src/services/subprocessoService.ts",
    "type": "line",
    "line": 262,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Analises / Historico\n// ------------------------------------------------------------------------------------------------",
    "context": "    });\n}\n\n// ------------------------------------------------------------------------------------------------\n// Analises / Historico\n// ------------------------------------------------------------------------------------------------\n\nexport const listarAnalisesCadastro = async (\n    codSubprocesso: number,"
  },
  {
    "file": "frontend/src/services/unidadeService.ts",
    "type": "line",
    "line": 4,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Mappers Internos (formerly in /mappers/unidades.ts)\n// ------------------------------------------------------------------------------------------------",
    "context": "import type {Unidade, UnidadeSnapshot} from \"@/types/tipos\";\nimport {apiGet} from \"@/utils/apiUtils\";\n\n// ------------------------------------------------------------------------------------------------\n// Mappers Internos (formerly in /mappers/unidades.ts)\n// ------------------------------------------------------------------------------------------------\n\nexport function mapUnidadeSnapshot(obj: any): UnidadeSnapshot {\n    return {"
  },
  {
    "file": "frontend/src/services/unidadeService.ts",
    "type": "line",
    "line": 54,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Unidade Services\n// ------------------------------------------------------------------------------------------------",
    "context": "    return arr.map(mapUnidade);\n}\n\n// ------------------------------------------------------------------------------------------------\n// Unidade Services\n// ------------------------------------------------------------------------------------------------\n\nexport async function buscarTodasUnidades() {\n    return apiGet(\"/unidades\");"
  },
  {
    "file": "frontend/src/services/usuarioService.ts",
    "type": "line",
    "line": 5,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Mappers Internos (formerly in /mappers/sgrh.ts & /mappers/usuarios.ts)\n// ------------------------------------------------------------------------------------------------",
    "context": "import type {Usuario} from \"@/types/tipos\";\nimport apiClient from \"../axios-setup\";\n\n// ------------------------------------------------------------------------------------------------\n// Mappers Internos (formerly in /mappers/sgrh.ts & /mappers/usuarios.ts)\n// ------------------------------------------------------------------------------------------------\n\nexport interface AutenticacaoRequest {\n    tituloEleitoral: string;"
  },
  {
    "file": "frontend/src/services/usuarioService.ts",
    "type": "line",
    "line": 28,
    "length": 1,
    "text": "// NOTE: 'Usuario' type is imported from \"@/types/tipos\" to avoid conflict/duplication",
    "context": "    sigla: string;\n}\n\n// NOTE: 'Usuario' type is imported from \"@/types/tipos\" to avoid conflict/duplication\n\nexport interface PerfilUnidade {\n    perfil: Perfil;"
  },
  {
    "file": "frontend/src/services/usuarioService.ts",
    "type": "line",
    "line": 123,
    "length": 3,
    "text": "// ------------------------------------------------------------------------------------------------\n// Usuario Services\n// ------------------------------------------------------------------------------------------------",
    "context": "}\n\n\n// ------------------------------------------------------------------------------------------------\n// Usuario Services\n// ------------------------------------------------------------------------------------------------\n\nexport async function autenticar(\n    request: AutenticacaoRequest,"
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mock dos servi√ßos",
    "context": "import {useAlertasStore} from \"../alertas\";\nimport {normalizeError} from \"@/utils/apiError\";\n\n// Mock dos servi√ßos\nvi.mock(\"@/services/painelService\");\nvi.mock(\"@/services/alertaService\");\n"
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 11,
    "length": 1,
    "text": "// Mock do perfilStore para garantir que a mesma inst√¢ncia seja usada",
    "context": "vi.mock(\"@/services/painelService\");\nvi.mock(\"@/services/alertaService\");\n\n// Mock do perfilStore para garantir que a mesma inst√¢ncia seja usada\nconst mockPerfilStoreValues = {\n    usuarioCodigo: \"123\" as string | null,\n    unidadeSelecionada: \"456\" as string | null,"
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 39,
    "length": 1,
    "text": "// Resetar o estado do mock antes de cada teste",
    "context": "    };\n\n    beforeEach(async () => {\n        // Resetar o estado do mock antes de cada teste\n        mockPerfilStoreValues.usuarioCodigo = \"123\";\n        mockPerfilStoreValues.unidadeSelecionada = \"456\";\n"
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 50,
    "length": 1,
    "text": "// Reset calls",
    "context": "            typeof import(\"@/services/alertaService\")\n        >;\n\n        // Reset calls\n        vi.clearAllMocks();\n    });\n"
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 109,
    "length": 1,
    "text": "// Setup initial state",
    "context": "\n        describe(\"marcarAlertaComoLido\", () => {\n            it(\"deve realizar update otimista e chamar alertaService sem recarregar tudo\", async () => {\n                // Setup initial state\n                context.store.alertas = [structuredClone(mockAlerta)];\n                alertaService.marcarComoLido.mockResolvedValue();\n"
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 116,
    "length": 1,
    "text": "// Check optimistic update: dataHoraLeitura should be set (it was null in mockAlerta)",
    "context": "                const result = await context.store.marcarAlertaComoLido(1);\n\n                expect(result).toBe(true);\n                // Check optimistic update: dataHoraLeitura should be set (it was null in mockAlerta)\n                expect(context.store.alertas[0].dataHoraLeitura).not.toBeNull();\n\n                expect(alertaService.marcarComoLido).toHaveBeenCalledWith(1);"
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 120,
    "length": 1,
    "text": "// Should NOT reload",
    "context": "                expect(context.store.alertas[0].dataHoraLeitura).not.toBeNull();\n\n                expect(alertaService.marcarComoLido).toHaveBeenCalledWith(1);\n                // Should NOT reload\n                expect(painelService.listarAlertas).not.toHaveBeenCalled();\n            });\n"
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 125,
    "length": 1,
    "text": "// Setup initial state",
    "context": "            });\n\n            it(\"deve reverter estado em caso de falha do servi√ßo\", async () => {\n                // Setup initial state\n                context.store.alertas = [structuredClone(mockAlerta)];\n\n                alertaService.marcarComoLido.mockRejectedValue("
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 136,
    "length": 1,
    "text": "// Revert check: dataHoraLeitura should be null again",
    "context": "\n                expect(result).toBe(false);\n                expect(alertaService.marcarComoLido).toHaveBeenCalledWith(1);\n                // Revert check: dataHoraLeitura should be null again\n                expect(context.store.alertas[0].dataHoraLeitura).toBeNull();\n                expect(context.store.lastError).not.toBeNull();\n            });"
  },
  {
    "file": "frontend/src/stores/__tests__/alertas.spec.ts",
    "type": "line",
    "line": 149,
    "length": 1,
    "text": "// Como n√£o estava na lista, nada muda localmente, mas chama o servi√ßo",
    "context": "\n                expect(result).toBe(true);\n                expect(alertaService.marcarComoLido).toHaveBeenCalledWith(999);\n                // Como n√£o estava na lista, nada muda localmente, mas chama o servi√ßo\n            });\n        });\n    });"
  },
  {
    "file": "frontend/src/stores/__tests__/analises.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mock do service",
    "context": "import {useAnalisesStore} from \"../analises\";\nimport {setupStoreTest} from \"@/test-utils/storeTestHelpers\";\n\n// Mock do service\nvi.mock(\"@/services/subprocessoService\", () => ({\n    listarAnalisesCadastro: vi.fn(),\n    listarAnalisesValidacao: vi.fn(),"
  },
  {
    "file": "frontend/src/stores/__tests__/analises.spec.ts",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// Inicializa a store usando o helper centralizado",
    "context": "}));\n\ndescribe(\"useAnalisesStore\", () => {\n    // Inicializa a store usando o helper centralizado\n    const context = setupStoreTest(useAnalisesStore);\n\n    it(\"deve inicializar com listas vazias\", () => {"
  },
  {
    "file": "frontend/src/stores/__tests__/atribuicoes.spec.ts",
    "type": "line",
    "line": 9,
    "length": 1,
    "text": "// Define mock data shape that matches what the service returns",
    "context": "import {normalizeError} from \"@/utils/apiError\";\nimport {logger} from \"@/utils\";\n\n// Define mock data shape that matches what the service returns\nconst serviceMockData = [\n    {\n        codigo: 1,"
  },
  {
    "file": "frontend/src/stores/__tests__/atribuicoes.spec.ts",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// Mock logger",
    "context": "    buscarTodasAtribuicoes: vi.fn(),\n}));\n\n// Mock logger\nvi.mock(\"@/utils\", async (importOriginal) => {\n    const actual = await importOriginal<any>();\n    return {"
  },
  {
    "file": "frontend/src/stores/__tests__/atribuicoes.spec.ts",
    "type": "line",
    "line": 120,
    "length": 1,
    "text": "// Populating store manually for getter tests",
    "context": "    });\n\n    describe(\"getters\", () => {\n        // Populating store manually for getter tests\n        beforeEach(() => {\n            context.store.atribuicoes = [\n                {"
  },
  {
    "file": "frontend/src/stores/__tests__/configuracoes.spec.ts",
    "type": "line",
    "line": 82,
    "length": 1,
    "text": "// Caso padr√£o",
    "context": "    });\n\n    it('getDiasInativacaoProcesso deve retornar valor configurado ou padrao', () => {\n        // Caso padr√£o\n        expect(store.getDiasInativacaoProcesso()).toBe(30);\n\n        // Caso configurado"
  },
  {
    "file": "frontend/src/stores/__tests__/configuracoes.spec.ts",
    "type": "line",
    "line": 85,
    "length": 1,
    "text": "// Caso configurado",
    "context": "        // Caso padr√£o\n        expect(store.getDiasInativacaoProcesso()).toBe(30);\n\n        // Caso configurado\n        store.parametros = [\n            {codigo: 1, chave: 'DIAS_INATIVACAO_PROCESSO', descricao: 'Desc', valor: '45'}\n        ];"
  },
  {
    "file": "frontend/src/stores/__tests__/configuracoes.spec.ts",
    "type": "line",
    "line": 91,
    "length": 1,
    "text": "// Caso inv√°lido",
    "context": "        ];\n        expect(store.getDiasInativacaoProcesso()).toBe(45);\n\n        // Caso inv√°lido\n        store.parametros = [\n            {codigo: 1, chave: 'DIAS_INATIVACAO_PROCESSO', descricao: 'Desc', valor: 'abc'}\n        ];"
  },
  {
    "file": "frontend/src/stores/__tests__/configuracoes.spec.ts",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Caso padr√£o",
    "context": "    });\n\n    it('getDiasAlertaNovo deve retornar valor configurado ou padrao', () => {\n        // Caso padr√£o\n        expect(store.getDiasAlertaNovo()).toBe(3);\n\n        // Caso configurado"
  },
  {
    "file": "frontend/src/stores/__tests__/configuracoes.spec.ts",
    "type": "line",
    "line": 102,
    "length": 1,
    "text": "// Caso configurado",
    "context": "        // Caso padr√£o\n        expect(store.getDiasAlertaNovo()).toBe(3);\n\n        // Caso configurado\n        store.parametros = [\n            {codigo: 1, chave: 'DIAS_ALERTA_NOVO', descricao: 'Desc', valor: '7'}\n        ];"
  },
  {
    "file": "frontend/src/stores/__tests__/configuracoes.spec.ts",
    "type": "line",
    "line": 108,
    "length": 1,
    "text": "// Caso inv√°lido",
    "context": "        ];\n        expect(store.getDiasAlertaNovo()).toBe(7);\n\n        // Caso inv√°lido\n        store.parametros = [\n            {codigo: 1, chave: 'DIAS_ALERTA_NOVO', descricao: 'Desc', valor: 'xyz'}\n        ];"
  },
  {
    "file": "frontend/src/stores/__tests__/diagnosticos.spec.ts",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// expected",
    "context": "        try {\n            await store.buscarDiagnostico(1);\n        } catch {\n            // expected\n        }\n\n        expect(store.diagnostico).toBeNull();"
  },
  {
    "file": "frontend/src/stores/__tests__/diagnosticos.spec.ts",
    "type": "line",
    "line": 116,
    "length": 1,
    "text": "// Adiciona",
    "context": "        const novaOcupacao = {competenciaCodigo: 1, situacao: 'OK'};\n        vi.mocked(diagnosticoService.salvarOcupacao).mockResolvedValue(novaOcupacao as any);\n\n        // Adiciona\n        await store.salvarOcupacao(1, \"tit\", 1, \"OK\");\n        expect(store.ocupacoes).toContainEqual(novaOcupacao);\n"
  },
  {
    "file": "frontend/src/stores/__tests__/diagnosticos.spec.ts",
    "type": "line",
    "line": 120,
    "length": 1,
    "text": "// Atualiza",
    "context": "        await store.salvarOcupacao(1, \"tit\", 1, \"OK\");\n        expect(store.ocupacoes).toContainEqual(novaOcupacao);\n\n        // Atualiza\n        const atualizada = {competenciaCodigo: 1, situacao: 'NOK'};\n        vi.mocked(diagnosticoService.salvarOcupacao).mockResolvedValue(atualizada as any);\n        await store.salvarOcupacao(1, \"tit\", 1, \"NOK\");"
  },
  {
    "file": "frontend/src/stores/__tests__/feedback.spec.ts",
    "type": "line",
    "line": 45,
    "length": 1,
    "text": "// Chamada antes do init",
    "context": "    });\n\n    it(\"deve processar fila ao inicializar\", () => {\n        // Chamada antes do init\n        store.show(\"Fila 1\", \"Msg 1\");\n        store.show(\"Fila 2\", \"Msg 2\");\n"
  },
  {
    "file": "frontend/src/stores/__tests__/feedback.spec.ts",
    "type": "line",
    "line": 51,
    "length": 1,
    "text": "// Inicializa",
    "context": "\n        expect(mockToast.create).not.toHaveBeenCalled();\n\n        // Inicializa\n        store.init(mockToast);\n\n        // Only the first queued message should be created due to debounce"
  },
  {
    "file": "frontend/src/stores/__tests__/feedback.spec.ts",
    "type": "line",
    "line": 54,
    "length": 1,
    "text": "// Only the first queued message should be created due to debounce",
    "context": "        // Inicializa\n        store.init(mockToast);\n\n        // Only the first queued message should be created due to debounce\n        expect(mockToast.create).toHaveBeenCalledTimes(1);\n\n        // Verifica argumentos da primeira chamada"
  },
  {
    "file": "frontend/src/stores/__tests__/feedback.spec.ts",
    "type": "line",
    "line": 57,
    "length": 1,
    "text": "// Verifica argumentos da primeira chamada",
    "context": "        // Only the first queued message should be created due to debounce\n        expect(mockToast.create).toHaveBeenCalledTimes(1);\n\n        // Verifica argumentos da primeira chamada\n        expect(mockToast.create).toHaveBeenNthCalledWith(1, expect.objectContaining({\n            props: expect.objectContaining({\n                title: \"Fila 1\""
  },
  {
    "file": "frontend/src/stores/__tests__/feedback.spec.ts",
    "type": "line",
    "line": 84,
    "length": 1,
    "text": "// Primeiro toast",
    "context": "    it(\"deve ignorar chamadas subsequentes enquanto um toast est√° ativo (debounce)\", () => {\n        store.init(mockToast);\n\n        // Primeiro toast\n        store.show(\"Toast 1\", \"Mensagem 1\");\n\n        // Segundo toast (should be ignored due to debounce)"
  },
  {
    "file": "frontend/src/stores/__tests__/feedback.spec.ts",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// Segundo toast (should be ignored due to debounce)",
    "context": "        // Primeiro toast\n        store.show(\"Toast 1\", \"Mensagem 1\");\n\n        // Segundo toast (should be ignored due to debounce)\n        store.show(\"Toast 2\", \"Mensagem 2\");\n\n        // Only the first toast should be created"
  },
  {
    "file": "frontend/src/stores/__tests__/feedback.spec.ts",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// Only the first toast should be created",
    "context": "        // Segundo toast (should be ignored due to debounce)\n        store.show(\"Toast 2\", \"Mensagem 2\");\n\n        // Only the first toast should be created\n        expect(mockToast.create).toHaveBeenCalledTimes(1);\n        expect(mockToast.create).toHaveBeenCalledWith(\n            expect.objectContaining({"
  },
  {
    "file": "frontend/src/stores/__tests__/processos.spec.ts",
    "type": "line",
    "line": 51,
    "length": 1,
    "text": "// Ignore expected error",
    "context": "        try {\n            await context.store.buscarProcessosPainel(\"perfil\", 1, 0, 10);\n        } catch {\n            // Ignore expected error\n        }\n\n        expect(context.store.lastError).toEqual(normalizeError(MOCK_ERROR));"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 30,
    "length": 1,
    "text": "// Mock Dependencies",
    "context": "import {alterarDataLimiteSubprocesso, reabrirCadastro, reabrirRevisaoCadastro,} from '@/services/processoService';\nimport logger from '@/utils/logger';\n\n// Mock Dependencies\nvi.mock('@/services/subprocessoService', () => ({\n    buscarContextoEdicao: vi.fn(),\n    buscarSubprocessoDetalhe: vi.fn(),"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// Mock Stores",
    "context": "    homologarRevisaoCadastro: vi.fn(),\n}));\n\n// Mock Stores\nvi.mock('../processos', () => ({\n    useProcessosStore: vi.fn(),\n}));"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 75,
    "length": 1,
    "text": "// Mock API Client",
    "context": "    useFeedbackStore: vi.fn(),\n}));\n\n// Mock API Client\nconst {mockApiClient} = vi.hoisted(() => ({\n    mockApiClient: {\n        post: vi.fn().mockResolvedValue({data: {}}),"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 91,
    "length": 1,
    "text": "// Mocks dos stores retornados",
    "context": "describe('Subprocessos Store', () => {\n    let store: ReturnType<typeof useSubprocessosStore>;\n\n    // Mocks dos stores retornados\n    const mockProcessosStore = {\n        buscarProcessoDetalhe: vi.fn(),\n        processoDetalhe: {codigo: 999},"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 118,
    "length": 1,
    "text": "// Reset mocks",
    "context": "    beforeEach(() => {\n        setActivePinia(createPinia());\n\n        // Reset mocks\n        vi.clearAllMocks();\n\n        // Configura retorno dos useStore mocks"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 121,
    "length": 1,
    "text": "// Configura retorno dos useStore mocks",
    "context": "        // Reset mocks\n        vi.clearAllMocks();\n\n        // Configura retorno dos useStore mocks\n        (useProcessosStore as any).mockReturnValue(mockProcessosStore);\n        (usePerfilStore as any).mockReturnValue(mockPerfilStore);\n        (useUnidadesStore as any).mockReturnValue(mockUnidadesStore);"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 242,
    "length": 1,
    "text": "// Verifica se os dados foram passados corretamente para os outros stores",
    "context": "\n            expect(store.subprocessoDetalhe).toMatchObject(mockData.detalhes);\n            expect(mockUnidadesStore.unidade).toEqual(mockData.unidade);\n            // Verifica se os dados foram passados corretamente para os outros stores\n            expect(mockMapasStore.mapaCompleto).toEqual(mockData.mapa);\n            expect(mockAtividadesStore.setAtividadesParaSubprocesso).toHaveBeenCalledWith(\n                1,"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 266,
    "length": 1,
    "text": "// --- Disponibilizar Cadastro ---",
    "context": "    });\n\n    describe('A√ß√µes de Workflow', () => {\n        // --- Disponibilizar Cadastro ---\n        it('disponibilizarCadastro deve executar com sucesso e feedback', async () => {\n            (disponibilizarCadastro as any).mockResolvedValue({});\n            const result = await store.disponibilizarCadastro(1);"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 282,
    "length": 1,
    "text": "// --- Disponibilizar Revis√£o ---",
    "context": "            expect(store.lastError).toBeTruthy();\n        });\n\n        // --- Disponibilizar Revis√£o ---\n        it('disponibilizarRevisaoCadastro deve executar com sucesso', async () => {\n            (disponibilizarRevisaoCadastro as any).mockResolvedValue({});\n            const result = await store.disponibilizarRevisaoCadastro(1);"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 298,
    "length": 1,
    "text": "// --- Devolver Cadastro ---",
    "context": "            expect(store.lastError).toBeTruthy();\n        });\n\n        // --- Devolver Cadastro ---\n        it('devolverCadastro deve executar com sucesso', async () => {\n            (devolverCadastro as any).mockResolvedValue({});\n            const result = await store.devolverCadastro(1, {observacoes: 'Erro'});"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 314,
    "length": 1,
    "text": "// --- Aceitar Cadastro ---",
    "context": "            expect(store.lastError).toBeTruthy();\n        });\n\n        // --- Aceitar Cadastro ---\n        it('aceitarCadastro deve executar com sucesso', async () => {\n            (aceitarCadastro as any).mockResolvedValue({});\n            const result = await store.aceitarCadastro(1, {aprovado: true} as any);"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 328,
    "length": 1,
    "text": "// --- Homologar Cadastro ---",
    "context": "            expect(result).toBe(false);\n        });\n\n        // --- Homologar Cadastro ---\n        it('homologarCadastro deve recarregar detalhes ap√≥s sucesso', async () => {\n            mockPerfilStore.perfilSelecionado = 'ADMIN' as any;\n            mockPerfilStore.unidadeAtual = null;"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 348,
    "length": 1,
    "text": "// --- Devolver Revis√£o ---",
    "context": "            expect(store.lastError).toBeTruthy();\n        });\n\n        // --- Devolver Revis√£o ---\n        it('devolverRevisaoCadastro deve executar com sucesso', async () => {\n            (devolverRevisaoCadastro as any).mockResolvedValue({});\n            const result = await store.devolverRevisaoCadastro(1, {observacoes: 'Erro'});"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 362,
    "length": 1,
    "text": "// --- Aceitar Revis√£o ---",
    "context": "            expect(result).toBe(false);\n        });\n\n        // --- Aceitar Revis√£o ---\n        it('aceitarRevisaoCadastro deve executar com sucesso', async () => {\n            (aceitarRevisaoCadastro as any).mockResolvedValue({});\n            const result = await store.aceitarRevisaoCadastro(1, {aprovado: true} as any);"
  },
  {
    "file": "frontend/src/stores/__tests__/subprocessos.spec.ts",
    "type": "line",
    "line": 376,
    "length": 1,
    "text": "// --- Homologar Revis√£o ---",
    "context": "            expect(result).toBe(false);\n        });\n\n        // --- Homologar Revis√£o ---\n        it('homologarRevisaoCadastro deve executar com sucesso e recarregar', async () => {\n            mockPerfilStore.perfilSelecionado = 'ADMIN' as any;\n            mockPerfilStore.unidadeAtual = null;"
  },
  {
    "file": "frontend/src/stores/__tests__/usuarios.spec.ts",
    "type": "line",
    "line": 36,
    "length": 1,
    "text": "// Inicializa com dados simulados para testes de getters",
    "context": "    const context = setupStoreTest(useUsuariosStore);\n\n    beforeEach(() => {\n        // Inicializa com dados simulados para testes de getters\n        context.store.usuarios = mockUsuarios;\n    });\n"
  },
  {
    "file": "frontend/src/stores/alertas.ts",
    "type": "line",
    "line": 37,
    "length": 1,
    "text": "// 1. Snapshot state for revert",
    "context": "    }\n\n    async function marcarAlertaComoLido(idAlerta: number): Promise<boolean> {\n        // 1. Snapshot state for revert\n        const originalAlertas = JSON.parse(JSON.stringify(alertas.value));\n\n        // 2. Optimistic Update (UI Otimista)"
  },
  {
    "file": "frontend/src/stores/alertas.ts",
    "type": "line",
    "line": 40,
    "length": 1,
    "text": "// 2. Optimistic Update (UI Otimista)",
    "context": "        // 1. Snapshot state for revert\n        const originalAlertas = JSON.parse(JSON.stringify(alertas.value));\n\n        // 2. Optimistic Update (UI Otimista)\n        const index = alertas.value.findIndex(a => a.codigo === idAlerta);\n        if (index !== -1) {\n            // Update local state immediately"
  },
  {
    "file": "frontend/src/stores/alertas.ts",
    "type": "line",
    "line": 43,
    "length": 1,
    "text": "// Update local state immediately",
    "context": "        // 2. Optimistic Update (UI Otimista)\n        const index = alertas.value.findIndex(a => a.codigo === idAlerta);\n        if (index !== -1) {\n            // Update local state immediately\n            alertas.value[index].dataHoraLeitura = new Date().toISOString();\n        }\n"
  },
  {
    "file": "frontend/src/stores/alertas.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// 3. Call API",
    "context": "        }\n\n        return withErrorHandling(async () => {\n            // 3. Call API\n            await alertaService.marcarComoLido(idAlerta);\n\n            // 4. Success: We do NOT re-fetch to preserve current pagination and provide instant feedback."
  },
  {
    "file": "frontend/src/stores/alertas.ts",
    "type": "line",
    "line": 51,
    "length": 2,
    "text": "// 4. Success: We do NOT re-fetch to preserve current pagination and provide instant feedback.\n// If strict consistency is needed, we could fetch in background, but it might disrupt UX if list shifts.",
    "context": "            // 3. Call API\n            await alertaService.marcarComoLido(idAlerta);\n\n            // 4. Success: We do NOT re-fetch to preserve current pagination and provide instant feedback.\n            // If strict consistency is needed, we could fetch in background, but it might disrupt UX if list shifts.\n            return true;\n        }).catch(() => {\n            // 5. Error: Revert state"
  },
  {
    "file": "frontend/src/stores/alertas.ts",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// 5. Error: Revert state",
    "context": "            // If strict consistency is needed, we could fetch in background, but it might disrupt UX if list shifts.\n            return true;\n        }).catch(() => {\n            // 5. Error: Revert state\n            alertas.value = originalAlertas;\n            return false;\n        });"
  },
  {
    "file": "frontend/src/stores/analises.ts",
    "type": "line",
    "line": 51,
    "length": 2,
    "text": "// Simplifica√ß√£o: Retorna a concatena√ß√£o das listas carregadas.\n// Assume-se que o contexto do subprocesso √© mantido pelo componente que chama buscarAnalisesCadastro/Validacao.",
    "context": "    }\n\n    function obterAnalisesPorSubprocesso(): (AnaliseCadastro | AnaliseValidacao)[] {\n        // Simplifica√ß√£o: Retorna a concatena√ß√£o das listas carregadas.\n        // Assume-se que o contexto do subprocesso √© mantido pelo componente que chama buscarAnalisesCadastro/Validacao.\n        return [...analisesCadastro.value, ...analisesValidacao.value];\n    }\n"
  },
  {
    "file": "frontend/src/stores/atividades.ts",
    "type": "line",
    "line": 28,
    "length": 1,
    "text": "// Atualizar lista de atividades no cache local",
    "context": "    }\n\n    async function atualizarDadosLocais(codSubprocesso: number, response: AtividadeOperacaoResponse) {\n        // Atualizar lista de atividades no cache local\n        if (response.atividadesAtualizadas) {\n            const atividades = response.atividadesAtualizadas;\n            atividadesPorSubprocesso.value.set(codSubprocesso, atividades);"
  },
  {
    "file": "frontend/src/stores/atividades.ts",
    "type": "line",
    "line": 34,
    "length": 1,
    "text": "// Atualizar status e permiss√µes do subprocesso",
    "context": "            atividadesPorSubprocesso.value.set(codSubprocesso, atividades);\n        }\n\n        // Atualizar status e permiss√µes do subprocesso\n        const subprocessosStore = useSubprocessosStore();\n        subprocessosStore.atualizarStatusLocal({\n            ...response.subprocesso,"
  },
  {
    "file": "frontend/src/stores/configuracoes.ts",
    "type": "line",
    "line": 18,
    "length": 1,
    "text": "// Map para lookup O(1) de chave -> parametro",
    "context": "    const loading = useSingleLoading();\n    const error = ref<string | null>(null);\n\n    // Map para lookup O(1) de chave -> parametro\n    const parametrosMap = computed(() =>\n        new Map(parametros.value.map(p => [p.chave, p]))\n    );"
  },
  {
    "file": "frontend/src/stores/configuracoes.ts",
    "type": "line",
    "line": 54,
    "length": 1,
    "text": "// Helpers para compatibilidade e uso f√°cil",
    "context": "        return param ? param.valor : valorPadrao;\n    }\n\n    // Helpers para compatibilidade e uso f√°cil\n    function getDiasInativacaoProcesso(): number {\n        const val = getValor(\"DIAS_INATIVACAO_PROCESSO\", \"30\");\n        return parseInt(val, 10) || 30;"
  },
  {
    "file": "frontend/src/stores/feedback.ts",
    "type": "line",
    "line": 17,
    "length": 1,
    "text": "// Refer√™ncia interna ao controller do Toast",
    "context": "}\n\nexport const useFeedbackStore = defineStore('feedback', () => {\n    // Refer√™ncia interna ao controller do Toast\n    const toast = ref<ToastController | null>(null);\n    const messageQueue = ref<any[]>([]);\n    // Flag para evitar m√∫ltiplos toasts simult√¢neos (debounce)"
  },
  {
    "file": "frontend/src/stores/feedback.ts",
    "type": "line",
    "line": 20,
    "length": 1,
    "text": "// Flag para evitar m√∫ltiplos toasts simult√¢neos (debounce)",
    "context": "    // Refer√™ncia interna ao controller do Toast\n    const toast = ref<ToastController | null>(null);\n    const messageQueue = ref<any[]>([]);\n    // Flag para evitar m√∫ltiplos toasts simult√¢neos (debounce)\n    const isProcessing = ref(false);\n\n    function init(toastInstance: any) {"
  },
  {
    "file": "frontend/src/stores/feedback.ts",
    "type": "line",
    "line": 25,
    "length": 1,
    "text": "// Processa mensagens que chegaram antes da inicializa√ß√£o",
    "context": "\n    function init(toastInstance: any) {\n        toast.value = toastInstance;\n        // Processa mensagens que chegaram antes da inicializa√ß√£o\n        if (messageQueue.value.length > 0) {\n            const args = messageQueue.value.shift();\n            show(args.title, args.message, args.variant, args.autoHideDelay);"
  },
  {
    "file": "frontend/src/stores/feedback.ts",
    "type": "line",
    "line": 29,
    "length": 1,
    "text": "// Limpa o resto da fila se o debounce for estrito como nos testes",
    "context": "        if (messageQueue.value.length > 0) {\n            const args = messageQueue.value.shift();\n            show(args.title, args.message, args.variant, args.autoHideDelay);\n            // Limpa o resto da fila se o debounce for estrito como nos testes\n            messageQueue.value = [];\n        }\n    }"
  },
  {
    "file": "frontend/src/stores/feedback.ts",
    "type": "line",
    "line": 49,
    "length": 1,
    "text": "// Libera o lock ap√≥s um curto per√≠odo",
    "context": "                    noProgress: true\n                }\n            });\n            // Libera o lock ap√≥s um curto per√≠odo\n            setTimeout(() => {\n                isProcessing.value = false;\n            }, 100);"
  },
  {
    "file": "frontend/src/stores/feedback.ts",
    "type": "line",
    "line": 54,
    "length": 1,
    "text": "// Se o toast ainda n√£o foi injetado (ex: erro na inicializa√ß√£o do app), enfileira",
    "context": "                isProcessing.value = false;\n            }, 100);\n        } else {\n            // Se o toast ainda n√£o foi injetado (ex: erro na inicializa√ß√£o do app), enfileira\n            messageQueue.value.push({title, message, variant, autoHideDelay});\n        }\n    }"
  },
  {
    "file": "frontend/src/stores/feedback.ts",
    "type": "line",
    "line": 66,
    "length": 1,
    "text": "// Mantido para compatibilidade",
    "context": "    };\n});\n\n// Mantido para compatibilidade\nfunction close() {\n    // No-op\n}"
  },
  {
    "file": "frontend/src/stores/feedback.ts",
    "type": "line",
    "line": 68,
    "length": 1,
    "text": "// No-op",
    "context": "\n// Mantido para compatibilidade\nfunction close() {\n    // No-op\n}\n\n// Alias for compatibility if needed, or consumers should use useFeedbackStore"
  },
  {
    "file": "frontend/src/stores/feedback.ts",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Alias for compatibility if needed, or consumers should use useFeedbackStore",
    "context": "    // No-op\n}\n\n// Alias for compatibility if needed, or consumers should use useFeedbackStore\nexport const useNotificacoesStore = useFeedbackStore;\n"
  },
  {
    "file": "frontend/src/stores/mapas.ts",
    "type": "line",
    "line": 113,
    "length": 1,
    "text": "// N√£o relan√ßar erro para n√£o quebrar a UI, apenas logar/mostrar msg",
    "context": "            }\n        } catch (e: any) {\n            erro.value = e.message || \"Erro ao verificar impactos.\";\n            // N√£o relan√ßar erro para n√£o quebrar a UI, apenas logar/mostrar msg\n        } finally {\n            carregando.value = false;\n        }"
  },
  {
    "file": "frontend/src/stores/mapas.ts",
    "type": "line",
    "line": 199,
    "length": 1,
    "text": "// N√£o gerencia estado de carregando/erro global aqui para ser mais leve",
    "context": "    }\n\n    async function temMapaVigente(codigoUnidade: number): Promise<boolean> {\n        // N√£o gerencia estado de carregando/erro global aqui para ser mais leve\n        try {\n            return await verificarMapaVigente(codigoUnidade);\n        } catch {"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 10,
    "length": 1,
    "text": "// Estados sincronizados com localStorage usando composable",
    "context": "import {useLocalStorage} from \"@/composables/useLocalStorage\";\n\nexport const usePerfilStore = defineStore(\"perfil\", () => {\n    // Estados sincronizados com localStorage usando composable\n    const usuarioCodigo = useLocalStorage<string | null>(\"usuarioCodigo\", null);\n    const perfilSelecionado = useLocalStorage<Perfil | null>(\"perfilSelecionado\", null);\n    const unidadeSelecionada = useLocalStorage<number | null>(\"unidadeSelecionada\", null);"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 18,
    "length": 1,
    "text": "// Estados n√£o persistidos",
    "context": "    const usuarioNome = useLocalStorage<string | null>(\"usuarioNome\", null);\n    const perfis = useLocalStorage<Perfil[]>(\"perfis\", []);\n\n    // Estados n√£o persistidos\n    const perfisUnidades = ref<PerfilUnidade[]>([]);\n    const {lastError, clearError, withErrorHandling} = useErrorHandler();\n"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 25,
    "length": 1,
    "text": "// Map para lookup O(1) de perfil -> unidade",
    "context": "    const isAdmin = computed(() => perfis.value.includes(\"ADMIN\" as Perfil));\n    const isGestor = computed(() => perfis.value.includes(\"GESTOR\" as Perfil));\n\n    // Map para lookup O(1) de perfil -> unidade\n    const perfilUnidadeMap = computed(() =>\n        new Map(perfisUnidades.value.map(pu => [pu.perfil, pu]))\n    );"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 40,
    "length": 1,
    "text": "// localStorage.setItem removido - sincroniza√ß√£o autom√°tica",
    "context": "\n    function definirUsuarioCodigo(novoId: string) {\n        usuarioCodigo.value = novoId;\n        // localStorage.setItem removido - sincroniza√ß√£o autom√°tica\n    }\n\n    function definirPerfilUnidade(perfil: Perfil, unidadeCodigo: number, unidadeSigla: string, nome?: string) {"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 47,
    "length": 1,
    "text": "// localStorage.setItem removido - sincroniza√ß√£o autom√°tica",
    "context": "        perfilSelecionado.value = perfil;\n        unidadeSelecionada.value = unidadeCodigo;\n        unidadeSelecionadaSigla.value = unidadeSigla;\n        // localStorage.setItem removido - sincroniza√ß√£o autom√°tica\n        if (nome) {\n            usuarioNome.value = nome;\n            // localStorage.setItem removido - sincroniza√ß√£o autom√°tica"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 50,
    "length": 1,
    "text": "// localStorage.setItem removido - sincroniza√ß√£o autom√°tica",
    "context": "        // localStorage.setItem removido - sincroniza√ß√£o autom√°tica\n        if (nome) {\n            usuarioNome.value = nome;\n            // localStorage.setItem removido - sincroniza√ß√£o autom√°tica\n        }\n    }\n"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 60,
    "length": 1,
    "text": "// localStorage.setItem removido - sincroniza√ß√£o autom√°tica",
    "context": "\n    function definirPerfis(novosPerfis: Perfil[]) {\n        perfis.value = novosPerfis;\n        // localStorage.setItem removido - sincroniza√ß√£o autom√°tica\n    }\n\n    async function loginCompleto(tituloEleitoral: string, senha: string) {"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// Se houver apenas uma op√ß√£o, seleciona automaticamente",
    "context": "                ];\n                definirPerfis(listaPerfis);\n\n                // Se houver apenas uma op√ß√£o, seleciona automaticamente\n                if (responsePerfisUnidades.length === 1) {\n                    const perfilUnidadeSelecionado = responsePerfisUnidades[0];\n                    const loginResponse = await usuarioService.entrar({"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 131,
    "length": 1,
    "text": "// Limpa estados - remo√ß√£o do localStorage √© autom√°tica",
    "context": "    }\n\n    function logout() {\n        // Limpa estados - remo√ß√£o do localStorage √© autom√°tica\n        usuarioCodigo.value = null;\n        perfilSelecionado.value = null;\n        unidadeSelecionada.value = null;"
  },
  {
    "file": "frontend/src/stores/perfil.ts",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// Apenas jwtToken precisa de remo√ß√£o manual (n√£o √© gerenciado pelo composable)",
    "context": "        perfisUnidades.value = [];\n        perfis.value = [];\n\n        // Apenas jwtToken precisa de remo√ß√£o manual (n√£o √© gerenciado pelo composable)\n        localStorage.removeItem(\"jwtToken\");\n    }\n"
  },
  {
    "file": "frontend/src/stores/usuarios.ts",
    "type": "line",
    "line": 18,
    "length": 1,
    "text": "// Maps para lookup O(1)",
    "context": "    const error = ref<string | null>(null);\n    const {lastError, clearError: clearNormalizedError, withErrorHandling} = useErrorHandler();\n\n    // Maps para lookup O(1)\n    const usuariosPorTituloMap = computed(() =>\n        new Map(usuarios.value.map(u => [u.tituloEleitoral, u]))\n    );"
  },
  {
    "file": "frontend/src/test-utils/__tests__/helpers.spec.ts",
    "type": "line",
    "line": 15,
    "length": 1,
    "text": "// Mock services to avoid side effects/heavy init when loading the store",
    "context": "    selectFirstCheckbox,\n} from \"../uiHelpers\";\n\n// Mock services to avoid side effects/heavy init when loading the store\nvi.mock(\"@/services/atividadeService\", () => ({}));\nvi.mock(\"@/services/subprocessoService\", () => ({}));\nvi.mock(\"@/stores/subprocessos\", () => ({useSubprocessosStore: vi.fn()}));"
  },
  {
    "file": "frontend/src/test-utils/__tests__/helpers.spec.ts",
    "type": "line",
    "line": 35,
    "length": 1,
    "text": "// Since we populate with ID 1",
    "context": "    it(\"prepareFreshAtividadesStore deve retornar uma store com dados\", async () => {\n        const store = await prepareFreshAtividadesStore();\n        expect(store).toBeDefined();\n        // Since we populate with ID 1\n        expect(store.atividadesPorSubprocesso.get(1)).toBeDefined();\n        expect(store.atividadesPorSubprocesso.get(1).length).toBeGreaterThan(0);\n    });"
  },
  {
    "file": "frontend/src/test-utils/helpers.ts",
    "type": "line",
    "line": 48,
    "length": 1,
    "text": "// Populate the Map with a dummy subprocess ID (e.g., 1)",
    "context": "    const store = useAtividadesStoreActual();\n    const initialAtividades = getMockAtividadesData();\n\n    // Populate the Map with a dummy subprocess ID (e.g., 1)\n    const mockAtividades = initialAtividades.map((a: Atividade) => ({\n        ...a,\n        conhecimentos: a.conhecimentos.map((c: any) => ({...c})),"
  },
  {
    "file": "frontend/src/test-utils/serviceTestHelpers.ts",
    "type": "line",
    "line": 4,
    "length": 1,
    "text": "// Mock padr√£o do axios",
    "context": "import {afterEach, beforeEach, expect, it, vi} from \"vitest\";\nimport apiClient from \"@/axios-setup\";\n\n// Mock padr√£o do axios\nvi.mock(\"@/axios-setup\", () => ({\n    default: {\n        get: vi.fn(),"
  },
  {
    "file": "frontend/src/test-utils/serviceTestHelpers.ts",
    "type": "line",
    "line": 25,
    "length": 1,
    "text": "// Opcional: restaurar mocks se necess√°rio, mas geralmente clearAllMocks √© suficiente com vi.fn",
    "context": "    });\n\n    afterEach(() => {\n        // Opcional: restaurar mocks se necess√°rio, mas geralmente clearAllMocks √© suficiente com vi.fn\n        vi.restoreAllMocks();\n    });\n"
  },
  {
    "file": "frontend/src/test-utils/storeTestHelpers.ts",
    "type": "line",
    "line": 44,
    "length": 1,
    "text": "// Se errorType for passado, verifica o tipo, sen√£o verifica apenas se lan√ßa",
    "context": "    errorType?: Error | any\n) {\n    it(\"deve lan√ßar um erro em caso de falha\", async () => {\n        // Se errorType for passado, verifica o tipo, sen√£o verifica apenas se lan√ßa\n        if (errorType) {\n            expect(action()).rejects.toThrow(errorType);\n        } else {"
  },
  {
    "file": "frontend/src/test-utils/uiHelpers.ts",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// 1 disabled + labels.length",
    "context": "    expect(unidadeSelect.attributes(\"disabled\")).toBeUndefined();\n\n    const options = wrapper.findAll(\"select#unidade-select option\");\n    // 1 disabled + labels.length\n    expect(options).toHaveLength(1 + labels.length);\n    for (let i = 0; i < labels.length; i++) {\n        expect(options[i + 1].text()).toBe(labels[i]);"
  },
  {
    "file": "frontend/src/test-utils/uiHelpers.ts",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Home + expectedLabels",
    "context": "    const wrapper = await mountFn();\n    const breadcrumbItems = wrapper.findAll('[data-testid=\"breadcrumb-item\"]');\n\n    // Home + expectedLabels\n    expect(breadcrumbItems.length).toBe(1 + expectedLabels.length);\n    for (let i = 0; i < expectedLabels.length; i++) {\n        expect(breadcrumbItems[i + 1].text()).toBe(expectedLabels[i]);"
  },
  {
    "file": "frontend/src/types/dtos.ts",
    "type": "line",
    "line": 80,
    "length": 1,
    "text": "// DTOs para SGRH (autentica√ß√£o e login)",
    "context": "    [key: string]: any; // Para campos adicionais do spread\n}\n\n// DTOs para SGRH (autentica√ß√£o e login)\nexport interface UnidadeDto {\n    codigo: number;\n    nome: string;"
  },
  {
    "file": "frontend/src/types/tipos.ts",
    "type": "line",
    "line": 1,
    "length": 1,
    "text": "// noinspection JSUnusedGlobalSymbols",
    "context": "// noinspection JSUnusedGlobalSymbols\n\n/**\n * Tipos de situa√ß√£o de um processo."
  },
  {
    "file": "frontend/src/types/tipos.ts",
    "type": "line",
    "line": 68,
    "length": 1,
    "text": "// Situa√ß√µes de subprocessos de Mapeamento",
    "context": "export enum SituacaoSubprocesso {\n    NAO_INICIADO = \"NAO_INICIADO\",\n\n    // Situa√ß√µes de subprocessos de Mapeamento\n    MAPEAMENTO_CADASTRO_EM_ANDAMENTO = \"MAPEAMENTO_CADASTRO_EM_ANDAMENTO\",\n    MAPEAMENTO_CADASTRO_DISPONIBILIZADO = \"MAPEAMENTO_CADASTRO_DISPONIBILIZADO\",\n    MAPEAMENTO_CADASTRO_HOMOLOGADO = \"MAPEAMENTO_CADASTRO_HOMOLOGADO\","
  },
  {
    "file": "frontend/src/types/tipos.ts",
    "type": "line",
    "line": 78,
    "length": 1,
    "text": "// Situa√ß√µes de subprocessos de Revis√£o",
    "context": "    MAPEAMENTO_MAPA_VALIDADO = \"MAPEAMENTO_MAPA_VALIDADO\",\n    MAPEAMENTO_MAPA_HOMOLOGADO = \"MAPEAMENTO_MAPA_HOMOLOGADO\",\n\n    // Situa√ß√µes de subprocessos de Revis√£o\n    REVISAO_CADASTRO_EM_ANDAMENTO = \"REVISAO_CADASTRO_EM_ANDAMENTO\",\n    REVISAO_CADASTRO_DISPONIBILIZADA = \"REVISAO_CADASTRO_DISPONIBILIZADA\",\n    REVISAO_CADASTRO_HOMOLOGADA = \"REVISAO_CADASTRO_HOMOLOGADA\","
  },
  {
    "file": "frontend/src/types/tipos.ts",
    "type": "line",
    "line": 112,
    "length": 1,
    "text": "// Mantendo para retrocompatibilidade se necess√°rio, mas marcando como depreciado se poss√≠vel",
    "context": "    atividadesIds: number[];\n}\n\n// Mantendo para retrocompatibilidade se necess√°rio, mas marcando como depreciado se poss√≠vel\nexport type CompetenciaCompleta = Competencia;\nexport type CompetenciaVisualizacao = Competencia;\nexport type AtividadeVisualizacao = Atividade;"
  },
  {
    "file": "frontend/src/types/tipos.ts",
    "type": "line",
    "line": 308,
    "length": 1,
    "text": "// Interfaces de visualiza√ß√£o removidas (consolidadas no in√≠cio do arquivo)",
    "context": "    permissoes: PermissoesSubprocesso;\n}\n\n// Interfaces de visualiza√ß√£o removidas (consolidadas no in√≠cio do arquivo)\n\nexport interface MapaVisualizacao {\n    codigo: number;"
  },
  {
    "file": "frontend/src/utils/__tests__/csv.spec.ts",
    "type": "line",
    "line": 20,
    "length": 1,
    "text": "// Expected: quotes inside value should be doubled: \"Hello \"\"World\"\"\"",
    "context": "            {id: 1, note: 'Hello \"World\"'}\n        ];\n        const csv = gerarCSV(data);\n        // Expected: quotes inside value should be doubled: \"Hello \"\"World\"\"\"\n        const expected = '\"id\",\"note\"\\n\"1\",\"Hello \"\"World\"\"\"';\n        expect(csv).toBe(expected);\n    });"
  },
  {
    "file": "frontend/src/utils/__tests__/csv.spec.ts",
    "type": "line",
    "line": 36,
    "length": 2,
    "text": "// First line is header\n// Second line: =cmd... should be prefixed with ' and wrapped in quotes",
    "context": "        const csv = gerarCSV(data);\n\n        const lines = csv.split('\\n');\n        // First line is header\n        // Second line: =cmd... should be prefixed with ' and wrapped in quotes\n        expect(lines[1]).toContain(`\"'=cmd|/C calc!A0\"`);\n        expect(lines[2]).toContain(`\"'+1+1\"`);\n        expect(lines[3]).toContain(`\"'-1+1\"`);"
  },
  {
    "file": "frontend/src/utils/__tests__/index.spec.ts",
    "type": "line",
    "line": 186,
    "length": 2,
    "text": "// Cria uma data que seria inv√°lida (como 30 de fevereiro)\n// JavaScript corrige automaticamente isso para 1¬∫ de mar√ßo, ent√£o este teste valida o comportamento corrigido",
    "context": "        });\n\n        it(\"deve lidar com objetos Date com tempo v√°lido, mas componentes inv√°lidos\", () => {\n            // Cria uma data que seria inv√°lida (como 30 de fevereiro)\n            // JavaScript corrige automaticamente isso para 1¬∫ de mar√ßo, ent√£o este teste valida o comportamento corrigido\n            const edgeCaseDate = new Date(2024, 1, 30); // 30 de fevereiro se torna 1¬∫ de mar√ßo\n            expect(ensureValidDate(edgeCaseDate)).toBeInstanceOf(Date);\n            expect(ensureValidDate(edgeCaseDate)?.getMonth()).toBe(2); // Mar√ßo"
  },
  {
    "file": "frontend/src/utils/__tests__/index.spec.ts",
    "type": "line",
    "line": 196,
    "length": 1,
    "text": "// Testa com uma string de data inv√°lida que far√° com que parseDate falhe",
    "context": "    });\n    describe(\"tratamento de erro em formatDateBR\", () => {\n        it('deve retornar \"Data inv√°lida\" para strings de data inv√°lidas', () => {\n            // Testa com uma string de data inv√°lida que far√° com que parseDate falhe\n            const result = formatDateBR(\"invalid-date-string\");\n            expect(result).toBe(\"Data inv√°lida\");\n        });"
  },
  {
    "file": "frontend/src/utils/__tests__/index.spec.ts",
    "type": "line",
    "line": 205,
    "length": 1,
    "text": "// Cria uma data que far√° com que getFullYear() gere um erro",
    "context": "\ndescribe(\"tratamento de erro em formatDateForInput\", () => {\n    it(\"deve retornar string vazia quando as opera√ß√µes de data geram um erro\", () => {\n        // Cria uma data que far√° com que getFullYear() gere um erro\n        const invalidDate = new Date(\"invalid\");\n\n        // Isso deve acionar o bloco catch e retornar ''"
  },
  {
    "file": "frontend/src/utils/__tests__/index.spec.ts",
    "type": "line",
    "line": 208,
    "length": 1,
    "text": "// Isso deve acionar o bloco catch e retornar ''",
    "context": "        // Cria uma data que far√° com que getFullYear() gere um erro\n        const invalidDate = new Date(\"invalid\");\n\n        // Isso deve acionar o bloco catch e retornar ''\n        const result = formatDateForInput(invalidDate);\n        expect(result).toBe(\"\");\n    });"
  },
  {
    "file": "frontend/src/utils/__tests__/index.spec.ts",
    "type": "line",
    "line": 216,
    "length": 1,
    "text": "// Cria uma data que far√° com que setHours() gere um erro",
    "context": "\ndescribe(\"tratamento de erro em isDateValidAndFuture\", () => {\n    it(\"deve retornar false quando as opera√ß√µes de data geram um erro\", () => {\n        // Cria uma data que far√° com que setHours() gere um erro\n        const invalidDate = new Date(\"invalid\");\n\n        // Isso deve acionar o bloco catch e retornar false"
  },
  {
    "file": "frontend/src/utils/__tests__/index.spec.ts",
    "type": "line",
    "line": 219,
    "length": 1,
    "text": "// Isso deve acionar o bloco catch e retornar false",
    "context": "        // Cria uma data que far√° com que setHours() gere um erro\n        const invalidDate = new Date(\"invalid\");\n\n        // Isso deve acionar o bloco catch e retornar false\n        const result = isDateValidAndFuture(invalidDate);\n        expect(result).toBe(false);\n    });"
  },
  {
    "file": "frontend/src/utils/__tests__/validators.prop.spec.ts",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Se n√£o tem letra, deve ser falso",
    "context": "                fc.property(\n                    fc.string(),\n                    (s) => {\n                        // Se n√£o tem letra, deve ser falso\n                        if (!/[A-Za-z]/.test(s)) {\n                            return !validarSenha(s);\n                        }"
  },
  {
    "file": "frontend/src/utils/apiError.ts",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Erro de rede (sem response)",
    "context": "}\n\nexport function normalizeError(err: unknown): NormalizedError {\n    // Erro de rede (sem response)\n    if (isAxiosError(err) && !err.response) {\n        return {\n            kind: 'network',"
  },
  {
    "file": "frontend/src/utils/apiError.ts",
    "type": "line",
    "line": 52,
    "length": 1,
    "text": "// Erro HTTP com resposta da API",
    "context": "        };\n    }\n\n    // Erro HTTP com resposta da API\n    if (isAxiosError(err) && err.response) {\n        const {status, data} = err.response;\n        // data can be unknown, cast to ApiErrorPayload if it matches"
  },
  {
    "file": "frontend/src/utils/apiError.ts",
    "type": "line",
    "line": 55,
    "length": 1,
    "text": "// data can be unknown, cast to ApiErrorPayload if it matches",
    "context": "    // Erro HTTP com resposta da API\n    if (isAxiosError(err) && err.response) {\n        const {status, data} = err.response;\n        // data can be unknown, cast to ApiErrorPayload if it matches\n        const payload = (data || {}) as ApiErrorPayload;\n\n        return {"
  },
  {
    "file": "frontend/src/utils/apiError.ts",
    "type": "line",
    "line": 71,
    "length": 1,
    "text": "// Erro gen√©rico (Error, string, etc.)",
    "context": "        };\n    }\n\n    // Erro gen√©rico (Error, string, etc.)\n    if (err instanceof Error) {\n        return {\n            kind: 'unexpected',"
  },
  {
    "file": "frontend/src/utils/apiError.ts",
    "type": "line",
    "line": 81,
    "length": 1,
    "text": "// Fallback",
    "context": "        };\n    }\n\n    // Fallback\n    logger.error(\"[normalizeError] Erro n√£o mapeado:\", err);\n    return {\n        kind: 'unexpected',"
  },
  {
    "file": "frontend/src/utils/apiError.ts",
    "type": "line",
    "line": 117,
    "length": 1,
    "text": "// T√≠tulos padr√£o por tipo",
    "context": "export function notifyError(normalized: NormalizedError): void {\n    const feedbackStore = useFeedbackStore();\n\n    // T√≠tulos padr√£o por tipo\n    const titles: Record<ErrorKind, string> = {\n        validation: 'Erro de Valida√ß√£o',\n        notFound: 'N√£o Encontrado',"
  },
  {
    "file": "frontend/src/utils/apiError.ts",
    "type": "line",
    "line": 137,
    "length": 1,
    "text": "// Aumentar o tempo de exibi√ß√£o para permitir leitura de detalhes t√©cnicos (60s se tiver stacktrace)",
    "context": "        fullMessage += '\\n\\nTrace ID: ' + normalized.traceId;\n    }\n\n    // Aumentar o tempo de exibi√ß√£o para permitir leitura de detalhes t√©cnicos (60s se tiver stacktrace)\n    const autoHideDelay = normalized.stackTrace ? 60000 : 7000;\n\n    feedbackStore.show(title, fullMessage, 'danger', autoHideDelay);"
  },
  {
    "file": "frontend/src/utils/csv.ts",
    "type": "line",
    "line": 16,
    "length": 1,
    "text": "// CSV Injection prevention",
    "context": "\n    const stringValue = String(value);\n\n    // CSV Injection prevention\n    if (/^[=+\\-@]/.test(stringValue)) {\n        return \"'\" + stringValue;\n    }"
  },
  {
    "file": "frontend/src/utils/csv.ts",
    "type": "line",
    "line": 27,
    "length": 1,
    "text": "// Sanitize data before passing to PapaParse",
    "context": "export function gerarCSV(dados: CSVData[]): string {\n    if (dados.length === 0) return \"\";\n\n    // Sanitize data before passing to PapaParse\n    const sanitizedData = dados.map(row => {\n        const newRow: Record<string, any> = {};\n        Object.keys(row).forEach(key => {"
  },
  {
    "file": "frontend/src/utils/dateUtils.ts",
    "type": "line",
    "line": 10,
    "length": 1,
    "text": "// ISO Date/DateTime",
    "context": "    const trimmed = s.trim();\n    if (!trimmed) return null;\n\n    // ISO Date/DateTime\n    const isoDate = parseISO(trimmed);\n    if (isValid(isoDate)) return isoDate;\n"
  },
  {
    "file": "frontend/src/utils/dateUtils.ts",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// DD/MM/YYYY",
    "context": "    const isoDate = parseISO(trimmed);\n    if (isValid(isoDate)) return isoDate;\n\n    // DD/MM/YYYY\n    try {\n        const ddmmyyyy = parse(trimmed, \"dd/MM/yyyy\", new Date());\n        if (isValid(ddmmyyyy)) return ddmmyyyy;"
  },
  {
    "file": "frontend/src/utils/dateUtils.ts",
    "type": "line",
    "line": 19,
    "length": 1,
    "text": "// ignore",
    "context": "        const ddmmyyyy = parse(trimmed, \"dd/MM/yyyy\", new Date());\n        if (isValid(ddmmyyyy)) return ddmmyyyy;\n    } catch {\n        // ignore\n    }\n\n    // Numeric string"
  },
  {
    "file": "frontend/src/utils/dateUtils.ts",
    "type": "line",
    "line": 22,
    "length": 1,
    "text": "// Numeric string",
    "context": "        // ignore\n    }\n\n    // Numeric string\n    if (/^\\d{10,}$/.test(trimmed)) {\n        const d = new Date(Number(trimmed));\n        if (isValid(d)) return d;"
  },
  {
    "file": "frontend/src/utils/dateUtils.ts",
    "type": "line",
    "line": 36,
    "length": 1,
    "text": "// Suporte para objetos de contexto do BTable (bootstrap-vue-next)",
    "context": "        return null;\n    }\n\n    // Suporte para objetos de contexto do BTable (bootstrap-vue-next)\n    const val = (typeof dateInput === 'object' && !Array.isArray(dateInput) && 'value' in dateInput)\n        ? dateInput.value\n        : dateInput;"
  },
  {
    "file": "frontend/src/utils/dateUtils.ts",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// M√™s no JS √© 0-indexed",
    "context": "\n    if (Array.isArray(val)) {\n        const [year, month, day, hour = 0, minute = 0, second = 0] = val;\n        // M√™s no JS √© 0-indexed\n        const d = new Date(year, month - 1, day, hour, minute, second);\n        return isValid(d) ? d : null;\n    }"
  },
  {
    "file": "frontend/src/utils/index.ts",
    "type": "line",
    "line": 1,
    "length": 1,
    "text": "// ===== EXPORTS =====",
    "context": "// ===== EXPORTS =====\nexport {default as logger} from \"@/utils/logger\";\nexport {flattenTree} from \"./treeUtils\";\n"
  },
  {
    "file": "frontend/src/utils/logger.ts",
    "type": "line",
    "line": 3,
    "length": 4,
    "text": "// Determina o n√≠vel de log baseado no ambiente\n// Desenvolvimento: INFO (4) - mostra info, warn, error\n// Produ√ß√£o: WARN (3) - mostra apenas warn e error\n// Teste: ERROR (1) - mostra apenas error",
    "context": "import {createConsola} from \"consola\";\n\n// Determina o n√≠vel de log baseado no ambiente\n// Desenvolvimento: INFO (4) - mostra info, warn, error\n// Produ√ß√£o: WARN (3) - mostra apenas warn e error\n// Teste: ERROR (1) - mostra apenas error\nexport const getLogLevel = (envMode?: string) => {\n    const mode = (envMode !== undefined) ? envMode : ((import.meta as any).env?.MODE || (typeof process !== \"undefined\" && process.env?.VITEST ? \"test\" : \"development\"));\n"
  },
  {
    "file": "frontend/src/utils/styleUtils.ts",
    "type": "line",
    "line": 3,
    "length": 1,
    "text": "// ===== CLASSES DE BADGE =====",
    "context": "import {CLASSES_BADGE_SITUACAO} from \"@/constants/situacoes\";\n\n// ===== CLASSES DE BADGE =====\nexport function badgeClass(situacao: string): string {\n    return (\n        CLASSES_BADGE_SITUACAO[situacao as keyof typeof CLASSES_BADGE_SITUACAO] ||"
  },
  {
    "file": "frontend/src/utils/styleUtils.ts",
    "type": "line",
    "line": 11,
    "length": 2,
    "text": "// ===== √çCONES DE NOTIFICA√á√ÉO =====\n// Define local type for iconeTipo since TipoNotificacao was removed",
    "context": "    );\n}\n\n// ===== √çCONES DE NOTIFICA√á√ÉO =====\n// Define local type for iconeTipo since TipoNotificacao was removed\nexport type LocalTipoNotificacao = \"success\" | \"error\" | \"warning\" | \"info\";\n\nexport const iconeTipo = (tipo: LocalTipoNotificacao): string => {"
  },
  {
    "file": "frontend/src/utils/validators.ts",
    "type": "line",
    "line": 10,
    "length": 1,
    "text": "// Password rule: Minimum 8 chars, 1 letter, 1 number.",
    "context": "    return emailSchema.safeParse(email).success;\n}\n\n// Password rule: Minimum 8 chars, 1 letter, 1 number.\nconst passwordSchema = z.string()\n    .min(8)\n    .regex(/[A-Za-z]/)"
  },
  {
    "file": "frontend/src/views/__tests__/AtividadesCadastroView.spec.ts",
    "type": "line",
    "line": 17,
    "length": 1,
    "text": "// Mocks",
    "context": "import * as useAcessoModule from '@/composables/useAcesso';\nimport {Perfil} from \"@/types/tipos\";\n\n// Mocks\nconst {pushMock} = vi.hoisted(() => ({pushMock: vi.fn()}));\n\nvi.mock(\"vue-router\", () => ({"
  },
  {
    "file": "frontend/src/views/__tests__/AtividadesCadastroView.spec.ts",
    "type": "line",
    "line": 27,
    "length": 1,
    "text": "// Mock services",
    "context": "\nvi.mock(\"@/composables/usePerfil\", () => ({usePerfil: vi.fn()}));\n\n// Mock services\nvi.mock(\"@/services/subprocessoService\", () => ({\n    buscarSubprocessoPorProcessoEUnidade: vi.fn(),\n    buscarSubprocessoDetalhe: vi.fn(),"
  },
  {
    "file": "frontend/src/views/__tests__/AtividadesCadastroView.spec.ts",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Mock processoService",
    "context": "    listarAnalisesCadastro: vi.fn(),\n}));\n\n// Mock processoService\nvi.mock(\"@/services/processoService\", () => ({\n    buscarProcessoDetalhe: vi.fn(),\n    obterDetalhesProcesso: vi.fn().mockResolvedValue({"
  },
  {
    "file": "frontend/src/views/__tests__/AtividadesCadastroView.spec.ts",
    "type": "line",
    "line": 121,
    "length": 1,
    "text": "// Manually set codSubprocesso to ensure buttons depending on it are rendered",
    "context": "        }\n    });\n\n    // Manually set codSubprocesso to ensure buttons depending on it are rendered\n    (wrapper.vm as any).codSubprocesso = 123;\n\n    return wrapper;"
  },
  {
    "file": "frontend/src/views/__tests__/AtividadesCadastroView.spec.ts",
    "type": "line",
    "line": 168,
    "length": 1,
    "text": "// Open modal first",
    "context": "        subprocessosStore.validarCadastro = vi.fn().mockResolvedValue({valido: true});\n        subprocessosStore.disponibilizarCadastro = vi.fn().mockResolvedValue(true);\n\n        // Open modal first\n        await wrapper.find('[data-testid=\"btn-cad-atividades-disponibilizar\"]').trigger(\"click\");\n        await flushPromises();\n"
  },
  {
    "file": "frontend/src/views/__tests__/AtividadesCadastroView.spec.ts",
    "type": "line",
    "line": 172,
    "length": 1,
    "text": "// Confirm in modal",
    "context": "        await wrapper.find('[data-testid=\"btn-cad-atividades-disponibilizar\"]').trigger(\"click\");\n        await flushPromises();\n\n        // Confirm in modal\n        const modal = wrapper.findComponent(ConfirmacaoDisponibilizacaoModal);\n        await modal.vm.$emit('confirmar');\n"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mocks dos services",
    "context": "import {createTestingPinia} from '@pinia/testing';\nimport {setupComponentTest} from '@/test-utils/componentTestHelpers';\n\n// Mocks dos services\nvi.mock('@/services/diagnosticoService', () => ({\n    diagnosticoService: {\n        buscarMinhasAvaliacoes: vi.fn(),"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Mocks do router",
    "context": "    buscarUnidadePorSigla: vi.fn(),\n}));\n\n// Mocks do router\nconst mockPush = vi.fn();\nconst mockRouteParams = {value: {codSubprocesso: '10', siglaUnidade: 'TEST'}};\n"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 79,
    "length": 1,
    "text": "// Importar os mocks ap√≥s vi.clearAllMocks",
    "context": "        mockRouteParams.value = {codSubprocesso: '10', siglaUnidade: 'TEST'};\n        mockPush.mockClear();\n\n        // Importar os mocks ap√≥s vi.clearAllMocks\n        const diagMod = await import('@/services/diagnosticoService');\n        const subMod = await import('@/services/subprocessoService');\n        const unidMod = await import('@/services/unidadeService');"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 88,
    "length": 2,
    "text": "// Configurar mocks padr√£o ANTES de qualquer montagem\n// IMPORTANTE: Retornar c√≥pias para evitar muta√ß√£o compartilhada entre testes",
    "context": "        subprocessoService = subMod;\n        unidadeService = unidMod;\n\n        // Configurar mocks padr√£o ANTES de qualquer montagem\n        // IMPORTANTE: Retornar c√≥pias para evitar muta√ß√£o compartilhada entre testes\n        (diagnosticoService.buscarMinhasAvaliacoes as any).mockResolvedValue([\n            {competenciaCodigo: 1, importancia: 'N5', dominio: 'N3', observacoes: 'Obs 1'},\n            {competenciaCodigo: 2, importancia: '', dominio: '', observacoes: ''}"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 106,
    "length": 2,
    "text": "// Sempre resetar os mocks para garantir isolamento entre testes\n// Usar valores fornecidos ou valores padr√£o com c√≥pias frescas",
    "context": "    });\n\n    const mountComponent = async (competencias?: any[], avaliacoes?: any[]) => {\n        // Sempre resetar os mocks para garantir isolamento entre testes\n        // Usar valores fornecidos ou valores padr√£o com c√≥pias frescas\n        const compData = competencias !== undefined ? competencias : [\n            {codigo: 1, descricao: 'Competencia 1'},\n            {codigo: 2, descricao: 'Competencia 2'}"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 147,
    "length": 1,
    "text": "// Esperar que as compet√™ncias sejam renderizadas",
    "context": "    it('exibe compet√™ncias e avalia√ß√µes existentes', async () => {\n        await mountComponent();\n\n        // Esperar que as compet√™ncias sejam renderizadas\n        await flushPromises();\n        await ctx.wrapper!.vm.$nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 197,
    "length": 1,
    "text": "// Use UI to change values to cover template lines",
    "context": "\n        expect(ctx.wrapper!.vm.podeConcluir).toBe(false);\n\n        // Use UI to change values to cover template lines\n        const selects = ctx.wrapper!.findAll('select');\n        // selects[0] and [1] are for comp 1 (already filled in mock)\n        // selects[2] and [3] are for comp 2"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 199,
    "length": 2,
    "text": "// selects[0] and [1] are for comp 1 (already filled in mock)\n// selects[2] and [3] are for comp 2",
    "context": "\n        // Use UI to change values to cover template lines\n        const selects = ctx.wrapper!.findAll('select');\n        // selects[0] and [1] are for comp 1 (already filled in mock)\n        // selects[2] and [3] are for comp 2\n        await selects[2].setValue('N4');\n        await selects[3].setValue('N2');\n"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 218,
    "length": 1,
    "text": "// Update internal state to simulate user filling the form",
    "context": "        const {useFeedbackStore} = await import('@/stores/feedback');\n        const feedbackStore = useFeedbackStore();\n\n        // Update internal state to simulate user filling the form\n        ctx.wrapper!.vm.avaliacoes[2].importancia = 'N4';\n        ctx.wrapper!.vm.avaliacoes[2].dominio = 'N2';\n"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 222,
    "length": 1,
    "text": "// Trigger the salvar method which the component would normally call on change",
    "context": "        ctx.wrapper!.vm.avaliacoes[2].importancia = 'N4';\n        ctx.wrapper!.vm.avaliacoes[2].dominio = 'N2';\n\n        // Trigger the salvar method which the component would normally call on change\n        await ctx.wrapper!.vm.salvar(2, 'N4', 'N2');\n        await flushPromises();\n        await ctx.wrapper!.vm.$nextTick();"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 259,
    "length": 1,
    "text": "// Verificar que avalia√ß√µes foram inicializadas",
    "context": "        await flushPromises();\n        await ctx.wrapper!.vm.$nextTick();\n\n        // Verificar que avalia√ß√µes foram inicializadas\n        const avaliacoes = ctx.wrapper!.vm.avaliacoes;\n        expect(avaliacoes[1]).toBeDefined();\n        expect(avaliacoes[2]).toBeDefined();"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 264,
    "length": 1,
    "text": "// Limpar mocks e configurar erro DEPOIS de obter feedback store",
    "context": "        expect(avaliacoes[1]).toBeDefined();\n        expect(avaliacoes[2]).toBeDefined();\n\n        // Limpar mocks e configurar erro DEPOIS de obter feedback store\n        const {useFeedbackStore} = await import('@/stores/feedback');\n        const feedbackStore = useFeedbackStore();\n        vi.clearAllMocks();"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 299,
    "length": 1,
    "text": "// Obter feedback store e limpar mocks na ordem correta",
    "context": "        }\n        await ctx.wrapper!.vm.$nextTick();\n\n        // Obter feedback store e limpar mocks na ordem correta\n        const {useFeedbackStore} = await import('@/stores/feedback');\n        const feedbackStore = useFeedbackStore();\n        vi.clearAllMocks();"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 365,
    "length": 1,
    "text": "// Obter feedback store e limpar mocks na ordem correta",
    "context": "        }\n        await ctx.wrapper!.vm.$nextTick();\n\n        // Obter feedback store e limpar mocks na ordem correta\n        const {useFeedbackStore} = await import('@/stores/feedback');\n        const feedbackStore = useFeedbackStore();\n        vi.clearAllMocks();"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 403,
    "length": 1,
    "text": "// Import store to clear mocks later if needed",
    "context": "    });\n\n    it('trata erro no onMounted', async () => {\n        // Import store to clear mocks later if needed\n        const {useFeedbackStore} = await import('@/stores/feedback');\n\n        // SETUP MOCK BEFORE MOUNT"
  },
  {
    "file": "frontend/src/views/__tests__/AutoavaliacaoDiagnostico.spec.ts",
    "type": "line",
    "line": 406,
    "length": 1,
    "text": "// SETUP MOCK BEFORE MOUNT",
    "context": "        // Import store to clear mocks later if needed\n        const {useFeedbackStore} = await import('@/stores/feedback');\n\n        // SETUP MOCK BEFORE MOUNT\n        const unidMod = await import('@/services/unidadeService');\n        (unidMod.buscarUnidadePorSigla as any).mockRejectedValueOnce(new Error('Fatal error'));\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 15,
    "length": 1,
    "text": "// Mocks",
    "context": "import {nextTick} from \"vue\";\nimport * as useAcessoModule from '@/composables/useAcesso';\n\n// Mocks\nconst mocks = vi.hoisted(() => ({\n    push: vi.fn(),\n    mockRoute: {query: {} as Record<string, string>}"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Stubs",
    "context": "\nvi.mock(\"@/services/processoService\");\n\n// Stubs\nconst ConfirmacaoDisponibilizacaoModalStub = {\n    template:\n        '<div data-testid=\"mdl-confirmacao-disp\" v-if=\"mostrar\"><button data-testid=\"btn-confirmar-disponibilizacao\" @click=\"$emit(\\'confirmar\\')\"></button></div>',"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Mock BFormInput to support ref and focus",
    "context": "    emits: [\"remover-atividade\", \"editar-atividade\", \"atualizar-atividade\", \"adicionar-conhecimento\", \"remover-conhecimento\", \"editar-conhecimento\", \"atualizar-conhecimento\", \"update:atividade\", \"update:conhecimento\"]\n};\n\n// Mock BFormInput to support ref and focus\nconst BFormInputStub = {\n    template: '<input :value=\"modelValue\" @input=\"$emit(\\'update:modelValue\\', $event.target.value)\" />',\n    props: ['modelValue'],"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 104,
    "length": 1,
    "text": "// Mock route",
    "context": "    ];\n\n    const createWrapper = (isRevisao = false, atividades = mockAtividades) => {\n        // Mock route\n        mocks.mockRoute.query = {};\n\n        // Setup Pinia with Stubs"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 107,
    "length": 1,
    "text": "// Setup Pinia with Stubs",
    "context": "        // Mock route\n        mocks.mockRoute.query = {};\n\n        // Setup Pinia with Stubs\n        const pinia = createTestingPinia({\n            createSpy: vi.fn,\n            initialState: {"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 144,
    "length": 1,
    "text": "// PRE-CONFIGURE STORE SPIES",
    "context": "            stubActions: true\n        });\n\n        // PRE-CONFIGURE STORE SPIES\n        subprocessosStore = useSubprocessosStore(pinia) as any;\n        subprocessosStore.buscarSubprocessoPorProcessoEUnidade.mockResolvedValue(123);\n        subprocessosStore.buscarContextoEdicao.mockResolvedValue(undefined);"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 150,
    "length": 1,
    "text": "// Mock validarCadastro to call through to service mock",
    "context": "        subprocessosStore.buscarContextoEdicao.mockResolvedValue(undefined);\n        subprocessosStore.disponibilizarCadastro.mockResolvedValue(true);\n        subprocessosStore.disponibilizarRevisaoCadastro.mockResolvedValue(true);\n        // Mock validarCadastro to call through to service mock\n        subprocessosStore.validarCadastro.mockImplementation((cod: number) => subprocessoService.validarCadastro(cod));\n\n        vi.spyOn(useAcessoModule, 'useAcesso').mockReturnValue({"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 160,
    "length": 1,
    "text": "// Actions",
    "context": "        } as any);\n\n        atividadesStore = useAtividadesStore(pinia) as any;\n        // Actions\n        atividadesStore.adicionarAtividade.mockResolvedValue({});\n        atividadesStore.removerAtividade.mockResolvedValue({});\n        atividadesStore.removerConhecimento.mockResolvedValue({});"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 168,
    "length": 1,
    "text": "// Getter (converted from computed)",
    "context": "        atividadesStore.atualizarConhecimento.mockResolvedValue({});\n        atividadesStore.adicionarConhecimento.mockResolvedValue({});\n        atividadesStore.buscarAtividadesParaSubprocesso.mockResolvedValue({});\n        // Getter (converted from computed)\n        atividadesStore.obterAtividadesPorSubprocesso = vi.fn(() => atividades);\n\n        mapasStore = useMapasStore(pinia) as any;"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 176,
    "length": 1,
    "text": "// Getter (converted from computed)",
    "context": "\n        analisesStore = useAnalisesStore(pinia) as any;\n        analisesStore.buscarAnalisesCadastro.mockResolvedValue([]);\n        // Getter (converted from computed)\n        analisesStore.obterAnalisesPorSubprocesso = vi.fn(() => []);\n\n        feedbackStore = useFeedbackStore(pinia) as any;"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 236,
    "length": 1,
    "text": "// Test case removed/simplified because asserting focus on stubs in VTU/JSDOM is flaky without specific setup",
    "context": "        expect(wrapper.findAllComponents(AtividadeItemStub)).toHaveLength(1);\n    });\n\n    // Test case removed/simplified because asserting focus on stubs in VTU/JSDOM is flaky without specific setup\n    it(\"deve adicionar nova atividade\", async () => {\n        const {wrapper, atividadesStore} = createWrapper();\n        await flushPromises();"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 252,
    "length": 1,
    "text": "// Check if value was cleared (indicating success flow completed)",
    "context": "            {descricao: \"Nova Atividade\"}\n        );\n\n        // Check if value was cleared (indicating success flow completed)\n        expect(input.element.value).toBe('');\n    });\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 363,
    "length": 1,
    "text": "// Change state",
    "context": "        const {wrapper, subprocessosStore} = createWrapper();\n        await flushPromises();\n\n        // Change state\n        subprocessosStore.subprocessoDetalhe!.situacao = SituacaoSubprocesso.MAPEAMENTO_CADASTRO_DISPONIBILIZADO;\n\n        await wrapper.find('[data-testid=\"btn-cad-atividades-disponibilizar\"]').trigger(\"click\");"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 465,
    "length": 1,
    "text": "// Dropdown actions",
    "context": "        const {wrapper} = createWrapper();\n        await flushPromises();\n\n        // Dropdown actions\n        await wrapper.find('[data-testid=\"btn-mais-acoes\"]').trigger(\"click\");\n        await wrapper.find('[data-testid=\"cad-atividades__btn-impactos-mapa-edicao\"]').trigger(\"click\");\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 491,
    "length": 1,
    "text": "// Open modal",
    "context": "        const {wrapper, atividadesStore} = createWrapper();\n        await flushPromises();\n\n        // Open modal\n        await wrapper.find('[data-testid=\"btn-mais-acoes\"]').trigger(\"click\");\n        await wrapper.find('[data-testid=\"btn-cad-atividades-importar\"]').trigger(\"click\");\n        expect((wrapper.vm as any).mostrarModalImportar).toBe(true);"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividades.spec.ts",
    "type": "line",
    "line": 511,
    "length": 1,
    "text": "// Force errors",
    "context": "        const {wrapper} = createWrapper();\n        await flushPromises();\n\n        // Force errors\n        vi.mocked(subprocessoService.validarCadastro).mockResolvedValue({\n            valido: false,\n            erros: [{tipo: 'ERRO', mensagem: 'Erro', atividadeCodigo: 1}]"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 12,
    "length": 1,
    "text": "// Mock router",
    "context": "import {useFeedbackStore} from '@/stores/feedback';\nimport {SituacaoSubprocesso} from '@/types/tipos';\n\n// Mock router\nconst {mockPush} = vi.hoisted(() => ({\n    mockPush: vi.fn()\n}));"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 93,
    "length": 1,
    "text": "// Mock return values",
    "context": "        const atividadesStore = useAtividadesStore(pinia);\n        const subprocessosStore = useSubprocessosStore(pinia);\n\n        // Mock return values\n        (subprocessosStore.buscarSubprocessoPorProcessoEUnidade as any).mockResolvedValue(123);\n        (atividadesStore.obterAtividadesPorSubprocesso as any).mockReturnValue([\n            {codigo: 1, descricao: 'Atividade 1', conhecimentos: []}"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Trigger onMounted manually if needed or just wait",
    "context": "            {codigo: 1, descricao: 'Atividade 1', conhecimentos: []}\n        ]);\n\n        // Trigger onMounted manually if needed or just wait\n        await flushPromises();\n        (wrapper.vm as any).codSubprocesso = 123; // Force set\n        await wrapper.vm.$nextTick();"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 104,
    "length": 1,
    "text": "// Trigger removal via stub",
    "context": "        (wrapper.vm as any).codSubprocesso = 123; // Force set\n        await wrapper.vm.$nextTick();\n\n        // Trigger removal via stub\n        await wrapper.find('.btn-rem-at').trigger('click');\n\n        expect((wrapper.vm as any).dadosRemocao).toEqual({tipo: 'atividade', index: 0});"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 110,
    "length": 1,
    "text": "// Confirm removal",
    "context": "        expect((wrapper.vm as any).dadosRemocao).toEqual({tipo: 'atividade', index: 0});\n        expect((wrapper.vm as any).mostrarModalConfirmacaoRemocao).toBe(true);\n\n        // Confirm removal\n        const spy = vi.spyOn(atividadesStore, 'removerAtividade').mockResolvedValue({} as any);\n        await wrapper.find('.btn-conf').trigger('click');\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// Trigger removal of knowledge",
    "context": "        (wrapper.vm as any).codSubprocesso = 123;\n        await wrapper.vm.$nextTick();\n\n        // Trigger removal of knowledge\n        await wrapper.find('.btn-rem-con').trigger('click');\n\n        expect((wrapper.vm as any).dadosRemocao).toEqual({tipo: 'conhecimento', index: 0, conhecimentoCodigo: 100});"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 354,
    "length": 1,
    "text": "// Should log error, but most importantly we cover the else branch",
    "context": "        });\n\n        await flushPromises();\n        // Should log error, but most importantly we cover the else branch\n    });\n\n    it('adicionarAtividade returns false if codMapa is missing', async () => {"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicao.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mocks",
    "context": "import {criarAtribuicaoTemporaria} from '@/services/atribuicaoTemporariaService';\nimport {getCommonMountOptions, setupComponentTest} from \"@/test-utils/componentTestHelpers\";\n\n// Mocks\nconst {mockPush, mockFeedbackShow, mockBuscarUnidade, mockBuscarUsuarios} = vi.hoisted(() => {\n    return {\n        mockPush: vi.fn(),"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicao.spec.ts",
    "type": "line",
    "line": 120,
    "length": 1,
    "text": "// Resetar e configurar o mock apenas para este teste",
    "context": "    });\n\n    it('submete o formul√°rio com sucesso', async () => {\n        // Resetar e configurar o mock apenas para este teste\n        (criarAtribuicaoTemporaria as any).mockReset();\n        (criarAtribuicaoTemporaria as any).mockResolvedValue({});\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicao.spec.ts",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Remontar o componente para este teste",
    "context": "        (criarAtribuicaoTemporaria as any).mockReset();\n        (criarAtribuicaoTemporaria as any).mockResolvedValue({});\n\n        // Remontar o componente para este teste\n        context.wrapper = criarWrapper();\n        await flushPromises();\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicao.spec.ts",
    "type": "line",
    "line": 128,
    "length": 1,
    "text": "// Preencher formul√°rio",
    "context": "        context.wrapper = criarWrapper();\n        await flushPromises();\n\n        // Preencher formul√°rio\n        const select = context.wrapper!.find('[data-testid=\"select-usuario\"]');\n        await select.setValue('111');\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicao.spec.ts",
    "type": "line",
    "line": 155,
    "length": 1,
    "text": "// Resetar e configurar o mock apenas para este teste",
    "context": "    });\n\n    it('lida com erro de submiss√£o', async () => {\n        // Resetar e configurar o mock apenas para este teste\n        (criarAtribuicaoTemporaria as any).mockReset();\n        (criarAtribuicaoTemporaria as any).mockRejectedValue(new Error('API Error'));\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicao.spec.ts",
    "type": "line",
    "line": 159,
    "length": 1,
    "text": "// Remontar o componente para este teste",
    "context": "        (criarAtribuicaoTemporaria as any).mockReset();\n        (criarAtribuicaoTemporaria as any).mockRejectedValue(new Error('API Error'));\n\n        // Remontar o componente para este teste\n        context.wrapper = criarWrapper();\n        await flushPromises();\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicao.spec.ts",
    "type": "line",
    "line": 163,
    "length": 1,
    "text": "// Preencher formul√°rio",
    "context": "        context.wrapper = criarWrapper();\n        await flushPromises();\n\n        // Preencher formul√°rio\n        context.wrapper!.vm.usuarioSelecionado = '111';\n        context.wrapper!.vm.dataInicio = '2023-01-01';\n        context.wrapper!.vm.dataTermino = '2023-12-31';"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicao.spec.ts",
    "type": "line",
    "line": 186,
    "length": 1,
    "text": "// Sem usuario",
    "context": "        context.wrapper = criarWrapper();\n        await flushPromises();\n\n        // Sem usuario\n        await context.wrapper!.find('form').trigger('submit');\n        expect(mockFeedbackShow).toHaveBeenCalledWith('Erro', expect.stringContaining('Selecione um usu√°rio'), 'danger');\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicao.spec.ts",
    "type": "line",
    "line": 190,
    "length": 1,
    "text": "// Com usuario, sem justificativa",
    "context": "        await context.wrapper!.find('form').trigger('submit');\n        expect(mockFeedbackShow).toHaveBeenCalledWith('Erro', expect.stringContaining('Selecione um usu√°rio'), 'danger');\n\n        // Com usuario, sem justificativa\n        context.wrapper!.vm.usuarioSelecionado = '111';\n        await context.wrapper!.find('form').trigger('submit');\n        expect(mockFeedbackShow).toHaveBeenCalledWith('Erro', expect.stringContaining('Preencha data de in√≠cio'), 'danger');"
  },
  {
    "file": "frontend/src/views/__tests__/CadAtribuicaoCoverage.spec.ts",
    "type": "line",
    "line": 72,
    "length": 1,
    "text": "// For√ßar estado onde unidade ou usuarioSelecionado √© nulo",
    "context": "        const wrapper = criarWrapper();\n        await flushPromises();\n\n        // For√ßar estado onde unidade ou usuarioSelecionado √© nulo\n        (wrapper.vm as any).unidade = null;\n        (wrapper.vm as any).usuarioSelecionado = null;\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "block",
    "line": 680,
    "length": 7,
    "text": "/*\n        return {\n            ...\n            erro,\n            ...\n        };\n        */",
    "context": "        await flushPromises();\n        const errorAlert = wrapper.findComponent({name: 'ErrorAlert'});\n        await errorAlert.vm.$emit('dismiss');\n        /*\n        return {\n            ...\n            erro,\n            ...\n        };\n        */\n    });\n\n    it('removerAtividadeAssociada lida com atividades nulas', async () => {"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 63,
    "length": 1,
    "text": "// Mocks for Async Components - simplified to avoid require issues",
    "context": "    buscarUnidadePorSigla: vi.fn(),\n}));\n\n// Mocks for Async Components - simplified to avoid require issues\n\nvi.mock(\"@/components/mapa/CriarCompetenciaModal.vue\", () => ({\n    __esModule: true,"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 367,
    "length": 1,
    "text": "// Mock SubprocessoService actions (used by store)",
    "context": "            mockAtividades as any,\n        );\n\n        // Mock SubprocessoService actions (used by store)\n        vi.mocked(subprocessoService.adicionarCompetencia).mockResolvedValue(mockMapaCompleto as any);\n        vi.mocked(subprocessoService.atualizarCompetencia).mockResolvedValue(mockMapaCompleto as any);\n        vi.mocked(subprocessoService.removerCompetencia).mockResolvedValue(mockMapaCompleto as any);"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 376,
    "length": 1,
    "text": "// cleanup",
    "context": "    });\n\n    afterEach(() => {\n        // cleanup\n    });\n\n    it(\"deve carregar dados no mount\", async () => {"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 428,
    "length": 1,
    "text": "// MapasStore uses subprocessoService for competencies",
    "context": "\n        await flushPromises();\n\n        // MapasStore uses subprocessoService for competencies\n        expect(subprocessoService.adicionarCompetencia).toHaveBeenCalledWith(\n            123,\n            expect.objectContaining({"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 449,
    "length": 1,
    "text": "// Simulate save from modal",
    "context": "            wrapper.find('[data-testid=\"mdl-criar-competencia\"]').exists(),\n        ).toBe(true);\n\n        // Simulate save from modal\n        await wrapper\n            .find('[data-testid=\"btn-criar-competencia-salvar\"]')\n            .trigger(\"click\");"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 549,
    "length": 1,
    "text": "// Mock the service to throw",
    "context": "    });\n\n    it(\"deve tratar erro ao criar compet√™ncia\", async () => {\n        // Mock the service to throw\n        const axiosError = {\n            isAxiosError: true,\n            response: {"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 560,
    "length": 1,
    "text": "// Use subprocessoService as MapasStore calls it",
    "context": "                }\n            }\n        };\n        // Use subprocessoService as MapasStore calls it\n        vi.mocked(subprocessoService.adicionarCompetencia).mockRejectedValueOnce(axiosError);\n\n        const {wrapper, mapasStore} = createWrapper();"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 640,
    "length": 1,
    "text": "// Simular o comportamento de handleErrors que recebe um erro normalizado",
    "context": "\n    it('deve formatar erros de atividades corretamente', async () => {\n        const {wrapper} = createWrapper();\n        // Simular o comportamento de handleErrors que recebe um erro normalizado\n        const store = {\n            lastError: {\n                kind: 'validation',"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 693,
    "length": 1,
    "text": "// Injetar uma compet√™ncia sem atividades",
    "context": "        const {wrapper, mapasStore} = createWrapper();\n        await flushPromises();\n\n        // Injetar uma compet√™ncia sem atividades\n        (wrapper.vm as any).mapasStore.mapaCompleto.competencias.push({\n            codigo: 20,\n            descricao: 'Sem Atv',"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 721,
    "length": 1,
    "text": "// findComponent with the data-testid of the root element in the stub",
    "context": "        const {wrapper} = createWrapper();\n        (wrapper.vm as any).mostrarModalExcluirCompetencia = true;\n        await nextTick();\n        // findComponent with the data-testid of the root element in the stub\n        const modal = wrapper.findComponent('[data-testid=\"mdl-excluir-competencia\"]') as any;\n        await modal.vm.$emit('update:modelValue', false);\n        expect((wrapper.vm as any).mostrarModalExcluirCompetencia).toBe(false);"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapa.spec.ts",
    "type": "line",
    "line": 739,
    "length": 1,
    "text": "// Expect no error clearing or service call",
    "context": "        const {wrapper} = createWrapper();\n        (wrapper.vm as any).codSubprocesso = null;\n        await (wrapper.vm as any).disponibilizarMapa({dataLimite: '2023-12-31', observacoes: 'Obs'});\n        // Expect no error clearing or service call\n    });\n});\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapaCoverage.spec.ts",
    "type": "line",
    "line": 8,
    "length": 1,
    "text": "// Mock router",
    "context": "import {useMapasStore} from '@/stores/mapas';\nimport {useSubprocessosStore} from '@/stores/subprocessos';\n\n// Mock router\nvi.mock(\"vue-router\", () => ({\n    useRouter: vi.fn(),\n    useRoute: vi.fn(() => ({params: {codProcesso: '1', siglaUnidade: 'TEST'}})),"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapaCoverage.spec.ts",
    "type": "line",
    "line": 58,
    "length": 1,
    "text": "// Call with invalid ID",
    "context": "\n        const mapasStore = useMapasStore(pinia);\n\n        // Call with invalid ID\n        await (wrapper.vm as any).removerAtividadeAssociada(999, 10);\n\n        expect(mapasStore.atualizarCompetencia).not.toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapaCoverage.spec.ts",
    "type": "line",
    "line": 87,
    "length": 1,
    "text": "// Trigger",
    "context": "\n        await wrapper.vm.$nextTick(); // Wait for mount\n\n        // Trigger\n        await (wrapper.vm as any).abrirModalImpacto();\n\n        expect(mapasStore.buscarImpactoMapa).not.toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapaCoverage.spec.ts",
    "type": "line",
    "line": 112,
    "length": 1,
    "text": "// Trigger",
    "context": "        (mapasStore.buscarImpactoMapa as any).mockResolvedValue(undefined);\n        (wrapper.vm as any).codSubprocesso = 456;\n\n        // Trigger\n        await (wrapper.vm as any).abrirModalImpacto();\n\n        expect(mapasStore.buscarImpactoMapa).toHaveBeenCalledWith(456);"
  },
  {
    "file": "frontend/src/views/__tests__/CadMapaCoverage.spec.ts",
    "type": "line",
    "line": 141,
    "length": 1,
    "text": "// Call",
    "context": "        const mapasStore = useMapasStore(pinia);\n        (wrapper.vm as any).codSubprocesso = 456;\n\n        // Call\n        await (wrapper.vm as any).removerAtividadeAssociada(1, 10);\n\n        expect(mapasStore.atualizarCompetencia).toHaveBeenCalledWith(456, 1, {"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 10,
    "length": 1,
    "text": "// Mock processoService",
    "context": "import {useUnidadesStore} from '@/stores/unidades';\nimport {getCommonMountOptions, setupComponentTest} from \"@/test-utils/componentTestHelpers\";\n\n// Mock processoService\nvi.mock('@/services/processoService', () => ({\n    criarProcesso: vi.fn(),\n    atualizarProcesso: vi.fn(),"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 17,
    "length": 1,
    "text": "// Mock router",
    "context": "    excluirProcesso: vi.fn(),\n}));\n\n// Mock router\nconst {mockPush, mockRoute} = vi.hoisted(() => {\n    return {\n        mockPush: vi.fn(),"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 42,
    "length": 1,
    "text": "// Mock child components",
    "context": "    };\n});\n\n// Mock child components\nconst ArvoreUnidadesStub = {\n    template: '<div><slot /></div>',\n    props: ['unidades', 'modelValue'],"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 112,
    "length": 1,
    "text": "// Importar o mock do service",
    "context": "        vi.clearAllMocks();\n        mockRoute.query = {};\n\n        // Importar o mock do service\n        processoService = await import('@/services/processoService');\n\n        // Mock window.scrollTo"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 115,
    "length": 1,
    "text": "// Mock window.scrollTo",
    "context": "        // Importar o mock do service\n        processoService = await import('@/services/processoService');\n\n        // Mock window.scrollTo\n        window.scrollTo = vi.fn();\n\n        // Suppress console.error"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 118,
    "length": 1,
    "text": "// Suppress console.error",
    "context": "        // Mock window.scrollTo\n        window.scrollTo = vi.fn();\n\n        // Suppress console.error\n        vi.spyOn(console, 'error').mockImplementation(() => {\n        });\n    });"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 136,
    "length": 1,
    "text": "// Initially disabled (empty fields)",
    "context": "        const salvarBtn = wrapper.find('[data-testid=\"btn-processo-salvar\"]');\n        const iniciarBtn = wrapper.find('[data-testid=\"btn-processo-iniciar\"]');\n\n        // Initially disabled (empty fields)\n        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(true);\n        expect((iniciarBtn.element as HTMLButtonElement).disabled).toBe(true);\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// Fill description",
    "context": "        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(true);\n        expect((iniciarBtn.element as HTMLButtonElement).disabled).toBe(true);\n\n        // Fill description\n        await wrapper.find('[data-testid=\"inp-processo-descricao\"]').setValue('Teste');\n        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(true);\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 144,
    "length": 1,
    "text": "// Fill date",
    "context": "        await wrapper.find('[data-testid=\"inp-processo-descricao\"]').setValue('Teste');\n        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(true);\n\n        // Fill date\n        await wrapper.find('[data-testid=\"inp-processo-data-limite\"]').setValue('2023-12-31');\n        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(true);\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 148,
    "length": 1,
    "text": "// Select units (modelValue for ArvoreUnidades)",
    "context": "        await wrapper.find('[data-testid=\"inp-processo-data-limite\"]').setValue('2023-12-31');\n        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(true);\n\n        // Select units (modelValue for ArvoreUnidades)\n        wrapper.vm.unidadesSelecionadas = [1];\n        await nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 152,
    "length": 1,
    "text": "// Still disabled because tipo is null",
    "context": "        wrapper.vm.unidadesSelecionadas = [1];\n        await nextTick();\n\n        // Still disabled because tipo is null\n        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(true);\n\n        // Select type"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 155,
    "length": 1,
    "text": "// Select type",
    "context": "        // Still disabled because tipo is null\n        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(true);\n\n        // Select type\n        wrapper.vm.tipo = 'MAPEAMENTO';\n        await nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 159,
    "length": 1,
    "text": "// Now it should be enabled",
    "context": "        wrapper.vm.tipo = 'MAPEAMENTO';\n        await nextTick();\n\n        // Now it should be enabled\n        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(false);\n        expect((iniciarBtn.element as HTMLButtonElement).disabled).toBe(false);\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 163,
    "length": 1,
    "text": "// Clear description again",
    "context": "        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(false);\n        expect((iniciarBtn.element as HTMLButtonElement).disabled).toBe(false);\n\n        // Clear description again\n        await wrapper.find('[data-testid=\"inp-processo-descricao\"]').setValue('');\n        expect((salvarBtn.element as HTMLButtonElement).disabled).toBe(true);\n    });"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 484,
    "length": 1,
    "text": "// --- New tests to improve coverage ---",
    "context": "        expect(wrapper.vm.fieldErrors.unidades).toBe('');\n    });\n\n    // --- New tests to improve coverage ---\n\n    it('shows loading spinner when units are loading', async () => {\n        const {wrapper} = createWrapper({"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 498,
    "length": 1,
    "text": "// Trigger alert manually or via error handling",
    "context": "\n    it('shows alert with multiple errors', async () => {\n        const {wrapper} = createWrapper();\n        // Trigger alert manually or via error handling\n        (wrapper.vm as any).mostrarAlerta('danger', 'Titulo', 'Corpo', ['Erro 1', 'Erro 2']);\n        await nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 509,
    "length": 1,
    "text": "// Mock slow promise",
    "context": "\n    it('shows saving spinner on button', async () => {\n        const {wrapper, processosStore} = createWrapper();\n        // Mock slow promise\n        processosStore.criarProcesso.mockImplementation(() => new Promise(resolve => setTimeout(resolve, 100)));\n\n        wrapper.vm.descricao = 'Teste';"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 560,
    "length": 1,
    "text": "// Mock document.querySelector to return a mock element with focus method",
    "context": "    it('focuses on the first invalid field when validation errors occur', async () => {\n        const {wrapper, processosStore} = createWrapper();\n\n        // Mock document.querySelector to return a mock element with focus method\n        const focusMock = vi.fn();\n        const mockElement = {focus: focusMock} as unknown as HTMLElement;\n        const querySelectorSpy = vi.spyOn(document, 'querySelector').mockReturnValue(mockElement);"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 583,
    "length": 1,
    "text": "// Wait for async operations and nextTick inside handleApiErrors",
    "context": "\n        await wrapper.find('[data-testid=\"btn-processo-salvar\"]').trigger('click');\n\n        // Wait for async operations and nextTick inside handleApiErrors\n        await flushPromises();\n        // The focus logic is inside a nextTick, so we need to wait for it\n        await nextTick();"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcesso.spec.ts",
    "type": "line",
    "line": 585,
    "length": 1,
    "text": "// The focus logic is inside a nextTick, so we need to wait for it",
    "context": "\n        // Wait for async operations and nextTick inside handleApiErrors\n        await flushPromises();\n        // The focus logic is inside a nextTick, so we need to wait for it\n        await nextTick();\n        await nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 9,
    "length": 1,
    "text": "// Mock router",
    "context": "import {useUnidadesStore} from '@/stores/unidades';\nimport {getCommonMountOptions, setupComponentTest} from \"@/test-utils/componentTestHelpers\";\n\n// Mock router\nconst {mockPush, mockRoute} = vi.hoisted(() => {\n    return {\n        mockPush: vi.fn(),"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 34,
    "length": 1,
    "text": "// Components stubs",
    "context": "    };\n});\n\n// Components stubs\nconst ArvoreUnidadesStub = {\n    template: '<div><slot /></div>',\n    props: ['unidades', 'modelValue'],"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 99,
    "length": 1,
    "text": "// Silenciar console.error para evitar ru√≠do nos testes que disparam erros esperados",
    "context": "        vi.clearAllMocks();\n        mockRoute.query = {};\n        window.scrollTo = vi.fn();\n        // Silenciar console.error para evitar ru√≠do nos testes que disparam erros esperados\n        vi.spyOn(console, 'error').mockImplementation(() => {\n        });\n    });"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 111,
    "length": 1,
    "text": "// Setup state for error",
    "context": "    it('handles mixed errors (field + generic) correctly in handleApiErrors', async () => {\n        const {wrapper, processosStore} = createWrapper();\n\n        // Setup state for error\n        processosStore.criarProcesso.mockImplementation(async () => {\n            processosStore.lastError = {\n                message: 'Erro misto',"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 128,
    "length": 1,
    "text": "// Call method directly",
    "context": "        wrapper.vm.unidadesSelecionadas = [1];\n        await nextTick();\n\n        // Call method directly\n        await (wrapper.vm as any).salvarProcesso();\n        await flushPromises();\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 140,
    "length": 1,
    "text": "// Fill form using setValue to ensure reactivity triggers validation",
    "context": "    it('handles error creating process during initiation flow (without existing process)', async () => {\n        const {wrapper, processosStore} = createWrapper();\n\n        // Fill form using setValue to ensure reactivity triggers validation\n        await wrapper.find('[data-testid=\"inp-processo-descricao\"]').setValue('Teste Inicio');\n        wrapper.vm.tipo = 'MAPEAMENTO';\n        wrapper.vm.unidadesSelecionadas = [1];"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 149,
    "length": 1,
    "text": "// Configure error on create",
    "context": "        await (wrapper.vm as any).abrirModalConfirmacao();\n        expect(wrapper.vm.mostrarModalConfirmacao).toBe(true);\n\n        // Configure error on create\n        processosStore.criarProcesso.mockRejectedValue(new Error('Create Error'));\n        processosStore.lastError = {message: 'Failed to create'};\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 153,
    "length": 1,
    "text": "// Confirm initiation",
    "context": "        processosStore.criarProcesso.mockRejectedValue(new Error('Create Error'));\n        processosStore.lastError = {message: 'Failed to create'};\n\n        // Confirm initiation\n        const modal = wrapper.findComponent({name: 'ModalConfirmacao'});\n        await modal.vm.$emit('confirmar');\n        await flushPromises();"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 175,
    "length": 1,
    "text": "// Configure success on create, failure on start",
    "context": "\n        await (wrapper.vm as any).abrirModalConfirmacao();\n\n        // Configure success on create, failure on start\n        processosStore.criarProcesso.mockResolvedValue({codigo: 777});\n        processosStore.iniciarProcesso.mockRejectedValue(new Error('Start Error'));\n        processosStore.lastError = {message: 'Failed to start'};"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 194,
    "length": 1,
    "text": "// Setup process being edited",
    "context": "    it('opens and confirms removal modal', async () => {\n        const {wrapper, processosStore} = createWrapper();\n\n        // Setup process being edited\n        (wrapper.vm as any).processoEditando = {codigo: 123, descricao: 'Processo Teste'};\n        await nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 198,
    "length": 1,
    "text": "// Open modal",
    "context": "        (wrapper.vm as any).processoEditando = {codigo: 123, descricao: 'Processo Teste'};\n        await nextTick();\n\n        // Open modal\n        await (wrapper.vm as any).abrirModalRemocao();\n        expect((wrapper.vm as any).mostrarModalRemocao).toBe(true);\n"
  },
  {
    "file": "frontend/src/views/__tests__/CadProcessoCoverage.spec.ts",
    "type": "line",
    "line": 202,
    "length": 1,
    "text": "// Confirm removal",
    "context": "        await (wrapper.vm as any).abrirModalRemocao();\n        expect((wrapper.vm as any).mostrarModalRemocao).toBe(true);\n\n        // Confirm removal\n        processosStore.removerProcesso.mockResolvedValue(undefined);\n\n        await (wrapper.vm as any).confirmarRemocao();"
  },
  {
    "file": "frontend/src/views/__tests__/ConclusaoDiagnostico.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mocks",
    "context": "import {useFeedbackStore} from '@/stores/feedback';\nimport {getCommonMountOptions, setupComponentTest} from '@/test-utils/componentTestHelpers';\n\n// Mocks\nconst mockPush = vi.fn();\nconst mockRouteParams = {value: {codSubprocesso: '10'}};\n"
  },
  {
    "file": "frontend/src/views/__tests__/ConclusaoDiagnostico.spec.ts",
    "type": "line",
    "line": 72,
    "length": 1,
    "text": "// Import service after mocks are cleared",
    "context": "        vi.clearAllMocks();\n        mockRouteParams.value = {codSubprocesso: '10'};\n\n        // Import service after mocks are cleared\n        const diagMod = await import('@/services/diagnosticoService');\n        diagnosticoService = diagMod.diagnosticoService;\n"
  },
  {
    "file": "frontend/src/views/__tests__/ConclusaoDiagnostico.spec.ts",
    "type": "line",
    "line": 76,
    "length": 1,
    "text": "// Resposta v√°lida padr√£o",
    "context": "        const diagMod = await import('@/services/diagnosticoService');\n        diagnosticoService = diagMod.diagnosticoService;\n\n        // Resposta v√°lida padr√£o\n        (diagnosticoService.buscarDiagnostico as any).mockResolvedValue(mockDiagnosticoPronto);\n        (diagnosticoService.concluirDiagnostico as any).mockResolvedValue({});\n    });"
  },
  {
    "file": "frontend/src/views/__tests__/ConclusaoDiagnostico.spec.ts",
    "type": "line",
    "line": 106,
    "length": 1,
    "text": "// Desabilitado inicialmente",
    "context": "\n        expect(ctx.wrapper!.text()).toContain('Pend√™ncias existem');\n\n        // Desabilitado inicialmente\n        expect(ctx.wrapper!.vm.botaoHabilitado).toBe(false);\n\n        // Justificativa curta demais"
  },
  {
    "file": "frontend/src/views/__tests__/ConclusaoDiagnostico.spec.ts",
    "type": "line",
    "line": 109,
    "length": 1,
    "text": "// Justificativa curta demais",
    "context": "        // Desabilitado inicialmente\n        expect(ctx.wrapper!.vm.botaoHabilitado).toBe(false);\n\n        // Justificativa curta demais\n        const textarea = ctx.wrapper!.find('textarea');\n        await textarea.setValue('Curto');\n        expect(ctx.wrapper!.vm.botaoHabilitado).toBe(false);"
  },
  {
    "file": "frontend/src/views/__tests__/ConclusaoDiagnostico.spec.ts",
    "type": "line",
    "line": 114,
    "length": 1,
    "text": "// Justificativa v√°lida",
    "context": "        await textarea.setValue('Curto');\n        expect(ctx.wrapper!.vm.botaoHabilitado).toBe(false);\n\n        // Justificativa v√°lida\n        await textarea.setValue('Texto de justificativa v√°lido aqui');\n        expect(ctx.wrapper!.vm.botaoHabilitado).toBe(true);\n    });"
  },
  {
    "file": "frontend/src/views/__tests__/ConfiguracoesView.spec.ts",
    "type": "line",
    "line": 8,
    "length": 1,
    "text": "// Mock dependencies",
    "context": "import {usePerfilStore} from '@/stores/perfil';\nimport * as administradorService from '@/services/administradorService';\n\n// Mock dependencies\nvi.mock('@/services/administradorService', () => ({\n    listarAdministradores: vi.fn(),\n    adicionarAdministrador: vi.fn(),"
  },
  {
    "file": "frontend/src/views/__tests__/HistoricoViewCoverage.spec.ts",
    "type": "line",
    "line": 19,
    "length": 1,
    "text": "// We mock push but we need the router to be functional for initial render",
    "context": "            ],\n        });\n\n        // We mock push but we need the router to be functional for initial render\n        const pushSpy = vi.spyOn(router, \"push\");\n\n        const wrapper = mount(HistoricoView, {"
  },
  {
    "file": "frontend/src/views/__tests__/HistoricoViewCoverage.spec.ts",
    "type": "line",
    "line": 53,
    "length": 1,
    "text": "// Find the row",
    "context": "        const store = useProcessosStore();\n        expect(store.processosFinalizados).toHaveLength(1);\n\n        // Find the row\n        const row = wrapper.find(\"tbody tr.cursor-pointer\");\n        expect(row.exists()).toBe(true);\n        expect(row.text()).toContain(\"Processo Teste\");"
  },
  {
    "file": "frontend/src/views/__tests__/HistoricoViewCoverage.spec.ts",
    "type": "line",
    "line": 58,
    "length": 1,
    "text": "// Check accessibility attributes (expecting failure)",
    "context": "        expect(row.exists()).toBe(true);\n        expect(row.text()).toContain(\"Processo Teste\");\n\n        // Check accessibility attributes (expecting failure)\n        expect(row.attributes(\"tabindex\")).toBe(\"0\");\n\n        // Simulate keyboard interaction"
  },
  {
    "file": "frontend/src/views/__tests__/HistoricoViewCoverage.spec.ts",
    "type": "line",
    "line": 61,
    "length": 1,
    "text": "// Simulate keyboard interaction",
    "context": "        // Check accessibility attributes (expecting failure)\n        expect(row.attributes(\"tabindex\")).toBe(\"0\");\n\n        // Simulate keyboard interaction\n        await row.trigger(\"keydown.enter\");\n        expect(pushSpy).toHaveBeenCalledWith(\"/processo/1\");\n"
  },
  {
    "file": "frontend/src/views/__tests__/MonitoramentoDiagnostico.spec.ts",
    "type": "line",
    "line": 7,
    "length": 1,
    "text": "// Mocks",
    "context": "import {useFeedbackStore} from '@/stores/feedback';\nimport {getCommonMountOptions, setupComponentTest} from '@/test-utils/componentTestHelpers';\n\n// Mocks\nconst mockRouteParams = {value: {codSubprocesso: '10'}};\n\nvi.mock('vue-router', async (importOriginal) => {"
  },
  {
    "file": "frontend/src/views/__tests__/MonitoramentoDiagnostico.spec.ts",
    "type": "line",
    "line": 67,
    "length": 1,
    "text": "// Import service after mocks are cleared",
    "context": "        vi.clearAllMocks();\n        mockRouteParams.value = {codSubprocesso: '10'};\n\n        // Import service after mocks are cleared\n        const diagMod = await import('@/services/diagnosticoService');\n        diagnosticoService = diagMod.diagnosticoService;\n"
  },
  {
    "file": "frontend/src/views/__tests__/MonitoramentoDiagnostico.spec.ts",
    "type": "line",
    "line": 90,
    "length": 1,
    "text": "// 1 conclu√≠do, 1 pendente = 50%",
    "context": "    it('exibe cards de resumo corretamente', async () => {\n        await mountComponent();\n\n        // 1 conclu√≠do, 1 pendente = 50%\n        expect(ctx.wrapper!.text()).toContain('50%');\n        expect(ctx.wrapper!.text()).toContain('1');\n    });"
  },
  {
    "file": "frontend/src/views/__tests__/MonitoramentoDiagnostico.spec.ts",
    "type": "line",
    "line": 128,
    "length": 1,
    "text": "// Bootstrap-vue-next adds disabled=\"\" when true, so check for presence",
    "context": "        expect(btnOcupacoes.attributes('disabled')).toBeUndefined();\n\n        const btnConcluir = ctx.wrapper!.find('[data-testid=\"btn-concluir-diagnostico\"]');\n        // Bootstrap-vue-next adds disabled=\"\" when true, so check for presence\n        const disabledAttr = btnConcluir.attributes('disabled');\n        expect(disabledAttr === undefined || disabledAttr === '').toBeTruthy();\n    });"
  },
  {
    "file": "frontend/src/views/__tests__/OcupacoesCriticasDiagnostico.spec.ts",
    "type": "line",
    "line": 8,
    "length": 1,
    "text": "// Mocks",
    "context": "import {getCommonMountOptions, setupComponentTest} from \"@/test-utils/componentTestHelpers\";\nimport {useFeedbackStore} from '@/stores/feedback';\n\n// Mocks\nconst {mockRouteParams} = vi.hoisted(() => {\n    return {mockRouteParams: {value: {codSubprocesso: '10'}}};\n});"
  },
  {
    "file": "frontend/src/views/__tests__/OcupacoesCriticasDiagnostico.spec.ts",
    "type": "line",
    "line": 108,
    "length": 1,
    "text": "// Should show Servidor 1",
    "context": "        context.wrapper = createWrapper();\n        await flushPromises();\n\n        // Should show Servidor 1\n        expect(context.wrapper.text()).toContain('Servidor 1');\n        expect(context.wrapper.text()).toContain('Comp 1');\n"
  },
  {
    "file": "frontend/src/views/__tests__/OcupacoesCriticasDiagnostico.spec.ts",
    "type": "line",
    "line": 112,
    "length": 1,
    "text": "// Should NOT show Servidor 2 (no gaps)",
    "context": "        expect(context.wrapper.text()).toContain('Servidor 1');\n        expect(context.wrapper.text()).toContain('Comp 1');\n\n        // Should NOT show Servidor 2 (no gaps)\n        expect(context.wrapper.text()).not.toContain('Servidor 2');\n        // Should NOT show Comp 2 (gap 0) for Servidor 1\n        expect(context.wrapper.text()).not.toContain('Comp 2');"
  },
  {
    "file": "frontend/src/views/__tests__/OcupacoesCriticasDiagnostico.spec.ts",
    "type": "line",
    "line": 114,
    "length": 1,
    "text": "// Should NOT show Comp 2 (gap 0) for Servidor 1",
    "context": "\n        // Should NOT show Servidor 2 (no gaps)\n        expect(context.wrapper.text()).not.toContain('Servidor 2');\n        // Should NOT show Comp 2 (gap 0) for Servidor 1\n        expect(context.wrapper.text()).not.toContain('Comp 2');\n    });\n"
  },
  {
    "file": "frontend/src/views/__tests__/OcupacoesCriticasDiagnostico.spec.ts",
    "type": "line",
    "line": 124,
    "length": 1,
    "text": "// Simulate selection",
    "context": "\n        const select = context.wrapper.find('select');\n\n        // Simulate selection\n        await select.setValue('AC'); // 'A capacitar'\n\n        expect(diagnosticoService.salvarOcupacao).toHaveBeenCalledWith(10, '111', 1, 'AC');"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 11,
    "length": 1,
    "text": "// Define mocks first",
    "context": "import {Perfil, SituacaoSubprocesso} from \"@/types/tipos\";\nimport {nextTick} from \"vue\";\n\n// Define mocks first\nconst mocks = vi.hoisted(() => ({\n    push: vi.fn(),\n}));"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 16,
    "length": 1,
    "text": "// Mock router",
    "context": "    push: vi.fn(),\n}));\n\n// Mock router\nvi.mock(\"vue-router\", () => ({\n    useRoute: () => ({\n        params: {"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 36,
    "length": 1,
    "text": "// Mock services that are called DIRECTLY by the component",
    "context": "    createMemoryHistory: vi.fn(),\n}));\n\n// Mock services that are called DIRECTLY by the component\nvi.mock(\"@/services/subprocessoService\", () => ({\n    aceitarCadastroEmBloco: vi.fn(),\n    aceitarValidacaoEmBloco: vi.fn(),"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 45,
    "length": 1,
    "text": "// Stubs definition",
    "context": "    disponibilizarMapaEmBloco: vi.fn(),\n}));\n\n// Stubs definition\nconst ProcessoAcoesStub = {\n    name: \"ProcessoAcoes\",\n    template: '<div data-testid=\"processo-acoes\"></div>',"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 97,
    "length": 1,
    "text": "// eslint-disable-next-line @typescript-eslint/no-unused-vars",
    "context": "    let processosStore: any;\n    let feedbackStore: any;\n    let perfilStore: any;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    let router: any;\n\n    const commonStubs = {"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 172,
    "length": 1,
    "text": "// Clear stub mocks history",
    "context": "\n    beforeEach(() => {\n        vi.clearAllMocks();\n        // Clear stub mocks history\n        modalSpies.abrir.mockClear();\n        modalSpies.fechar.mockClear();\n        modalSpies.setErro.mockClear();"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 177,
    "length": 1,
    "text": "// Reset router mock push spy",
    "context": "        modalSpies.fechar.mockClear();\n        modalSpies.setErro.mockClear();\n        modalSpies.setProcessando.mockClear();\n        // Reset router mock push spy\n        mocks.push.mockClear();\n    });\n"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 220,
    "length": 1,
    "text": "// Mocking computed getters by manipulating state they depend on",
    "context": "        perfilStore = usePerfilStore();\n        processosStore = useProcessosStore();\n\n        // Mocking computed getters by manipulating state they depend on\n        perfilStore.$patch({perfis: [Perfil.GESTOR, Perfil.ADMIN]});\n        processosStore.$patch({processoDetalhe: mockProcesso});\n"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 227,
    "length": 1,
    "text": "// Check if buttons exist directly as the container class might have changed",
    "context": "        await nextTick();\n        await flushPromises();\n\n        // Check if buttons exist directly as the container class might have changed\n        const btnAceitar = wrapper.find(\"button.btn-success\");\n        expect(btnAceitar.exists()).toBe(true);\n        expect(btnAceitar.text()).toContain(\"Aceitar em bloco\");"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 232,
    "length": 1,
    "text": "// Homologar",
    "context": "        expect(btnAceitar.exists()).toBe(true);\n        expect(btnAceitar.text()).toContain(\"Aceitar em bloco\");\n\n        // Homologar\n        const btnHomologar = wrapper.find(\"button.btn-warning\");\n        expect(btnHomologar.exists()).toBe(true);\n"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 236,
    "length": 1,
    "text": "// Disponibilizar",
    "context": "        const btnHomologar = wrapper.find(\"button.btn-warning\");\n        expect(btnHomologar.exists()).toBe(true);\n\n        // Disponibilizar\n        const btnDisponibilizar = wrapper.find(\"button.btn-info\");\n        expect(btnDisponibilizar.exists()).toBe(true);\n    });"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 261,
    "length": 1,
    "text": "// --- Testes para Aceitar em Bloco ---",
    "context": "        expect(modal.props(\"titulo\")).toBe(\"Aceitar em Bloco\");\n    });\n\n    // --- Testes para Aceitar em Bloco ---\n\n    it(\"deve executar a√ß√£o em bloco com sucesso (Aceitar Cadastro)\", async () => {\n        wrapper = createWrapper();"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 278,
    "length": 1,
    "text": "// Simular confirma√ß√£o do modal com ID 101 (Mapeamento Cadastro Disponibilizado)",
    "context": "        const modal = wrapper.findComponent(ModalAcaoBlocoStub);\n        await wrapper.find(\"button.btn-success\").trigger(\"click\"); // Abrir modal 'aceitar'\n\n        // Simular confirma√ß√£o do modal com ID 101 (Mapeamento Cadastro Disponibilizado)\n        const dadosConfirmacao = {ids: [101]};\n        await modal.vm.$emit(\"confirmar\", dadosConfirmacao);\n"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 303,
    "length": 1,
    "text": "// Simular confirma√ß√£o com ID 103 (Mapa Validado)",
    "context": "        const modal = wrapper.findComponent(ModalAcaoBlocoStub);\n        await wrapper.find(\"button.btn-success\").trigger(\"click\"); // Abrir modal 'aceitar'\n\n        // Simular confirma√ß√£o com ID 103 (Mapa Validado)\n        const dadosConfirmacao = {ids: [103]};\n        await modal.vm.$emit(\"confirmar\", dadosConfirmacao);\n"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 310,
    "length": 1,
    "text": "// --- Testes para Homologar em Bloco ---",
    "context": "        expect(processosStore.executarAcaoBloco).toHaveBeenCalledWith('aceitar', [103], undefined);\n    });\n\n    // --- Testes para Homologar em Bloco ---\n\n    it(\"deve executar a√ß√£o em bloco com sucesso (Homologar Cadastro)\", async () => {\n        wrapper = createWrapper();"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 325,
    "length": 1,
    "text": "// ID 101 -> Cadastro Disponibilizado",
    "context": "        const modal = wrapper.findComponent(ModalAcaoBlocoStub);\n        await wrapper.find(\"button.btn-warning\").trigger(\"click\"); // Abrir modal 'homologar'\n\n        // ID 101 -> Cadastro Disponibilizado\n        await modal.vm.$emit(\"confirmar\", {ids: [101]});\n\n        expect(processosStore.executarAcaoBloco).toHaveBeenCalledWith('homologar', [101], undefined);"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 344,
    "length": 1,
    "text": "// ID 103 -> Mapa Validado",
    "context": "        const modal = wrapper.findComponent(ModalAcaoBlocoStub);\n        await wrapper.find(\"button.btn-warning\").trigger(\"click\"); // Abrir modal 'homologar'\n\n        // ID 103 -> Mapa Validado\n        await modal.vm.$emit(\"confirmar\", {ids: [103]});\n\n        expect(processosStore.executarAcaoBloco).toHaveBeenCalledWith('homologar', [103], undefined);"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 350,
    "length": 1,
    "text": "// --- Teste para Disponibilizar em Bloco ---",
    "context": "        expect(processosStore.executarAcaoBloco).toHaveBeenCalledWith('homologar', [103], undefined);\n    });\n\n    // --- Teste para Disponibilizar em Bloco ---\n\n    it(\"deve executar a√ß√£o em bloco com sucesso (Disponibilizar)\", async () => {\n        wrapper = createWrapper();"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 365,
    "length": 1,
    "text": "// ID 104 -> Mapa Criado",
    "context": "        const modal = wrapper.findComponent(ModalAcaoBlocoStub);\n        await wrapper.find(\"button.btn-info\").trigger(\"click\"); // Abrir modal 'disponibilizar'\n\n        // ID 104 -> Mapa Criado\n        await modal.vm.$emit(\"confirmar\", {ids: [104], dataLimite: '2024-12-31'});\n\n        expect(processosStore.executarAcaoBloco).toHaveBeenCalledWith('disponibilizar', [104], '2024-12-31');"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 383,
    "length": 1,
    "text": "// Mock implementation of the action to throw error",
    "context": "        await flushPromises();\n\n        const errorMsg = \"Falha ao aceitar\";\n        // Mock implementation of the action to throw error\n        processosStore.executarAcaoBloco.mockRejectedValue(new Error(errorMsg));\n\n        const modal = wrapper.findComponent(ModalAcaoBlocoStub);"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 414,
    "length": 1,
    "text": "// ID inexistente",
    "context": "        const modal = wrapper.findComponent(ModalAcaoBlocoStub);\n        await wrapper.find(\"button.btn-success\").trigger(\"click\");\n\n        // ID inexistente\n        await modal.vm.$emit(\"confirmar\", {ids: [9999]});\n\n        expect(modalSpies.setErro).toHaveBeenCalledWith(errorMsg);"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 461,
    "length": 1,
    "text": "// Servidor - o controle de acesso agora √© no backend, n√£o no frontend",
    "context": "        perfilStore = usePerfilStore();\n        processosStore = useProcessosStore();\n\n        // Servidor - o controle de acesso agora √© no backend, n√£o no frontend\n        perfilStore.$patch({\n            perfilSelecionado: Perfil.SERVIDOR,\n            unidadeSelecionada: 999,"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 485,
    "length": 1,
    "text": "// --- Finaliza√ß√£o ---",
    "context": "        });\n    });\n\n    // --- Finaliza√ß√£o ---\n\n    it(\"deve abrir modal de finaliza√ß√£o de processo\", async () => {\n        wrapper = createWrapper();"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 530,
    "length": 1,
    "text": "// Force error on the spy",
    "context": "\n        processosStore.$patch({processoDetalhe: mockProcesso});\n\n        // Force error on the spy\n        processosStore.finalizarProcesso.mockRejectedValue(new Error(\"Erro finaliza√ß√£o\"));\n\n        await nextTick();"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 584,
    "length": 1,
    "text": "// Acessamos as computeds via wrapper.vm",
    "context": "        processosStore.$patch({processoDetalhe: mockProcesso});\n        await flushPromises();\n\n        // Acessamos as computeds via wrapper.vm\n        (wrapper.vm as any).acaoBlocoAtual = \"invalido\";\n        expect((wrapper.vm as any).tituloModalBloco).toBe(\"\");\n        expect((wrapper.vm as any).textoModalBloco).toBe(\"\");"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 611,
    "length": 1,
    "text": "// Mudamos para acao que aceita NAO_INICIADO",
    "context": "        };\n        processosStore.$patch({processoDetalhe: processoComFilhos});\n\n        // Mudamos para acao que aceita NAO_INICIADO\n        (wrapper.vm as any).acaoBlocoAtual = 'disponibilizar';\n        await nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoView.spec.ts",
    "type": "line",
    "line": 615,
    "length": 1,
    "text": "// As duas unidades devem ser eleg√≠veis para disponibilizar",
    "context": "        (wrapper.vm as any).acaoBlocoAtual = 'disponibilizar';\n        await nextTick();\n\n        // As duas unidades devem ser eleg√≠veis para disponibilizar\n        expect((wrapper.vm as any).unidadesElegiveis).toHaveLength(2);\n    });\n});"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoViewCoverage.spec.ts",
    "type": "line",
    "line": 10,
    "length": 1,
    "text": "// Mocks",
    "context": "import {createTestingPinia} from \"@pinia/testing\";\nimport {SituacaoSubprocesso, TipoProcesso} from \"@/types/tipos\";\n\n// Mocks\nconst mocks = vi.hoisted(() => ({\n    push: vi.fn(),\n    mockRoute: {params: {codProcesso: \"1\"}, query: {}}"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoViewCoverage.spec.ts",
    "type": "line",
    "line": 106,
    "length": 1,
    "text": "// Ensure action returns promise",
    "context": "        }\n\n        processosStore = useProcessosStore(pinia) as any;\n        // Ensure action returns promise\n        (processosStore.buscarContextoCompleto as any).mockResolvedValue({});\n        (processosStore.finalizarProcesso as any).mockResolvedValue({});\n        (processosStore.executarAcaoBloco as any).mockResolvedValue({});"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoViewCoverage.spec.ts",
    "type": "line",
    "line": 187,
    "length": 1,
    "text": "// Tenta abrir unidade 10 ‚Äî agora permitido, backend controla acesso",
    "context": "        });\n        await flushPromises();\n\n        // Tenta abrir unidade 10 ‚Äî agora permitido, backend controla acesso\n        (wrapper.vm as any).abrirDetalhesUnidade({clickable: true, codigo: 10, sigla: \"U1\", unidadeAtual: \"U1\"});\n\n        expect(mocks.push).toHaveBeenCalledWith(expect.objectContaining({"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoViewCoverage.spec.ts",
    "type": "line",
    "line": 205,
    "length": 1,
    "text": "// Abre unidade 10",
    "context": "        });\n        await flushPromises();\n\n        // Abre unidade 10\n        (wrapper.vm as any).abrirDetalhesUnidade({clickable: true, codigo: 10, sigla: \"U1\"});\n\n        expect(mocks.push).toHaveBeenCalledWith(expect.objectContaining({"
  },
  {
    "file": "frontend/src/views/__tests__/ProcessoViewCoverage.spec.ts",
    "type": "line",
    "line": 229,
    "length": 1,
    "text": "// Trigger action",
    "context": "\n        const modal = wrapper.findComponent({name: 'ModalAcaoBloco'});\n\n        // Trigger action\n        (wrapper.vm as any).acaoBlocoAtual = 'aceitar';\n        (processosStore.executarAcaoBloco as any).mockRejectedValue(new Error(\"Erro bloco\"));\n"
  },
  {
    "file": "frontend/src/views/__tests__/Relatorios.spec.ts",
    "type": "line",
    "line": 9,
    "length": 1,
    "text": "// Stubs",
    "context": "import {useMapasStore} from \"@/stores/mapas\";\nimport {nextTick} from \"vue\";\n\n// Stubs\nconst PageHeaderStub = {\n    template: '<div data-testid=\"page-header\">{{ title }}</div>',\n    props: ['title']"
  },
  {
    "file": "frontend/src/views/__tests__/Relatorios.spec.ts",
    "type": "line",
    "line": 85,
    "length": 1,
    "text": "// Trigger onMounted",
    "context": "        wrapper = createWrapper(initialState);\n        processosStore = useProcessosStore();\n\n        // Trigger onMounted\n        await flushPromises();\n\n        expect(processosStore.buscarProcessosPainel).toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/views/__tests__/Relatorios.spec.ts",
    "type": "line",
    "line": 155,
    "length": 1,
    "text": "// Default has 4 diagnosticos",
    "context": "        wrapper = createWrapper();\n        const filtros = wrapper.findComponent(RelatorioFiltrosStub);\n\n        // Default has 4 diagnosticos\n        await filtros.vm.$emit('update:tipo', 'MAPEAMENTO'); // Not DIAGNOSTICO\n        await nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/Relatorios.spec.ts",
    "type": "line",
    "line": 167,
    "length": 1,
    "text": "// Mock diagnosticos in useRelatorios.ts have dates in Aug/Sep 2024",
    "context": "        wrapper = createWrapper();\n        const filtros = wrapper.findComponent(RelatorioFiltrosStub);\n\n        // Mock diagnosticos in useRelatorios.ts have dates in Aug/Sep 2024\n        await filtros.vm.$emit('update:dataInicio', '2024-09-01');\n        await nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/RelatoriosView.spec.ts",
    "type": "line",
    "line": 10,
    "length": 1,
    "text": "// Mock URL.createObjectURL",
    "context": "import {createTestingPinia} from '@pinia/testing';\nimport {getCommonMountOptions, setupComponentTest} from '@/test-utils/componentTestHelpers';\n\n// Mock URL.createObjectURL\nglobal.URL.createObjectURL = vi.fn(() => 'blob:mock-url');\n\ndescribe('Relatorios.vue', () => {"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 13,
    "length": 1,
    "text": "// Mock child components",
    "context": "import * as processoService from '@/services/processoService';\nimport * as useAcessoModule from '@/composables/useAcesso';\n\n// Mock child components\nconst SubprocessoHeaderStub = {\n    template: '<div data-testid=\"subprocesso-header\"></div>',\n    props: ['podeAlterarDataLimite', 'processoDescricao', 'situacao', 'unidadeAtual'],"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 33,
    "length": 1,
    "text": "// Mock Services",
    "context": "    props: ['movimentacoes']\n};\n\n// Mock Services\nvi.mock('@/services/processoService', () => ({\n    reabrirCadastro: vi.fn(),\n    reabrirRevisaoCadastro: vi.fn(),"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 100,
    "length": 1,
    "text": "// Helper to mount component with specific setup",
    "context": "        vi.clearAllMocks();\n    });\n\n    // Helper to mount component with specific setup\n    const mountComponent = (overrideMockSubprocesso?: Partial<typeof mockSubprocesso>, accessOverrides: Partial<Record<string, any>> = {}) => {\n        const subprocessoToUse = overrideMockSubprocesso ? {...mockSubprocesso, ...overrideMockSubprocesso} : mockSubprocesso;\n"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 132,
    "length": 1,
    "text": "// Mock implementations",
    "context": "        const feedbackStore = useFeedbackStore(pinia);\n        const processosStore = useProcessosStore(pinia);\n\n        // Mock implementations\n        (store.buscarSubprocessoPorProcessoEUnidade as any).mockImplementation(async () => 10);\n        (store.buscarSubprocessoDetalhe as any).mockImplementation(async () => {\n            store.subprocessoDetalhe = subprocessoToUse as any;"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 141,
    "length": 1,
    "text": "// Mock store actions that call services",
    "context": "        (mapaStore.buscarMapaCompleto as any).mockResolvedValue({});\n        (store.alterarDataLimiteSubprocesso as any).mockResolvedValue({});\n\n        // Mock store actions that call services\n        (store.reabrirCadastro as any).mockImplementation(async (cod: number, just: string) => {\n            try {\n                await (processoService.reabrirCadastro as any)(cod, just);"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 163,
    "length": 1,
    "text": "// Mock processos store action that calls service",
    "context": "            }\n        });\n\n        // Mock processos store action that calls service\n        (processosStore.enviarLembrete as any).mockImplementation(async (codProcesso: number, codUnidade: number) => {\n            try {\n                await (processoService.enviarLembrete as any)(codProcesso, codUnidade);"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 242,
    "length": 1,
    "text": "// Open modal",
    "context": "        await flushPromises();\n        await (wrapper.vm as any).$nextTick();\n\n        // Open modal\n        (wrapper.vm as any).modals.open('alterarDataLimite');\n        await (wrapper.vm as any).$nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 246,
    "length": 1,
    "text": "// Confirm",
    "context": "        (wrapper.vm as any).modals.open('alterarDataLimite');\n        await (wrapper.vm as any).$nextTick();\n\n        // Confirm\n        const modal = wrapper.findComponent(SubprocessoModalStub);\n        await modal.vm.$emit('confirmar-alteracao', '2024-01-01');\n"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 274,
    "length": 1,
    "text": "// Trigger Reabertura",
    "context": "        const {wrapper, feedbackStore, store} = mountComponent();\n        await flushPromises();\n\n        // Trigger Reabertura\n        const header = wrapper.findComponent(SubprocessoHeaderStub);\n        await header.vm.$emit('reabrir-cadastro');\n        await (wrapper.vm as any).$nextTick();"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 282,
    "length": 1,
    "text": "// Preencher justificativa",
    "context": "        expect((wrapper.vm as any).tipoReabertura).toBe('cadastro');\n        expect((wrapper.vm as any).modals.modals.reabrir.value.isOpen).toBe(true);\n\n        // Preencher justificativa\n        const textarea = wrapper.find('textarea');\n        await textarea.setValue('Erro no preenchimento');\n"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 286,
    "length": 1,
    "text": "// Confirmar",
    "context": "        const textarea = wrapper.find('textarea');\n        await textarea.setValue('Erro no preenchimento');\n\n        // Confirmar\n        const btn = wrapper.find('[data-testid=\"btn-confirmar-reabrir\"]');\n        await btn.trigger('click');\n        await flushPromises();"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoView.spec.ts",
    "type": "line",
    "line": 322,
    "length": 1,
    "text": "// O bot√£o deve estar desabilitado se a justificativa for vazia",
    "context": "        const header = wrapper.findComponent(SubprocessoHeaderStub);\n        await header.vm.$emit('reabrir-cadastro');\n\n        // O bot√£o deve estar desabilitado se a justificativa for vazia\n        const btn = wrapper.find('[data-testid=\"btn-confirmar-reabrir\"]');\n        expect(btn.attributes('disabled')).toBeDefined();\n        expect(processoService.reabrirCadastro).not.toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoViewCoverage.spec.ts",
    "type": "line",
    "line": 10,
    "length": 1,
    "text": "// Mock child components to avoid rendering them and their dependencies",
    "context": "import {BAlert, BSpinner} from 'bootstrap-vue-next';\nimport * as useAcessoModule from '@/composables/useAcesso';\n\n// Mock child components to avoid rendering them and their dependencies\nconst SubprocessoHeaderStub = {template: '<div />'};\nconst SubprocessoCardsStub = {template: '<div />'};\nconst SubprocessoModalStub = {template: '<div />'};"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoViewCoverage.spec.ts",
    "type": "line",
    "line": 151,
    "length": 1,
    "text": "// Trigger manually",
    "context": "            props: {codProcesso: 1, siglaUnidade: 'TEST'}\n        });\n\n        // Trigger manually\n        await (wrapper.vm as any).confirmarAlteracaoDataLimite('');\n\n        expect(store.alterarDataLimiteSubprocesso).not.toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoViewCoverage.spec.ts",
    "type": "line",
    "line": 181,
    "length": 1,
    "text": "// Mock returning an ID to set codSubprocesso",
    "context": "        } as any);\n\n        const store = useSubprocessosStore(pinia);\n        // Mock returning an ID to set codSubprocesso\n        (store.buscarSubprocessoPorProcessoEUnidade as any).mockResolvedValue(123);\n        const feedbackStore = useFeedbackStore(pinia);\n"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoViewCoverage.spec.ts",
    "type": "line",
    "line": 200,
    "length": 1,
    "text": "// Wait for onMounted to set codSubprocesso",
    "context": "            props: {codProcesso: 1, siglaUnidade: 'TEST'}\n        });\n\n        // Wait for onMounted to set codSubprocesso\n        await (wrapper.vm as any).$nextTick();\n\n"
  },
  {
    "file": "frontend/src/views/__tests__/SubprocessoViewCoverage.spec.ts",
    "type": "line",
    "line": 204,
    "length": 1,
    "text": "// Call with empty justification",
    "context": "        await (wrapper.vm as any).$nextTick();\n\n\n        // Call with empty justification\n        (wrapper.vm as any).justificativaReabertura = '';\n        await (wrapper.vm as any).confirmarReabertura();\n"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 16,
    "length": 1,
    "text": "// Mocks",
    "context": "import {getCommonMountOptions, setupComponentTest} from \"@/test-utils/componentTestHelpers\";\nimport {logger} from \"@/utils\";\n\n// Mocks\nconst {mockPush, mockUnidadeData, mockUsuario, mockUsuarioResponsavel} = vi.hoisted(() => {\n    const u = {\n        codigo: 10,"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 230,
    "length": 1,
    "text": "// Mock obterAtribuicoesPorUnidade para retornar a atribui√ß√£o",
    "context": "            }\n        });\n\n        // Mock obterAtribuicoesPorUnidade para retornar a atribui√ß√£o\n        vi.spyOn(atribuicaoStore, 'obterAtribuicoesPorUnidade').mockReturnValue([mockAtribuicao]);\n\n        // Force re-computation"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 233,
    "length": 1,
    "text": "// Force re-computation",
    "context": "        // Mock obterAtribuicoesPorUnidade para retornar a atribui√ß√£o\n        vi.spyOn(atribuicaoStore, 'obterAtribuicoesPorUnidade').mockReturnValue([mockAtribuicao]);\n\n        // Force re-computation\n        await wrapper.vm.$nextTick();\n        await flushPromises();\n"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 287,
    "length": 1,
    "text": "// Since createTestingPinia is used, we can directly modify state or use patch",
    "context": "\n    it('displays error alert when unidadesStore has error', async () => {\n        const {wrapper, unidadesStore} = createWrapper();\n        // Since createTestingPinia is used, we can directly modify state or use patch\n        unidadesStore.lastError = {message: 'Erro ao carregar unidade'};\n        await wrapper.vm.$nextTick();\n"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 295,
    "length": 1,
    "text": "// Test dismiss",
    "context": "        expect(alert.exists()).toBe(true);\n        expect(alert.props('error')).toEqual({message: 'Erro ao carregar unidade'});\n\n        // Test dismiss\n        vi.spyOn(unidadesStore, 'clearError');\n        await alert.vm.$emit('dismiss');\n        expect(unidadesStore.clearError).toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 315,
    "length": 1,
    "text": "// Setup mock user with contact info",
    "context": "    });\n\n    it('renders clickable contact links for titular', async () => {\n        // Setup mock user with contact info\n        const mockUserWithContact = {\n            ...mockUsuario,\n            ramal: '1234',"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 332,
    "length": 1,
    "text": "// Check Ramal Link",
    "context": "        await wrapper.vm.$nextTick();\n        await flushPromises();\n\n        // Check Ramal Link\n        const ramalLink = wrapper.find('a[href=\"tel:1234\"]');\n        expect(ramalLink.exists()).toBe(true);\n        expect(ramalLink.text()).toBe('1234');"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 338,
    "length": 1,
    "text": "// Check Email Link",
    "context": "        expect(ramalLink.text()).toBe('1234');\n        expect(ramalLink.attributes('aria-label')).toBe('Ligar para 1234');\n\n        // Check Email Link\n        const emailLink = wrapper.find('a[href=\"mailto:test@example.com\"]');\n        expect(emailLink.exists()).toBe(true);\n        expect(emailLink.text()).toBe('test@example.com');"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 389,
    "length": 1,
    "text": "// Access computed property explicitly to ensure coverage",
    "context": "\n        expect(unidadesStore.unidade.filhas).toHaveLength(0);\n\n        // Access computed property explicitly to ensure coverage\n        expect((wrapper.vm as any).dadosFormatadosSubordinadas).toEqual([]);\n\n        // Should check that TreeTable is not rendered or data is empty"
  },
  {
    "file": "frontend/src/views/__tests__/UnidadeView.spec.ts",
    "type": "line",
    "line": 392,
    "length": 1,
    "text": "// Should check that TreeTable is not rendered or data is empty",
    "context": "        // Access computed property explicitly to ensure coverage\n        expect((wrapper.vm as any).dadosFormatadosSubordinadas).toEqual([]);\n\n        // Should check that TreeTable is not rendered or data is empty\n        const treeTable = wrapper.findComponent(TreeTableStub);\n        expect(treeTable.exists()).toBe(false);\n    });"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividades.spec.ts",
    "type": "line",
    "line": 12,
    "length": 1,
    "text": "// Hoist mocks",
    "context": "import {obterDetalhesProcesso} from \"@/services/processoService\";\nimport * as useAcessoModule from '@/composables/useAcesso';\n\n// Hoist mocks\nconst {mockApiClient} = vi.hoisted(() => {\n    const client = {\n        get: vi.fn().mockResolvedValue({data: {}}),"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividades.spec.ts",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Components stubs",
    "context": "    devolverRevisaoCadastro: vi.fn(),\n}));\n\n// Components stubs\nconst BModalStub = {\n    template: '<div><slot></slot><slot name=\"footer\"></slot></div>',\n    props: ['modelValue', 'title'],"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividades.spec.ts",
    "type": "line",
    "line": 199,
    "length": 1,
    "text": "// Mock throwing error",
    "context": "\n        const subprocessosStore = useSubprocessosStore();\n\n        // Mock throwing error\n        vi.spyOn(subprocessosStore, \"homologarRevisaoCadastro\").mockRejectedValue(new Error(\"Erro simulado\"));\n\n        // Force open validation modal state"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividades.spec.ts",
    "type": "line",
    "line": 202,
    "length": 1,
    "text": "// Force open validation modal state",
    "context": "        // Mock throwing error\n        vi.spyOn(subprocessosStore, \"homologarRevisaoCadastro\").mockRejectedValue(new Error(\"Erro simulado\"));\n\n        // Force open validation modal state\n        (wrapper.vm as any).mostrarModalValidar = true;\n\n        // Trigger validation"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividades.spec.ts",
    "type": "line",
    "line": 205,
    "length": 1,
    "text": "// Trigger validation",
    "context": "        // Force open validation modal state\n        (wrapper.vm as any).mostrarModalValidar = true;\n\n        // Trigger validation\n        try {\n            await (wrapper.vm as any).confirmarValidacao();\n        } catch {"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividades.spec.ts",
    "type": "line",
    "line": 257,
    "length": 1,
    "text": "// Erro esperado",
    "context": "        try {\n            await (wrapper.vm as any).confirmarDevolucao();\n        } catch {\n            // Erro esperado\n        }\n\n        expect(subprocessosStore.devolverRevisaoCadastro).toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 12,
    "length": 1,
    "text": "// Hoist mocks",
    "context": "import {obterDetalhesProcesso} from \"@/services/processoService\";\nimport * as useAcessoModule from '@/composables/useAcesso';\n\n// Hoist mocks\nconst {mockApiClient} = vi.hoisted(() => {\n    const client = {\n        get: vi.fn().mockResolvedValue({data: {}}),"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 56,
    "length": 1,
    "text": "// Components stubs",
    "context": "    devolverRevisaoCadastro: vi.fn(),\n}));\n\n// Components stubs\nconst BModalStub = {\n    template: '<div><slot></slot><slot name=\"footer\"></slot></div>',\n    props: ['modelValue', 'title'],"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 199,
    "length": 1,
    "text": "// Mock throwing error",
    "context": "\n        const subprocessosStore = useSubprocessosStore();\n\n        // Mock throwing error\n        vi.spyOn(subprocessosStore, \"homologarRevisaoCadastro\").mockRejectedValue(new Error(\"Erro simulado\"));\n\n        // Force open validation modal state"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 202,
    "length": 1,
    "text": "// Force open validation modal state",
    "context": "        // Mock throwing error\n        vi.spyOn(subprocessosStore, \"homologarRevisaoCadastro\").mockRejectedValue(new Error(\"Erro simulado\"));\n\n        // Force open validation modal state\n        (wrapper.vm as any).mostrarModalValidar = true;\n\n        // Trigger validation"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 205,
    "length": 1,
    "text": "// Trigger validation",
    "context": "        // Force open validation modal state\n        (wrapper.vm as any).mostrarModalValidar = true;\n\n        // Trigger validation\n        try {\n            await (wrapper.vm as any).confirmarValidacao();\n        } catch {"
  },
  {
    "file": "frontend/src/views/__tests__/VisAtividadesCoverage.spec.ts",
    "type": "line",
    "line": 257,
    "length": 1,
    "text": "// Erro esperado",
    "context": "        try {\n            await (wrapper.vm as any).confirmarDevolucao();\n        } catch {\n            // Erro esperado\n        }\n\n        expect(subprocessosStore.devolverRevisaoCadastro).toHaveBeenCalled();"
  },
  {
    "file": "frontend/src/views/__tests__/VisMapa.spec.ts",
    "type": "line",
    "line": 14,
    "length": 1,
    "text": "// Mocks for services",
    "context": "import {setupComponentTest} from \"@/test-utils/componentTestHelpers\";\nimport * as useAcessoModule from '@/composables/useAcesso';\n\n// Mocks for services\nvi.mock(\"@/services/unidadeService\", () => ({\n    buscarUnidadePorSigla: vi.fn().mockResolvedValue({sigla: 'TEST', nome: 'Unidade'}),\n}));"
  },
  {
    "file": "frontend/src/views/__tests__/VisMapa.spec.ts",
    "type": "line",
    "line": 427,
    "length": 1,
    "text": "// Para GESTOR, o bot√£o √© btn-mapa-historico-gestor",
    "context": "        await wrapper.vm.$nextTick();\n        await flushPromises();\n\n        // Para GESTOR, o bot√£o √© btn-mapa-historico-gestor\n        const btn = wrapper.find('[data-testid=\"btn-mapa-historico-gestor\"]');\n        expect(btn.exists()).toBe(true);\n"
  },
  {
    "file": "frontend/src/views/__tests__/VisMapa.spec.ts",
    "type": "line",
    "line": 431,
    "length": 1,
    "text": "// Verificar que o modal pode ser aberto (teste b√°sico)",
    "context": "        const btn = wrapper.find('[data-testid=\"btn-mapa-historico-gestor\"]');\n        expect(btn.exists()).toBe(true);\n\n        // Verificar que o modal pode ser aberto (teste b√°sico)\n        await btn.trigger(\"click\");\n        await flushPromises();\n"
  },
  {
    "file": "frontend/src/views/__tests__/VisMapa.spec.ts",
    "type": "line",
    "line": 435,
    "length": 1,
    "text": "// O modal abre mesmo sem an√°lises (mostra mensagem \"Nenhuma an√°lise\")",
    "context": "        await btn.trigger(\"click\");\n        await flushPromises();\n\n        // O modal abre mesmo sem an√°lises (mostra mensagem \"Nenhuma an√°lise\")\n        expect(wrapper.vm.mostrarModalHistorico).toBe(true);\n    });\n"
  },
  {
    "file": "frontend/vitest.config.ts",
    "type": "block",
    "line": 12,
    "length": 2,
    "text": "/*.{test,spec}.{js,ts}\"],\n        exclude: [\"node_modules\", \"dist\", \"**/",
    "context": "        reporters: \"dot\",\n        environment: \"jsdom\",\n        testTimeout: 15000,\n        include: [\"src/**/*.{test,spec}.{js,ts}\"],\n        exclude: [\"node_modules\", \"dist\", \"**/*.d.ts\", \"src/main.ts\", \"**/*.config.*\", \"src/visual-capture/capture.test.ts\"],\n        setupFiles: [\"./vitest.setup.ts\"],\n        coverage: {\n            provider: \"v8\","
  },
  {
    "file": "frontend/vitest.config.ts",
    "type": "block",
    "line": 13,
    "length": 7,
    "text": "/*.config.*\", \"src/visual-capture/capture.test.ts\"],\n        setupFiles: [\"./vitest.setup.ts\"],\n        coverage: {\n            provider: \"v8\",\n            reporter: [\"json\", \"text\", \"html\", \"lcov\"],\n            reportsDirectory: \"./coverage\",\n            include: [\"src/**/",
    "context": "        environment: \"jsdom\",\n        testTimeout: 15000,\n        include: [\"src/**/*.{test,spec}.{js,ts}\"],\n        exclude: [\"node_modules\", \"dist\", \"**/*.d.ts\", \"src/main.ts\", \"**/*.config.*\", \"src/visual-capture/capture.test.ts\"],\n        setupFiles: [\"./vitest.setup.ts\"],\n        coverage: {\n            provider: \"v8\",\n            reporter: [\"json\", \"text\", \"html\", \"lcov\"],\n            reportsDirectory: \"./coverage\",\n            include: [\"src/**/*.{js,ts,vue}\"],\n            exclude: [\n                \"node_modules\",\n                \"dist\","
  },
  {
    "file": "frontend/vitest.config.ts",
    "type": "block",
    "line": 23,
    "length": 3,
    "text": "/*.d.ts\",\n                \"src/main.ts\",\n                \"**/",
    "context": "            exclude: [\n                \"node_modules\",\n                \"dist\",\n                \"**/*.d.ts\",\n                \"src/main.ts\",\n                \"**/*.config.*\",\n                \"src/constants/**\",\n                \"src/types/**\",\n                \"src/test-utils/**\","
  },
  {
    "file": "frontend/vitest.setup.ts",
    "type": "line",
    "line": 5,
    "length": 1,
    "text": "// Mock HTMLCanvasElement.prototype.getContext",
    "context": "import {createBootstrap} from \"bootstrap-vue-next\";\nimport {vi} from \"vitest\";\n\n// Mock HTMLCanvasElement.prototype.getContext\nHTMLCanvasElement.prototype.getContext = vi.fn();\n\n"
  },
  {
    "file": "frontend/vitest.setup.ts",
    "type": "line",
    "line": 24,
    "length": 1,
    "text": "// Mock dispose method",
    "context": "vi.mock(\"bootstrap\", () => ({\n    Tooltip: class Tooltip {\n        dispose() {\n            // Mock dispose method\n        }\n    },\n"
  },
  {
    "file": "frontend/vitest.setup.ts",
    "type": "line",
    "line": 49,
    "length": 1,
    "text": "// Mock localStorage",
    "context": "\nconfig.global.plugins.push(createBootstrap());\n\n// Mock localStorage\nconst localStorageMock = (function () {\n    let store: { [key: string]: string } = {};\n    return {"
  },
  {
    "file": "frontend/vitest.setup.ts",
    "type": "line",
    "line": 73,
    "length": 1,
    "text": "// Mock window.location",
    "context": "});\n\n\n// Mock window.location\nconst locationMock = {\n    href: \"http://localhost/\",\n    assign: vi.fn(),"
  },
  {
    "file": "playwright.config.ts",
    "type": "line",
    "line": 1,
    "length": 1,
    "text": "// noinspection JSUnusedGlobalSymbols",
    "context": "// noinspection JSUnusedGlobalSymbols\n\nimport {defineConfig, devices} from '@playwright/test';\n"
  }
]
